/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.1.6 (2020-01-28)
 */
!(function(v) {
    function Z() {}
    function i(e, o) {
        return function() {
            for (var n = [], t = 0; t < arguments.length; t++)
                n[t] = arguments[t];
            return e(o.apply(null, n));
        };
    }
    function l(n) {
        return n;
    }
    const nn = function(n) {
        return function() {
            return n;
        };
    };
    function d(o) {
        for (var r = [], n = 1; n < arguments.length; n++)
            r[n - 1] = arguments[n];
        return function() {
            for (var n = [], t = 0; t < arguments.length; t++)
                n[t] = arguments[t];
            const e = r.concat(n);
            return o.apply(null, e);
        };
    }
    function b(e) {
        return function() {
            for (var n = [], t = 0; t < arguments.length; t++)
                n[t] = arguments[t];
            return !e.apply(null, n);
        };
    }
    function r(n) {
        return function() {
            throw new Error(n);
        };
    }
    let u = nn(!1);
    var a = nn(!0);
    let n = tinymce.util.Tools.resolve('tinymce.ThemeManager');
    var N = function() {
        return (N =
            Object.assign ||
            function(n) {
                for (var t, e = 1, o = arguments.length; e < o; e++)
                    for (const r in (t = arguments[e]))
                        Object.prototype.hasOwnProperty.call(t, r) &&
                            (n[r] = t[r]);
                return n;
            }).apply(this, arguments);
    };
    function c(n, t) {
        const e = {};
        for (var o in n)
            Object.prototype.hasOwnProperty.call(n, o) &&
                t.indexOf(o) < 0 &&
                (e[o] = n[o]);
        if (n != null && typeof Object.getOwnPropertySymbols === 'function') {
            let r = 0;
            for (o = Object.getOwnPropertySymbols(n); r < o.length; r++)
                t.indexOf(o[r]) < 0 &&
                    Object.prototype.propertyIsEnumerable.call(n, o[r]) &&
                    (e[o[r]] = n[o[r]]);
        }
        return e;
    }
    function g() {
        for (var n = 0, t = 0, e = arguments.length; t < e; t++)
            n += arguments[t].length;
        const o = Array(n);
        var r = 0;
        for (t = 0; t < e; t++)
            for (let i = arguments[t], u = 0, a = i.length; u < a; u++, r++)
                o[r] = i[u];
        return o;
    }
    function t() {
        return s;
    }
    let e;
    var s =
        ((e = {
            fold(n, t) {
                return n();
            },
            is: u,
            isSome: u,
            isNone: a,
            getOr: m,
            getOrThunk: f,
            getOrDie(n) {
                throw new Error(n || 'error: getOrDie called on none.');
            },
            getOrNull: nn(null),
            getOrUndefined: nn(undefined),
            or: m,
            orThunk: f,
            map: t,
            each: Z,
            bind: t,
            exists: u,
            forall: a,
            filter: t,
            equals: o,
            equals_: o,
            toArray() {
                return [];
            },
            toString: nn('none()'),
        }),
        Object.freeze && Object.freeze(e),
        e);
    function o(n) {
        return n.isNone();
    }
    function f(n) {
        return n();
    }
    function m(n) {
        return n;
    }
    function p(t) {
        return function(n) {
            return (
                (function(n) {
                    if (n === null) return 'null';
                    const t = typeof n;
                    return t == 'object' &&
                        (Array.prototype.isPrototypeOf(n) ||
                            (n.constructor && n.constructor.name === 'Array'))
                        ? 'array'
                        : t == 'object' &&
                          (String.prototype.isPrototypeOf(n) ||
                              (n.constructor &&
                                  n.constructor.name === 'String'))
                        ? 'string'
                        : t;
                })(n) === t
            );
        };
    }
    function h(n, t) {
        if (fn(n)) {
            for (let e = 0, o = n.length; e < o; ++e)
                if (!0 !== t(n[e])) return !1;
            return !0;
        }
        return !1;
    }
    function y(n, t) {
        return pn.call(n, t);
    }
    function x(n, t) {
        for (let e = 0, o = n.length; e < o; e++) {
            if (t(n[e], e)) return !0;
        }
        return !1;
    }
    function w(n, t) {
        for (var e = [], o = 0; o < n.length; o += t) {
            const r = gn.call(n, o, o + t);
            e.push(r);
        }
        return e;
    }
    function S(n, t) {
        for (var e = n.length, o = new Array(e), r = 0; r < e; r++) {
            const i = n[r];
            o[r] = t(i, r);
        }
        return o;
    }
    function C(n, t) {
        for (var e = [], o = 0, r = n.length; o < r; o++) {
            const i = n[o];
            t(i, o) && e.push(i);
        }
        return e;
    }
    function k(n, t, e) {
        return (
            (function(n, t) {
                for (let e = n.length - 1; e >= 0; e--) {
                    t(n[e], e);
                }
            })(n, function(n) {
                e = t(e, n);
            }),
            e
        );
    }
    function O(n, t, e) {
        return (
            bn(n, function(n) {
                e = t(e, n);
            }),
            e
        );
    }
    function E(n, t) {
        for (let e = 0, o = n.length; e < o; e++) {
            const r = n[e];
            if (t(r, e)) return on.some(r);
        }
        return on.none();
    }
    function T(n, t) {
        for (let e = 0, o = n.length; e < o; e++) {
            if (t(n[e], e)) return on.some(e);
        }
        return on.none();
    }
    function H(n) {
        for (var t = [], e = 0, o = n.length; e < o; ++e) {
            if (!fn(n[e]))
                throw new Error(
                    `Arr.flatten item ${e} was not an array, input: ${n}`,
                );
            hn.apply(t, n[e]);
        }
        return t;
    }
    function B(n, t) {
        const e = S(n, t);
        return H(e);
    }
    function D(n, t) {
        for (let e = 0, o = n.length; e < o; ++e) {
            if (!0 !== t(n[e], e)) return !1;
        }
        return !0;
    }
    function A(n) {
        const t = gn.call(n, 0);
        return t.reverse(), t;
    }
    function _(n, t) {
        return C(n, function(n) {
            return !vn(t, n);
        });
    }
    function M(n) {
        return [n];
    }
    function F(n) {
        return n.length === 0 ? on.none() : on.some(n[n.length - 1]);
    }
    function P(n, e) {
        return kn(n, function(n, t) {
            return { k: t, v: e(n, t) };
        });
    }
    function I(n, t) {
        for (let e = wn(n), o = 0, r = e.length; o < r; o++) {
            const i = e[o];
            var u = n[i];
            if (t(u, i, n)) return on.some(u);
        }
        return on.none();
    }
    function R(n) {
        return On(n, function(n) {
            return n;
        });
    }
    function V(n, t) {
        return En(n, t) ? on.from(n[t]) : on.none();
    }
    function z(u) {
        return function() {
            for (var n = new Array(arguments.length), t = 0; t < n.length; t++)
                n[t] = arguments[t];
            if (n.length === 0) throw new Error("Can't merge zero objects");
            for (var e = {}, o = 0; o < n.length; o++) {
                const r = n[o];
                for (const i in r) Bn.call(r, i) && (e[i] = u(e[i], r[i]));
            }
            return e;
        };
    }
    function L(e) {
        let o;
        let r = !1;
        return function() {
            for (var n = [], t = 0; t < arguments.length; t++)
                n[t] = arguments[t];
            return r || ((r = !0), (o = e.apply(null, n))), o;
        };
    }
    function j(n) {
        return _n.defaultedThunk(nn(n));
    }
    function U(t) {
        return function(n) {
            return En(n, t) ? on.from(n[t]) : on.none();
        };
    }
    function W(n, t) {
        return U(t)(n);
    }
    function G(n, t) {
        const e = {};
        return (e[n] = t), e;
    }
    function X(n, t) {
        return (function(n, e) {
            const o = {};
            return (
                Cn(n, function(n, t) {
                    vn(e, t) || (o[t] = n);
                }),
                o
            );
        })(n, t);
    }
    function Y(n, t) {
        return (function(t, e) {
            return function(n) {
                return En(n, t) ? n[t] : e;
            };
        })(n, t);
    }
    function q(n, t) {
        return G(n, t);
    }
    function K(n) {
        return (function(n) {
            const t = {};
            return (
                bn(n, function(n) {
                    t[n.key] = n.value;
                }),
                t
            );
        })(n);
    }
    function J(n, t) {
        const e = (function(n) {
            const t = [];
            var e = [];
            return (
                bn(n, function(n) {
                    n.fold(
                        function(n) {
                            t.push(n);
                        },
                        function(n) {
                            e.push(n);
                        },
                    );
                }),
                { errors: t, values: e }
            );
        })(n);
        return e.errors.length > 0
            ? (function(n) {
                  return an.error(H(n));
              })(e.errors)
            : (function(n, t) {
                  return n.length === 0
                      ? an.value(t)
                      : an.value(Dn(t, An.apply(undefined, n)));
              })(e.values, t);
    }
    function $(n, t) {
        return (function(n, t) {
            return En(n, t) && n[t] !== undefined && n[t] !== null;
        })(n, t);
    }
    let Q;
    var tn;
    var en = function(e) {
        function n() {
            return r;
        }
        function t(n) {
            return n(e);
        }
        var o = nn(e);
                var r = {
                fold(n, t) {
                        return t(e);
                    },
                is: function(n) {
                    return e === n;
                },
                isSome: a,
                isNone: u,
                getOr: o,
                getOrThunk: o,
                getOrDie: o,
                getOrNull: o,
                getOrUndefined: o,
                or: n,
                orThunk: n,
                map: function(n) {
                    return en(n(e));
                },
                each(n) {
                        n(e);
                    },
                bind: t,
                exists: t,
                forall: t,
                filter: function(n) {
                    return n(e) ? r : s;
                },
                toArray: function() {
                    return [e];
                },
                toString: function() {
                    return `some(${  e  })`;
                },
                equals: function(n) {
                    return n.is(e);
                },
                equals_: function(n, t) {
                    return n.fold(u, function(n) {
                        return t(e, n);
                    });
                },
            };
        return r;
    };
    var on = {
        some: en,
        none: t,
        from(n) {
                return null === n || n === undefined ? s : en(n);
            },
    };
    var rn = function(e) {
        return {
            is: function(n) {
                return e === n;
            },
            isValue: a,
            isError: u,
            getOr: nn(e),
            getOrThunk: nn(e),
            getOrDie: nn(e),
            or: function(n) {
                return rn(e);
            },
            orThunk: function(n) {
                return rn(e);
            },
            fold(n, t) {
                    return t(e);
                },
            map(n) {
                    return rn(n(e));
                },
            mapError(n) {
                    return rn(e);
                },
            each: function(n) {
                n(e);
            },
            bind: function(n) {
                return n(e);
            },
            exists: function(n) {
                return n(e);
            },
            forall: function(n) {
                return n(e);
            },
            toOption: function() {
                return on.some(e);
            },
        };
    };
    var un = function(e) {
        return {
            is: u,
            isValue: u,
            isError: a,
            getOr: l,
            getOrThunk: function(n) {
                return n();
            },
            getOrDie: function() {
                return r(String(e))();
            },
            or: function(n) {
                return n;
            },
            orThunk: function(n) {
                return n();
            },
            fold: function(n, t) {
                return n(e);
            },
            map: function(n) {
                return un(e);
            },
            mapError: function(n) {
                return un(n(e));
            },
            each: Z,
            bind(n) {
                    return un(e);
                },
            exists: u,
            forall: a,
            toOption: on.none,
        };
    };
    var an = {
        value: rn,
        error: un,
        fromOption(n, t) {
                return n.fold(function() {
                    return un(t);
                }, rn);
            },
    };
    let cn = p('string');
    var sn = p('object');
    var fn = p('array');
    var ln = p('boolean');
    var dn = p('function');
    var mn = p('number');
    var gn = Array.prototype.slice;
    var pn = Array.prototype.indexOf;
    var hn = Array.prototype.push;
    var vn = function(n, t) {
        return y(n, t) > -1;
    };
    var bn = function(n, t) {
        for (let e = 0, o = n.length; e < o; e++) {
            t(n[e], e);
        }
    };
    let yn = function(n) {
        return n.length === 0 ? on.none() : on.some(n[0]);
    };
    let xn = dn(Array.from)
        ? Array.from
        : function(n) {
              return gn.call(n);
          };
    var wn = Object.keys;
    var Sn = Object.hasOwnProperty;
    var Cn = function(n, t) {
        for (let e = wn(n), o = 0, r = e.length; o < r; o++) {
            var i = e[o];
            t(n[i], i);
        }
    };
    var kn = function(n, o) {
        var r = {};
        return (
            Cn(n, function(n, t) {
                let e = o(n, t);
                r[e.k] = e.v;
            }),
            r
        );
    };
    var On = function(n, e) {
        var o = [];
        return (
            Cn(n, function(n, t) {
                o.push(e(n, t));
            }),
            o
        );
    };
    var En = function(n, t) {
        return Sn.call(n, t);
    };
    let Tn = function(u) {
        if (!fn(u)) throw new Error('cases must be an array');
        if (0 === u.length) throw new Error('there must be at least one case');
        var a = [];
                var e = {};
        return (
            bn(u, function(n, o) {
                let t = wn(n);
                if (t.length !== 1)
                    throw new Error('one and only one name per case');
                var r = t[0];
                        var i = n[r];
                if (e[r] !== undefined)
                    throw new Error(`duplicate key detected:${  r}`);
                if (r === 'cata')
                    throw new Error('cannot have a case named cata (sorry)');
                if (!fn(i)) throw new Error('case arguments must be an array');
                a.push(r),
                    (e[r] = function() {
                        let n = arguments.length;
                        if (n !== i.length)
                            throw new Error(
                                `Wrong number of arguments to case ${ 
                                        r 
                                        }. Expected ${ 
                                        i.length 
                                        } (${ 
                                        i 
                                        }), got ${ 
                                        n}`,
                            );
                        for (var e = new Array(n), t = 0; t < e.length; t++)
                            e[t] = arguments[t];
                        return {
                            fold: function() {
                                if (arguments.length !== u.length)
                                    throw new Error(
                                        'Wrong number of arguments to fold. Expected ' +
                                            u.length +
                                            ', got ' +
                                            arguments.length,
                                    );
                                return arguments[o].apply(null, e);
                            },
                            match: function(n) {
                                let t = wn(n);
                                if (a.length !== t.length)
                                    throw new Error(
                                        `Wrong number of arguments to match. Expected: ${ 
                                                a.join(',') 
                                                }\nActual: ${ 
                                                t.join(',')}`,
                                    );
                                if (
                                    !D(a, function(n) {
                                        return vn(t, n);
                                    })
                                )
                                    throw new Error(
                                        `Not all branches were specified when using match. Specified: ${ 
                                                t.join(', ') 
                                                }\nRequired: ${ 
                                                a.join(', ')}`,
                                    );
                                return n[r].apply(null, e);
                            },
                            log: function(n) {
                                v.console.log(n, {
                                    constructors: a,
                                    constructor: r,
                                    params: e,
                                });
                            },
                        };
                    });
            }),
            e
        );
    };
    var Bn = Object.prototype.hasOwnProperty;
    var Dn = z(function(n, t) {
        return sn(n) && sn(t) ? Dn(n, t) : t;
    });
    var An = z(function(n, t) {
        return t;
    });
    var _n = Tn([
        { strict: [] },
        { defaultedThunk: ['fallbackThunk'] },
        { asOption: [] },
        { asDefaultedOptionThunk: ['fallbackThunk'] },
        { mergeWithThunk: ['baseThunk'] },
    ]);
    let Mn = _n.strict;
    var Fn = _n.asOption;
    var In = _n.defaultedThunk;
    var Rn = _n.mergeWithThunk;
    var Vn =
        (Tn([
            { bothErrors: ['error1', 'error2'] },
            { firstError: ['error1', 'value2'] },
            { secondError: ['value1', 'error2'] },
            { bothValues: ['value1', 'value2'] },
        ]),
        function(n) {
            return U(n);
        });
    var Nn = function(n, t) {
        return W(n, t);
    };
    ((tn = Q = Q || {})[(tn.Error = 0)] = 'Error'),
        (tn[(tn.Value = 1)] = 'Value');
    function Hn(n, t, e) {
        return n.stype === Q.Error ? t(n.serror) : e(n.svalue);
    }
    function Pn(n) {
        return { stype: Q.Value, svalue: n };
    }
    function zn(n) {
        return { stype: Q.Error, serror: n };
    }
    function Ln(n) {
        return i(qt, H)(n);
    }
    function jn(n) {
        return sn(n) && wn(n).length > 100
            ? ' removed due to size'
            : JSON.stringify(n, null, 2);
    }
    function Un(n, t) {
        return qt([{ path: n, getErrorInfo: t }]);
    }
    function Wn(n, t, e) {
        return W(t, e).fold(function() {
            return (function(n, t, e) {
                return Un(n, function() {
                    return `Could not find valid *strict* value for "${t}" in ${jn(e)}`;
                });
            })(n, e, t);
        }, Xt);
    }
    function Gn(n, t, e) {
        const o = W(n, t).fold(function() {
            return e(n);
        }, l);
        return Xt(o);
    }
    function Xn(u, a, n, c) {
        return n.fold(
            function(o, e, n, r) {
                function i(n) {
                    const t = r.extract(u.concat([o]), c, n);
                    return $t(t, function(n) {
                        return G(e, c(n));
                    });
                }
                function t(n) {
                    return n.fold(
                        function() {
                            const n = G(e, c(on.none()));
                            return Xt(n);
                        },
                        function(n) {
                            const t = r.extract(u.concat([o]), c, n);
                            return $t(t, function(n) {
                                return G(e, c(on.some(n)));
                            });
                        },
                    );
                }
                return n.fold(
                    function() {
                        return Kt(Wn(u, a, o), i);
                    },
                    function(n) {
                        return Kt(Gn(a, o, n), i);
                    },
                    function() {
                        return Kt(
                            (function(n, t) {
                                return Xt(W(n, t));
                            })(a, o),
                            t,
                        );
                    },
                    function(n) {
                        return Kt(
                            (function(t, n, e) {
                                const o = W(t, n).map(function(n) {
                                    return !0 === n ? e(t) : n;
                                });
                                return Xt(o);
                            })(a, o, n),
                            t,
                        );
                    },
                    function(n) {
                        const t = n(a);
                        var e = $t(Gn(a, o, nn({})), function(n) {
                            return Dn(t, n);
                        });
                        return Kt(e, i);
                    },
                );
            },
            function(n, t) {
                const e = t(a);
                return Xt(G(n, c(e)));
            },
        );
    }
    function Yn(o) {
        return {
            extract(t, n, e) {
                return Jt(o(e, n), function(n) {
                    return (function(n, t) {
                        return Un(n, function() {
                            return t;
                        });
                    })(t, n);
                });
            },
            toString() {
                return 'val';
            },
            toDsl() {
                return te.itemOf(o);
            },
        };
    }
    function qn(n) {
        const i = re(n);
        var u = k(
            n,
            function(t, n) {
                return n.fold(function(n) {
                    return Dn(t, q(n, !0));
                }, nn(t));
            },
            {},
        );
        return {
            extract(n, t, e) {
                let o = ln(e)
                        ? []
                        : (function(t) {
                              let n = wn(t);
                              return C(n, function(n) {
                                  return $(t, n);
                              });
                          })(e);
                    var r = C(o, function(n) {
                        return !$(u, n);
                    });
                return r.length === 0
                    ? i.extract(n, t, e)
                    : (function(n, t) {
                          return Un(n, function() {
                              return (
                                  `There are unsupported fields: [${ 
                                  t.join(', ') 
                                  }] specified`
                              );
                          });
                      })(n, r);
            },
            toString: i.toString,
            toDsl: i.toDsl,
        };
    }
    function Kn(r) {
        return {
            extract(e, o, n) {
                let t = S(n, function(n, t) {
                    return r.extract(e.concat([`[${  t  }]`]), o, n);
                });
                return ne(t);
            },
            toString() {
                return `array(${  r.toString()  })`;
            },
            toDsl() {
                return te.arrOf(r);
            },
        };
    }
    function Jn(i, u) {
        return {
            extract(e, o, r) {
                let n = wn(r);
                    var t = (function(n, t) {
                        return Kn(Yn(i)).extract(n, l, t);
                    })(e, n);
                return Kt(t, function(n) {
                    let t = S(n, function(n) {
                        return oe.field(n, n, Mn(), u);
                    });
                    return re(t).extract(e, o, r);
                });
            },
            toString() {
                return `setOf(${  u.toString()  })`;
            },
            toDsl() {
                return te.setOf(i, u);
            },
        };
    }
    function $n(t, e, o, n, r) {
        return Nn(n, r).fold(
            function() {
                return (function(n, t, e) {
                    return Un(n, function() {
                        return `The chosen schema: "${e}" did not exist in branches: ${jn(t)}`;
                    });
                })(t, n, r);
            },
            function(n) {
                return n.extract(t.concat([`branch: ${r}`]), e, o);
            },
        );
    }
    function Qn(n, r) {
        return {
            extract(t, e, o) {
                return Nn(o, n).fold(
                    function() {
                        return (function(n, t) {
                            return Un(n, function() {
                                return (
                                    `Choice schema did not contain choice key: "${ 
                                    t 
                                    }"`
                                );
                            });
                        })(t, n);
                    },
                    function(n) {
                        return $n(t, e, o, r, n);
                    },
                );
            },
            toString() {
                return `chooseOn(${  n  }). Possible values: ${  wn(r)}`;
            },
            toDsl() {
                return te.choiceOf(n, r);
            },
        };
    }
    function Zn(t) {
        return Yn(function(n) {
            return t(n).fold(qt, Xt);
        });
    }
    function nt(t, n) {
        return Jn(function(n) {
            return Wt(t(n));
        }, n);
    }
    function tt(n, t, e) {
        return Gt(
            (function(n, t, e, o) {
                const r = t.extract([n], e, o);
                return Qt(r, function(n) {
                    return { input: o, errors: n };
                });
            })(n, t, l, e),
        );
    }
    function et(n) {
        return n.fold(function(n) {
            throw new Error(le(n));
        }, l);
    }
    function ot(n, t, e) {
        return et(tt(n, t, e));
    }
    function rt(n, t) {
        return Qn(n, t);
    }
    function it(n, t) {
        return Qn(n, P(t, re));
    }
    function ut(e, o) {
        return Yn(function(n) {
            const t = typeof n;
            return e(n) ? Xt(n) : qt(`Expected type: ${o} but got: ${t}`);
        });
    }
    function at(t) {
        return Zn(function(n) {
            return vn(t, n)
                ? an.value(n)
                : an.error(
                      `Unsupported value: "${n}", choose one of "${t.join(
                          ', ',
                      )}".`,
                  );
        });
    }
    function ct(n) {
        return ce(n, n, Mn(), ie());
    }
    function st(n, t) {
        return ce(n, n, Mn(), t);
    }
    function ft(n) {
        return st(n, ge);
    }
    function lt(n, t) {
        return ce(n, n, Mn(), at(t));
    }
    function dt(n) {
        return st(n, he);
    }
    function mt(n, t) {
        return ce(n, n, Mn(), re(t));
    }
    function gt(n, t) {
        return ce(n, n, Mn(), ue(t));
    }
    function pt(n, t) {
        return ce(n, n, Mn(), Kn(t));
    }
    function ht(n) {
        return ce(n, n, Fn(), ie());
    }
    function vt(n, t) {
        return ce(n, n, Fn(), t);
    }
    function bt(n) {
        return vt(n, me);
    }
    function yt(n) {
        return vt(n, ge);
    }
    function xt(n) {
        return vt(n, he);
    }
    function wt(n, t) {
        return vt(n, re(t));
    }
    function St(n, t) {
        return ce(n, n, j(t), ie());
    }
    function Ct(n, t, e) {
        return ce(n, n, j(t), e);
    }
    function kt(n, t) {
        return Ct(n, t, me);
    }
    function Ot(n, t) {
        return Ct(n, t, ge);
    }
    function Et(n, t, e) {
        return Ct(n, t, at(e));
    }
    function Tt(n, t) {
        return Ct(n, t, pe);
    }
    function Bt(n, t) {
        return Ct(n, t, he);
    }
    function Dt(n, t, e) {
        return Ct(n, t, re(e));
    }
    function At(n, t) {
        return ae(n, t);
    }
    function _t(n, t, e) {
        return (n.compareDocumentPosition(t) & e) != 0;
    }
    function Mt(n, t) {
        const e = (function(n, t) {
            for (let e = 0; e < n.length; e++) {
                const o = n[e];
                if (o.test(t)) return o;
            }
            return undefined;
        })(n, t);
        if (!e) return { major: 0, minor: 0 };
        function o(n) {
            return Number(t.replace(e, `$${n}`));
        }
        return ke(o(1), o(2));
    }
    function Ft(n, t) {
        return function() {
            return t === n;
        };
    }
    function It(n, t) {
        return function() {
            return t === n;
        };
    }
    function Rt(n, t) {
        const e = String(t).toLowerCase();
        return E(n, function(n) {
            return n.search(e);
        });
    }
    function Vt(n, t) {
        return n.indexOf(t) !== -1;
    }
    function Nt(t) {
        return function(n) {
            return Vt(n, t);
        };
    }
    function Ht() {
        return je.get();
    }
    function Pt(n, t) {
        const e = n.dom();
        if (e.nodeType !== Xe) return !1;
        const o = e;
        if (o.matches !== undefined) return o.matches(t);
        if (o.msMatchesSelector !== undefined) return o.msMatchesSelector(t);
        if (o.webkitMatchesSelector !== undefined)
            return o.webkitMatchesSelector(t);
        if (o.mozMatchesSelector !== undefined) return o.mozMatchesSelector(t);
        throw new Error('Browser lacks native selectors');
    }
    function zt(n) {
        return (
            (n.nodeType !== Xe && n.nodeType !== Ye) ||
            n.childElementCount === 0
        );
    }
    function Lt(n, t) {
        const e = t === undefined ? v.document : t.dom();
        return zt(e) ? [] : S(e.querySelectorAll(n), we.fromDom);
    }
    function jt(n, t) {
        return n.dom() === t.dom();
    }
    function Ut(n, t) {
        return jt(n.element(), t.event().target());
    }
    var Wt = function(n) {
        return n.fold(zn, Pn);
    };
    var Gt = function(n) {
        return Hn(n, an.error, an.value);
    };
    var Xt = Pn;
    let Yt = function(n) {
        let t = [];
                var e = [];
        return (
            bn(n, function(n) {
                Hn(
                    n,
                    function(n) {
                        return e.push(n);
                    },
                    function(n) {
                        return t.push(n);
                    },
                );
            }),
            { values: t, errors: e }
        );
    };
    var qt = zn;
    var Kt = function(n, t) {
        return n.stype === Q.Value ? t(n.svalue) : n;
    };
    var Jt = function(n, t) {
        return n.stype === Q.Error ? t(n.serror) : n;
    };
    var $t = function(n, t) {
        return n.stype === Q.Value
            ? { stype: Q.Value, svalue: t(n.svalue) }
            : n;
    };
    var Qt = function(n, t) {
        return n.stype === Q.Error
            ? { stype: Q.Error, serror: t(n.serror) }
            : n;
    };
    let Zt = function(n, t) {
        var e = Yt(n);
        return e.errors.length > 0
            ? Ln(e.errors)
            : (function(n, t) {
                  return n.length > 0
                      ? Xt(Dn(t, An.apply(undefined, n)))
                      : Xt(t);
              })(e.values, t);
    };
    var ne = function(n) {
        var t = Yt(n);
        return t.errors.length > 0 ? Ln(t.errors) : Xt(t.values);
    };
    var te = Tn([
        { setOf: ['validator', 'valueType'] },
        { arrOf: ['valueType'] },
        { objOf: ['fields'] },
        { itemOf: ['validator'] },
        { choiceOf: ['key', 'branches'] },
        { thunk: ['description'] },
        { func: ['args', 'outputSchema'] },
    ]);
    let ee = Tn([{ field: ['name', 'presence', 'type'] }, { state: ['name'] }]);
    var oe = Tn([
        { field: ['key', 'okey', 'presence', 'prop'] },
        { state: ['okey', 'instantiator'] },
    ]);
    var re = function(o) {
        return {
            extract: function(n, t, e) {
                return (function(t, e, n, o) {
                    var r = S(n, function(n) {
                        return Xn(t, e, n, o);
                    });
                    return Zt(r, {});
                })(n, e, o, t);
            },
            toString() {
                    return (
                        'obj{\n' +
                        S(o, function(n) {
                            return n.fold(
                                function(n, t, e, o) {
                                    return n + ' -> ' + o.toString();
                                },
                                function(n, t) {
                                    return 'state(' + n + ')';
                                },
                            );
                        }).join('\n') +
                        '}'
                    );
                },
            toDsl() {
                    return te.objOf(
                        S(o, function(n) {
                            return n.fold(
                                function(n, t, e, o) {
                                    return ee.field(n, e, o);
                                },
                                function(n, t) {
                                    return ee.state(n);
                                },
                            );
                        }),
                    );
                },
        };
    };
    var ie = nn(Yn(Xt));
    var ue = i(Kn, re);
    var ae = oe.state;
    var ce = oe.field;
    let se = Yn(Xt);
    var fe = function(o) {
        return {
            extract(n, t, e) {
                    return o().extract(n, t, e);
                },
            toString() {
                    return o().toString();
                },
            toDsl() {
                    return o().toDsl();
                },
        };
    };
    var le = function(n) {
        return (
            'Errors: \n' +
            (function(n) {
                var t =
                    10 < n.length
                        ? n.slice(0, 10).concat([
                              {
                                  path: [],
                                  getErrorInfo() {
                                          return '... (only showing first ten failures)';
                                      },
                              },
                          ])
                        : n;
                return S(t, function(n) {
                    return (
                        'Failed path: (' +
                        n.path.join(' > ') +
                        ')\n' +
                        n.getErrorInfo()
                    );
                });
            })(n.errors) +
            '\n\nInput object: ' +
            jn(n.input)
        );
    };
    var de = nn(se);
    var me = ut(mn, 'number');
    var ge = ut(cn, 'string');
    var pe = ut(ln, 'boolean');
    var he = ut(dn, 'function');
    var ve = function(t) {
        function n(n, t) {
            for (let e = n.next(); !e.done; ) {
                if (!t(e.value)) return !1;
                e = n.next();
            }
            return !0;
        }
        if (Object(t) !== t) return !0;
        switch ({}.toString.call(t).slice(8, -1)) {
            case 'Boolean':
            case 'Number':
            case 'String':
            case 'Date':
            case 'RegExp':
            case 'Blob':
            case 'FileList':
            case 'ImageData':
            case 'ImageBitmap':
            case 'ArrayBuffer':
                return !0;
            case 'Array':
            case 'Object':
                return Object.keys(t).every(function(n) {
                    return ve(t[n]);
                });
            case 'Map':
                return n(t.keys(), ve) && n(t.values(), ve);
            case 'Set':
                return n(t.keys(), ve);
            default:
                return !1;
        }
    };
    let be = Yn(function(n) {
        return ve(n)
            ? Xt(n)
            : qt('Expected value to be acceptable for sending via postMessage');
    });
    var ye = function(n) {
        function t() {
            return e;
        }
        var e = n;
        return {
            get: t,
            set(n) {
                    e = n;
                },
            clone() {
                    return ye(t());
                },
        };
    };
    var xe = function(n) {
        if (n === null || n === undefined)
            throw new Error('Node cannot be null or undefined');
        return { dom: nn(n) };
    };
    var we = {
        fromHtml(n, t) {
                var e = (t || v.document).createElement('div');
                if (
                    ((e.innerHTML = n),
                    !e.hasChildNodes() || 1 < e.childNodes.length)
                )
                    throw (v.console.error(
                        'HTML does not have a single root node',
                        n,
                    ),
                    new Error('HTML must have a single root node'));
                return xe(e.childNodes[0]);
            },
        fromTag(n, t) {
                var e = (t || v.document).createElement(n);
                return xe(e);
            },
        fromText: function(n, t) {
            let e = (t || v.document).createTextNode(n);
            return xe(e);
        },
        fromDom: xe,
        fromPoint(n, t, e) {
                var o = n.dom();
                return on.from(o.elementFromPoint(t, e)).map(xe);
            },
    };
    let Se = function(n, t) {
        return _t(n, t, v.Node.DOCUMENT_POSITION_CONTAINED_BY);
    };
    let Ce = function() {
        return ke(0, 0);
    };
    var ke = function(n, t) {
        return { major: n, minor: t };
    };
    let Oe = {
        nu: ke,
        detect: function(n, t) {
            let e = String(t).toLowerCase();
            return n.length === 0 ? Ce() : Mt(n, e);
        },
        unknown: Ce,
    };
    let Ee = 'Firefox';
    let Te = function(n) {
        var t = n.current;
        return {
            current: t,
            version: n.version,
            isEdge: Ft('Edge', t),
            isChrome: Ft('Chrome', t),
            isIE: Ft('IE', t),
            isOpera: Ft('Opera', t),
            isFirefox: Ft(Ee, t),
            isSafari: Ft('Safari', t),
        };
    };
    let Be = {
        unknown() {
                return Te({ current: undefined, version: Oe.unknown() });
            },
        nu: Te,
        edge: nn('Edge'),
        chrome: nn('Chrome'),
        ie: nn('IE'),
        opera: nn('Opera'),
        firefox: nn(Ee),
        safari: nn('Safari'),
    };
    let De = 'Windows';
    var Ae = 'Android';
    var _e = 'Solaris';
    var Me = 'FreeBSD';
    var Fe = 'ChromeOS';
    let Ie = function(n) {
        var t = n.current;
        return {
            current: t,
            version: n.version,
            isWindows: It(De, t),
            isiOS: It('iOS', t),
            isAndroid: It(Ae, t),
            isOSX: It('OSX', t),
            isLinux: It('Linux', t),
            isSolaris: It(_e, t),
            isFreeBSD: It(Me, t),
            isChromeOS: It(Fe, t),
        };
    };
    let Re = {
        unknown: function() {
            return Ie({ current: undefined, version: Oe.unknown() });
        },
        nu: Ie,
        windows: nn(De),
        ios: nn('iOS'),
        android: nn(Ae),
        linux: nn('Linux'),
        osx: nn('OSX'),
        solaris: nn(_e),
        freebsd: nn(Me),
        chromeos: nn(Fe),
    };
    let Ve = function(n, e) {
        return Rt(n, e).map(function(n) {
            var t = Oe.detect(n.versionRegexes, e);
            return { current: n.name, version: t };
        });
    };
    var Ne = function(n, e) {
        return Rt(n, e).map(function(n) {
            var t = Oe.detect(n.versionRegexes, e);
            return { current: n.name, version: t };
        });
    };
    let He = /.*?version\/\ ?([0-9]+)\.([0-9]+).*/;
    let Pe = [
        {
            name: 'Edge',
            versionRegexes: [/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],
            search: function(n) {
                return (
                    Vt(n, 'edge/') &&
                    Vt(n, 'chrome') &&
                    Vt(n, 'safari') &&
                    Vt(n, 'applewebkit')
                );
            },
        },
        {
            name: 'Chrome',
            versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/, He],
            search(n) {
                    return Vt(n, 'chrome') && !Vt(n, 'chromeframe');
                },
        },
        {
            name: 'IE',
            versionRegexes: [
                /.*?msie\ ?([0-9]+)\.([0-9]+).*/,
                /.*?rv:([0-9]+)\.([0-9]+).*/,
            ],
            search(n) {
                    return Vt(n, 'msie') || Vt(n, 'trident');
                },
        },
        {
            name: 'Opera',
            versionRegexes: [He, /.*?opera\/([0-9]+)\.([0-9]+).*/],
            search: Nt('opera'),
        },
        {
            name: 'Firefox',
            versionRegexes: [/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],
            search: Nt('firefox'),
        },
        {
            name: 'Safari',
            versionRegexes: [He, /.*?cpu os ([0-9]+)_([0-9]+).*/],
            search: function(n) {
                return (
                    (Vt(n, 'safari') || Vt(n, 'mobile/')) &&
                    Vt(n, 'applewebkit')
                );
            },
        },
    ];
    let ze = [
        {
            name: 'Windows',
            search: Nt('win'),
            versionRegexes: [/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/],
        },
        {
            name: 'iOS',
            search(n) {
                    return Vt(n, 'iphone') || Vt(n, 'ipad');
                },
            versionRegexes: [
                /.*?version\/\ ?([0-9]+)\.([0-9]+).*/,
                /.*cpu os ([0-9]+)_([0-9]+).*/,
                /.*cpu iphone os ([0-9]+)_([0-9]+).*/,
            ],
        },
        {
            name: 'Android',
            search: Nt('android'),
            versionRegexes: [/.*?android\ ?([0-9]+)\.([0-9]+).*/],
        },
        {
            name: 'OSX',
            search: Nt('mac os x'),
            versionRegexes: [/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/],
        },
        { name: 'Linux', search: Nt('linux'), versionRegexes: [] },
        { name: 'Solaris', search: Nt('sunos'), versionRegexes: [] },
        { name: 'FreeBSD', search: Nt('freebsd'), versionRegexes: [] },
        {
            name: 'ChromeOS',
            search: Nt('cros'),
            versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/],
        },
    ];
    var Le = { browsers: nn(Pe), oses: nn(ze) };
    var je = ye(
        (function(n, t) {
            var e = Le.browsers();
                    var o = Le.oses();
                    var r = Ve(e, n).fold(Be.unknown, Be.nu);
                    var i = Ne(o, n).fold(Re.unknown, Re.nu);
            return {
                browser: r,
                os: i,
                deviceType: (function(n, t, e, o) {
                    let r = n.isiOS() && !0 === /ipad/i.test(e);
                            var i = n.isiOS() && !r;
                            var u = n.isiOS() || n.isAndroid();
                            var a = u || o('(pointer:coarse)');
                            var c = r || (!i && u && o('(min-device-width:768px)'));
                            var s = i || (u && !c);
                            var f =
                                t.isSafari() &&
                                n.isiOS() &&
                                !1 === /safari/i.test(e);
                            var l = !s && !c && !f;
                    return {
                        isiPad: nn(r),
                        isiPhone: nn(i),
                        isTablet: nn(c),
                        isPhone: nn(s),
                        isTouch: nn(a),
                        isAndroid: n.isAndroid,
                        isiOS: n.isiOS,
                        isWebView: nn(f),
                        isDesktop: nn(l),
                    };
                })(i, r, n, t),
            };
        })(v.navigator.userAgent, function(n) {
            return v.window.matchMedia(n).matches;
        }),
    );
    var Ue =
        (v.Node.ATTRIBUTE_NODE,
        v.Node.CDATA_SECTION_NODE,
        v.Node.COMMENT_NODE,
        v.Node.DOCUMENT_NODE);
    var We =
        (v.Node.DOCUMENT_TYPE_NODE,
        v.Node.DOCUMENT_FRAGMENT_NODE,
        v.Node.ELEMENT_NODE);
    let Ge = v.Node.TEXT_NODE;
    var Xe =
        (v.Node.PROCESSING_INSTRUCTION_NODE,
        v.Node.ENTITY_REFERENCE_NODE,
        v.Node.ENTITY_NODE,
        v.Node.NOTATION_NODE,
        We);
    var Ye = Ue;
    var qe = Ht().browser.isIE()
        ? function(n, t) {
              return Se(n.dom(), t.dom());
          }
        : function(n, t) {
              let e = n.dom();
              var o = t.dom();
              return e !== o && e.contains(o);
          };
    function Ke(n, t, e, o, r) {
        return n(e, o) ? on.some(e) : dn(r) && r(e) ? on.none() : t(e, o, r);
    }
    function Je(n) {
        return n.dom().nodeName.toLowerCase();
    }
    function $e(t) {
        return function(n) {
            return (
                (function(n) {
                    return n.dom().nodeType;
                })(n) === t
            );
        };
    }
    typeof v.window !== 'undefined' ? v.window : Function('return this;')();
    function Qe(n) {
        const t = zr(n) ? n.dom().parentNode : n.dom();
        return (
            t !== undefined && t !== null && t.ownerDocument.body.contains(t)
        );
    }
    function Ze(n, t, e) {
        for (let o = n.dom(), r = dn(e) ? e : nn(!1); o.parentNode; ) {
            o = o.parentNode;
            const i = we.fromDom(o);
            if (t(i)) return on.some(i);
            if (r(i)) break;
        }
        return on.none();
    }
    function no(n, t, e) {
        return Ke(
            function(n, t) {
                return t(n);
            },
            Ze,
            n,
            t,
            e,
        );
    }
    function to(n, r) {
        var i = function(n) {
            for (let t = 0; t < n.childNodes.length; t++) {
                const e = we.fromDom(n.childNodes[t]);
                if (r(e)) return on.some(e);
                const o = i(n.childNodes[t]);
                if (o.isSome()) return o;
            }
            return on.none();
        };
        return i(n.dom());
    }
    function eo(n) {
        if (!$(n, 'can') && !$(n, 'abort') && !$(n, 'run'))
            throw new Error(
                `EventHandler defined by: ${JSON.stringify(
                    n,
                    null,
                    2,
                )} does not have can, abort, or run!`,
            );
        return ot(
            'Extracting event.handler',
            qn([St('can', nn(!0)), St('abort', nn(!1)), St('run', Z)]),
            n,
        );
    }
    function oo(e) {
        const n = (function(t, o) {
            return function() {
                for (var e = [], n = 0; n < arguments.length; n++)
                    e[n] = arguments[n];
                return O(
                    t,
                    function(n, t) {
                        return n && o(t).apply(undefined, e);
                    },
                    !0,
                );
            };
        })(e, function(n) {
            return n.can;
        });
        var t = (function(t, o) {
            return function() {
                for (var e = [], n = 0; n < arguments.length; n++)
                    e[n] = arguments[n];
                return O(
                    t,
                    function(n, t) {
                        return n || o(t).apply(undefined, e);
                    },
                    !1,
                );
            };
        })(e, function(n) {
            return n.abort;
        });
        return eo({
            can: n,
            abort: t,
            run() {
                for (var t = [], n = 0; n < arguments.length; n++)
                    t[n] = arguments[n];
                bn(e, function(n) {
                    n.run.apply(undefined, t);
                });
            },
        });
    }
    function ro(n, t) {
        Ii(n, n.element(), t, {});
    }
    function io(n, t, e) {
        Ii(n, n.element(), t, e);
    }
    function uo(n) {
        ro(n, mi());
    }
    function ao(n, t, e) {
        Ii(n, t, e, {});
    }
    function co(n, t, e, o) {
        n.getSystem().triggerEvent(e, t, o.event());
    }
    function so(n) {
        return K(n);
    }
    function fo(n, t) {
        return { key: n, value: eo({ abort: t }) };
    }
    function lo(n) {
        return {
            key: n,
            value: eo({
                run(n, t) {
                    t.event().prevent();
                },
            }),
        };
    }
    function mo(n, t) {
        return { key: n, value: eo({ run: t }) };
    }
    function go(n, e, o) {
        return {
            key: n,
            value: eo({
                run(n, t) {
                    e.apply(undefined, [n, t].concat(o));
                },
            }),
        };
    }
    function po(n) {
        return function(e) {
            return {
                key: n,
                value: eo({
                    run(n, t) {
                        Ut(n, t) && e(n, t);
                    },
                }),
            };
        };
    }
    function ho(n, t, e) {
        return (function(e, o) {
            return mo(e, function(n, t) {
                n.getSystem()
                    .getByUid(o)
                    .each(function(n) {
                        co(n, n.element(), e, t);
                    });
            });
        })(n, t.partUids[e]);
    }
    function vo(n, r) {
        return mo(n, function(t, n) {
            const e = n.event();
            var o = t
                .getSystem()
                .getByDom(e.target())
                .fold(
                    function() {
                        return Ur(
                            e.target(),
                            function(n) {
                                return t
                                    .getSystem()
                                    .getByDom(n)
                                    .toOption();
                            },
                            nn(!1),
                        ).getOr(t);
                    },
                    function(n) {
                        return n;
                    },
                );
            r(t, o, n);
        });
    }
    function bo(n) {
        return mo(n, function(n, t) {
            t.cut();
        });
    }
    function yo(n, t) {
        return po(n)(t);
    }
    function xo() {
        for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
        return function() {
            for (var e = [], n = 0; n < arguments.length; n++)
                e[n] = arguments[n];
            if (t.length !== e.length)
                throw new Error(
                    `Wrong number of arguments to struct. Expected "[${t.length}]", got ${e.length} arguments`,
                );
            const o = {};
            return (
                bn(t, function(n, t) {
                    o[n] = nn(e[t]);
                }),
                o
            );
        };
    }
    function wo(n) {
        return n.slice(0).sort();
    }
    function So(t, n) {
        if (!fn(n))
            throw new Error(`The ${t} fields must be an array. Was: ${n}.`);
        bn(n, function(n) {
            if (!cn(n))
                throw new Error(
                    `The value ${n} in the ${t} fields was not a string.`,
                );
        });
    }
    function Co(r, i) {
        const u = r.concat(i);
        if (u.length === 0)
            throw new Error(
                'You must specify at least one required or optional field.',
            );
        return (
            So('required', r),
            So('optional', i),
            (function(n) {
                const e = wo(n);
                E(e, function(n, t) {
                    return t < e.length - 1 && n === e[t + 1];
                }).each(function(n) {
                    throw new Error(
                        `The field: ${n} occurs more than once in the combined fields: [${e.join(
                            ', ',
                        )}].`,
                    );
                });
            })(u),
            function(t) {
                const e = wn(t);
                D(r, function(n) {
                    return vn(e, n);
                }) ||
                    (function(n, t) {
                        throw new Error(
                            `All required keys (${wo(n).join(
                                ', ',
                            )}) were not specified. Specified keys were: ${wo(
                                t,
                            ).join(', ')}.`,
                        );
                    })(r, e);
                const n = C(e, function(n) {
                    return !vn(u, n);
                });
                n.length > 0 &&
                    (function(n) {
                        throw new Error(
                            `Unsupported keys for object: ${wo(n).join(', ')}`,
                        );
                    })(n);
                const o = {};
                return (
                    bn(r, function(n) {
                        o[n] = nn(t[n]);
                    }),
                    bn(i, function(n) {
                        o[n] = nn(
                            Object.prototype.hasOwnProperty.call(t, n)
                                ? on.some(t[n])
                                : on.none(),
                        );
                    }),
                    o
                );
            }
        );
    }
    function ko(n) {
        return we.fromDom(n.dom().ownerDocument);
    }
    function Oo(n) {
        return we.fromDom(n.dom().ownerDocument.documentElement);
    }
    function Eo(n) {
        return we.fromDom(n.dom().ownerDocument.defaultView);
    }
    function To(n) {
        return on.from(n.dom().parentNode).map(we.fromDom);
    }
    function Bo(n) {
        return on.from(n.dom().offsetParent).map(we.fromDom);
    }
    function Do(n) {
        return S(n.dom().childNodes, we.fromDom);
    }
    function Ao(n, t) {
        const e = n.dom().childNodes;
        return on.from(e[t]).map(we.fromDom);
    }
    function _o(t, e) {
        To(t).each(function(n) {
            n.dom().insertBefore(e.dom(), t.dom());
        });
    }
    function Mo(n, t) {
        (function(n) {
            return on.from(n.dom().nextSibling).map(we.fromDom);
        })(n).fold(
            function() {
                To(n).each(function(n) {
                    Pi(n, t);
                });
            },
            function(n) {
                _o(n, t);
            },
        );
    }
    function Fo(t, e) {
        (function(n) {
            return Ao(n, 0);
        })(t).fold(
            function() {
                Pi(t, e);
            },
            function(n) {
                t.dom().insertBefore(e.dom(), n.dom());
            },
        );
    }
    function Io(t, n) {
        bn(n, function(n) {
            Pi(t, n);
        });
    }
    function Ro(n) {
        (n.dom().textContent = ''),
            bn(Do(n), function(n) {
                zi(n);
            });
    }
    function Vo(n) {
        const t = Do(n);
        t.length > 0 &&
            (function(t, n) {
                bn(n, function(n) {
                    _o(t, n);
                });
            })(n, t),
            zi(n);
    }
    function No(n) {
        return n.dom().innerHTML;
    }
    function Ho(n, t) {
        const e = ko(n).dom();
        var o = we.fromDom(e.createDocumentFragment());
        let r = (function(n, t) {
            let e = (t || v.document).createElement('div');
            return (e.innerHTML = n), Do(we.fromDom(e));
        })(t, e);
        Io(o, r), Ro(n), Pi(n, o);
    }
    function Po(n, t, e) {
        if (!(cn(e) || ln(e) || mn(e)))
            throw (v.console.error(
                'Invalid call to Attr.set. Key ',
                t,
                ':: Value ',
                e,
                ':: Element ',
                n,
            ),
            new Error('Attribute value was not simple'));
        n.setAttribute(t, `${e}`);
    }
    function zo(n, t, e) {
        Po(n.dom(), t, e);
    }
    function Lo(n, t) {
        const e = n.dom().getAttribute(t);
        return e === null ? undefined : e;
    }
    function jo(n, t) {
        const e = n.dom();
        return !(!e || !e.hasAttribute) && e.hasAttribute(t);
    }
    function Uo(n, t) {
        n.dom().removeAttribute(t);
    }
    function Wo(n) {
        return (function(n, t) {
            return we.fromDom(n.dom().cloneNode(t));
        })(n, !1);
    }
    function Go(n) {
        return (function(n) {
            const t = we.fromTag('div');
            var e = we.fromDom(n.dom().cloneNode(!0));
            return Pi(t, e), No(t);
        })(Wo(n));
    }
    function Xo(n) {
        return Go(n);
    }
    function Yo(n) {
        const t = new Date().getTime();
        return `${n}_${Math.floor(1e9 * Math.random())}${++Ui}${String(t)}`;
    }
    function qo(n) {
        return Yo(n);
    }
    function Ko(t) {
        function n(n) {
            return function() {
                throw new Error(
                    `The component must be in a context to send: ${n}\n${Xo(
                        t().element(),
                    )} is not in context.`,
                );
            };
        }
        return {
            debugInfo: nn('fake'),
            triggerEvent: n('triggerEvent'),
            triggerFocus: n('triggerFocus'),
            triggerEscape: n('triggerEscape'),
            build: n('build'),
            addToWorld: n('addToWorld'),
            removeFromWorld: n('removeFromWorld'),
            addToGui: n('addToGui'),
            removeFromGui: n('removeFromGui'),
            getByUid: n('getByUid'),
            getByDom: n('getByDom'),
            broadcast: n('broadcast'),
            broadcastOn: n('broadcastOn'),
            broadcastEvent: n('broadcastEvent'),
            isConnected: nn(!1),
        };
    }
    function Jo(n, t) {
        const e = n.toString();
        var o = e.indexOf(')') + 1;
        let r = e.indexOf('(');
        var i = e.substring(r + 1, o - 1).split(/,\s*/);
        return (
            (n.toFunctionAnnotation = function() {
                return { name: t, parameters: Qi(i) };
            }),
            n
        );
    }
    function $o(n) {
        return q(Zi, n);
    }
    function Qo(o) {
        return (function(n, t) {
            const e = t.toString();
            var o = e.indexOf(')') + 1;
            let r = e.indexOf('(');
            var i = e.substring(r + 1, o - 1).split(/,\s*/);
            return (
                (n.toFunctionAnnotation = function() {
                    return { name: 'OVERRIDE', parameters: Qi(i.slice(1)) };
                }),
                n
            );
        })(function(n) {
            for (var t = [], e = 1; e < arguments.length; e++)
                t[e - 1] = arguments[e];
            return o.apply(undefined, [n.getApis()].concat([n].concat(t)));
        }, o);
    }
    function Zo(n, r) {
        const i = {};
        return (
            Cn(n, function(n, o) {
                Cn(n, function(n, t) {
                    const e = Y(t, [])(i);
                    i[t] = e.concat([r(o, n)]);
                });
            }),
            i
        );
    }
    function nr(n) {
        return {
            classes: n.classes !== undefined ? n.classes : [],
            attributes: n.attributes !== undefined ? n.attributes : {},
            styles: n.styles !== undefined ? n.styles : {},
        };
    }
    function tr(n) {
        return n.cHandler;
    }
    function er(n, t) {
        return { name: nn(n), handler: nn(t) };
    }
    function or(n, t, e) {
        const o = {
            ...e,
            ...(function(n, t) {
                let e = {};
                return (
                    bn(n, function(n) {
                        e[n.name()] = n.handlers(t);
                    }),
                    e
                );
            })(t, n),
        };
        return Zo(o, er);
    }
    function rr(n) {
        const i = (function(n) {
            return dn(n) ? { can: nn(!0), abort: nn(!1), run: n } : n;
        })(n);
        return function(n, t) {
            for (var e = [], o = 2; o < arguments.length; o++)
                e[o - 2] = arguments[o];
            const r = [n, t].concat(e);
            i.abort.apply(undefined, r)
                ? t.stop()
                : i.can.apply(undefined, r) && i.run.apply(undefined, r);
        };
    }
    function ir(n, t, e) {
        const o = t[e];
        return o
            ? (function(u, a, n, c) {
                  const t = n.slice(0);
                  try {
                      const e = t.sort(function(n, t) {
                          const e = n[a]();
                          var o = t[a]();
                          var r = c.indexOf(e);
                          let i = c.indexOf(o);
                          if (r === -1)
                              throw new Error(
                                  `The ordering for ${u} does not have an entry for ${e}.\nOrder specified: ${JSON.stringify(
                                      c,
                                      null,
                                      2,
                                  )}`,
                              );
                          if (i === -1)
                              throw new Error(
                                  `The ordering for ${u} does not have an entry for ${o}.\nOrder specified: ${JSON.stringify(
                                      c,
                                      null,
                                      2,
                                  )}`,
                              );
                          return r < i ? -1 : i < r ? 1 : 0;
                      });
                      return an.value(e);
                  } catch (o) {
                      return an.error([o]);
                  }
              })(`Event: ${e}`, 'name', n, o).map(function(n) {
                  const t = S(n, function(n) {
                      return n.handler();
                  });
                  return oo(t);
              })
            : (function(n, t) {
                  return an.error([
                      `The event (${n}) has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: ${JSON.stringify(
                          S(t, function(n) {
                              return n.name();
                          }),
                          null,
                          2,
                      )}`,
                  ]);
              })(e, n);
    }
    function ur(n) {
        return tt(
            'custom.definition',
            re([
                ce(
                    'dom',
                    'dom',
                    Mn(),
                    re([
                        ct('tag'),
                        St('styles', {}),
                        St('classes', []),
                        St('attributes', {}),
                        ht('value'),
                        ht('innerHtml'),
                    ]),
                ),
                ct('components'),
                ct('uid'),
                St('events', {}),
                St('apis', {}),
                ce(
                    'eventOrder',
                    'eventOrder',
                    (function(n) {
                        return _n.mergeWithThunk(nn(n));
                    })({
                        'alloy.execute': [
                            'disabling',
                            'alloy.base.behaviour',
                            'toggling',
                            'typeaheadevents',
                        ],
                        'alloy.focus': [
                            'alloy.base.behaviour',
                            'focusing',
                            'keying',
                        ],
                        'alloy.system.init': [
                            'alloy.base.behaviour',
                            'disabling',
                            'toggling',
                            'representing',
                        ],
                        input: [
                            'alloy.base.behaviour',
                            'representing',
                            'streaming',
                            'invalidating',
                        ],
                        'alloy.system.detached': [
                            'alloy.base.behaviour',
                            'representing',
                            'item-events',
                            'tooltipping',
                        ],
                        mousedown: [
                            'focusing',
                            'alloy.base.behaviour',
                            'item-type-events',
                        ],
                        touchstart: [
                            'focusing',
                            'alloy.base.behaviour',
                            'item-type-events',
                        ],
                        mouseover: ['item-type-events', 'tooltipping'],
                    }),
                    de(),
                ),
                ht('domModification'),
            ]),
            n,
        );
    }
    function ar(n, t) {
        const e = Lo(n, t);
        return e === undefined || e === '' ? [] : e.split(' ');
    }
    function cr(n) {
        return n.dom().classList !== undefined;
    }
    function sr(n, t) {
        return (function(n, t, e) {
            const o = ar(n, t).concat([e]);
            return zo(n, t, o.join(' ')), !0;
        })(n, 'class', t);
    }
    function fr(n, t) {
        return (function(n, t, e) {
            const o = C(ar(n, t), function(n) {
                return n !== e;
            });
            return o.length > 0 ? zo(n, t, o.join(' ')) : Uo(n, t), !1;
        })(n, 'class', t);
    }
    function lr(n, t) {
        cr(n) ? n.dom().classList.add(t) : sr(n, t);
    }
    function dr(n) {
        (cr(n)
            ? n.dom().classList
            : (function(n) {
                  return ar(n, 'class');
              })(n)
        ).length === 0 && Uo(n, 'class');
    }
    function mr(n, t) {
        cr(n) ? n.dom().classList.remove(t) : fr(n, t), dr(n);
    }
    function gr(n, t) {
        return cr(n) && n.dom().classList.contains(t);
    }
    function pr(t, n) {
        bn(n, function(n) {
            lr(t, n);
        });
    }
    function hr(t, n) {
        bn(n, function(n) {
            mr(t, n);
        });
    }
    function vr(n) {
        return n.style !== undefined && dn(n.style.getPropertyValue);
    }
    function br(n, t, e) {
        if (!cn(e))
            throw (v.console.error(
                'Invalid call to CSS.set. Property ',
                t,
                ':: Value ',
                e,
                ':: Element ',
                n,
            ),
            new Error(`CSS value must be a string: ${e}`));
        vr(n) && n.style.setProperty(t, e);
    }
    function yr(n, t) {
        vr(n) && n.style.removeProperty(t);
    }
    function xr(n, t, e) {
        const o = n.dom();
        br(o, t, e);
    }
    function wr(n, t) {
        const e = n.dom();
        Cn(t, function(n, t) {
            br(e, t, n);
        });
    }
    function Sr(n, t) {
        const e = n.dom();
        var o = v.window.getComputedStyle(e).getPropertyValue(t);
        var r = o !== '' || Qe(n) ? o : ru(e, t);
        return r === null ? undefined : r;
    }
    function Cr(n, t) {
        const e = n.dom();
        let o = ru(e, t);
        return on.from(o).filter(function(n) {
            return n.length > 0;
        });
    }
    function kr(n, t, e) {
        const o = we.fromTag(n);
        return xr(o, t, e), Cr(o, t).isSome();
    }
    function Or(n, t) {
        const e = n.dom();
        yr(e, t),
            jo(n, 'style') &&
                (function(n) {
                    return n.replace(/^\s+|\s+$/g, '');
                })(Lo(n, 'style')) === '' &&
                Uo(n, 'style');
    }
    function Er(n) {
        return n.dom().offsetWidth;
    }
    function Tr(n) {
        return n.dom().value;
    }
    function Br(n, t) {
        if (t === undefined) throw new Error('Value.set was undefined');
        n.dom().value = t;
    }
    function Dr(n) {
        const t = we.fromTag(n.tag);
        !(function(n, t) {
            const e = n.dom();
            Cn(t, function(n, t) {
                Po(e, t, n);
            });
        })(t, n.attributes),
            pr(t, n.classes),
            wr(t, n.styles),
            n.innerHtml.each(function(n) {
                return Ho(t, n);
            });
        const e = n.domChildren;
        return (
            Io(t, e),
            n.value.each(function(n) {
                Br(t, n);
            }),
            n.uid,
            qi(t, n.uid),
            t
        );
    }
    function Ar(n, t) {
        return (function(t, n) {
            const e = S(n, function(n) {
                return wt(n.name(), [ct('config'), St('state', nu)]);
            });
            let o = tt('component.behaviours', re(e), t.behaviours).fold(
                function(n) {
                    throw new Error(
                        `${le(n)}\nComplete spec:\n${JSON.stringify(
                            t,
                            null,
                            2,
                        )}`,
                    );
                },
                function(n) {
                    return n;
                },
            );
            return {
                list: n,
                data: P(o, function(n) {
                    const t = n.map(function(n) {
                        return {
                            config: n.config,
                            state: n.state.init(n.config),
                        };
                    });
                    return function() {
                        return t;
                    };
                }),
            };
        })(n, t);
    }
    function _r(n) {
        const t = (function(n) {
            const t = Y('behaviours', {})(n);
            var e = C(wn(t), function(n) {
                return t[n] !== undefined;
            });
            return S(e, function(n) {
                return t[n].me;
            });
        })(n);
        return Ar(n, t);
    }
    function Mr(n, t, e) {
        const o = (function(n) {
            return N(
                { ...n.dom },
                {
                    uid: n.uid,
                    domChildren: S(n.components, function(n) {
                        return n.element();
                    }),
                },
            );
        })(n);
        let r = (function(n) {
            return n.domModification.fold(function() {
                return nr({});
            }, nr);
        })(n);
        let i = { 'alloy.base.modification': r };
        return (function(n, t) {
            return {...n, attributes: N({ ...n.attributes}, t.attributes),
                styles: N({ ...n.styles}, t.styles),
                classes: n.classes.concat(t.classes),};
        })(
            o,
            t.length > 0
                ? (function(t, n, e, o) {
                      const r = { ...n };
                      bn(e, function(n) {
                          r[n.name()] = n.exhibit(t, o);
                      });
                      function i(n) {
                          return k(
                              n,
                              function(n, t) {
                                  return {...t.modification, ...n};
                              },
                              {},
                          );
                      }
                      const u = Zo(r, function(n, t) {
                          return { name: n, modification: t };
                      });
                      let a = k(
                          u.classes,
                          function(n, t) {
                              return t.modification.concat(n);
                          },
                          [],
                      );
                      let c = i(u.attributes);
                      let s = i(u.styles);
                      return nr({ classes: a, attributes: c, styles: s });
                  })(e, i, t, o)
                : r,
        );
    }
    function Fr(n, t, e) {
        const o = {
            'alloy.base.behaviour': (function(n) {
                return n.events;
            })(n),
        };
        return (function(n, t, e, o) {
            const r = or(n, e, o);
            return ou(r, t);
        })(e, n.eventOrder, t, o).getOrDie();
    }
    function Ir(n) {
        const t = Ji(n);
        var e = t.events;
        var o = c(t, ['events']);
        var r = (function(n) {
            var t = Y('components', [])(n);
            return S(t, au);
        })(o);
        var i = N({ ...o }, { events: N({ ...ji }, e), components: r });
        return an.value(
            (function(e) {
                function n() {
                    return l;
                }
                let o = ye($i);
                var t = et(ur(e));
                var r = _r(e);
                let i = (function(n) {
                    return n.list;
                })(r);
                var u = (function(n) {
                    return n.data;
                })(r);
                var a = Mr(t, i, u);
                var c = Dr(a);
                var s = Fr(t, i, u);
                var f = ye(t.components);
                var l = {
                    getSystem: o.get,
                    config(n) {
                        let t = u;
                        return (dn(t[n.name()])
                            ? t[n.name()]
                            : function() {
                                  throw new Error(
                                      'Could not find ' +
                                          n.name() +
                                          ' in ' +
                                          JSON.stringify(e, null, 2),
                                  );
                              })();
                    },
                    hasConfigured(n) {
                        return dn(u[n.name()]);
                    },
                    spec: nn(e),
                    readState(n) {
                        return u[n]()
                            .map(function(n) {
                                return n.state.readState();
                            })
                            .getOr('not enabled');
                    },
                    getApis() {
                        return t.apis;
                    },
                    connect(n) {
                        o.set(n);
                    },
                    disconnect() {
                        o.set(Ko(n));
                    },
                    element: nn(c),
                    syncComponents() {
                        var n = Do(c);
                                var t = B(n, function(n) {
                                return o
                                    .get()
                                    .getByDom(n)
                                    .fold(
                                        function() {
                                            return [];
                                        },
                                        function(n) {
                                            return [n];
                                        },
                                    );
                            });
                        f.set(t);
                    },
                    components: f.get,
                    events: nn(s),
                };
                return l;
            })(i),
        );
    }
    function Rr(n) {
        const t = we.fromText(n);
        return iu({ element: t });
    }
    let Vr;
    var Nr;
    var Hr;
    var Pr = $e(We);
    var zr = $e(Ge);
    var Lr = L(function() {
        return jr(we.fromDom(v.document));
    });
    var jr = function(n) {
        var t = n.dom().body;
        if (t === null || t === undefined)
            throw new Error('Body is not available yet');
        return we.fromDom(t);
    };
    var Ur = function(n, t, e) {
        return no(
            n,
            function(n) {
                return t(n).isSome();
            },
            e,
        ).bind(t);
    };
    let Wr = nn('touchstart');
    var Gr = nn('touchmove');
    var Xr = nn('touchend');
    var Yr = nn('touchcancel');
    var qr = nn('mousedown');
    var Kr = nn('mousemove');
    var Jr = nn('mouseout');
    let $r = nn('mouseup');
    var Qr = nn('mouseover');
    var Zr = nn('focusin');
    let ni = nn('focusout');
    var ti = nn('keydown');
    var ei = nn('keyup');
    var oi = nn('input');
    var ri = nn('change');
    var ii = nn('click');
    var ui = nn('transitionend');
    var ai = nn('selectstart');
    var ci = { tap: nn('alloy.tap') };
    var si = nn('alloy.focus');
    let fi = nn('alloy.blur.post');
    var li = nn('alloy.paste.post');
    var di = nn('alloy.receive');
    var mi = nn('alloy.execute');
    var gi = nn('alloy.focus.item');
    var pi = ci.tap;
    var hi = nn('alloy.longpress');
    let vi = nn('alloy.sandbox.close');
    var bi = nn('alloy.typeahead.cancel');
    var yi = nn('alloy.system.init');
    let xi = nn('alloy.system.touchmove');
    var wi = nn('alloy.system.touchend');
    var Si = nn('alloy.system.scroll');
    let Ci = nn('alloy.system.resize');
    var ki = nn('alloy.system.attached');
    var Oi = nn('alloy.system.detached');
    var Ei = nn('alloy.system.dismissRequested');
    let Ti = nn('alloy.system.repositionRequested');
    var Bi = nn('alloy.focusmanager.shifted');
    var Di = nn('alloy.slotcontainer.visibility');
    var Ai = nn('alloy.change.tab');
    var _i = nn('alloy.dismiss.tab');
    var Mi = nn('alloy.highlight');
    let Fi = nn('alloy.dehighlight');
    var Ii = function(n, t, e, o) {
        var r = {target: t, ...o};
        n.getSystem().triggerEvent(e, t, P(r, nn));
    };
    var Ri = po(ki());
    let Vi = po(Oi());
    var Ni = po(yi());
    var Hi =
        ((Vr = mi()),
        function(n) {
            return mo(Vr, n);
        });
    var Pi =
        (xo('element', 'offset'),
        function(n, t) {
            n.dom().appendChild(t.dom());
        });
    var zi = function(n) {
        let t = n.dom();
        null !== t.parentNode && t.parentNode.removeChild(t);
    };
    var Li = so([
        ((Nr = si()),
        (Hr = function(n, t) {
            var e = t.event().originator();
                    var o = t.event().target();
            return (
                !(function(n, t, e) {
                    return jt(t, n.element()) && !jt(t, e);
                })(n, e, o) ||
                (v.console.warn(
                    si() +
                        ' did not get interpreted by the desired target. \nOriginator: ' +
                        Xo(e) +
                        '\nTarget: ' +
                        Xo(o) +
                        '\nCheck the ' +
                        si() +
                        ' event handlers',
                ),
                !1)
            );
        }),
        { key: Nr, value: eo({ can: Hr }) }),
    ]);
    var ji = /* */ Object.freeze({ events: Li });
    var Ui = 0;
    var Wi = nn('alloy-id-');
    let Gi = nn('data-alloy-id');
    var Xi = Wi();
    var Yi = Gi();
    var qi = function(n, t) {
        Object.defineProperty(n.dom(), Yi, { value: t, writable: !0 });
    };
    let Ki = function(n) {
        let t = Pr(n) ? n.dom()[Yi] : null;
        return on.from(t);
    };
    var Ji = l;
    var $i = Ko();
    var Qi = function(n) {
        return S(n, function(n) {
            return (function(n, t) {
                return (function(n, t, e) {
                    return (
                        '' === t ||
                        (!(n.length < t.length) &&
                            n.substr(e, e + t.length) === t)
                    );
                })(n, t, n.length - t.length);
            })(n, '/*')
                ? n.substring(0, n.length - '/*'.length)
                : n;
        });
    };
    var Zi = Yo('alloy-premade');
    var nu = {
        init() {
                return tu({
                    readState: function() {
                        return 'No State required';
                    },
                });
            },
    };
    var tu = function(n) {
        return n;
    };
    var eu = function(n, t) {
        return (function(n, t) {
            return { cHandler: n, purpose: nn(t) };
        })(d.apply(undefined, [n.handler].concat(t)), n.purpose());
    };
    var ou = function(n, i) {
        let t = On(n, function(o, r) {
            return (o.length === 1
                ? an.value(o[0].handler())
                : ir(o, i, r)
            ).map(function(n) {
                var t = rr(n);
                        var e =
                        1 < o.length
                            ? C(i[r], function(t) {
                                  return x(o, function(n) {
                                      return n.name() === t;
                                  });
                              }).join(' > ')
                            : o[0].name();
                return q(
                    r,
                    (function(n, t) {
                        return { handler: n, purpose: nn(t) };
                    })(t, e),
                );
            });
        });
        return J(t, {});
    };
    var ru = function(n, t) {
        return vr(n) ? n.style.getPropertyValue(t) : '';
    };
    var iu = function(n) {
        var t = ot('external.component', qn([ct('element'), ht('uid')]), n);
                var e = ye(Ko());
        t.uid.each(function(n) {
            qi(t.element, n);
        });
        var o = {
            getSystem: e.get,
            config: on.none,
            hasConfigured: nn(!1),
            connect: function(n) {
                e.set(n);
            },
            disconnect: function() {
                e.set(
                    Ko(function() {
                        return o;
                    }),
                );
            },
            getApis() {
                    return {};
                },
            element: nn(t.element),
            spec: nn(n),
            readState: nn('No state'),
            syncComponents: Z,
            components: nn([]),
            events: nn({}),
        };
        return $o(o);
    };
    var uu = qo;
    var au = function(t) {
        return (function(n) {
            return Nn(n, Zi);
        })(t).fold(
            function() {
                let n = t.hasOwnProperty('uid') ? t : ({uid: uu(''), ...t});
                return Ir(n).getOrDie();
            },
            function(n) {
                return n;
            },
        );
    };
    let cu = $o;
    function su(o, r) {
        function n(n) {
            const t = r(n);
            if (t <= 0 || t === null) {
                const e = Sr(n, o);
                return parseFloat(e) || 0;
            }
            return t;
        }
        function i(r, n) {
            return O(
                n,
                function(n, t) {
                    const e = Sr(r, t);
                    let o = e === undefined ? 0 : parseInt(e, 10);
                    return isNaN(o) ? n : n + o;
                },
                0,
            );
        }
        return {
            set(n, t) {
                if (!mn(t) && !t.match(/^[0-9]+$/))
                    throw new Error(
                        `${o 
                            }.set accepts only positive integer values. Value was ${ 
                            t}`,
                    );
                let e = n.dom();
                vr(e) && (e.style[o] = `${t  }px`);
            },
            get: n,
            getOuter: n,
            aggregate: i,
            max(n, t, e) {
                let o = i(n, e);
                return o < t ? t - o : 0;
            },
        };
    }
    function fu(n) {
        return Fu.get(n);
    }
    function lu(n) {
        return Fu.getOuter(n);
    }
    function du(n, t) {
        return n !== undefined ? n : t !== undefined ? t : 0;
    }
    function mu(n) {
        const t = n.dom().ownerDocument;
        var e = t.body;
        let o = t.defaultView;
        var r = t.documentElement;
        if (e === n.dom()) return Ru(e.offsetLeft, e.offsetTop);
        const i = du(o.pageYOffset, r.scrollTop);
        var u = du(o.pageXOffset, r.scrollLeft);
        var a = du(r.clientTop, e.clientTop);
        var c = du(r.clientLeft, e.clientLeft);
        return Vu(n).translate(u - c, i - a);
    }
    function gu(n) {
        return Nu.get(n);
    }
    function pu(n) {
        return Nu.getOuter(n);
    }
    function hu(n) {
        const t = n !== undefined ? n.dom() : v.document;
        var e = t.body.scrollLeft || t.documentElement.scrollLeft;
        let o = t.body.scrollTop || t.documentElement.scrollTop;
        return Ru(e, o);
    }
    function vu(n, t, e, o) {
        return {
            x: nn(n),
            y: nn(t),
            width: nn(e),
            height: nn(o),
            right: nn(n + e),
            bottom: nn(t + o),
        };
    }
    function bu(n) {
        const t = n === undefined ? v.window : n;
        var e = t.document;
        let o = hu(we.fromDom(e));
        let r = t.visualViewport;
        if (r !== undefined)
            return vu(
                Math.max(r.pageLeft, o.left()),
                Math.max(r.pageTop, o.top()),
                r.width,
                r.height,
            );
        const i = e.documentElement;
        var u = i.clientWidth;
        let a = i.clientHeight;
        return vu(o.left(), o.top(), u, a);
    }
    function yu(o) {
        const n = we.fromDom(v.document);
        let r = hu(n);
        return (function(n, t) {
            const e = t.owner(n);
            var o = Hu(t, e);
            return on.some(o);
        })(o, Pu).fold(d(mu, o), function(n) {
            const t = Vu(o);
            var e = k(
                n,
                function(n, t) {
                    let e = Vu(t);
                    return {
                        left: n.left + e.left(),
                        top: n.top + e.top(),
                    };
                },
                { left: 0, top: 0 },
            );
            return Ru(e.left + t.left() + r.left(), e.top + t.top() + r.top());
        });
    }
    function xu(n, t, e, o) {
        return {
            x: nn(n),
            y: nn(t),
            width: nn(e),
            height: nn(o),
            right: nn(n + e),
            bottom: nn(t + o),
        };
    }
    function wu(n) {
        const t = mu(n);
        var e = pu(n);
        let o = lu(n);
        return xu(t.left(), t.top(), e, o);
    }
    function Su(n) {
        const t = yu(n);
        var e = pu(n);
        let o = lu(n);
        return xu(t.left(), t.top(), e, o);
    }
    function Cu() {
        return bu(v.window);
    }
    function ku(n, t, e) {
        return Ze(
            n,
            function(n) {
                return Pt(n, t);
            },
            e,
        );
    }
    function Ou(n, t) {
        return (function(n, t) {
            const e = t === undefined ? v.document : t.dom();
            return zt(e)
                ? on.none()
                : on.from(e.querySelector(n)).map(we.fromDom);
        })(t, n);
    }
    function Eu(n, t, e) {
        return Ke(Pt, ku, n, t, e);
    }
    function Tu() {
        const t = Yo('aria-owns');
        return {
            id: nn(t),
            link(n) {
                zo(n, 'aria-owns', t);
            },
            unlink(n) {
                Uo(n, 'aria-owns');
            },
        };
    }
    function Bu(t, n) {
        return (function(n) {
            return no(n, function(n) {
                if (!Pr(n)) return !1;
                const t = Lo(n, 'id');
                return t !== undefined && t.indexOf('aria-owns') > -1;
            }).bind(function(n) {
                const t = Lo(n, 'id');
                var e = ko(n);
                return Ou(e, `[aria-owns="${t}"]`);
            });
        })(n).exists(function(n) {
            return ju(t, n);
        });
    }
    function Du(n) {
        for (
            var t = [],
                e = function(n) {
                    t.push(n);
                },
                o = 0;
            o < n.length;
            o++
        )
            n[o].each(e);
        return t;
    }
    function Au(n, t) {
        for (let e = 0; e < n.length; e++) {
            const o = t(n[e], e);
            if (o.isSome()) return o;
        }
        return on.none();
    }
    let _u;
    var Mu;
    var Fu = su('height', function(n) {
        var t = n.dom();
        return Qe(n) ? t.getBoundingClientRect().height : t.offsetHeight;
    });
    var Iu = function(e, o) {
        return {
            left: nn(e),
            top: nn(o),
            translate(n, t) {
                    return Iu(e + n, o + t);
                },
        };
    };
    var Ru = Iu;
    var Vu = function(n) {
        var t = n.dom();
                var e = t.ownerDocument.body;
        return e === t
            ? Ru(e.offsetLeft, e.offsetTop)
            : Qe(n)
            ? (function(n) {
                  var t = n.getBoundingClientRect();
                  return Ru(t.left, t.top);
              })(t)
            : Ru(0, 0);
    };
    var Nu = su('width', function(n) {
        return n.dom().offsetWidth;
    });
    var Hu =
        (Ht().browser.isSafari(),
        function(o, n) {
            return o.view(n).fold(nn([]), function(n) {
                var t = o.owner(n);
                        var e = Hu(o, t);
                return [n].concat(e);
            });
        });
    var Pu = /* */ Object.freeze({
        view(n) {
                return (n.dom() === v.document
                    ? on.none()
                    : on.from(n.dom().defaultView.frameElement)
                ).map(we.fromDom);
            },
        owner(n) {
                return ko(n);
            },
    });
    let zu = xo('point', 'width', 'height');
    var Lu = xo('x', 'y', 'width', 'height');
    var ju = function(t, n) {
        return (
            (function(n, t, e) {
                return no(n, t, e).isSome();
            })(
                n,
                function(n) {
                    return jt(n, t.element());
                },
                nn(!1),
            ) || Bu(t, n)
        );
    };
    let Uu = 'unknown';
    ((Mu = _u = _u || {})[(Mu.STOP = 0)] = 'STOP'),
        (Mu[(Mu.NORMAL = 1)] = 'NORMAL'),
        (Mu[(Mu.LOGGING = 2)] = 'LOGGING');
    function Wu(t, n, e) {
        switch (
            Nn(za.get(), t)
                .orThunk(function() {
                    const n = wn(za.get());
                    return Au(n, function(n) {
                        return t.indexOf(n) > -1
                            ? on.some(za.get()[n])
                            : on.none();
                    });
                })
                .getOr(_u.NORMAL)
        ) {
            case _u.NORMAL:
                return e(ja());
            case _u.LOGGING:
                var o = (function(t, e) {
                    let o = [];
                    let r = new Date().getTime();
                    return {
                        logEventCut(n, t, e) {
                            o.push({
                                outcome: 'cut',
                                target: t,
                                purpose: e,
                            });
                        },
                        logEventStopped(n, t, e) {
                            o.push({
                                outcome: 'stopped',
                                target: t,
                                purpose: e,
                            });
                        },
                        logNoParent(n, t, e) {
                            o.push({
                                outcome: 'no-parent',
                                target: t,
                                purpose: e,
                            });
                        },
                        logEventNoHandlers(n, t) {
                            o.push({
                                outcome: 'no-handlers-left',
                                target: t,
                            });
                        },
                        logEventResponse(n, t, e) {
                            o.push({
                                outcome: 'response',
                                purpose: e,
                                target: t,
                            });
                        },
                        write() {
                            let n = new Date().getTime();
                            vn(
                                ['mousemove', 'mouseover', 'mouseout', yi()],
                                t,
                            ) ||
                                v.console.log(t, {
                                    event: t,
                                    time: n - r,
                                    target: e.dom(),
                                    sequence: S(o, function(n) {
                                        return vn(
                                            ['cut', 'stopped', 'response'],
                                            n.outcome,
                                        )
                                            ? `{${ 
                                                      n.purpose 
                                                      }} ${ 
                                                      n.outcome 
                                                      } at (${ 
                                                      Xo(n.target) 
                                                      })`
                                            : n.outcome;
                                    }),
                                });
                        },
                    };
                })(t, n);
                var r = e(o);
                return o.write(), r;
            case _u.STOP:
                return !0;
        }
    }
    function Gu(n, t, e) {
        return Wu(n, t, e);
    }
    function Xu() {
        return mt('markers', [ct('backgroundMenu')].concat(Ua()).concat(Wa()));
    }
    function Yu(n) {
        return mt('markers', S(n, ct));
    }
    function qu(n, t, e) {
        return (
            (function() {
                const n = new Error();
                if (n.stack === undefined) return;
                const t = n.stack.split('\n');
                E(t, function(t) {
                    return (
                        t.indexOf('alloy') > 0 &&
                        !x(La, function(n) {
                            return t.indexOf(n) > -1;
                        })
                    );
                }).getOr(Uu);
            })(),
            ce(
                t,
                t,
                e,
                Zn(function(e) {
                    return an.value(function() {
                        for (var n = [], t = 0; t < arguments.length; t++)
                            n[t] = arguments[t];
                        return e.apply(undefined, n);
                    });
                }),
            )
        );
    }
    function Ku(n) {
        return qu(0, n, j(Z));
    }
    function Ju(n) {
        return qu(0, n, j(on.none));
    }
    function $u(n) {
        return qu(0, n, Mn());
    }
    function Qu(n) {
        return qu(0, n, Mn());
    }
    function Zu(n, t) {
        return At(n, nn(t));
    }
    function na(n) {
        return At(n, l);
    }
    function ta(n) {
        return n.x();
    }
    function ea(n, t) {
        return n.x() + n.width() / 2 - t.width() / 2;
    }
    function oa(n, t) {
        return n.x() + n.width() - t.width();
    }
    function ra(n, t) {
        return n.y() - t.height();
    }
    function ia(n) {
        return n.y() + n.height();
    }
    function ua(n, t) {
        return n.y() + n.height() / 2 - t.height() / 2;
    }
    function aa(n, t, e) {
        return qa(ta(n), ia(n), e.southeast(), Ja(), 'layout-se');
    }
    function ca(n, t, e) {
        return qa(oa(n, t), ia(n), e.southwest(), $a(), 'layout-sw');
    }
    function sa(n, t, e) {
        return qa(ta(n), ra(n, t), e.northeast(), Qa(), 'layout-ne');
    }
    function fa(n, t, e) {
        return qa(oa(n, t), ra(n, t), e.northwest(), Za(), 'layout-nw');
    }
    function la(n, t, e) {
        return qa(
            (function(n) {
                return n.x() + n.width();
            })(n),
            ua(n, t),
            e.east(),
            ec(),
            'layout-e',
        );
    }
    function da(n, t, e) {
        return qa(
            (function(n, t) {
                return n.x() - t.width();
            })(n, t),
            ua(n, t),
            e.west(),
            oc(),
            'layout-w',
        );
    }
    function ma() {
        return [aa, ca, sa, fa, ic, rc];
    }
    function ga() {
        return [ca, aa, fa, sa, ic, rc];
    }
    function pa(e, o, r) {
        return Ni(function(n, t) {
            r(n, e, o);
        });
    }
    function ha(n, t, e, o, r, i) {
        const u = qn(n);
        var a = wt(t, [
            (function(n, t) {
                return vt(n, qn(t));
            })('config', n),
        ]);
        return uc(u, a, t, e, o, r, i);
    }
    function va(r, i, u) {
        return (function(n, t, e) {
            const o = e.toString();
            var r = o.indexOf(')') + 1;
            var i = o.indexOf('(');
            let u = o.substring(i + 1, r - 1).split(/,\s*/);
            return (
                (n.toFunctionAnnotation = function() {
                    return {
                        name: t,
                        parameters: Qi(u.slice(0, 1).concat(u.slice(3))),
                    };
                }),
                n
            );
        })(
            function(e) {
                for (var n = [], t = 1; t < arguments.length; t++)
                    n[t - 1] = arguments[t];
                const o = [e].concat(n);
                return e.config({ name: nn(r) }).fold(
                    function() {
                        throw new Error(
                            `We could not find any behaviour configuration for: ${r}. Using API: ${u}`,
                        );
                    },
                    function(n) {
                        const t = Array.prototype.slice.call(o, 1);
                        return i.apply(
                            undefined,
                            [e, n.config, n.state].concat(t),
                        );
                    },
                );
            },
            u,
            i,
        );
    }
    function ba(n) {
        return { key: n, value: undefined };
    }
    function ya(n) {
        return K(n);
    }
    function xa(n) {
        const t = ot(`Creating behaviour: ${n.name}`, ac, n);
        return ha(t.fields, t.name, t.active, t.apis, t.extra, t.state);
    }
    function wa(n) {
        const t = ot(`Creating behaviour: ${n.name}`, cc, n);
        return (function(n, t, e, o, r, i) {
            const u = n;
            let a = wt(t, [vt('config', n)]);
            return uc(u, a, t, e, o, r, i);
        })(
            it(t.branchKey, t.branches),
            t.name,
            t.active,
            t.apis,
            t.extra,
            t.state,
        );
    }
    function Sa(n) {
        n.dom().focus();
    }
    function Ca(n) {
        const t = n !== undefined ? n.dom() : v.document;
        return on.from(t.activeElement).map(we.fromDom);
    }
    function ka(t) {
        return Ca(ko(t)).filter(function(n) {
            return t.dom().contains(n.dom());
        });
    }
    function Oa(n, e) {
        const o = ko(e);
        var t = Ca(o).bind(function(t) {
            function n(n) {
                return jt(t, n);
            }
            return n(e) ? on.some(e) : to(e, n);
        });
        let r = n(e);
        return (
            t.each(function(t) {
                Ca(o)
                    .filter(function(n) {
                        return jt(n, t);
                    })
                    .fold(function() {
                        Sa(t);
                    }, Z);
            }),
            r
        );
    }
    function Ea(n, t, e) {
        function r(n) {
            return Nn(e, n).getOr([]);
        }
        function o(n, t, e) {
            const o = _(gc, e);
            return {
                offset() {
                    return Ru(n, t);
                },
                classesOn() {
                    return B(e, r);
                },
                classesOff() {
                    return B(o, r);
                },
            };
        }
        return {
            southeast() {
                return o(-n, t, ['top', 'alignLeft']);
            },
            southwest() {
                return o(n, t, ['top', 'alignRight']);
            },
            south() {
                return o(-n / 2, t, ['top', 'alignCentre']);
            },
            northeast() {
                return o(-n, -t, ['bottom', 'alignLeft']);
            },
            northwest() {
                return o(n, -t, ['bottom', 'alignRight']);
            },
            north() {
                return o(-n / 2, -t, ['bottom', 'alignCentre']);
            },
            east() {
                return o(n, -t / 2, ['valignCentre', 'left']);
            },
            west() {
                return o(-n, -t / 2, ['valignCentre', 'right']);
            },
            innerNorthwest() {
                return o(-n, t, ['top', 'alignRight']);
            },
            innerNortheast() {
                return o(n, t, ['top', 'alignLeft']);
            },
            innerNorth() {
                return o(-n / 2, t, ['top', 'alignCentre']);
            },
            innerSouthwest() {
                return o(-n, -t, ['bottom', 'alignRight']);
            },
            innerSoutheast() {
                return o(n, -t, ['bottom', 'alignLeft']);
            },
            innerSouth() {
                return o(-n / 2, -t, ['bottom', 'alignCentre']);
            },
            innerWest() {
                return o(n, -t / 2, ['valignCentre', 'right']);
            },
            innerEast() {
                return o(-n, -t / 2, ['valignCentre', 'left']);
            },
        };
    }
    function Ta() {
        return Ea(0, 0, {});
    }
    function Ba(n, t, e, o, r, i) {
        const u = t.x() - e;
        var a = t.y() - o;
        let c = r - (u + t.width());
        var s = i - (a + t.height());
        let f = on.some(u);
        var l = on.some(a);
        let d = on.some(c);
        var m = on.some(s);
        let g = on.none();
        return (function(n, t, e, o, r, i, u, a, c) {
            return n.fold(t, e, o, r, i, u, a, c);
        })(
            t.direction(),
            function() {
                return hc(n, f, l, g, g);
            },
            function() {
                return hc(n, g, l, d, g);
            },
            function() {
                return hc(n, f, g, g, m);
            },
            function() {
                return hc(n, g, g, d, m);
            },
            function() {
                return hc(n, f, l, g, g);
            },
            function() {
                return hc(n, f, g, g, m);
            },
            function() {
                return hc(n, f, l, g, g);
            },
            function() {
                return hc(n, g, l, d, g);
            },
        );
    }
    function Da(n, t) {
        const e = d(yu, t);
        var o = n.fold(e, e, function() {
            var n = hu();
            return yu(t).translate(-n.left(), -n.top());
        });
        let r = pu(t);
        let i = lu(t);
        return xu(o.left(), o.top(), r, i);
    }
    function Aa(n) {
        return n;
    }
    function _a(t, e) {
        return function(n) {
            return wc(n) === 'rtl' ? e : t;
        };
    }
    function Ma() {
        return wt('layouts', [ct('onLtr'), ct('onRtl')]);
    }
    function Fa(t, n, e, o) {
        const r = n.layouts
            .map(function(n) {
                return n.onLtr(t);
            })
            .getOr(e);
        var i = n.layouts
            .map(function(n) {
                return n.onRtl(t);
            })
            .getOr(o);
        return _a(r, i)(t);
    }
    function Ia(n, t, e) {
        const o = n.document.createRange();
        return (
            (function(e, n) {
                n.fold(
                    function(n) {
                        e.setStartBefore(n.dom());
                    },
                    function(n, t) {
                        e.setStart(n.dom(), t);
                    },
                    function(n) {
                        e.setStartAfter(n.dom());
                    },
                );
            })(o, t),
            (function(e, n) {
                n.fold(
                    function(n) {
                        e.setEndBefore(n.dom());
                    },
                    function(n, t) {
                        e.setEnd(n.dom(), t);
                    },
                    function(n) {
                        e.setEndAfter(n.dom());
                    },
                );
            })(o, e),
            o
        );
    }
    function Ra(n, t, e, o, r) {
        const i = n.document.createRange();
        return i.setStart(t.dom(), e), i.setEnd(o.dom(), r), i;
    }
    function Va(n) {
        return {
            left: nn(n.left),
            top: nn(n.top),
            right: nn(n.right),
            bottom: nn(n.bottom),
            width: nn(n.width),
            height: nn(n.height),
        };
    }
    function Na(n, t, e) {
        return t(
            we.fromDom(e.startContainer),
            e.startOffset,
            we.fromDom(e.endContainer),
            e.endOffset,
        );
    }
    function Ha(n, t) {
        return (function(n, t) {
            const e = t.ltr();
            return e.collapsed
                ? t
                      .rtl()
                      .filter(function(n) {
                          return !1 === n.collapsed;
                      })
                      .map(function(n) {
                          return Dc.rtl(
                              we.fromDom(n.endContainer),
                              n.endOffset,
                              we.fromDom(n.startContainer),
                              n.startOffset,
                          );
                      })
                      .getOrThunk(function() {
                          return Na(0, Dc.ltr, e);
                      })
                : Na(0, Dc.ltr, e);
        })(
            0,
            (function(r, n) {
                return n.match({
                    domRange(n) {
                        return { ltr: nn(n), rtl: on.none };
                    },
                    relative(n, t) {
                        return {
                            ltr: L(function() {
                                return Ia(r, n, t);
                            }),
                            rtl: L(function() {
                                return on.some(Ia(r, t, n));
                            }),
                        };
                    },
                    exact(n, t, e, o) {
                        return {
                            ltr: L(function() {
                                return Ra(r, n, t, e, o);
                            }),
                            rtl: L(function() {
                                return on.some(Ra(r, e, o, n, t));
                            }),
                        };
                    },
                });
            })(n, t),
        );
    }
    function Pa(n, t, e) {
        return t >= n.left && t <= n.right && e >= n.top && e <= n.bottom;
    }
    var za = ye({});
    var La = ['alloy/data/Fields', 'alloy/debugging/Debugging'];
    var ja = nn({
        logEventCut: Z,
        logEventStopped: Z,
        logNoParent: Z,
        logEventNoHandlers: Z,
        logEventResponse: Z,
        write: Z,
    });
    var Ua = nn([ct('menu'), ct('selectedMenu')]);
    var Wa = nn([ct('item'), ct('selectedItem')]);
    var Ga = (nn(re(Wa().concat(Ua()))), nn(re(Wa())));
    let Xa = mt('initSize', [ct('numColumns'), ct('numRows')]);
    var Ya = nn(Xa);
    var qa = xo('x', 'y', 'bubble', 'direction', 'label');
    var Ka = Tn([
        { southeast: [] },
        { southwest: [] },
        { northeast: [] },
        { northwest: [] },
        { south: [] },
        { north: [] },
        { east: [] },
        { west: [] },
    ]);
    var Ja = Ka.southeast;
    var $a = Ka.southwest;
    var Qa = Ka.northeast;
    var Za = Ka.northwest;
    var nc = Ka.south;
    var tc = Ka.north;
    var ec = Ka.east;
    var oc = Ka.west;
    var rc = function(n, t, e) {
        return qa(ea(n, t), ra(n, t), e.north(), tc(), 'layout-n');
    };
    var ic = function(n, t, e) {
        return qa(ea(n, t), ia(n), e.south(), nc(), 'layout-s');
    };
    var uc = function(e, n, o, r, t, i, u) {
        function a(n) {
            return $(n, o) ? n[o]() : on.none();
        }
        var c = P(t, function(n, t) {
                return va(o, n, t);
            });
                var s = P(i, function(n, t) {
                    return Jo(n, t);
                });
                var f = N(N({ ...s}, c), {
                revoke: d(ba, o),
                config(n) {
                        var t = ot(o + '-config', e, n);
                        return {
                            key: o,
                            value: {
                                config: t,
                                me: f,
                                configAsRaw: L(function() {
                                    return ot(o + '-config', e, n);
                                }),
                                initialConfig: n,
                                state: u,
                            },
                        };
                    },
                schema() {
                        return n;
                    },
                exhibit(n, e) {
                        return a(n)
                            .bind(function(t) {
                                return Nn(r, 'exhibit').map(function(n) {
                                    return n(e, t.config, t.state);
                                });
                            })
                            .getOr(nr({}));
                    },
                name: function() {
                    return o;
                },
                handlers: function(n) {
                    return a(n)
                        .map(function(n) {
                            return Y('events', function(n, t) {
                                return {};
                            })(r)(n.config, n.state);
                        })
                        .getOr({});
                },
            });
        return f;
    };
    var ac = qn([
        ct('fields'),
        ct('name'),
        St('active', {}),
        St('apis', {}),
        St('state', nu),
        St('extra', {}),
    ]);
    var cc = qn([
        ct('branchKey'),
        ct('branches'),
        ct('name'),
        St('active', {}),
        St('apis', {}),
        St('state', nu),
        St('extra', {}),
    ]);
    let sc = nn(undefined);
    var fc = /* */ Object.freeze({
        events: function(t) {
            return so([
                mo(di(), function(r, i) {
                    var u = t.channels;
                            var n = (function(n, t) {
                            return t.universal()
                                ? n
                                : C(n, function(n) {
                                      return vn(t.channels(), n);
                                  });
                        })(wn(u), i);
                    bn(n, function(n) {
                        var t = u[n];
                                var e = t.schema;
                                var o = ot(
                                'channel[' +
                                    n +
                                    '] data\nReceiver: ' +
                                    Xo(r.element()),
                                e,
                                i.data(),
                            );
                        t.onReceive(r, o);
                    });
                }),
            ]);
        },
    });
    var lc = [
        st('channels', nt(an.value, qn([$u('onReceive'), St('schema', de())]))),
    ];
    let dc = xa({ fields: lc, name: 'receiving', active: fc });
    var mc = /* */ Object.freeze({
        exhibit: function(n, t) {
            return nr({
                classes: [],
                styles: t.useFixed() ? {} : { position: 'relative' },
            });
        },
    });
    var gc = [
        'valignCentre',
        'alignLeft',
        'alignRight',
        'alignCentre',
        'top',
        'bottom',
        'left',
        'right',
    ];
    var pc = Co(
        [
            'x',
            'y',
            'width',
            'height',
            'maxHeight',
            'maxWidth',
            'direction',
            'classes',
            'label',
            'candidateYforTest',
        ],
        [],
    );
    var hc = xo('position', 'left', 'top', 'right', 'bottom');
    var vc = Tn([
        { none: [] },
        { relative: ['x', 'y', 'width', 'height'] },
        { fixed: ['x', 'y', 'width', 'height'] },
    ]);
    let bc = function(n, t, e) {
        var o = Ru(t, e);
        return n.fold(nn(o), nn(o), function() {
            var n = hu();
            return o.translate(-n.left(), -n.top());
        });
    };
    let yc = vc.relative;
    var xc = vc.fixed;
    var wc = function(n) {
        return Sr(n, 'direction') === 'rtl' ? 'rtl' : 'ltr';
    };
    let Sc = [
        ct('hotspot'),
        ht('bubble'),
        St('overrides', {}),
        Ma(),
        Zu('placement', function(n, t, e) {
            var o = t.hotspot;
                    var r = Da(e, o.element());
                    var i = Fa(n.element(), t, ma(), ga());
            return on.some(
                Aa({
                    anchorBox: r,
                    bubble: t.bubble.getOr(Ta()),
                    overrides: t.overrides,
                    layouts: i,
                    placer: on.none(),
                }),
            );
        }),
    ];
    let Cc = [
        ct('x'),
        ct('y'),
        St('height', 0),
        St('width', 0),
        St('bubble', Ta()),
        St('overrides', {}),
        Ma(),
        Zu('placement', function(n, t, e) {
            var o = bc(e, t.x, t.y);
                    var r = xu(o.left(), o.top(), t.width, t.height);
                    var i = Fa(
                    n.element(),
                    t,
                    [aa, ca, sa, fa, ic, rc, la, da],
                    [ca, aa, fa, sa, ic, rc, la, da],
                );
            return on.some(
                Aa({
                    anchorBox: r,
                    bubble: t.bubble,
                    overrides: t.overrides,
                    layouts: i,
                    placer: on.none(),
                }),
            );
        }),
    ];
    var kc = { create: xo('start', 'soffset', 'finish', 'foffset') };
    var Oc = Tn([
        { before: ['element'] },
        { on: ['element', 'offset'] },
        { after: ['element'] },
    ]);
    var Ec =
        (Oc.before,
        Oc.on,
        Oc.after,
        function(n) {
            return n.fold(l, l, l);
        });
    let Tc = Tn([
        { domRange: ['rng'] },
        { relative: ['startSitu', 'finishSitu'] },
        { exact: ['start', 'soffset', 'finish', 'foffset'] },
    ]);
    let Bc = {
        domRange: Tc.domRange,
        relative: Tc.relative,
        exact: Tc.exact,
        exactFromRange: function(n) {
            return Tc.exact(n.start(), n.soffset(), n.finish(), n.foffset());
        },
        getWin(n) {
                var t = (function(n) {
                    return n.match({
                        domRange: function(n) {
                            return we.fromDom(n.startContainer);
                        },
                        relative: function(n, t) {
                            return Ec(n);
                        },
                        exact: function(n, t, e, o) {
                            return n;
                        },
                    });
                })(n);
                return Eo(t);
            },
        range: kc.create,
    };
    var Dc = Tn([
        { ltr: ['start', 'soffset', 'finish', 'foffset'] },
        { rtl: ['start', 'soffset', 'finish', 'foffset'] },
    ]);
    function Ac(n) {
        return uf.get(n);
    }
    function _c(n) {
        return uf.getOption(n);
    }
    function Mc(e, o, n, t, r) {
        function i(n) {
            const t = e.dom().createRange();
            return t.setStart(o.dom(), n), t.collapse(!0), t;
        }
        const u = Ac(o).length;
        var a = (function(n, t, e, o, r) {
            if (r === 0) return 0;
            if (t === o) return r - 1;
            for (let i = o, u = 1; u < r; u++) {
                let a = n(u);
                var c = Math.abs(t - a.left);
                if (e <= a.bottom) {
                    if (e < a.top || i < c) return u - 1;
                    i = c;
                }
            }
            return 0;
        })(
            function(n) {
                return i(n).getBoundingClientRect();
            },
            n,
            t,
            r.right,
            u,
        );
        return i(a);
    }
    function Fc(n) {
        return (
            (function(n) {
                return _c(n)
                    .filter(function(n) {
                        return n.trim().length !== 0 || n.indexOf('\xa0') > -1;
                    })
                    .isSome();
            })(n) || vn(cf, Je(n))
        );
    }
    function Ic(n) {
        return to(n, Fc);
    }
    function Rc(n) {
        return sf(n, Fc);
    }
    function Vc(n, t) {
        return t - n.left < n.right - t;
    }
    function Nc(n, t, e) {
        const o = n.dom().createRange();
        return o.selectNode(t.dom()), o.collapse(e), o;
    }
    function Hc(t, n, e) {
        const o = t.dom().createRange();
        o.selectNode(n.dom());
        const r = o.getBoundingClientRect();
        var i = Vc(r, e);
        return (!0 === i ? Ic : Rc)(n).map(function(n) {
            return Nc(t, n, i);
        });
    }
    function Pc(n, t, e) {
        const o = t.dom().getBoundingClientRect();
        var r = Vc(o, e);
        return on.some(Nc(n, t, r));
    }
    function zc(n, t, e, o) {
        const r = n.dom().createRange();
        r.selectNode(t.dom());
        const i = r.getBoundingClientRect();
        return (function(n, t, e, o) {
            const r = n.dom().createRange();
            r.selectNode(t.dom());
            const i = r.getBoundingClientRect();
            var u = Math.max(i.left, Math.min(i.right, e));
            var a = Math.max(i.top, Math.min(i.bottom, o));
            return af(n, t, u, a);
        })(
            n,
            t,
            Math.max(i.left, Math.min(i.right, e)),
            Math.max(i.top, Math.min(i.bottom, o)),
        );
    }
    function Lc(n, t) {
        return Lt(t, n);
    }
    function jc(n, t, e, o) {
        const r = (function(n, t, e, o) {
            let r = ko(n)
                .dom()
                .createRange();
            return r.setStart(n.dom(), t), r.setEnd(e.dom(), o), r;
        })(n, t, e, o);
        let i = jt(n, e) && t === o;
        return r.collapsed && !i;
    }
    function Uc(n) {
        const t = we.fromDom(n.anchorNode);
        let e = we.fromDom(n.focusNode);
        return jc(t, n.anchorOffset, e, n.focusOffset)
            ? on.some(kc.create(t, n.anchorOffset, e, n.focusOffset))
            : (function(n) {
                  if (n.rangeCount > 0) {
                      const t = n.getRangeAt(0);
                      let e = n.getRangeAt(n.rangeCount - 1);
                      return on.some(
                          kc.create(
                              we.fromDom(t.startContainer),
                              t.startOffset,
                              we.fromDom(e.endContainer),
                              e.endOffset,
                          ),
                      );
                  }
                  return on.none();
              })(n);
    }
    function Wc(n, t) {
        return (function(n) {
            const t = n.getClientRects();
            let e = t.length > 0 ? t[0] : n.getBoundingClientRect();
            return e.width > 0 || e.height > 0 ? on.some(e).map(Va) : on.none();
        })(
            (function(i, n) {
                return Ha(i, n).match({
                    ltr(n, t, e, o) {
                        let r = i.document.createRange();
                        return r.setStart(n.dom(), t), r.setEnd(e.dom(), o), r;
                    },
                    rtl(n, t, e, o) {
                        let r = i.document.createRange();
                        return r.setStart(e.dom(), o), r.setEnd(n.dom(), t), r;
                    },
                });
            })(n, t),
        );
    }
    function Gc(n) {
        return n.fold(
            function(n) {
                return n;
            },
            function(n, t, e) {
                return n.translate(-t, -e);
            },
        );
    }
    function Xc(n) {
        return n.fold(
            function(n) {
                return n;
            },
            function(n, t, e) {
                return n;
            },
        );
    }
    function Yc(n) {
        return O(
            n,
            function(n, t) {
                return n.translate(t.left(), t.top());
            },
            Ru(0, 0),
        );
    }
    function qc(n) {
        const t = S(n, Xc);
        return Yc(t);
    }
    function Kc(n, t, e) {
        const o = ko(n.element());
        var r = hu(o);
        let i = (function(o, n, t) {
            const e = Eo(t.root).dom();
            return on
                .from(e.frameElement)
                .map(we.fromDom)
                .filter(function(n) {
                    let t = ko(n);
                    var e = ko(o.element());
                    return jt(t, e);
                })
                .map(mu);
        })(n, 0, e).getOr(r);
        return mf(i, r.left(), r.top());
    }
    function Jc(n, t) {
        return zr(n)
            ? hf(n, t)
            : (function(n, t) {
                  const e = Do(n);
                  if (e.length === 0) return ff(n, t);
                  if (t < e.length) return ff(e[t], 0);
                  const o = e[e.length - 1];
                  let r = zr(o) ? Ac(o).length : Do(o).length;
                  return ff(o, r);
              })(n, t);
    }
    function $c(n, t) {
        return t.getSelection
            .getOrThunk(function() {
                return function() {
                    return (function(n) {
                        return on
                            .from(n.getSelection())
                            .filter(function(n) {
                                return n.rangeCount > 0;
                            })
                            .bind(Uc);
                    })(n);
                };
            })()
            .map(function(n) {
                const t = Jc(n.start(), n.soffset());
                let e = Jc(n.finish(), n.foffset());
                return Bc.range(
                    t.element(),
                    t.offset(),
                    e.element(),
                    e.offset(),
                );
            });
    }
    function Qc(n) {
        return n.x() + n.width();
    }
    function Zc(n, t) {
        return n.x() - t.width();
    }
    function ns(n, t) {
        return n.y() - t.height() + n.height();
    }
    function ts(n) {
        return n.y();
    }
    function es(n, t, e) {
        return qa(Qc(n), ts(n), e.southeast(), Ja(), 'link-layout-se');
    }
    function os(n, t, e) {
        return qa(Zc(n, t), ts(n), e.southwest(), $a(), 'link-layout-sw');
    }
    function rs(n, t, e) {
        return qa(Qc(n), ns(n, t), e.northeast(), Qa(), 'link-layout-ne');
    }
    function is(n, t, e) {
        return qa(Zc(n, t), ns(n, t), e.northwest(), Za(), 'link-layout-nw');
    }
    function us(n, t, e, o) {
        const r = n + t;
        return o < r ? e : r < e ? o : r;
    }
    function as(n, t, e) {
        return n <= t ? t : e <= n ? e : n;
    }
    function cs(n, t, e, o) {
        const r = n.x();
        var i = n.y();
        var u = n
            .bubble()
            .offset()
            .left();
        let a = n
            .bubble()
            .offset()
            .top();
        var c = o.y();
        var s = o.bottom();
        let f = o.x();
        var l = o.right();
        var d = i + a;
        let m = (function(n, t, e, o, r) {
            var i = r.x();
                    var u = r.y();
                    var a = r.width();
                    var c = r.height();
                    var s = i <= n;
                    var f = u <= t;
                    var l = s && f;
                    var d = n + e <= i + a && t + o <= u + c;
                    var m = Math.abs(Math.min(e, s ? i + a - n : i - (n + e)));
                    var g = Math.abs(Math.min(o, f ? u + c - t : u - (t + o)));
            return {
                originInBounds: l,
                sizeInBounds: d,
                limitX: as(n, r.x(), r.right()),
                limitY: as(t, r.y(), r.bottom()),
                deltaW: m,
                deltaH: g,
            };
        })(r + u, d, t, e, o);
        let g = m.originInBounds;
        var p = m.sizeInBounds;
        var h = m.limitX;
        var v = m.limitY;
        let b = m.deltaW;
        var y = m.deltaH;
        let x = nn(v + y - c);
        let w = nn(s - v);
        var S = (function(n, t, e, o) {
            return n.fold(t, t, o, o, t, o, e, e);
        })(n.direction(), w, w, x);
        var C = nn(h + b - f);
        var k = nn(l - h);
        var O = (function(n, t, e, o) {
            return n.fold(t, o, t, o, e, e, t, o);
        })(n.direction(), k, k, C);
        var E = pc({
            x: h,
            y: v,
            width: b,
            height: y,
            maxHeight: S,
            maxWidth: O,
            direction: n.direction(),
            classes: {
                on: n.bubble().classesOn(),
                off: n.bubble().classesOff(),
            },
            label: n.label(),
            candidateYforTest: d,
        });
        return g && p ? Sf.fit(E) : Sf.nofit(E, b, y);
    }
    function ss(n, t, e, o) {
        Or(t, 'max-height'), Or(t, 'max-width');
        const r = (function(n) {
            return { width: nn(pu(n)), height: nn(lu(n)) };
        })(t);
        return (function(n, e, u, a, c) {
            function o(n, o, r, i) {
                const t = n(e, u, a);
                return cs(t, s, f, c).fold(Sf.fit, function(n, t, e) {
                    return i < e || r < t
                        ? Sf.nofit(n, t, e)
                        : Sf.nofit(o, r, i);
                });
            }
            var s = u.width();
            var f = u.height();
            return O(
                n,
                function(n, t) {
                    const e = d(o, t);
                    return n.fold(Sf.fit, e);
                },
                Sf.nofit(
                    pc({
                        x: e.x(),
                        y: e.y(),
                        width: u.width(),
                        height: u.height(),
                        maxHeight: u.height(),
                        maxWidth: u.width(),
                        direction: Ja(),
                        classes: { on: [], off: [] },
                        label: 'none',
                        candidateYforTest: e.y(),
                    }),
                    -1,
                    -1,
                ),
            ).fold(l, l);
        })(o.preference(), n, r, e, o.bounds());
    }
    function fs(n, t, e) {
        function o(n) {
            return `${n}px`;
        }
        const r = (function(n, r) {
            return n.fold(
                function() {
                    return hc(
                        'absolute',
                        on.some(r.x()),
                        on.some(r.y()),
                        on.none(),
                        on.none(),
                    );
                },
                function(n, t, e, o) {
                    return Ba('absolute', r, n, t, e, o);
                },
                function(n, t, e, o) {
                    return Ba('fixed', r, n, t, e, o);
                },
            );
        })(e.origin(), t);
        !(function(n, t) {
            const e = n.dom();
            Cn(t, function(n, t) {
                n.fold(
                    function() {
                        yr(e, t);
                    },
                    function(n) {
                        br(e, t, n);
                    },
                );
            });
        })(n, {
            position: on.some(r.position()),
            left: r.left().map(o),
            top: r.top().map(o),
            right: r.right().map(o),
            bottom: r.bottom().map(o),
        });
    }
    function ls(n, t) {
        !(function(n, t) {
            const e = Fu.max(n, t, [
                'margin-top',
                'border-top-width',
                'padding-top',
                'padding-bottom',
                'border-bottom-width',
                'margin-bottom',
            ]);
            xr(n, 'max-height', `${e}px`);
        })(n, Math.floor(t));
    }
    function ds(n, t, e) {
        return n[t] === undefined ? e : n[t];
    }
    function ms(n, t, e, o, r, i) {
        const u = ds(i, 'maxHeightFunction', Cf());
        var a = ds(i, 'maxWidthFunction', Z);
        let c = n.anchorBox();
        var s = n.origin();
        var f = Of({
            bounds: (function(o, n) {
                return n.fold(
                    function() {
                        return o.fold(Cu, Cu, xu);
                    },
                    function(e) {
                        return o.fold(e, e, function() {
                            let n = e();
                            var t = bc(o, n.x(), n.y());
                            return xu(t.left(), t.top(), n.width(), n.height());
                        });
                    },
                );
            })(s, r),
            origin: s,
            preference: o,
            maxHeightFunction: u,
            maxWidthFunction: a,
        });
        Ef(c, t, e, f);
    }
    function gs(n, t, e, o, r) {
        const i = (function(n, t) {
            return wf(n, t);
        })(e.anchorBox, t);
        ms(i, r.element(), e.bubble, e.layouts, o, e.overrides);
    }
    function ps(n, t) {
        Pi(n.element(), t.element());
    }
    function hs(t, n) {
        const e = t.components();
        !(function(n) {
            bn(n.components(), function(n) {
                return zi(n.element());
            }),
                Ro(n.element()),
                n.syncComponents();
        })(t);
        const o = _(e, n);
        bn(o, function(n) {
            Mf(n), t.getSystem().removeFromWorld(n);
        }),
            bn(n, function(n) {
                n.getSystem().isConnected()
                    ? ps(t, n)
                    : (t.getSystem().addToWorld(n),
                      ps(t, n),
                      Qe(t.element()) && Ff(n)),
                    t.syncComponents();
            });
    }
    function vs(n, t) {
        If(n, t, Pi);
    }
    function bs(n) {
        Mf(n), zi(n.element()), n.getSystem().removeFromWorld(n);
    }
    function ys(t) {
        const n = To(t.element()).bind(function(n) {
            return t
                .getSystem()
                .getByDom(n)
                .toOption();
        });
        bs(t),
            n.each(function(n) {
                n.syncComponents();
            });
    }
    function xs(n) {
        const t = n.components();
        bn(t, bs), Ro(n.element()), n.syncComponents();
    }
    function ws(n, t) {
        Rf(n, t, Pi);
    }
    function Ss(t) {
        const n = Do(t.element());
        bn(n, function(n) {
            t.getByDom(n).each(Mf);
        }),
            zi(t.element());
    }
    function Cs(t, n, e, o) {
        e.get().each(function(n) {
            xs(t);
        });
        const r = n.getAttachPoint(t);
        vs(r, t);
        const i = t.getSystem().build(o);
        return vs(t, i), e.set(i), i;
    }
    function ks(n, t, e, o) {
        const r = Cs(n, t, e, o);
        return t.onOpen(n, r), r;
    }
    function Os(t, e, o) {
        o.get().each(function(n) {
            xs(t), ys(t), e.onClose(t, n), o.clear();
        });
    }
    function Es(n, t, e) {
        return e.isOpen();
    }
    function Ts(n) {
        let t;
        var e = ot('Dismissal', Gf, n);
        return (
            ((t = {})[jf()] = {
                schema: qn([ct('target')]),
                onReceive(t, n) {
                    Lf.isOpen(t) &&
                        (Lf.isPartOf(t, n.target) ||
                            e.isExtraPart(t, n.target) ||
                            e.fireEventInstead.fold(
                                function() {
                                    return Lf.close(t);
                                },
                                function(n) {
                                    return ro(t, n.event);
                                },
                            ));
                },
            }),
            t
        );
    }
    function Bs(n) {
        let t;
        var e = ot('Reposition', Xf, n);
        return (
            ((t = {})[Uf()] = {
                onReceive(t) {
                    Lf.isOpen(t) &&
                        e.fireEventInstead.fold(
                            function() {
                                return e.doReposition(t);
                            },
                            function(n) {
                                return ro(t, n.event);
                            },
                        );
                },
            }),
            t
        );
    }
    function Ds(n, t, e) {
        t.store.manager.onLoad(n, t, e);
    }
    function As(n, t, e) {
        t.store.manager.onUnload(n, t, e);
    }
    function _s() {
        const n = ye(null);
        return tu({
            set: n.set,
            get: n.get,
            isNotSet() {
                return n.get() === null;
            },
            clear() {
                n.set(null);
            },
            readState() {
                return { mode: 'memory', value: n.get() };
            },
        });
    }
    function Ms() {
        const i = ye({});
        let u = ye({});
        return tu({
            readState() {
                return {
                    mode: 'dataset',
                    dataByValue: i.get(),
                    dataByText: u.get(),
                };
            },
            lookup(n) {
                return Nn(i.get(), n).orThunk(function() {
                    return Nn(u.get(), n);
                });
            },
            update(n) {
                let t = i.get();
                    var e = u.get();
                    var o = {};
                    var r = {};
                bn(n, function(t) {
                    (o[t.value] = t),
                        Nn(t, 'meta').each(function(n) {
                            Nn(n, 'text').each(function(n) {
                                r[n] = t;
                            });
                        });
                }),
                    i.set(N({ ...t}, o)),
                    u.set(N({ ...e}, r));
            },
            clear() {
                i.set({}), u.set({});
            },
        });
    }
    function Fs(n, t, e, o) {
        const r = t.store;
        e.update([o]), r.setValue(n, o), t.onSetValue(n, o);
    }
    function Is(t, n) {
        return Dt(
            t,
            {},
            S(n, function(n) {
                return (function(t, e) {
                    return ce(
                        t,
                        t,
                        Fn(),
                        Yn(function(n) {
                            return qt(`The field: ${t} is forbidden. ${e}`);
                        }),
                    );
                })(n.name(), `Cannot configure ${n.name()} for ${t}`);
            }).concat([At('dump', l)]),
        );
    }
    function Rs(n) {
        return n.dump;
    }
    function Vs(n, t) {
        return {...n.dump, ...ya(t)};
    }
    function Ns(n, t, e, o) {
        return e.uiType === ol
            ? (function(n, t, e, o) {
                  return n.exists(function(n) {
                      return n !== e.owner;
                  })
                      ? rl.single(!0, nn(e))
                      : Nn(o, e.name).fold(
                            function() {
                                throw new Error(
                                    `Unknown placeholder component: ${
                                        e.name
                                    }\nKnown: [${wn(o)}]\nNamespace: ${n.getOr(
                                        'none',
                                    )}\nSpec: ${JSON.stringify(e, null, 2)}`,
                                );
                            },
                            function(n) {
                                return n.replace();
                            },
                        );
              })(n, 0, e, o)
            : rl.single(!1, nn(e));
    }
    function Hs(t, e, n, o) {
        const r = P(o, function(n, t) {
            return (function(n, t) {
                let e = !1;
                return {
                    name: nn(n),
                    required() {
                        return t.fold(
                            function(n, t) {
                                return n;
                            },
                            function(n, t) {
                                return n;
                            },
                        );
                    },
                    used() {
                        return e;
                    },
                    replace() {
                        if (!0 === e)
                            throw new Error(
                                'Trying to use the same placeholder more than once: ' +
                                    n,
                            );
                        return (e = !0), t;
                    },
                };
            })(t, n);
        });
        let i = (function(t, e, n, o) {
            return B(n, function(n) {
                return il(t, e, n, o);
            });
        })(t, e, n, r);
        return (
            Cn(r, function(n) {
                if (!1 === n.used() && n.required())
                    throw new Error(
                        `Placeholder: ${n.name()} was not found in components list\nNamespace: ${t.getOr(
                            'none',
                        )}\nComponents: ${JSON.stringify(
                            e.components,
                            null,
                            2,
                        )}`,
                    );
            }),
            i
        );
    }
    function Ps(n) {
        return n.fold(on.some, on.none, on.some, on.some);
    }
    function zs(n) {
        function t(n) {
            return n.name;
        }
        return n.fold(t, t, t, t);
    }
    function Ls(e, o) {
        return function(n) {
            const t = ot('Converting part type', o, n);
            return e(t);
        };
    }
    function js(n, t, e, o) {
        return Dn(
            t.defaults(n, e, o),
            e,
            { uid: n.partUids[t.name] },
            t.overrides(n, e, o),
        );
    }
    function Us(r, n) {
        const t = {};
        return (
            bn(n, function(n) {
                Ps(n).each(function(e) {
                    const o = Tl(r, e.pname);
                    t[e.name] = function(n) {
                        const t = ot(`Part: ${e.name} in ${r}`, re(e.schema), n);
                        return {...o, config: n, validated: t};
                    };
                });
            }),
            t
        );
    }
    function Ws(n, t, e) {
        return { uiType: cl(), owner: n, name: t, config: e, validated: {} };
    }
    function Gs(n) {
        return B(n, function(n) {
            return n
                .fold(on.none, on.some, on.none, on.none)
                .map(function(n) {
                    return mt(n.name, n.schema.concat([na(Ol())]));
                })
                .toArray();
        });
    }
    function Xs(n) {
        return S(n, zs);
    }
    function Ys(n, t, e) {
        return (function(n, e, t) {
            const i = {};
            let o = {};
            return (
                bn(t, function(n) {
                    n.fold(
                        function(o) {
                            i[o.pname] = ul(!0, function(n, t, e) {
                                return o.factory.sketch(js(n, o, t, e));
                            });
                        },
                        function(n) {
                            const t = e.parts[n.name];
                            o[n.name] = nn(
                                n.factory.sketch(js(e, n, t[Ol()]), t),
                            );
                        },
                        function(o) {
                            i[o.pname] = ul(!1, function(n, t, e) {
                                return o.factory.sketch(js(n, o, t, e));
                            });
                        },
                        function(r) {
                            i[r.pname] = al(!0, function(t, n, e) {
                                const o = t[r.name];
                                return S(o, function(n) {
                                    return r.factory.sketch(
                                        Dn(
                                            r.defaults(t, n, e),
                                            n,
                                            r.overrides(t, n),
                                        ),
                                    );
                                });
                            });
                        },
                    );
                }),
                { internals: nn(i), externals: nn(o) }
            );
        })(0, t, e);
    }
    function qs(n, t, e) {
        return Hs(on.some(n), t, t.components, e);
    }
    function Ks(n, t, e) {
        const o = t.partUids[e];
        return n
            .getSystem()
            .getByUid(o)
            .toOption();
    }
    function Js(n, t, e) {
        return Ks(n, t, e).getOrDie(`Could not find part: ${e}`);
    }
    function $s(n, t, e) {
        const o = {};
        var r = t.partUids;
        let i = n.getSystem();
        return (
            bn(e, function(n) {
                o[n] = nn(i.getByUid(r[n]));
            }),
            o
        );
    }
    function Qs(n, t) {
        const e = n.getSystem();
        return P(t.partUids, function(n, t) {
            return nn(e.getByUid(n));
        });
    }
    function Zs(n) {
        return wn(n.partUids);
    }
    function nf(n, t, e) {
        const o = {};
        var r = t.partUids;
        let i = n.getSystem();
        return (
            bn(e, function(n) {
                o[n] = nn(i.getByUid(r[n]).getOrDie());
            }),
            o
        );
    }
    function tf(t, n) {
        const e = Xs(n);
        return K(
            S(e, function(n) {
                return { key: n, value: `${t}-${n}` };
            }),
        );
    }
    function ef(t) {
        return ce(
            'partUids',
            'partUids',
            Rn(function(n) {
                return tf(n.uid, t);
            }),
            de(),
        );
    }
    function of(n, t, e, o, r) {
        const i = (function(n, t) {
            return (n.length > 0 ? [mt('parts', n)] : [])
                .concat([
                    ct('uid'),
                    St('dom', {}),
                    St('components', []),
                    na('originalSpec'),
                    St('debug.sketcher', {}),
                ])
                .concat(t);
        })(o, r);
        return ot(`${n} [SpecSchema]`, qn(i.concat(t)), e);
    }
    function rf(n, t, e, o, r) {
        const i = Dl(r);
        var u = Gs(e);
        var a = ef(e);
        var c = of(n, t, i, u, [a]);
        let s = Ys(0, c, e);
        return o(c, qs(n, c, s.internals()), i, s.externals());
    }
    var uf = (function iI(e, o) {
        let t = function(n) {
            return e(n) ? on.from(n.dom().nodeValue) : on.none();
        };
        return {
            get(n) {
                if (!e(n))
                    throw new Error(
                        'Can only get ' + o + ' value of a ' + o + ' node',
                    );
                return t(n).getOr('');
            },
            getOption: t,
            set(n, t) {
                if (!e(n))
                    throw new Error(
                        'Can only set raw ' + o + ' value of a ' + o + ' node',
                    );
                n.dom().nodeValue = t;
            },
        };
    })(zr, 'text');
    var af = function(n, t, e, o) {
        return zr(t)
            ? (function(t, e, o, r) {
                  var n = t.dom().createRange();
                  n.selectNode(e.dom());
                  let i = n.getClientRects();
                  return Au(i, function(n) {
                      return Pa(n, o, r) ? on.some(n) : on.none();
                  }).map(function(n) {
                      return Mc(t, e, o, r, n);
                  });
              })(n, t, e, o)
            : (function(t, n, e, o) {
                  var r = t.dom().createRange();
                          var i = Do(n);
                  return Au(i, function(n) {
                      return (
                          r.selectNode(n.dom()),
                          Pa(r.getBoundingClientRect(), e, o)
                              ? af(t, n, e, o)
                              : on.none()
                      );
                  });
              })(n, t, e, o);
    };
    var cf = ['img', 'br'];
    var sf = function(n, i) {
        var u = function(n) {
            for (let t = Do(n), e = t.length - 1; e >= 0; e--) {
                var o = t[e];
                if (i(o)) return on.some(o);
                var r = u(o);
                if (r.isSome()) return r;
            }
            return on.none();
        };
        return u(n);
    };
    var ff =
        (document.caretPositionFromPoint || document.caretRangeFromPoint,
        xo('element', 'offset'));
    let lf = Tn([
        { screen: ['point'] },
        { absolute: ['point', 'scrollLeft', 'scrollTop'] },
    ]);
    let df = lf.screen;
    var mf = lf.absolute;
    let gf = function(n, t, e, o) {
        let r = n;
                var i = t;
                var u = e;
                var a = o;
        n < 0 && ((r = 0), (u = e + n)), t < 0 && ((i = 0), (a = o + t));
        var c = df(Ru(r, i));
        return on.some(zu(c, u, a));
    };
    var pf = function(n, i, u, a, c) {
        return n.map(function(n) {
            var t = [i, n.point()];
                    var e = (function(n, t, e, o) {
                        return n.fold(t, e, o);
                    })(
                        a,
                        function() {
                            return qc(t);
                        },
                        function() {
                            return qc(t);
                        },
                        function() {
                            return (function(n) {
                                var t = S(n, Gc);
                                return Yc(t);
                            })(t);
                        },
                    );
                    var o = Lu(e.left(), e.top(), n.width(), n.height());
                    var r = Fa(
                    c,
                    u,
                    u.showAbove
                        ? [sa, fa, aa, ca, rc, ic]
                        : [aa, ca, sa, fa, ic, ic],
                    u.showAbove
                        ? [fa, sa, ca, aa, rc, ic]
                        : [ca, aa, fa, sa, ic, rc],
                );
            return Aa({
                anchorBox: o,
                bubble: u.bubble.getOr(Ta()),
                overrides: u.overrides,
                layouts: r,
                placer: on.none(),
            });
        });
    };
    var hf = xo('element', 'offset');
    let vf = [
        ht('getSelection'),
        ct('root'),
        ht('bubble'),
        Ma(),
        St('overrides', {}),
        St('showAbove', !1),
        Zu('placement', function(n, t, e) {
            var o = Eo(t.root).dom();
                    var r = Kc(n, 0, t);
                    var i = $c(o, t).bind(function(n) {
                        return Wc(o, Bc.exactFromRange(n))
                            .orThunk(function() {
                                var t = we.fromText('\ufeff');
                                return (
                                    _o(n.start(), t),
                                    Wc(o, Bc.exact(t, 0, t, 1)).map(function(
                                        n,
                                    ) {
                                        return zi(t), n;
                                    })
                                );
                            })
                            .bind(function(n) {
                                return gf(
                                    n.left(),
                                    n.top(),
                                    n.width(),
                                    n.height(),
                                );
                            });
                    });
                    var u = $c(o, t)
                    .bind(function(n) {
                        return Pr(n.start())
                            ? on.some(n.start())
                            : To(n.start());
                    })
                    .getOr(n.element());
            return pf(i, r, t, e, u);
        }),
    ];
    let bf = [
        ct('node'),
        ct('root'),
        ht('bubble'),
        Ma(),
        St('overrides', {}),
        St('showAbove', !1),
        Zu('placement', function(r, i, u) {
            var a = Kc(r, 0, i);
            return i.node.bind(function(n) {
                let t = n.dom().getBoundingClientRect();
                        var e = gf(t.left, t.top, t.width, t.height);
                        var o = i.node.getOr(r.element());
                return pf(e, a, i, u, o);
            });
        }),
    ];
    let yf = [
        ct('item'),
        Ma(),
        St('overrides', {}),
        Zu('placement', function(n, t, e) {
            var o = Da(e, t.item.element());
                    var r = Fa(n.element(), t, [es, os, rs, is], [os, es, is, rs]);
            return on.some(
                Aa({
                    anchorBox: o,
                    bubble: Ta(),
                    overrides: t.overrides,
                    layouts: r,
                    placer: on.none(),
                }),
            );
        }),
    ];
    let xf = it('anchor', {
        selection: vf,
        node: bf,
        hotspot: Sc,
        submenu: yf,
        makeshift: Cc,
    });
    var wf = xo('anchorBox', 'origin');
    var Sf = Tn([
        { fit: ['reposition'] },
        { nofit: ['reposition', 'deltaW', 'deltaH'] },
    ]);
    var Cf = nn(function(n, t) {
        ls(n, t), wr(n, { 'overflow-x': 'hidden', 'overflow-y': 'auto' });
    });
    let kf = nn(function(n, t) {
        ls(n, t);
    });
    var Of = Co(
        [
            'bounds',
            'origin',
            'preference',
            'maxHeightFunction',
            'maxWidthFunction',
        ],
        [],
    );
    var Ef = function(n, t, e, o) {
        var r = ss(n, t, e, o);
        fs(t, r, o),
            (function(n, t) {
                var e = t.classes();
                hr(n, e.off), pr(n, e.on);
            })(t, r),
            (function(n, t, e) {
                e.maxHeightFunction()(n, t.maxHeight());
            })(t, r, o),
            (function(n, t, e) {
                e.maxWidthFunction()(n, t.maxWidth());
            })(t, r, o);
    };
    var Tf = function(n, t, e, o, r, i) {
        var u = i.map(wu);
        return Bf(n, t, e, o, r, u);
    };
    var Bf = function(r, i, n, t, u, a) {
        let c = ot('positioning anchor.info', xf, t);
        Oa(function() {
            xr(u.element(), 'position', 'fixed');
            let n = Cr(u.element(), 'visibility');
            xr(u.element(), 'visibility', 'hidden');
            var t = i.useFixed()
                    ? (function() {
                          let n = v.document.documentElement;
                          return xc(0, 0, n.clientWidth, n.clientHeight);
                      })()
                    : (function(n) {
                          var t = mu(n.element());
                                  var e = n
                                  .element()
                                  .dom()
                                  .getBoundingClientRect();
                          return yc(t.left(), t.top(), e.width, e.height);
                      })(r);
                    var e = c.placement;
                    var o = a.map(nn).or(i.getBounds);
            e(r, c, t).each(function(n) {
                n.placer.getOr(gs)(r, t, n, o, u);
            }),
                n.fold(
                    function() {
                        Or(u.element(), 'visibility');
                    },
                    function(n) {
                        xr(u.element(), 'visibility', n);
                    },
                ),
                Cr(u.element(), 'left').isNone() &&
                    Cr(u.element(), 'top').isNone() &&
                    Cr(u.element(), 'right').isNone() &&
                    Cr(u.element(), 'bottom').isNone() &&
                    Cr(u.element(), 'position').is('fixed') &&
                    Or(u.element(), 'position');
        }, u.element());
    };
    let Df = /* */ Object.freeze({
        position: function(n, t, e, o, r) {
            Tf(n, t, e, o, r, on.none());
        },
        positionWithin: Tf,
        positionWithinBounds: Bf,
        getMode(n, t, e) {
                return t.useFixed() ? 'fixed' : 'absolute';
            },
    });
    let Af = [St('useFixed', u), ht('getBounds')];
    var _f = xa({ fields: Af, name: 'positioning', active: mc, apis: Df });
    var Mf = function(n) {
        ro(n, Oi());
        let t = n.components();
        bn(t, Mf);
    };
    var Ff = function(n) {
        var t = n.components();
        bn(t, Ff), ro(n, ki());
    };
    var If = function(n, t, e) {
        n.getSystem().addToWorld(t),
            e(n.element(), t.element()),
            Qe(n.element()) && Ff(t),
            n.syncComponents();
    };
    var Rf = function(n, t, e) {
        e(n, t.element());
        let o = Do(t.element());
        bn(o, function(n) {
            t.getByDom(n).each(Ff);
        });
    };
    var Vf = function(n, t, e) {
        var o = t.getAttachPoint(n);
        xr(n.element(), 'position', _f.getMode(o)),
            (function(t, n, e, o) {
                Cr(t.element(), n).fold(
                    function() {
                        Uo(t.element(), e);
                    },
                    function(n) {
                        zo(t.element(), e, n);
                    },
                ),
                    xr(t.element(), n, o);
            })(n, 'visibility', t.cloakVisibilityAttr, 'hidden');
    };
    let Nf = function(n, t, e) {
        !(function(t) {
            return x(['top', 'left', 'right', 'bottom'], function(n) {
                return Cr(t, n).isSome();
            });
        })(n.element()) && Or(n.element(), 'position'),
            (function(n, t, e) {
                if (jo(n.element(), e)) {
                    var o = Lo(n.element(), e);
                    xr(n.element(), t, o);
                } else Or(n.element(), t);
            })(n, 'visibility', t.cloakVisibilityAttr);
    };
    let Hf = /* */ Object.freeze({
        cloak: Vf,
        decloak: Nf,
        open: ks,
        openWhileCloaked(n, t, e, o, r) {
                Vf(n, t), ks(n, t, e, o), r(), Nf(n, t);
            },
        close: Os,
        isOpen: Es,
        isPartOf: function(t, e, n, o) {
            return (
                Es(0, 0, n) &&
                n.get().exists(function(n) {
                    return e.isPartOf(t, n, o);
                })
            );
        },
        getState(n, t, e) {
                return e.get();
            },
        setContent(n, t, e, o) {
                return e.get().map(function() {
                    return Cs(n, t, e, o);
                });
            },
    });
    var Pf = /* */ Object.freeze({
        events: function(e, o) {
            return so([
                mo(vi(), function(n, t) {
                    Os(n, e, o);
                }),
            ]);
        },
    });
    var zf = [
        Ku('onOpen'),
        Ku('onClose'),
        ct('isPartOf'),
        ct('getAttachPoint'),
        St('cloakVisibilityAttr', 'data-precloak-visibility'),
    ];
    var Lf = xa({
        fields: zf,
        name: 'sandboxing',
        active: Pf,
        apis: Hf,
        state: /* */ Object.freeze({
            init: function() {
                var t = ye(on.none());
                        var n = nn('not-implemented');
                return tu({
                    readState: n,
                    isOpen() {
                            return t.get().isSome();
                        },
                    clear() {
                            t.set(on.none());
                        },
                    set(n) {
                            t.set(on.some(n));
                        },
                    get(n) {
                            return t.get();
                        },
                });
            },
        }),
    });
    var jf = nn('dismiss.popups');
    var Uf = nn('reposition.popups');
    var Wf = nn('mouse.released');
    var Gf = qn([
        St('isExtraPart', nn(!1)),
        wt('fireEventInstead', [St('event', Ei())]),
    ]);
    var Xf = qn([
        St('isExtraPart', nn(!1)),
        wt('fireEventInstead', [St('event', Ti())]),
        dt('doReposition'),
    ]);
    var Yf = /* */ Object.freeze({
        onLoad: Ds,
        onUnload: As,
        setValue: function(n, t, e, o) {
            t.store.manager.setValue(n, t, e, o);
        },
        getValue: function(n, t, e) {
            return t.store.manager.getValue(n, t, e);
        },
        getState: function(n, t, e) {
            return e;
        },
    });
    let qf = /* */ Object.freeze({
        events: function(e, o) {
            let n = e.resetOnDom
                ? [
                      Ri(function(n, t) {
                          Ds(n, e, o);
                      }),
                      Vi(function(n, t) {
                          As(n, e, o);
                      }),
                  ]
                : [pa(e, o, Ds)];
            return so(n);
        },
    });
    let Kf = /* */ Object.freeze({
        memory: _s,
        dataset: Ms,
        manual() {
                return tu({ readState: function() {} });
            },
        init(n) {
                return n.store.manager.state(n);
            },
    });
    let Jf = [
        ht('initialValue'),
        ct('getFallbackEntry'),
        ct('getDataKey'),
        ct('setValue'),
        Zu('manager', {
            setValue: Fs,
            getValue: function(n, t, e) {
                var o = t.store;
                        var r = o.getDataKey(n);
                return e.lookup(r).fold(
                    function() {
                        return o.getFallbackEntry(r);
                    },
                    function(n) {
                        return n;
                    },
                );
            },
            onLoad(t, e, o) {
                    e.store.initialValue.each(function(n) {
                        Fs(t, e, o, n);
                    });
                },
            onUnload(n, t, e) {
                    e.clear();
                },
            state: Ms,
        }),
    ];
    var $f = [
        ct('getValue'),
        St('setValue', Z),
        ht('initialValue'),
        Zu('manager', {
            setValue: function(n, t, e, o) {
                t.store.setValue(n, o), t.onSetValue(n, o);
            },
            getValue(n, t, e) {
                    return t.store.getValue(n);
                },
            onLoad(t, e, n) {
                    e.store.initialValue.each(function(n) {
                        e.store.setValue(t, n);
                    });
                },
            onUnload: Z,
            state: nu.init,
        }),
    ];
    var Qf = [
        ht('initialValue'),
        Zu('manager', {
            setValue: function(n, t, e, o) {
                e.set(o), t.onSetValue(n, o);
            },
            getValue: function(n, t, e) {
                return e.get();
            },
            onLoad: function(n, t, e) {
                t.store.initialValue.each(function(n) {
                    e.isNotSet() && e.set(n);
                });
            },
            onUnload(n, t, e) {
                    e.clear();
                },
            state: _s,
        }),
    ];
    let Zf = [
        Ct(
            'store',
            { mode: 'memory' },
            it('mode', { memory: Qf, manual: $f, dataset: Jf }),
        ),
        Ku('onSetValue'),
        St('resetOnDom', !1),
    ];
    var nl = xa({
        fields: Zf,
        name: 'representing',
        active: qf,
        apis: Yf,
        extra: {
            setValueFrom(n, t) {
                    var e = nl.getValue(t);
                    nl.setValue(n, e);
                },
        },
        state: Kf,
    });
    var tl = Is;
    var el = Vs;
    var ol = 'placeholder';
    var rl = Tn([
        { single: ['required', 'valueThunk'] },
        { multiple: ['required', 'valueThunks'] },
    ]);
    var il = function(i, u, a, c) {
        return Ns(i, 0, a, c).fold(
            function(n, t) {
                var e = t(u, a.config, a.validated);
                        var o = Nn(e, 'components').getOr([]);
                        var r = B(o, function(n) {
                        return il(i, u, n, c);
                    });
                return [N({ ...e}, { components: r })];
            },
            function(n, t) {
                var e = t(u, a.config, a.validated);
                return a.validated.preprocess.getOr(l)(e);
            },
        );
    };
    var ul = rl.single;
    var al = rl.multiple;
    var cl = nn(ol);
    var sl = Tn([
        { required: ['data'] },
        { external: ['data'] },
        { optional: ['data'] },
        { group: ['data'] },
    ]);
    let fl = St('factory', { sketch: l });
    var ll = St('schema', []);
    var dl = ct('name');
    let ml = ce(
        'pname',
        'pname',
        In(function(n) {
            return `<alloy.${  Yo(n.name)  }>`;
        }),
        de(),
    );
    var gl = At('schema', function() {
        return [ht('preprocess')];
    });
    var pl = St('defaults', nn({}));
    var hl = St('overrides', nn({}));
    let vl = re([fl, ll, dl, ml, pl, hl]);
    var bl = re([fl, ll, dl, pl, hl]);
    var yl = re([fl, ll, dl, ml, pl, hl]);
    var xl = re([fl, gl, dl, ct('unit'), ml, pl, hl]);
    var wl = Ls(sl.required, vl);
    var Sl = Ls(sl.external, bl);
    var Cl = Ls(sl.optional, yl);
    var kl = Ls(sl.group, xl);
    var Ol = nn('entirety');
    var El = /* */ Object.freeze({
        required: wl,
        external: Sl,
        optional: Cl,
        group: kl,
        asNamedPart: Ps,
        name: zs,
        asCommon(n) {
                return n.fold(l, l, l, l);
            },
        original: Ol,
    });
    var Tl = function(n, t) {
        return { uiType: cl(), owner: n, name: t };
    };
    var Bl = /* */ Object.freeze({
        generate: Us,
        generateOne: Ws,
        schemas: Gs,
        names: Xs,
        substitutes: Ys,
        components: qs,
        defaultUids: tf,
        defaultUidsSchema: ef,
        getAllParts: Qs,
        getAllPartNames: Zs,
        getPart: Ks,
        getPartOrDie: Js,
        getParts: $s,
        getPartsOrDie: nf,
    });
    var Dl = function(n) {
        return n.hasOwnProperty('uid') ? n : N({ ...n }, { uid: qo('uid') });
    };
    function Al(n) {
        const t = ot(`Sketcher for ${n.name}`, Jl, n);
        let e = P(t.apis, Qo);
        var o = P(t.extraApis, function(n, t) {
            return Jo(n, t);
        });
        return {
            name: nn(t.name),
                    partFields: nn([]),
                    configFields: nn(t.configFields),
                    sketch: function(n) {
                        return (function(n, t, e, o) {
                            var r = Dl(o);
                            return e(of(n, t, r, [], []), r);
                        })(t.name, t.configFields, t.factory, n);
                    },
                ...e,
            ...o,
        };
    }
    function _l(n) {
        const t = ot(`Sketcher for ${n.name}`, $l, n);
        var e = Us(t.name, t.partFields);
        var o = P(t.apis, Qo);
        let r = P(t.extraApis, function(n, t) {
            return Jo(n, t);
        });
        return {
            name: nn(t.name),
                    partFields: nn(t.partFields),
                    configFields: nn(t.configFields),
                    sketch: function(n) {
                        return rf(
                            t.name,
                            t.configFields,
                            t.partFields,
                            t.factory,
                            n,
                        );
                    },
                    parts: nn(e),
                ...o,
            ...r,
        };
    }
    function Ml(n) {
        return (
            (Je(n) === 'input' && Lo(n, 'type') !== 'radio') ||
            Je(n) === 'textarea'
        );
    }
    function Fl(e, o, n, r) {
        const t = Lc(e.element(), `.${o.highlightClass}`);
        bn(t, function(t) {
            x(r, function(n) {
                return n.element() === t;
            }) ||
                (mr(t, o.highlightClass),
                e
                    .getSystem()
                    .getByDom(t)
                    .each(function(n) {
                        o.onDehighlight(e, n), ro(n, Fi());
                    }));
        });
    }
    function Il(n, t, e, o) {
        Fl(n, t, 0, [o]),
            td(n, t, e, o) ||
                (lr(o.element(), t.highlightClass),
                t.onHighlight(n, o),
                ro(o, Mi()));
    }
    function Rl(e, t, n, o) {
        const r = Lc(e.element(), `.${t.itemClass}`);
        return T(r, function(n) {
            return gr(n, t.highlightClass);
        }).bind(function(n) {
            const t = us(n, o, 0, r.length - 1);
            return e
                .getSystem()
                .getByDom(r[t])
                .toOption();
        });
    }
    function Vl(n, t, e) {
        const o = A(n.slice(0, t));
        var r = A(n.slice(t + 1));
        return E(o.concat(r), e);
    }
    function Nl(n, t, e) {
        const o = A(n.slice(0, t));
        return E(o, e);
    }
    function Hl(n, t, e) {
        const o = n.slice(0, t);
        let r = n.slice(t + 1);
        return E(r.concat(o), e);
    }
    function Pl(n, t, e) {
        const o = n.slice(t + 1);
        return E(o, e);
    }
    function zl(e) {
        return function(n) {
            const t = n.raw();
            return vn(e, t.which);
        };
    }
    function Ll(n) {
        return function(t) {
            return D(n, function(n) {
                return n(t);
            });
        };
    }
    function jl(n) {
        return !0 === n.raw().shiftKey;
    }
    function Ul(n) {
        return !0 === n.raw().ctrlKey;
    }
    function Wl(n, t) {
        return { matches: n, classification: t };
    }
    function Gl(n, t, e) {
        t.exists(function(t) {
            return e.exists(function(n) {
                return jt(n, t);
            });
        }) || io(n, Bi(), { prevFocus: t, newFocus: e });
    }
    function Xl() {
        function r(n) {
            return ka(n.element());
        }
        return {
            get: r,
            set(n, t) {
                let e = r(n);
                n.getSystem().triggerFocus(t, n.element());
                let o = r(n);
                Gl(n, e, o);
            },
        };
    }
    function Yl() {
        function r(n) {
            return cd.getHighlighted(n).map(function(n) {
                return n.element();
            });
        }
        return {
            get: r,
            set(t, n) {
                let e = r(t);
                t.getSystem()
                    .getByDom(n)
                    .fold(Z, function(n) {
                        cd.highlight(t, n);
                    });
                let o = r(t);
                Gl(t, e, o);
            },
        };
    }
    let ql;
    var Kl;
    var Jl = qn([
        ct('name'),
        ct('factory'),
        ct('configFields'),
        St('apis', {}),
        St('extraApis', {}),
    ]);
    var $l = qn([
        ct('name'),
        ct('factory'),
        ct('configFields'),
        ct('partFields'),
        St('apis', {}),
        St('extraApis', {}),
    ]);
    var Ql = /* */ Object.freeze({
        getCurrent: function(n, t, e) {
            return t.find(n);
        },
    });
    let Zl = [ct('find')];
    let nd = xa({ fields: Zl, name: 'composing', apis: Ql });
    var td = function(n, t, e, o) {
        return gr(o.element(), t.highlightClass);
    };
    var ed = function(n, t, e, o) {
        let r = Lc(n.element(), `.${  t.itemClass}`);
        return on.from(r[o]).fold(function() {
            return an.error(`No element found with index ${  o}`);
        }, n.getSystem().getByDom);
    };
    var od = function(t, n, e) {
        return Ou(t.element(), `.${  n.itemClass}`).bind(function(n) {
            return t
                .getSystem()
                .getByDom(n)
                .toOption();
        });
    };
    var rd = function(t, n, e) {
        let o = Lc(t.element(), `.${  n.itemClass}`);
        return (o.length > 0 ? on.some(o[o.length - 1]) : on.none()).bind(
            function(n) {
                return t
                    .getSystem()
                    .getByDom(n)
                    .toOption();
            },
        );
    };
    let id = function(t, n, e) {
        var o = Lc(t.element(), `.${  n.itemClass}`);
        return Du(
            S(o, function(n) {
                return t
                    .getSystem()
                    .getByDom(n)
                    .toOption();
            }),
        );
    };
    let ud = /* */ Object.freeze({
        dehighlightAll: function(n, t, e) {
            return Fl(n, t, 0, []);
        },
        dehighlight: function(n, t, e, o) {
            td(n, t, e, o) &&
                (mr(o.element(), t.highlightClass),
                t.onDehighlight(n, o),
                ro(o, Fi()));
        },
        highlight: Il,
        highlightFirst(t, e, o) {
                od(t, e).each(function(n) {
                    Il(t, e, o, n);
                });
            },
        highlightLast: function(t, e, o) {
            rd(t, e).each(function(n) {
                Il(t, e, o, n);
            });
        },
        highlightAt(t, e, o, n) {
                ed(t, e, o, n).fold(
                    function(n) {
                        throw new Error(n);
                    },
                    function(n) {
                        Il(t, e, o, n);
                    },
                );
            },
        highlightBy(t, e, o, n) {
                var r = id(t, e);
                E(r, n).each(function(n) {
                    Il(t, e, o, n);
                });
            },
        isHighlighted: td,
        getHighlighted(t, n, e) {
                return Ou(t.element(), '.' + n.highlightClass).bind(function(
                    n,
                ) {
                    return t
                        .getSystem()
                        .getByDom(n)
                        .toOption();
                });
            },
        getFirst: od,
        getLast: rd,
        getPrevious: function(n, t, e) {
            return Rl(n, t, 0, -1);
        },
        getNext(n, t, e) {
                return Rl(n, t, 0, 1);
            },
        getCandidates: id,
    });
    var ad = [
        ct('highlightClass'),
        ct('itemClass'),
        Ku('onHighlight'),
        Ku('onDehighlight'),
    ];
    var cd = xa({ fields: ad, name: 'highlighting', apis: ud });
    let sd = b(jl);
    ((Kl = ql = ql || {}).OnFocusMode = 'onFocus'),
        (Kl.OnEnterOrSpaceMode = 'onEnterOrSpace'),
        (Kl.OnApiMode = 'onApi');
    function fd(n, t, e, i, u) {
        function a(t, e, n, o, r) {
            return (function(n, t) {
                return E(n, function(n) {
                    return n.matches(t);
                }).map(function(n) {
                    return n.classification;
                });
            })(n(t, e, o, r), e.event()).bind(function(n) {
                return n(t, e, o, r);
            });
        }
        var o = {
            schema() {
                return n.concat([
                    St('focusManager', Xl()),
                    Ct(
                        'focusInside',
                        'onFocus',
                        Zn(function(n) {
                            return vn(['onFocus', 'onEnterOrSpace', 'onApi'], n)
                                ? an.value(n)
                                : an.error('Invalid value for focusInside');
                        }),
                    ),
                    Zu('handler', o),
                    Zu('state', t),
                    Zu('sendFocusIn', u),
                ]);
            },
            processKey: a,
            toEvents(o, r) {
                let n =
                    o.focusInside !== ql.OnFocusMode
                        ? on.none()
                        : u(o).map(function(e) {
                              return mo(si(), function(n, t) {
                                  e(n, o, r), t.stop();
                              });
                          });
                return so(
                    n.toArray().concat([
                        mo(ti(), function(n, t) {
                            a(n, t, e, o, r).fold(
                                function() {
                                    !(function(t, e) {
                                        let n = zl([32].concat([13]))(
                                            e.event(),
                                        );
                                        o.focusInside ===
                                            ql.OnEnterOrSpaceMode &&
                                            n &&
                                            Ut(t, e) &&
                                            u(o).each(function(n) {
                                                n(t, o, r), e.stop();
                                            });
                                    })(n, t);
                                },
                                function(n) {
                                    t.stop();
                                },
                            );
                        }),
                        mo(ei(), function(n, t) {
                            a(n, t, i, o, r).each(function(n) {
                                t.stop();
                            });
                        }),
                    ]),
                );
            },
        };
        return o;
    }
    function ld(n) {
        function i(n, t) {
            const e = n.visibilitySelector
                .bind(function(n) {
                    return Eu(t, n);
                })
                .getOr(t);
            return fu(e) > 0;
        }
        function t(t, e) {
            (function(n, t) {
                const e = Lc(n.element(), t.selector);
                var o = C(e, function(n) {
                    return i(t, n);
                });
                return on.from(o[t.firstTabstop]);
            })(t, e).each(function(n) {
                e.focusManager.set(t, n);
            });
        }
        function u(t, n, e, o, r) {
            return r(n, e, function(n) {
                return (function(n, t) {
                    return i(n, t) && n.useTabstopAt(t);
                })(o, n);
            }).fold(
                function() {
                    return o.cyclic ? on.some(!0) : on.none();
                },
                function(n) {
                    return o.focusManager.set(t, n), on.some(!0);
                },
            );
        }
        function a(t, n, e, o) {
            const r = Lc(t.element(), e.selector);
            return (function(n, t) {
                return t.focusManager.get(n).bind(function(n) {
                    return Eu(n, t.selector);
                });
            })(t, e).bind(function(n) {
                return T(r, d(jt, n)).bind(function(n) {
                    return u(t, r, n, e, o);
                });
            });
        }
        const e = [
            ht('onEscape'),
            ht('onEnter'),
            St('selector', '[data-alloy-tabstop="true"]:not(:disabled)'),
            St('firstTabstop', 0),
            St('useTabstopAt', nn(!0)),
            ht('visibilitySelector'),
        ].concat([n]);
        var o = nn([
            Wl(Ll([jl, zl([9])]), function(n, t, e, o) {
                let r = e.cyclic ? Vl : Nl;
                return a(n, 0, e, r);
            }),
            Wl(zl([9]), function(n, t, e, o) {
                var r = e.cyclic ? Hl : Pl;
                return a(n, 0, e, r);
            }),
            Wl(zl([27]), function(t, e, n, o) {
                return n.onEscape.bind(function(n) {
                    return n(t, e);
                });
            }),
            Wl(Ll([sd, zl([13])]), function(t, e, n, o) {
                return n.onEnter.bind(function(n) {
                    return n(t, e);
                });
            }),
        ]);
        let r = nn([]);
        return fd(e, nu.init, o, r, function() {
            return on.some(t);
        });
    }
    function dd(n, t, e) {
        return Ml(e) && zl([32])(t.event())
            ? on.none()
            : (function(n, t, e) {
                  return ao(n, e, mi()), on.some(!0);
              })(n, 0, e);
    }
    function md(n, t) {
        return on.some(!0);
    }
    function gd(n, t, e) {
        return e.execute(n, t, n.element());
    }
    function pd(n) {
        const e = ye(on.none());
        return tu({
            readState() {
                return e
                    .get()
                    .map(function(n) {
                        return {
                            numRows: n.numRows(),
                            numColumns: n.numColumns(),
                        };
                    })
                    .getOr({ numRows: '?', numColumns: '?' });
            },
            setGridSize(n, t) {
                e.set(on.some({ numRows: nn(n), numColumns: nn(t) }));
            },
            getNumRows() {
                return e.get().map(function(n) {
                    return n.numRows();
                });
            },
            getNumColumns() {
                return e.get().map(function(n) {
                    return n.numColumns();
                });
            },
        });
    }
    function hd(i) {
        return function(n, t, e, o) {
            const r = i(n.element());
            return Tm(r, n, t, e, o);
        };
    }
    function vd(n, t) {
        const e = _a(n, t);
        return hd(e);
    }
    function bd(n, t) {
        const e = _a(t, n);
        return hd(e);
    }
    function yd(r) {
        return function(n, t, e, o) {
            return Tm(r, n, t, e, o);
        };
    }
    function xd(n) {
        return !(function(n) {
            return n.offsetWidth <= 0 && n.offsetHeight <= 0;
        })(n.dom());
    }
    function wd(n, t, e) {
        const o = d(jt, t);
        var r = Lc(n, e);
        return (function(t, n) {
            return T(t, n).map(function(n) {
                return _m({ index: n, candidates: t });
            });
        })(C(r, xd), o);
    }
    function Sd(n, t) {
        return T(n, function(n) {
            return jt(t, n);
        });
    }
    function Cd(e, n, o, t) {
        return t(Math.floor(n / o), n % o).bind(function(n) {
            const t = n.row() * o + n.column();
            return t >= 0 && t < e.length ? on.some(e[t]) : on.none();
        });
    }
    function kd(r, n, i, u, a) {
        return Cd(r, n, u, function(n, t) {
            const e = n === i - 1 ? r.length - n * u : u;
            var o = us(t, a, 0, e - 1);
            return on.some({ row: nn(n), column: nn(o) });
        });
    }
    function Od(i, n, u, a, c) {
        return Cd(i, n, a, function(n, t) {
            const e = us(n, c, 0, u - 1);
            var o = e === u - 1 ? i.length - e * a : a;
            var r = as(t, 0, o - 1);
            return on.some({ row: nn(e), column: nn(r) });
        });
    }
    function Ed(t, e, n) {
        Ou(t.element(), e.selector).each(function(n) {
            e.focusManager.set(t, n);
        });
    }
    function Td(r) {
        return function(n, t, e, o) {
            return wd(n, t, e.selector).bind(function(n) {
                return r(
                    n.candidates(),
                    n.index(),
                    o.getNumRows().getOr(e.initSize.numRows),
                    o.getNumColumns().getOr(e.initSize.numColumns),
                );
            });
        };
    }
    function Bd(n, t, e, o) {
        return e.captureTab ? on.some(!0) : on.none();
    }
    function Dd(n, t, e, r) {
        var i = function(n, t, e) {
            const o = us(t, r, 0, e.length - 1);
            return o === n
                ? on.none()
                : (function(n) {
                      return (
                          Je(n) === 'button' && Lo(n, 'disabled') === 'disabled'
                      );
                  })(e[o])
                ? i(n, o, e)
                : on.from(e[o]);
        };
        return wd(n, e, t).bind(function(n) {
            const t = n.index();
            let e = n.candidates();
            return i(t, t, e);
        });
    }
    function Ad(t, e, o) {
        return (function(n, t) {
            return t.focusManager.get(n).bind(function(n) {
                return Eu(n, t.selector);
            });
        })(t, o).bind(function(n) {
            return o.execute(t, e, n);
        });
    }
    function _d(t, e) {
        e.getInitial(t)
            .orThunk(function() {
                return Ou(t.element(), e.selector);
            })
            .each(function(n) {
                e.focusManager.set(t, n);
            });
    }
    function Md(n, t, e) {
        return Dd(n, e.selector, t, -1);
    }
    function Fd(n, t, e) {
        return Dd(n, e.selector, t, 1);
    }
    function Id(o) {
        return function(n, t, e) {
            return o(n, t, e).bind(function() {
                return e.executeOnMove ? Ad(n, t, e) : on.some(!0);
            });
        };
    }
    function Rd(n, t, e, o) {
        return e.onEscape(n, t);
    }
    function Vd(n, t, e) {
        return on.from(n[t]).bind(function(n) {
            return on.from(n[e]).map(function(n) {
                return Um({ rowIndex: t, columnIndex: e, cell: n });
            });
        });
    }
    function Nd(n, t, e, o) {
        const r = n[t].length;
        var i = us(e, o, 0, r - 1);
        return Vd(n, t, i);
    }
    function Hd(n, t, e, o) {
        const r = us(e, o, 0, n.length - 1);
        var i = n[r].length;
        let u = as(t, 0, i - 1);
        return Vd(n, r, u);
    }
    function Pd(n, t, e, o) {
        const r = n[t].length;
        var i = as(e + o, 0, r - 1);
        return Vd(n, t, i);
    }
    function zd(n, t, e, o) {
        const r = as(e + o, 0, n.length - 1);
        var i = n[r].length;
        let u = as(t, 0, i - 1);
        return Vd(n, r, u);
    }
    function Ld(t, e) {
        e.previousSelector(t)
            .orThunk(function() {
                const n = e.selectors;
                return Ou(t.element(), n.cell);
            })
            .each(function(n) {
                e.focusManager.set(t, n);
            });
    }
    function jd(n, t) {
        return function(r, e, i) {
            const u = i.cycles ? n : t;
            return Eu(e, i.selectors.row).bind(function(n) {
                const t = Lc(n, i.selectors.cell);
                return Sd(t, e).bind(function(e) {
                    const o = Lc(r, i.selectors.row);
                    return Sd(o, n).bind(function(n) {
                        const t = (function(n, t) {
                            return S(n, function(n) {
                                return Lc(n, t.selectors.cell);
                            });
                        })(o, i);
                        return u(t, n, e).map(function(n) {
                            return n.cell();
                        });
                    });
                });
            });
        };
    }
    function Ud(t, e, o) {
        return o.focusManager.get(t).bind(function(n) {
            return o.execute(t, e, n);
        });
    }
    function Wd(t, e) {
        Ou(t.element(), e.selector).each(function(n) {
            e.focusManager.set(t, n);
        });
    }
    function Gd(n, t, e) {
        return Dd(n, e.selector, t, -1);
    }
    function Xd(n, t, e) {
        return Dd(n, e.selector, t, 1);
    }
    function Yd(n, t, e, o) {
        const r = n.getSystem().build(o);
        If(n, r, e);
    }
    function qd(n, t, e, o) {
        const r = mg(n);
        E(r, function(n) {
            return jt(o.element(), n.element());
        }).each(ys);
    }
    function Kd(t, n, e, o, r) {
        const i = mg(t);
        return on.from(i[o]).map(function(n) {
            return (
                qd(t, 0, 0, n),
                r.each(function(n) {
                    Yd(
                        t,
                        0,
                        function(n, t) {
                            !(function(n, t, e) {
                                Ao(n, e).fold(
                                    function() {
                                        Pi(n, t);
                                    },
                                    function(n) {
                                        _o(n, t);
                                    },
                                );
                            })(n, t, o);
                        },
                        n,
                    );
                }),
                n
            );
        });
    }
    function Jd(n, t) {
        return {
            key: n,
            value: {
                config: {},
                me: (function(n, t) {
                    const e = so(t);
                    return xa({
                        fields: [ct('enabled')],
                        name: n,
                        active: { events: nn(e) },
                    });
                })(n, t),
                configAsRaw: nn({}),
                initialConfig: {},
                state: nu,
            },
        };
    }
    function $d(n, t) {
        t.ignore || (Sa(n.element()), t.onFocus(n));
    }
    function Qd(n, t, e) {
        const o = t.aria;
        o.update(n, o, e.get());
    }
    function Zd(t, n, e) {
        n.toggleClass.each(function(n) {
            e.get() ? lr(t.element(), n) : mr(t.element(), n);
        });
    }
    function nm(n, t, e) {
        yg(n, t, e, !e.get());
    }
    function tm(n, t, e) {
        e.set(!0), Zd(n, t, e), Qd(n, t, e);
    }
    function em(n, t, e) {
        e.set(!1), Zd(n, t, e), Qd(n, t, e);
    }
    function om(n, t, e) {
        yg(n, t, e, t.selected);
    }
    function rm() {
        function n(n, t) {
            t.stop(), uo(n);
        }
        return [mo(ii(), n), mo(pi(), n), bo(Wr()), bo(qr())];
    }
    function im(n) {
        return so(
            H([
                n
                    .map(function(e) {
                        return Hi(function(n, t) {
                            e(n), t.stop();
                        });
                    })
                    .toArray(),
                rm(),
            ]),
        );
    }
    function um(n) {
        (ka(n.element()).isNone() || bg.isFocused(n)) &&
            (bg.isFocused(n) || bg.focus(n), io(n, Og, { item: n }));
    }
    function am(n) {
        io(n, Eg, { item: n });
    }
    function cm(n, t) {
        const e = {};
        Cn(n, function(n, t) {
            bn(n, function(n) {
                e[n] = t;
            });
        });
        const o = t;
        var r = (function(n) {
            return kn(n, function(n, t) {
                return { k: n, v: t };
            });
        })(t);
        let i = P(r, function(n, t) {
            return [t].concat(Hg(e, o, r, t));
        });
        return P(e, function(n) {
            return Nn(i, n).getOr([n]);
        });
    }
    function sm(n) {
        return n.x();
    }
    function fm(n, t) {
        return n.x() + n.width() / 2 - t.width() / 2;
    }
    function lm(n, t) {
        return n.x() + n.width() - t.width();
    }
    function dm(n) {
        return n.y();
    }
    function mm(n, t) {
        return n.y() + n.height() - t.height();
    }
    function gm(n, t, e) {
        return qa(sm(n), mm(n, t), e.innerSoutheast(), Ja(), 'layout-se');
    }
    function pm(n, t, e) {
        return qa(lm(n, t), mm(n, t), e.innerSouthwest(), $a(), 'layout-sw');
    }
    function hm(n, t, e) {
        return qa(sm(n), dm(n), e.innerNortheast(), Qa(), 'layout-ne');
    }
    function vm(n, t, e) {
        return qa(lm(n, t), dm(n), e.innerNorthwest(), Za(), 'layout-nw');
    }
    function bm(n) {
        const t =
            (function e(n) {
                return n.uid !== undefined;
            })(n) && $(n, 'uid')
                ? n.uid
                : qo('memento');
        return {
            get(n) {
                return n
                    .getSystem()
                    .getByUid(t)
                    .getOrDie();
            },
            getOpt(n) {
                return n
                    .getSystem()
                    .getByUid(t)
                    .toOption();
            },
            asSpec() {
                return N({ ...n}, { uid: t });
            },
        };
    }
    function ym(n) {
        return on.from(n()['temporary-placeholder']).getOr('!not found!');
    }
    function xm(n, t) {
        return on.from(t()[n]).getOrThunk(function() {
            return ym(t);
        });
    }
    let wm;
    var Sm = ld(At('cyclic', nn(!1)));
    var Cm = ld(At('cyclic', nn(!0)));
    var km = [
        St('execute', dd),
        St('useSpace', !1),
        St('useEnter', !0),
        St('useControlEnter', !1),
        St('useDown', !1),
    ];
    var Om = fd(
        km,
        nu.init,
        function(n, t, e, o) {
            var r = e.useSpace && !Ml(n.element()) ? [32] : [];
                    var i = e.useEnter ? [13] : [];
                    var u = e.useDown ? [40] : [];
                    var a = r.concat(i).concat(u);
            return [Wl(zl(a), gd)].concat(
                e.useControlEnter ? [Wl(Ll([Ul, zl([13])]), gd)] : [],
            );
        },
        function(n, t, e, o) {
            return e.useSpace && !Ml(n.element()) ? [Wl(zl([32]), md)] : [];
        },
        function() {
            return on.none();
        },
    );
    let Em = /* */ Object.freeze({
        flatgrid: pd,
        init: function(n) {
            return n.state(n);
        },
    });
    var Tm = function(t, e, n, o, r) {
        return o.focusManager
            .get(e)
            .bind(function(n) {
                return t(e.element(), n, o, r);
            })
            .map(function(n) {
                return o.focusManager.set(e, n), !0;
            });
    };
    let Bm = yd;
    var Dm = yd;
    var Am = yd;
    var _m = Co(['index', 'candidates'], []);
    var Mm = [
        ct('selector'),
        St('execute', dd),
        Ju('onEscape'),
        St('captureTab', !1),
        Ya(),
    ];
    let Fm = Td(function(n, t, e, o) {
        return kd(n, t, e, o, -1);
    });
    var Im = Td(function(n, t, e, o) {
        return kd(n, t, e, o, 1);
    });
    var Rm = Td(function(n, t, e, o) {
        return Od(n, t, e, o, -1);
    });
    let Vm = Td(function(n, t, e, o) {
        return Od(n, t, e, o, 1);
    });
    let Nm = nn([
        Wl(zl([37]), vd(Fm, Im)),
        Wl(zl([39]), bd(Fm, Im)),
        Wl(zl([38]), Bm(Rm)),
        Wl(zl([40]), Dm(Vm)),
        Wl(Ll([jl, zl([9])]), Bd),
        Wl(Ll([sd, zl([9])]), Bd),
        Wl(zl([27]), function(n, t, e, o) {
            return e.onEscape(n, t);
        }),
        Wl(zl([32].concat([13])), function(t, e, o, n) {
            return (function(n, t) {
                return t.focusManager.get(n).bind(function(n) {
                    return Eu(n, t.selector);
                });
            })(t, o).bind(function(n) {
                return o.execute(t, e, n);
            });
        }),
    ]);
    let Hm = nn([Wl(zl([32]), md)]);
    var Pm = fd(Mm, pd, Nm, Hm, function() {
        return on.some(Ed);
    });
    var zm = [
        ct('selector'),
        St('getInitial', on.none),
        St('execute', dd),
        Ju('onEscape'),
        St('executeOnMove', !1),
        St('allowVertical', !0),
    ];
    var Lm = nn([Wl(zl([32]), md)]);
    var jm = fd(
        zm,
        nu.init,
        function(n, t, e, o) {
            let r = [37].concat(e.allowVertical ? [38] : []);
                    var i = [39].concat(e.allowVertical ? [40] : []);
            return [
                Wl(zl(r), Id(vd(Md, Fd))),
                Wl(zl(i), Id(bd(Md, Fd))),
                Wl(zl([13]), Ad),
                Wl(zl([32]), Ad),
                Wl(zl([27]), Rd),
            ];
        },
        Lm,
        function() {
            return on.some(_d);
        },
    );
    var Um = Co(['rowIndex', 'columnIndex', 'cell'], []);
    var Wm = [
        mt('selectors', [ct('row'), ct('cell')]),
        St('cycles', !0),
        St('previousSelector', on.none),
        St('execute', dd),
    ];
    let Gm = jd(
        function(n, t, e) {
            return Nd(n, t, e, -1);
        },
        function(n, t, e) {
            return Pd(n, t, e, -1);
        },
    );
    var Xm = jd(
        function(n, t, e) {
            return Nd(n, t, e, 1);
        },
        function(n, t, e) {
            return Pd(n, t, e, 1);
        },
    );
    let Ym = jd(
        function(n, t, e) {
            return Hd(n, e, t, -1);
        },
        function(n, t, e) {
            return zd(n, e, t, -1);
        },
    );
    var qm = jd(
        function(n, t, e) {
            return Hd(n, e, t, 1);
        },
        function(n, t, e) {
            return zd(n, e, t, 1);
        },
    );
    let Km = nn([
        Wl(zl([37]), vd(Gm, Xm)),
        Wl(zl([39]), bd(Gm, Xm)),
        Wl(zl([38]), Bm(Ym)),
        Wl(zl([40]), Dm(qm)),
        Wl(zl([32].concat([13])), function(t, e, o) {
            return ka(t.element()).bind(function(n) {
                return o.execute(t, e, n);
            });
        }),
    ]);
    var Jm = nn([Wl(zl([32]), md)]);
    let $m = fd(Wm, nu.init, Km, Jm, function() {
        return on.some(Ld);
    });
    let Qm = [ct('selector'), St('execute', dd), St('moveOnTab', !1)];
    var Zm = nn([
        Wl(zl([38]), Am(Gd)),
        Wl(zl([40]), Am(Xd)),
        Wl(Ll([jl, zl([9])]), function(n, t, e) {
            return e.moveOnTab ? Am(Gd)(n, t, e) : on.none();
        }),
        Wl(Ll([sd, zl([9])]), function(n, t, e) {
            return e.moveOnTab ? Am(Xd)(n, t, e) : on.none();
        }),
        Wl(zl([13]), Ud),
        Wl(zl([32]), Ud),
    ]);
    var ng = nn([Wl(zl([32]), md)]);
    let tg = fd(Qm, nu.init, Zm, ng, function() {
        return on.some(Wd);
    });
    var eg = [
        Ju('onSpace'),
        Ju('onEnter'),
        Ju('onShiftEnter'),
        Ju('onLeft'),
        Ju('onRight'),
        Ju('onTab'),
        Ju('onShiftTab'),
        Ju('onUp'),
        Ju('onDown'),
        Ju('onEscape'),
        St('stopSpaceKeyup', !1),
        ht('focusIn'),
    ];
    let og = fd(
        eg,
        nu.init,
        function(n, t, e) {
            return [
                Wl(zl([32]), e.onSpace),
                Wl(Ll([sd, zl([13])]), e.onEnter),
                Wl(Ll([jl, zl([13])]), e.onShiftEnter),
                Wl(Ll([jl, zl([9])]), e.onShiftTab),
                Wl(Ll([sd, zl([9])]), e.onTab),
                Wl(zl([38]), e.onUp),
                Wl(zl([40]), e.onDown),
                Wl(zl([37]), e.onLeft),
                Wl(zl([39]), e.onRight),
                Wl(zl([32]), e.onSpace),
                Wl(zl([27]), e.onEscape),
            ];
        },
        function(n, t, e) {
            return e.stopSpaceKeyup ? [Wl(zl([32]), md)] : [];
        },
        function(n) {
            return n.focusIn;
        },
    );
    var rg = Sm.schema();
    let ig = Cm.schema();
    var ug = jm.schema();
    var ag = Pm.schema();
    let cg = $m.schema();
    var sg = Om.schema();
    var fg = tg.schema();
    var lg = og.schema();
    var dg = wa({
        branchKey: 'mode',
        branches: /* */ Object.freeze({
            acyclic: rg,
            cyclic: ig,
            flow: ug,
            flatgrid: ag,
            matrix: cg,
            execution: sg,
            menu: fg,
            special: lg,
        }),
        name: 'keying',
        active: {
            events: function(n, t) {
                return n.handler.toEvents(n, t);
            },
        },
        apis: {
            focusIn(t, e, o) {
                    e.sendFocusIn(e).fold(
                        function() {
                            t.getSystem().triggerFocus(
                                t.element(),
                                t.element(),
                            );
                        },
                        function(n) {
                            n(t, e, o);
                        },
                    );
                },
            setGridSize: function(n, t, e, o, r) {
                $(e, 'setGridSize')
                    ? e.setGridSize(o, r)
                    : v.console.error('Layout does not support setGridSize');
            },
        },
        state: Em,
    });
    var mg = function(n, t) {
        return n.components();
    };
    var gg = xa({
        fields: [],
        name: 'replacing',
        apis: /* */ Object.freeze({
            append(n, t, e, o) {
                    Yd(n, 0, Pi, o);
                },
            prepend(n, t, e, o) {
                    Yd(n, 0, Fo, o);
                },
            remove: qd,
            replaceAt: Kd,
            replaceBy(t, n, e, o, r) {
                    var i = mg(t);
                    return T(i, o).bind(function(n) {
                        return Kd(t, 0, 0, n, r);
                    });
                },
            set(t, n, e, o) {
                    Oa(function() {
                        var n = S(o, t.getSystem().build);
                        hs(t, n);
                    }, t.element());
                },
            contents: mg,
        }),
    });
    let pg = /* */ Object.freeze({
        focus: $d,
        blur: function(n, t) {
            t.ignore ||
                (function(n) {
                    n.dom().blur();
                })(n.element());
        },
        isFocused(n) {
                return (function(n) {
                    var t = ko(n).dom();
                    return n.dom() === t.activeElement;
                })(n.element());
            },
    });
    let hg = /* */ Object.freeze({
        exhibit: function(n, t) {
            let e = t.ignore ? {} : { attributes: { tabindex: '-1' } };
            return nr(e);
        },
        events(e) {
                return so(
                    [
                        mo(si(), function(n, t) {
                            $d(n, e), t.stop();
                        }),
                    ].concat(
                        e.stopMousedown
                            ? [
                                  mo(qr(), function(n, t) {
                                      t.event().prevent();
                                  }),
                              ]
                            : [],
                    ),
                );
            },
    });
    let vg = [Ku('onFocus'), St('stopMousedown', !1), St('ignore', !1)];
    var bg = xa({ fields: vg, name: 'focusing', active: hg, apis: pg });
    var yg = function(n, t, e, o) {
        (o ? tm : em)(n, t, e);
    };
    let xg = /* */ Object.freeze({
        onLoad: om,
        toggle: nm,
        isOn(n, t, e) {
                return e.get();
            },
        on: tm,
        off: em,
        set: yg,
    });
    let wg = /* */ Object.freeze({
        exhibit: function(n, t, e) {
            return nr({});
        },
        events: function(n, t) {
            let e = (function(t, e, o) {
                    return Hi(function(n) {
                        o(n, t, e);
                    });
                })(n, t, nm);
                    var o = pa(n, t, om);
            return so(H([n.toggleOnExecute ? [e] : [], [o]]));
        },
    });
    let Sg = function(n, t, e) {
        zo(n.element(), 'aria-expanded', e);
    };
    let Cg = [
        St('selected', !1),
        ht('toggleClass'),
        St('toggleOnExecute', !0),
        Ct(
            'aria',
            { mode: 'none' },
            it('mode', {
                pressed: [
                    St('syncWithExpanded', !1),
                    Zu('update', function(n, t, e) {
                        zo(n.element(), 'aria-pressed', e),
                            t.syncWithExpanded && Sg(n, t, e);
                    }),
                ],
                checked: [
                    Zu('update', function(n, t, e) {
                        zo(n.element(), 'aria-checked', e);
                    }),
                ],
                expanded: [Zu('update', Sg)],
                selected: [
                    Zu('update', function(n, t, e) {
                        zo(n.element(), 'aria-selected', e);
                    }),
                ],
                none: [Zu('update', Z)],
            }),
        ),
    ];
    var kg = xa({
        fields: Cg,
        name: 'toggling',
        active: wg,
        apis: xg,
        state:
            ((wm = !1),
            {
                init: function() {
                    let t = ye(wm);
                    return {
                        get: function() {
                            return t.get();
                        },
                        set: function(n) {
                            return t.set(n);
                        },
                        clear: function() {
                            return t.set(wm);
                        },
                        readState: function() {
                            return t.get();
                        },
                    };
                },
            }),
    });
    var Og = 'alloy.item-hover';
    var Eg = 'alloy.item-focus';
    var Tg = nn(Og);
    var Bg = nn(Eg);
    var Dg = [
        ct('data'),
        ct('components'),
        ct('dom'),
        St('hasSubmenu', !1),
        ht('toggling'),
        tl('itemBehaviours', [kg, bg, dg, nl]),
        St('ignoreFocus', !1),
        St('domModification', {}),
        Zu('builder', function(n) {
            return {
                dom: n.dom,
                domModification: N({ ...n.domModification}, {
                    attributes: N(
                        N(
                            N(
                                {
                                    role: n.toggling.isSome()
                                        ? 'menuitemcheckbox'
                                        : 'menuitem',
                                },
                                n.domModification.attributes,
                            ),
                            { 'aria-haspopup': n.hasSubmenu },
                        ),
                        n.hasSubmenu ? { 'aria-expanded': !1 } : {},
                    ),
                }),
                behaviours: el(n.itemBehaviours, [
                    n.toggling.fold(kg.revoke, function(n) {
                        return kg.config(N({ aria: { mode: 'checked' } }, n));
                    }),
                    bg.config({
                        ignore: n.ignoreFocus,
                        stopMousedown: n.ignoreFocus,
                        onFocus: function(n) {
                            am(n);
                        },
                    }),
                    dg.config({ mode: 'execution' }),
                    nl.config({
                        store: { mode: 'memory', initialValue: n.data },
                    }),
                    Jd(
                        'item-type-events',
                        g(rm(), [mo(Qr(), um), mo(gi(), bg.focus)]),
                    ),
                ]),
                components: n.components,
                eventOrder: n.eventOrder,
            };
        }),
        St('eventOrder', {}),
    ];
    var Ag = [
        ct('dom'),
        ct('components'),
        Zu('builder', function(n) {
            return {
                dom: n.dom,
                components: n.components,
                events: so([
                    (function(n) {
                        return mo(n, function(n, t) {
                            t.stop();
                        });
                    })(gi()),
                ]),
            };
        }),
    ];
    var _g = nn([
        wl({
            name: 'widget',
            overrides: function(t) {
                return {
                    behaviours: ya([
                        nl.config({
                            store: {
                                mode: 'manual',
                                getValue: function(n) {
                                    return t.data;
                                },
                                setValue: function() {},
                            },
                        }),
                    ]),
                };
            },
        }),
    ]);
    var Mg = [
        ct('uid'),
        ct('data'),
        ct('components'),
        ct('dom'),
        St('autofocus', !1),
        St('ignoreFocus', !1),
        tl('widgetBehaviours', [nl, bg, dg]),
        St('domModification', {}),
        ef(_g()),
        Zu('builder', function(e) {
            function o(n) {
                return Ks(n, e, 'widget').map(function(n) {
                    return dg.focusIn(n), n;
                });
            }
            function n(n, t) {
                return (
                    Ml(t.event().target()) ||
                        (e.autofocus && t.setSource(n.element())),
                    on.none()
                );
            }
            var t = Ys(0, e, _g());
                    var r = qs('item-widget', e, t.internals());
            return {
                dom: e.dom,
                components: r,
                domModification: e.domModification,
                events: so([
                    Hi(function(n, t) {
                        o(n).each(function(n) {
                            t.stop();
                        });
                    }),
                    mo(Qr(), um),
                    mo(gi(), function(n, t) {
                        e.autofocus ? o(n) : bg.focus(n);
                    }),
                ]),
                behaviours: el(e.widgetBehaviours, [
                    nl.config({
                        store: { mode: 'memory', initialValue: e.data },
                    }),
                    bg.config({
                        ignore: e.ignoreFocus,
                        onFocus: function(n) {
                            am(n);
                        },
                    }),
                    dg.config({
                        mode: 'special',
                        focusIn: e.autofocus
                            ? function(n) {
                                  o(n);
                              }
                            : sc(),
                        onLeft: n,
                        onRight: n,
                        onEscape(n, t) {
                                return bg.isFocused(n) || e.autofocus
                                    ? (e.autofocus && t.setSource(n.element()),
                                      on.none())
                                    : (bg.focus(n), on.some(!0));
                            },
                    }),
                ]),
            };
        }),
    ];
    let Fg = it('type', { widget: Mg, item: Dg, separator: Ag });
    var Ig = nn([
        kl({
            factory: {
                sketch: function(n) {
                    var t = ot('menu.spec item', Fg, n);
                    return t.builder(t);
                },
            },
            name: 'items',
            unit: 'item',
            defaults: function(n, t) {
                return t.hasOwnProperty('uid')
                    ? t
                    : N({ ...t}, { uid: qo('item') });
            },
            overrides: function(n, t) {
                return {
                    type: t.type,
                    ignoreFocus: n.fakeFocus,
                    domModification: { classes: [n.markers.item] },
                };
            },
        }),
    ]);
    var Rg = nn([
        ct('value'),
        ct('items'),
        ct('dom'),
        ct('components'),
        St('eventOrder', {}),
        Is('menuBehaviours', [cd, nl, nd, dg]),
        Ct(
            'movement',
            { mode: 'menu', moveOnTab: !0 },
            it('mode', {
                grid: [
                    Ya(),
                    Zu('config', function(n, t) {
                        return {
                            mode: 'flatgrid',
                            selector: `.${  n.markers.item}`,
                            initSize: {
                                numColumns: t.initSize.numColumns,
                                numRows: t.initSize.numRows,
                            },
                            focusManager: n.focusManager,
                        };
                    }),
                ],
                matrix: [
                    Zu('config', function(n, t) {
                        return {
                            mode: 'matrix',
                            selectors: {
                                row: t.rowSelector,
                                cell: `.${  n.markers.item}`,
                            },
                            focusManager: n.focusManager,
                        };
                    }),
                    ct('rowSelector'),
                ],
                menu: [
                    St('moveOnTab', !0),
                    Zu('config', function(n, t) {
                        return {
                            mode: 'menu',
                            selector: `.${  n.markers.item}`,
                            moveOnTab: t.moveOnTab,
                            focusManager: n.focusManager,
                        };
                    }),
                ],
            }),
        ),
        st('markers', Ga()),
        St('fakeFocus', !1),
        St('focusManager', Xl()),
        Ku('onHighlight'),
    ]);
    let Vg = nn('alloy.menu-focus');
    let Ng = _l({
        name: 'Menu',
        configFields: Rg(),
        partFields: Ig(),
        factory(n, t, e, o) {
                return {
                    uid: n.uid,
                    dom: n.dom,
                    markers: n.markers,
                    behaviours: Vs(n.menuBehaviours, [
                        cd.config({
                            highlightClass: n.markers.selectedItem,
                            itemClass: n.markers.item,
                            onHighlight: n.onHighlight,
                        }),
                        nl.config({
                            store: { mode: 'memory', initialValue: n.value },
                        }),
                        nd.config({ find: on.some }),
                        dg.config(n.movement.config(n, n.movement)),
                    ]),
                    events: so([
                        mo(Bg(), function(t, e) {
                            var n = e.event();
                            t.getSystem()
                                .getByDom(n.target())
                                .each(function(n) {
                                    cd.highlight(t, n),
                                        e.stop(),
                                        io(t, Vg(), { menu: t, item: n });
                                });
                        }),
                        mo(Tg(), function(n, t) {
                            var e = t.event().item();
                            cd.highlight(n, e);
                        }),
                    ]),
                    components: t,
                    eventOrder: n.eventOrder,
                    domModification: { attributes: { role: 'menu' } },
                };
            },
    });
    var Hg = function(e, o, r, n) {
        return Nn(r, n)
            .bind(function(n) {
                return Nn(e, n).bind(function(n) {
                    var t = Hg(e, o, r, n);
                    return on.some([n].concat(t));
                });
            })
            .getOr([]);
    };
    var Pg = function(n) {
        return n.type === 'prepared' ? on.some(n.menu) : on.none();
    };
    let zg = {
        init: function() {
            function r(n, e, o) {
                return f(n).bind(function(t) {
                    return (function(e) {
                        return I(i.get(), function(n, t) {
                            return n === e;
                        });
                    })(n).bind(function(n) {
                        return e(n).map(function(n) {
                            return {
                                triggeredMenu: t,
                                triggeringItem: n,
                                triggeringPath: o,
                            };
                        });
                    });
                });
            }
            var i = ye({});
                    var u = ye({});
                    var a = ye({});
                    var c = ye(on.none());
                    var s = ye({});
                    var f = function(n) {
                        return t(n).bind(Pg);
                    };
                    var t = function(n) {
                        return Nn(u.get(), n);
                    };
                    var e = function(n) {
                    return Nn(i.get(), n);
                };
            return {
                setMenuBuilt: function(n, t) {
                    var e;
                    u.set(
                        N(
                            { ...u.get()},
                            (((e = {})[n] = { type: 'prepared', menu: t }), e),
                        ),
                    );
                },
                setContents: function(n, t, e, o) {
                    c.set(on.some(n)), i.set(e), u.set(t), s.set(o);
                    var r = cm(o, e);
                    a.set(r);
                },
                expand: function(e) {
                    return Nn(i.get(), e).map(function(n) {
                        let t = Nn(a.get(), e).getOr([]);
                        return [n].concat(t);
                    });
                },
                refresh(n) {
                        return Nn(a.get(), n);
                    },
                collapse(n) {
                        return Nn(a.get(), n).bind(function(n) {
                            return 1 < n.length
                                ? on.some(n.slice(1))
                                : on.none();
                        });
                    },
                lookupMenu: t,
                lookupItem: e,
                otherMenus(n) {
                        var t = s.get();
                        return _(wn(t), n);
                    },
                getPrimary: function() {
                    return c.get().bind(f);
                },
                getMenus: function() {
                    return u.get();
                },
                clear() {
                        i.set({}), u.set({}), a.set({}), c.set(on.none());
                    },
                isClear() {
                        return c.get().isNone();
                    },
                getTriggeringPath(n, o) {
                        var t = C(e(n).toArray(), function(n) {
                            return f(n).isSome();
                        });
                        return Nn(a.get(), n).bind(function(n) {
                            var e = A(t.concat(n));
                            return (function(n) {
                                for (var t = [], e = 0; e < n.length; e++) {
                                    var o = n[e];
                                    if (!o.isSome()) return on.none();
                                    t.push(o.getOrDie());
                                }
                                return on.some(t);
                            })(
                                B(e, function(n, t) {
                                    return r(n, o, e.slice(0, t + 1)).fold(
                                        function() {
                                            return c.get().is(n)
                                                ? []
                                                : [on.none()];
                                        },
                                        function(n) {
                                            return [on.some(n)];
                                        },
                                    );
                                }),
                            );
                        });
                    },
            };
        },
        extractPreparedMenu: Pg,
    };
    let Lg = nn('collapse-item');
    var jg = Al({
        name: 'TieredMenu',
        configFields: [
            Qu('onExecute'),
            Qu('onEscape'),
            $u('onOpenMenu'),
            $u('onOpenSubmenu'),
            $u('onRepositionMenu'),
            Ku('onCollapseMenu'),
            St('highlightImmediately', !0),
            mt('data', [ct('primary'), ct('menus'), ct('expansions')]),
            St('fakeFocus', !1),
            Ku('onHighlight'),
            Ku('onHover'),
            Xu(),
            ct('dom'),
            St('navigateOnHover', !0),
            St('stayInDom', !1),
            Is('tmenuBehaviours', [dg, cd, nd, gg]),
            St('eventOrder', {}),
        ],
        apis: {
            collapseMenu(n, t) {
                    n.collapseMenu(t);
                },
            highlightPrimary(n, t) {
                    n.highlightPrimary(t);
                },
            repositionMenus(n, t) {
                    n.repositionMenus(t);
                },
        },
        factory(a, n) {
                function e(n) {
                    var t = (function(o, r, n) {
                            return P(n, function(n, t) {
                                function e() {
                                    return Ng.sketch(
                                        N(N({ dom: n.dom }, n), {
                                            value: t,
                                            items: n.items,
                                            markers: a.markers,
                                            fakeFocus: a.fakeFocus,
                                            onHighlight: a.onHighlight,
                                            focusManager: a.fakeFocus
                                                ? Yl()
                                                : Xl(),
                                        }),
                                    );
                                }
                                return t === r
                                    ? {
                                          type: 'prepared',
                                          menu: o.getSystem().build(e()),
                                      }
                                    : { type: 'notbuilt', nbMenu: e };
                            });
                        })(n, a.data.primary, a.data.menus),
                        e = o();
                    return (
                        g.setContents(a.data.primary, t, a.data.expansions, e),
                        g.getPrimary()
                    );
                }
                function c(n) {
                    return nl.getValue(n).value;
                }
                function u(t, n) {
                    cd.highlight(t, n),
                        cd
                            .getHighlighted(n)
                            .orThunk(function() {
                                return cd.getFirst(n);
                            })
                            .each(function(n) {
                                ao(t, n.element(), gi());
                            });
                }
                function s(t, n) {
                    return Du(
                        S(n, function(n) {
                            return t.lookupMenu(n).bind(function(n) {
                                return 'prepared' === n.type
                                    ? on.some(n.menu)
                                    : on.none();
                            });
                        }),
                    );
                }
                function f(t, n, e) {
                    var o = s(n, n.otherMenus(e));
                    bn(o, function(n) {
                        hr(n.element(), [a.markers.backgroundMenu]),
                            a.stayInDom || gg.remove(t, n);
                    });
                }
                function l(n, o) {
                    var t = (function(o) {
                        return r.get().getOrThunk(function() {
                            var e = {},
                                n = Lc(o.element(), '.' + a.markers.item),
                                t = C(n, function(n) {
                                    return 'true' === Lo(n, 'aria-haspopup');
                                });
                            return (
                                bn(t, function(n) {
                                    o.getSystem()
                                        .getByDom(n)
                                        .each(function(n) {
                                            var t = c(n);
                                            e[t] = n;
                                        });
                                }),
                                r.set(on.some(e)),
                                e
                            );
                        });
                    })(n);
                    Cn(t, function(n, t) {
                        var e = vn(o, t);
                        zo(n.element(), 'aria-expanded', e);
                    });
                }
                function d(o, r, i) {
                    return on.from(i[0]).bind(function(n) {
                        return r.lookupMenu(n).bind(function(n) {
                            if ('notbuilt' === n.type) return on.none();
                            var t = n.menu,
                                e = s(r, i.slice(1));
                            return (
                                bn(e, function(n) {
                                    lr(n.element(), a.markers.backgroundMenu);
                                }),
                                Qe(t.element()) || gg.append(o, cu(t)),
                                hr(t.element(), [a.markers.backgroundMenu]),
                                u(o, t),
                                f(o, r, i),
                                on.some(t)
                            );
                        });
                    });
                }
                var m,
                    t,
                    r = ye(on.none()),
                    g = zg.init(),
                    o = function(n) {
                        return P(a.data.menus, function(n, t) {
                            return B(n.items, function(n) {
                                return 'separator' === n.type
                                    ? []
                                    : [n.data.value];
                            });
                        });
                    };
                ((t = m = m || {})[(t.HighlightSubmenu = 0)] =
                    'HighlightSubmenu'),
                    (t[(t.HighlightParent = 1)] = 'HighlightParent');
                function i(r, i, u) {
                    void 0 === u && (u = m.HighlightSubmenu);
                    var n = c(i);
                    return g.expand(n).bind(function(o) {
                        return (
                            l(r, o),
                            on.from(o[0]).bind(function(e) {
                                return g.lookupMenu(e).bind(function(n) {
                                    var t = (function(n, t, e) {
                                        if ('notbuilt' !== e.type)
                                            return e.menu;
                                        var o = n.getSystem().build(e.nbMenu());
                                        return g.setMenuBuilt(t, o), o;
                                    })(r, e, n);
                                    return (
                                        Qe(t.element()) || gg.append(r, cu(t)),
                                        a.onOpenSubmenu(r, i, t, A(o)),
                                        u === m.HighlightSubmenu
                                            ? (cd.highlightFirst(t), d(r, g, o))
                                            : (cd.dehighlightAll(t), on.some(i))
                                    );
                                });
                            })
                        );
                    });
                }
                function p(t, e) {
                    var n = c(e);
                    return g.collapse(n).bind(function(n) {
                        return (
                            l(t, n),
                            d(t, g, n).map(function(n) {
                                return a.onCollapseMenu(t, e, n), n;
                            })
                        );
                    });
                }
                function h(e) {
                    return function(t, n) {
                        return Eu(n.getSource(), '.' + a.markers.item).bind(
                            function(n) {
                                return t
                                    .getSystem()
                                    .getByDom(n)
                                    .toOption()
                                    .bind(function(n) {
                                        return e(t, n).map(function() {
                                            return !0;
                                        });
                                    });
                            },
                        );
                    };
                }
                function v(n) {
                    return cd.getHighlighted(n).bind(cd.getHighlighted);
                }
                var b = so(
                        [
                            mo(Vg(), function(e, o) {
                                var n = o.event().item();
                                g.lookupItem(c(n)).each(function() {
                                    var n = o.event().menu();
                                    cd.highlight(e, n);
                                    var t = c(o.event().item());
                                    g.refresh(t).each(function(n) {
                                        return f(e, g, n);
                                    });
                                });
                            }),
                            Hi(function(t, n) {
                                var e = n.event().target();
                                t.getSystem()
                                    .getByDom(e)
                                    .each(function(n) {
                                        0 === c(n).indexOf('collapse-item') &&
                                            p(t, n),
                                            i(t, n, m.HighlightSubmenu).fold(
                                                function() {
                                                    a.onExecute(t, n);
                                                },
                                                function() {},
                                            );
                                    });
                            }),
                            Ri(function(t, n) {
                                e(t).each(function(n) {
                                    gg.append(t, cu(n)),
                                        a.onOpenMenu(t, n),
                                        a.highlightImmediately && u(t, n);
                                });
                            }),
                        ].concat(
                            a.navigateOnHover
                                ? [
                                      mo(Tg(), function(n, t) {
                                          var e = t.event().item();
                                          !(function(t, n) {
                                              var e = c(n);
                                              g.refresh(e).bind(function(n) {
                                                  return l(t, n), d(t, g, n);
                                              });
                                          })(n, e),
                                              i(n, e, m.HighlightParent),
                                              a.onHover(n, e);
                                      }),
                                  ]
                                : [],
                        ),
                    ),
                    y = {
                        collapseMenu: function(t) {
                            v(t).each(function(n) {
                                p(t, n);
                            });
                        },
                        highlightPrimary: function(t) {
                            g.getPrimary().each(function(n) {
                                u(t, n);
                            });
                        },
                        repositionMenus: function(o) {
                            g.getPrimary()
                                .bind(function(t) {
                                    return v(o)
                                        .bind(function(n) {
                                            var t = c(n),
                                                e = R(g.getMenus()),
                                                o = Du(
                                                    S(
                                                        e,
                                                        zg.extractPreparedMenu,
                                                    ),
                                                );
                                            return g.getTriggeringPath(
                                                t,
                                                function(n) {
                                                    return (function(n, t, e) {
                                                        return Au(t, function(
                                                            n,
                                                        ) {
                                                            if (
                                                                !n
                                                                    .getSystem()
                                                                    .isConnected()
                                                            )
                                                                return on.none();
                                                            var t = cd.getCandidates(
                                                                n,
                                                            );
                                                            return E(
                                                                t,
                                                                function(n) {
                                                                    return (
                                                                        c(n) ===
                                                                        e
                                                                    );
                                                                },
                                                            );
                                                        });
                                                    })(0, o, n);
                                                },
                                            );
                                        })
                                        .map(function(n) {
                                            return {
                                                primary: t,
                                                triggeringPath: n,
                                            };
                                        });
                                })
                                .fold(
                                    function() {
                                        (function(n) {
                                            return on
                                                .from(n.components()[0])
                                                .filter(function(n) {
                                                    return (
                                                        'menu' ===
                                                        Lo(n.element(), 'role')
                                                    );
                                                });
                                        })(o).each(function(n) {
                                            a.onRepositionMenu(o, n, []);
                                        });
                                    },
                                    function(n) {
                                        var t = n.primary,
                                            e = n.triggeringPath;
                                        a.onRepositionMenu(o, t, e);
                                    },
                                );
                        },
                    };
                return {
                    uid: a.uid,
                    dom: a.dom,
                    markers: a.markers,
                    behaviours: Vs(a.tmenuBehaviours, [
                        dg.config({
                            mode: 'special',
                            onRight: h(function(n, t) {
                                return Ml(t.element())
                                    ? on.none()
                                    : i(n, t, m.HighlightSubmenu);
                            }),
                            onLeft: h(function(n, t) {
                                return Ml(t.element()) ? on.none() : p(n, t);
                            }),
                            onEscape: h(function(n, t) {
                                return p(n, t).orThunk(function() {
                                    return a.onEscape(n, t).map(function() {
                                        return n;
                                    });
                                });
                            }),
                            focusIn: function(t, n) {
                                g.getPrimary().each(function(n) {
                                    ao(t, n.element(), gi());
                                });
                            },
                        }),
                        cd.config({
                            highlightClass: a.markers.selectedMenu,
                            itemClass: a.markers.menu,
                        }),
                        nd.config({
                            find: function(n) {
                                return cd.getHighlighted(n);
                            },
                        }),
                        gg.config({}),
                    ]),
                    eventOrder: a.eventOrder,
                    apis: y,
                    events: b,
                };
            },
        extraApis: {
            tieredData(n, t, e) {
                    return { primary: n, menus: t, expansions: e };
                },
            singleData(n, t) {
                    return { primary: n, menus: q(n, t), expansions: {} };
                },
            collapseItem(n) {
                    return { value: Yo(Lg()), meta: { text: n } };
                },
        },
    });
    var Ug = Al({
        name: 'InlineView',
        configFields: [
            ct('lazySink'),
            Ku('onShow'),
            Ku('onHide'),
            xt('onEscape'),
            Is('inlineBehaviours', [Lf, nl, dc]),
            wt('fireDismissalEventInstead', [St('event', Ei())]),
            wt('fireRepositionEventInstead', [St('event', Ti())]),
            St('getRelated', on.none),
            St('eventOrder', on.none),
        ],
        factory: function(i, n) {
            function t(e) {
                Lf.isOpen(e) &&
                    nl.getValue(e).each(function(n) {
                        switch (n.mode) {
                            case 'menu':
                                Lf.getState(e).each(function(n) {
                                    jg.repositionMenus(n);
                                });
                                break;
                            case 'position':
                                var t = i.lazySink(e).getOrDie();
                                _f.positionWithinBounds(
                                    t,
                                    n.anchor,
                                    e,
                                    n.getBounds(),
                                );
                        }
                    });
            }
            var o = function(n, t, e, o) {
                    r(n, t, e, function() {
                        return o.map(function(n) {
                            return wu(n);
                        });
                    });
                };
                    var r = function(n, t, e, o) {
                        var r = i.lazySink(n).getOrDie();
                        Lf.openWhileCloaked(n, e, function() {
                            return _f.positionWithinBounds(r, t, n, o());
                        }),
                            nl.setValue(
                                n,
                                on.some({
                                    mode: 'position',
                                    anchor: t,
                                    getBounds: o,
                                }),
                            );
                    };
                    var u = function(n, t, e, o) {
                        var r = (function(n, t, r, e, i) {
                            function u() {
                                return n.lazySink(t);
                            }
                            function a(n) {
                                return (function(n) {
                                    return 2 === n.length;
                                })(n)
                                    ? o
                                    : {};
                            }
                            var o =
                                'horizontal' === e.type
                                    ? {
                                          layouts: {
                                              onLtr: function() {
                                                  return ma();
                                              },
                                              onRtl: function() {
                                                  return ga();
                                              },
                                          },
                                      }
                                    : {};
                            return jg.sketch({
                                dom: { tag: 'div' },
                                data: e.data,
                                markers: e.menu.markers,
                                onEscape: function() {
                                    return (
                                        Lf.close(t),
                                        n.onEscape.map(function(n) {
                                            return n(t);
                                        }),
                                        on.some(!0)
                                    );
                                },
                                onExecute: function() {
                                    return on.some(!0);
                                },
                                onOpenMenu: function(n, t) {
                                    _f.positionWithinBounds(
                                        u().getOrDie(),
                                        r,
                                        t,
                                        i(),
                                    );
                                },
                                onOpenSubmenu: function(n, t, e, o) {
                                    var r = u().getOrDie();
                                    _f.position(
                                        r,
                                        N({ anchor: 'submenu', item: t }, a(o)),
                                        e,
                                    );
                                },
                                onRepositionMenu: function(n, t, e) {
                                    var o = u().getOrDie();
                                    _f.positionWithinBounds(o, r, t, i()),
                                        bn(e, function(n) {
                                            var t = a(n.triggeringPath);
                                            _f.position(
                                                o,
                                                N(
                                                    {
                                                        anchor: 'submenu',
                                                        item: n.triggeringItem,
                                                    },
                                                    t,
                                                ),
                                                n.triggeredMenu,
                                            );
                                        });
                                },
                            });
                        })(i, n, t, e, o);
                        Lf.open(n, r),
                            nl.setValue(n, on.some({ mode: 'menu', menu: r }));
                    };
                    var e = {
                    setContent(n, t) {
                            Lf.setContent(n, t);
                        },
                    showAt(n, t, e) {
                            o(n, t, e, on.none());
                        },
                    showWithin: o,
                    showWithinBounds: r,
                    showMenuAt: function(n, t, e) {
                        u(n, t, e, function() {
                            return on.none();
                        });
                    },
                    showMenuWithinBounds: u,
                    hide: function(n) {
                        nl.setValue(n, on.none()), Lf.close(n);
                    },
                    getContent(n) {
                            return Lf.getState(n);
                        },
                    reposition: t,
                    isOpen: Lf.isOpen,
                };
            return {
                uid: i.uid,
                dom: i.dom,
                behaviours: Vs(i.inlineBehaviours, [
                    Lf.config({
                        isPartOf: function(n, t, e) {
                            return (
                                ju(t, e) ||
                                (function(n, t) {
                                    return i.getRelated(n).exists(function(n) {
                                        return ju(n, t);
                                    });
                                })(n, e)
                            );
                        },
                        getAttachPoint: function(n) {
                            return i.lazySink(n).getOrDie();
                        },
                        onOpen: function(n) {
                            i.onShow(n);
                        },
                        onClose: function(n) {
                            i.onHide(n);
                        },
                    }),
                    nl.config({
                        store: { mode: 'memory', initialValue: on.none() },
                    }),
                    dc.config({
                        channels: N(
                            {
                                    
                                    ...Ts(
                                        N(
                                            { isExtraPart: nn(!1) },
                                            i.fireDismissalEventInstead
                                                .map(function(n) {
                                                    return {
                                                        fireEventInstead: {
                                                            event: n.event,
                                                        },
                                                    };
                                                })
                                                .getOr({}),
                                        ),
                                    ),
                                },
                            Bs(
                                N(
                                    {
                                            isExtraPart: nn(!1),
                                            ...i.fireRepositionEventInstead
                                                .map(function(n) {
                                                    return {
                                                        fireEventInstead: {
                                                            event: n.event,
                                                        },
                                                    };
                                                })
                                                .getOr({}),
                                        },
                                    { doReposition: t },
                                ),
                            ),
                        ),
                    }),
                ]),
                eventOrder: i.eventOrder,
                apis: e,
            };
        },
        apis: {
            showAt(n, t, e, o) {
                    n.showAt(t, e, o);
                },
            showWithin: function(n, t, e, o, r) {
                n.showWithin(t, e, o, r);
            },
            showWithinBounds: function(n, t, e, o, r) {
                n.showWithinBounds(t, e, o, r);
            },
            showMenuAt: function(n, t, e, o) {
                n.showMenuAt(t, e, o);
            },
            showMenuWithinBounds: function(n, t, e, o, r) {
                n.showMenuWithinBounds(t, e, o, r);
            },
            hide: function(n, t) {
                n.hide(t);
            },
            isOpen: function(n, t) {
                return n.isOpen(t);
            },
            getContent: function(n, t) {
                return n.getContent(t);
            },
            setContent: function(n, t, e) {
                n.setContent(t, e);
            },
            reposition(n, t) {
                    n.reposition(t);
                },
        },
    });
    var Wg = function(n, t, e) {
        return qa(fm(n, t), dm(n), e.innerNorth(), tc(), 'layout-n');
    };
    var Gg = function(n, t, e) {
        return qa(fm(n, t), mm(n, t), e.innerSouth(), nc(), 'layout-s');
    };
    var Xg = Al({
        name: 'Button',
        factory(n) {
                function e(t) {
                    return Nn(n.dom, 'attributes').bind(function(n) {
                        return Nn(n, t);
                    });
                }
                var t = im(n.action),
                    o = n.dom.tag;
                return {
                    uid: n.uid,
                    dom: n.dom,
                    components: n.components,
                    events: t,
                    behaviours: el(n.buttonBehaviours, [
                        bg.config({}),
                        dg.config({
                            mode: 'execution',
                            useSpace: !0,
                            useEnter: !0,
                        }),
                    ]),
                    domModification: {
                        attributes: (function() {
                            if ('button' !== o)
                                return { role: e('role').getOr('button') };
                            var n = e('type').getOr('button'),
                                t = e('role')
                                    .map(function(n) {
                                        return { role: n };
                                    })
                                    .getOr({});
                            return N({ type: n }, t);
                        })(),
                    },
                    eventOrder: n.eventOrder,
                };
            },
        configFields: [
            St('uid', undefined),
            ct('dom'),
            St('components', []),
            tl('buttonBehaviours', [bg, dg]),
            ht('action'),
            ht('role'),
            St('eventOrder', {}),
        ],
    });
    var Yg = {
        success: 'checkmark',
        error: 'warning',
        err: 'error',
        warning: 'warning',
        warn: 'warning',
        info: 'info',
    };
    var qg = Al({
        name: 'Notification',
        factory: function(t) {
            function e(n) {
                return {
                    dom: {
                        tag: 'div',
                        classes: ['tox-bar'],
                        attributes: { style: `width: ${  n  }%` },
                    },
                };
            }
            function o(n) {
                return {
                    dom: {
                        tag: 'div',
                        classes: ['tox-text'],
                        innerHtml: `${n  }%`,
                    },
                };
            }
            var r = bm({
                    dom: {
                        tag: 'p',
                        innerHtml: t.translationProvider(t.text),
                    },
                    behaviours: ya([gg.config({})]),
                });
                    var i = bm({
                        dom: {
                            tag: 'div',
                            classes: t.progress
                                ? ['tox-progress-bar', 'tox-progress-indicator']
                                : ['tox-progress-bar'],
                        },
                        components: [
                            {
                                dom: {
                                    tag: 'div',
                                    classes: ['tox-bar-container'],
                                },
                                components: [e(0)],
                            },
                            o(0),
                        ],
                        behaviours: ya([gg.config({})]),
                    });
                    var n = {
                        updateProgress: function(n, t) {
                            n.getSystem().isConnected() &&
                                i.getOpt(n).each(function(n) {
                                    gg.set(n, [
                                        {
                                            dom: {
                                                tag: 'div',
                                                classes: ['tox-bar-container'],
                                            },
                                            components: [e(t)],
                                        },
                                        o(t),
                                    ]);
                                });
                        },
                        updateText: function(n, t) {
                            if (n.getSystem().isConnected()) {
                                var e = r.get(n);
                                gg.set(e, [Rr(t)]);
                            }
                        },
                    };
                    var u = H([
                    t.icon.toArray(),
                    t.level.toArray(),
                    t.level
                        .bind(function(n) {
                            return on.from(Yg[n]);
                        })
                        .toArray(),
                ]);
            return {
                uid: t.uid,
                dom: {
                    tag: 'div',
                    attributes: { role: 'alert' },
                    classes: t.level
                        .map(function(n) {
                            return [
                                'tox-notification',
                                'tox-notification--in',
                                `tox-notification--${  n}`,
                            ];
                        })
                        .getOr(['tox-notification', 'tox-notification--in']),
                },
                components: [
                    {
                        dom: {
                            tag: 'div',
                            classes: ['tox-notification__icon'],
                            innerHtml: (function(n, t) {
                                return Au(n, function(n) {
                                    return on.from(t()[n]);
                                }).getOrThunk(function() {
                                    return ym(t);
                                });
                            })(u, t.iconProvider),
                        },
                    },
                    {
                        dom: {
                            tag: 'div',
                            classes: ['tox-notification__body'],
                        },
                        components: [r.asSpec()],
                        behaviours: ya([gg.config({})]),
                    },
                ]
                    .concat(t.progress ? [i.asSpec()] : [])
                    .concat(
                        Xg.sketch({
                            dom: {
                                tag: 'button',
                                classes: [
                                    'tox-notification__dismiss',
                                    'tox-button',
                                    'tox-button--naked',
                                    'tox-button--icon',
                                ],
                            },
                            components: [
                                {
                                    dom: {
                                        tag: 'div',
                                        classes: ['tox-icon'],
                                        innerHtml: xm('close', t.iconProvider),
                                        attributes: {
                                            'aria-label': t.translationProvider(
                                                'Close',
                                            ),
                                        },
                                    },
                                },
                            ],
                            action(n) {
                                    t.onAction(n);
                                },
                        }),
                    ),
                apis: n,
            };
        },
        configFields: [
            ht('level'),
            ct('progress'),
            ct('icon'),
            ct('onAction'),
            ct('text'),
            ct('iconProvider'),
            ct('translationProvider'),
        ],
        apis: {
            updateProgress: function(n, t, e) {
                n.updateProgress(t, e);
            },
            updateText: function(n, t, e) {
                n.updateText(t, e);
            },
        },
    });
    let Kg = tinymce.util.Tools.resolve('tinymce.util.Delay');
    function Jg(n, u, o) {
        const a = u.backstage;
        return {
            open(n, t) {
                function e() {
                    t(), Ug.hide(i);
                }
                var r = au(
                        qg.sketch({
                            text: n.text,
                            level: vn(
                                ['success', 'error', 'warning', 'warn', 'info'],
                                n.type,
                            )
                                ? n.type
                                : undefined,
                            progress: !0 === n.progressBar,
                            icon: on.from(n.icon),
                            onAction: e,
                            iconProvider: a.shared.providers.icons,
                            translationProvider: a.shared.providers.translate,
                        }),
                    );
                    var i = au(
                        Ug.sketch({
                            dom: {
                                tag: 'div',
                                classes: ['tox-notifications-container'],
                            },
                            lazySink: u.backstage.shared.getSink,
                            fireDismissalEventInstead: {},
                        }),
                    );
                return (
                    o.add(i),
                    n.timeout > 0 &&
                        Kg.setTimeout(function() {
                            e();
                        }, n.timeout),
                    {
                        close: e,
                        moveTo(n, t) {
                            Ug.showAt(
                                i,
                                { anchor: 'makeshift', x: n, y: t },
                                cu(r),
                            );
                        },
                        moveRel(n, t) {
                            if ('banner' !== t) {
                                var e = (function(n) {
                                        switch (n) {
                                            case 'bc-bc':
                                                return Gg;
                                            case 'tc-tc':
                                                return Wg;
                                            case 'tc-bc':
                                                return rc;
                                            case 'bc-tc':
                                            default:
                                                return ic;
                                        }
                                    })(t),
                                    o = {
                                        anchor: 'node',
                                        root: Lr(),
                                        node: on.some(we.fromDom(n)),
                                        layouts: {
                                            onRtl: function() {
                                                return [e];
                                            },
                                            onLtr: function() {
                                                return [e];
                                            },
                                        },
                                    };
                                Ug.showAt(i, o, cu(r));
                            } else
                                Ug.showAt(
                                    i,
                                    u.backstage.shared.anchors.banner(),
                                    cu(r),
                                );
                        },
                        text(n) {
                            qg.updateText(r, n);
                        },
                        settings: n,
                        getEl() {
                            return r.element().dom();
                        },
                        progressBar: {
                            value(n) {
                                qg.updateProgress(r, n);
                            },
                        },
                    }
                );
            },
            close(n) {
                n.close();
            },
            reposition(n) {
                !(function(n) {
                    bn(n, function(n) {
                        return n.moveTo(0, 0);
                    });
                })(n),
                    (function(e) {
                        e.length > 0 &&
                            (yn(e).each(function(n) {
                                return n.moveRel(null, 'banner');
                            }),
                            bn(e, function(n, t) {
                                t > 0 && n.moveRel(e[t - 1].getEl(), 'bc-tc');
                            }));
                    })(n);
            },
            getArgs(n) {
                return n.settings;
            },
        };
    }
    function $g(e, o) {
        let r = null;
        return {
            cancel() {
                r !== null && (v.clearTimeout(r), (r = null));
            },
            throttle() {
                for (var n = [], t = 0; t < arguments.length; t++)
                    n[t] = arguments[t];
                r !== null && v.clearTimeout(r),
                    (r = v.setTimeout(function() {
                        e.apply(null, n), (r = null);
                    }, o));
            },
        };
    }
    function Qg(n, t, e, o, r) {
        const i = new _p(t, r || n.getRoot());
        return Ip(n, t, on.some(e), o, i.prev, on.none());
    }
    function Zg(t, e) {
        return Rp(we.fromDom(t.selection.getNode())).getOrThunk(function() {
            const n = we.fromHtml(
                '<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',
                t.getDoc(),
            );
            return (
                Pi(n, we.fromDom(e.extractContents())),
                e.insertNode(n.dom()),
                To(n).each(function(n) {
                    return n.dom().normalize();
                }),
                Rc(n).map(function(n) {
                    t.selection.setCursorLocation(
                        n.dom(),
                        (function(n) {
                            return Je(n) === 'img'
                                ? 1
                                : _c(n).fold(
                                      function() {
                                          return Do(n).length;
                                      },
                                      function(n) {
                                          return n.length;
                                      },
                                  );
                        })(n),
                    );
                }),
                n
            );
        });
    }
    function np(n, t) {
        return n
            .toString()
            .substring(t.length)
            .replace(/\u00A0/g, ' ')
            .replace(/\uFEFF/g, '');
    }
    function tp(n, u, a, c) {
        return (
            void 0 === c && (c = 0),
            (function(n) {
                return n.collapsed && n.startContainer.nodeType === 3;
            })(u)
                ? Qg(n, u.startContainer, u.startOffset, function(e, o, r, n) {
                      const i = n.getOr(r.length);
                      return (function(n, t, e, o) {
                          let r;
                          for (r = t - 1; r >= 0; r--) {
                              const i = n.charAt(r);
                              if (Vp.test(i)) return on.none();
                              if (i === e) break;
                          }
                          return r === -1 || t - r < o
                              ? on.none()
                              : on.some(n.substring(r + 1, t));
                      })(r, i, a, 1).fold(
                          function() {
                              return r.match(Vp) ? e.abort() : e.kontinue();
                          },
                          function(n) {
                              const t = u.cloneRange();
                              return (
                                  t.setStart(o, i - n.length - 1),
                                  t.setEnd(u.endContainer, u.endOffset),
                                  r.length < c
                                      ? e.abort()
                                      : e.finish({
                                            text: np(t, a),
                                            range: t,
                                            triggerChar: a,
                                        })
                              );
                          },
                      );
                  }).fold(on.none, on.none, on.some)
                : on.none()
        );
    }
    function ep(e, n, o, t) {
        return (
            void 0 === t && (t = 0),
            Rp(we.fromDom(n.startContainer)).fold(
                function() {
                    return tp(e, n, o, t);
                },
                function(n) {
                    const t = e.createRng();
                    return (
                        t.selectNode(n.dom()),
                        on.some({ range: t, text: np(t, o), triggerChar: o })
                    );
                },
            )
        );
    }
    function op(n, t) {
        return { element: n, offset: t };
    }
    function rp(t, e) {
        const n = e();
        var o = t.selection.getRng();
        return (function(t, e, n) {
            return Au(n.triggerChars, function(n) {
                return ep(t, e, n);
            });
        })(t.dom, o, n).bind(function(n) {
            return Lp(t, e, n);
        });
    }
    function ip(n) {
        const t = n.ui.registry.getAll().popups;
        var e = P(t, function(n) {
            return (function(n) {
                return tt('Autocompleter', Wp, n);
            })(n).fold(
                function(n) {
                    throw new Error(le(n));
                },
                function(n) {
                    return n;
                },
            );
        });
        var o = (function(n) {
            var t = {};
            return (
                bn(n, function(n) {
                    t[n] = {};
                }),
                wn(t)
            );
        })(
            On(e, function(n) {
                return n.ch;
            }),
        );
        let r = R(e);
        return {
            dataset: e,
            triggerChars: o,
            lookupByChar(t) {
                return C(r, function(n) {
                    return n.ch === t;
                });
            },
        };
    }
    function up(n, o, t) {
        const r = Lc(n.element(), `.${t}`);
        if (r.length > 0) {
            const e = T(r, function(n) {
                const t = n.dom().getBoundingClientRect().top;
                var e = r[0].dom().getBoundingClientRect().top;
                return Math.abs(t - e) > o;
            }).getOr(r.length);
            return on.some({ numColumns: e, numRows: Math.ceil(r.length / e) });
        }
        return on.none();
    }
    function ap(n, t) {
        return ya([Jd(n, t)]);
    }
    function cp(n, t, e) {
        n.getSystem().broadcastOn([nh], {});
    }
    function sp(n) {
        const t = we.fromHtml(n);
        var e = Do(t);
        let o = (function(n) {
            var t = n.dom().attributes !== undefined ? n.dom().attributes : [];
            return O(
                t,
                function(n, t) {
                    var e;
                    return t.name === 'class'
                        ? n
                        : N({ ...n}, (((e = {})[t.name] = t.value), e));
                },
                {},
            );
        })(t);
        let r = (function(n) {
            return Array.prototype.slice.call(n.dom().classList, 0);
        })(t);
        let i = e.length === 0 ? {} : { innerHtml: No(t) };
        return { tag: Je(t), classes: r, attributes: o, ...i };
    }
    function fp(n) {
        return Nn(sh, n).getOr(uh);
    }
    function lp(n) {
        return { dom: { tag: 'div', classes: [lh], innerHtml: n } };
    }
    function dp(n) {
        return {
            dom: { tag: 'div', classes: [dh] },
            components: [Rr(ih.translate(n))],
        };
    }
    function mp(n, t) {
        return {
            dom: { tag: 'div', classes: [dh] },
            components: [
                {
                    dom: { tag: n.tag, attributes: { style: n.styleAttr } },
                    components: [Rr(ih.translate(t))],
                },
            ],
        };
    }
    function gp(n) {
        return {
            dom: {
                tag: 'div',
                classes: ['tox-collection__item-accessory'],
                innerHtml: hh(n),
            },
        };
    }
    function pp(n) {
        return {
            dom: {
                tag: 'div',
                classes: [lh, 'tox-collection__item-checkmark'],
                innerHtml: xm('checkmark', n),
            },
        };
    }
    function hp(n, t, e, o, r) {
        const i = e
            ? n.checkMark.orThunk(function() {
                  return t.or(on.some('')).map(lp);
              })
            : on.none();
        let u = n.ariaLabel
            .map(function(n) {
                return { attributes: { title: ih.translate(n) } };
            })
            .getOr({});
        return {
            dom: An(
                {
                    tag: 'div',
                    classes: [uh, ah].concat(
                        r ? ['tox-collection__item-icon-rtl'] : [],
                    ),
                },
                u,
            ),
            optComponents: [
                i,
                n.htmlContent.fold(
                    function() {
                        return n.textContent.map(o);
                    },
                    function(n) {
                        return on.some(
                            (function(n) {
                                return {
                                    dom: {
                                        tag: 'div',
                                        classes: [dh],
                                        innerHtml: n,
                                    },
                                };
                            })(n),
                        );
                    },
                ),
                n.shortcutContent.map(gp),
                n.caret,
            ],
        };
    }
    function vp(n, t, e, o) {
        void 0 === o && (o = on.none());
        const r =
            ih.isRtl() &&
            n.iconContent.exists(function(n) {
                return vn(bh, n);
            });
        var i = n.iconContent
            .map(function(n) {
                return ih.isRtl() && vn(vh, n) ? `${n  }-rtl` : n;
            })
            .map(function(n) {
                return (function(n, t, e) {
                    return on
                        .from(t()[n])
                        .or(e)
                        .getOrThunk(function() {
                            return ym(t);
                        });
                })(n, t.icons, o);
            });
        var u = on.from(n.meta).fold(
            function() {
                return dp;
            },
            function(n) {
                return En(n, 'style') ? d(mp, n.style) : dp;
            },
        );
        return n.presets === 'color'
            ? (function(n, t, e, o) {
                  let r;
                  var i;
                  let u;
                  return {
                      dom:
                          ((r = ch),
                          (i = e.getOr('')),
                          (u = n
                              .map(function(n) {
                                  return ` title="${o.translate(n)}"`;
                              })
                              .getOr('')),
                          sp(
                              t === 'custom'
                                  ? `<button class="${r} tox-swatches__picker-btn"${u}>${i}</button>`
                                  : t === 'remove'
                                  ? `<div class="${r} tox-swatch--remove"${u}>${i}</div>`
                                  : `<div class="${r}" style="background-color: ${t}" data-mce-color="${t}"${u}></div>`,
                          )),
                      optComponents: [],
                  };
              })(n.ariaLabel, n.value, i, t)
            : hp(n, i, e, u, r);
    }
    function bp(n, t, e) {
        t.disabled && xh(n, t);
    }
    function yp(n, t) {
        return !0 === t.useNative && vn(yh, Je(n.element()));
    }
    function xp(n) {
        zo(n.element(), 'disabled', 'disabled');
    }
    function wp(n) {
        Uo(n.element(), 'disabled');
    }
    function Sp(n) {
        zo(n.element(), 'aria-disabled', 'true');
    }
    function Cp(n) {
        zo(n.element(), 'aria-disabled', 'false');
    }
    function kp(t, n, e) {
        n.disableClass.each(function(n) {
            mr(t.element(), n);
        }),
            (yp(t, n) ? wp : Cp)(t),
            n.onEnabled(t);
    }
    function Op(n, t) {
        return yp(n, t)
            ? (function(n) {
                  return jo(n.element(), 'disabled');
              })(n)
            : (function(n) {
                  return Lo(n.element(), 'aria-disabled') === 'true';
              })(n);
    }
    function Ep(n, t) {
        const e = n.getApi(t);
        return function(n) {
            n(e);
        };
    }
    function Tp(e, o) {
        return Ri(function(n) {
            Ep(
                e,
                n,
            )(function(n) {
                const t = e.onSetup(n);
                t !== null && t !== undefined && o.set(t);
            });
        });
    }
    function Bp(t, e) {
        return Vi(function(n) {
            return Ep(t, n)(e.get());
        });
    }
    let Dp;
    var Ap;
    var _p = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');
    var Mp = Tn([
        { aborted: [] },
        { edge: ['element'] },
        { success: ['info'] },
    ]);
    var Fp = Tn([{ abort: [] }, { kontinue: [] }, { finish: ['info'] }]);
    var Ip = function(t, e, n, o, r, i) {
        function u() {
            return i.fold(Mp.aborted, Mp.edge);
        }
        function a() {
            let n = r();
            return n ? Ip(t, n, on.none(), o, r, on.some(e)) : u();
        }
        if (
            (function(n, t) {
                return (
                    n.isBlock(t) ||
                    vn(['BR', 'IMG', 'HR', 'INPUT'], t.nodeName) ||
                    'false' === n.getContentEditable(t)
                );
            })(t, e)
        )
            return u();
        if (
            (function(n) {
                return n.nodeType === v.Node.TEXT_NODE;
            })(e)
        ) {
            let c = e.textContent;
            return o(Fp, e, c, n).fold(
                Mp.aborted,
                function() {
                    return a();
                },
                Mp.success,
            );
        }
        return a();
    };
    var Rp = function(n) {
        return Eu(n, '[data-mce-autocompleter]');
    };
    var Vp = /[\u00a0 \t\r\n]/;
    var Np = function(e, n) {
        n.on('keypress compositionend', e.onKeypress.throttle),
            n.on('remove', e.onKeypress.cancel);
        function o(n, t) {
            io(n, ti(), { raw: t });
        }
        n.on('keydown', function(t) {
            function n() {
                return e.getView().bind(cd.getHighlighted);
            }
            t.which === 8 && e.onKeypress.throttle(t),
                e.isActive() &&
                    (t.which === 27 && e.cancelIfNecessary(),
                    e.isMenuOpen()
                        ? t.which === 13
                            ? (n().each(uo), t.preventDefault())
                            : t.which === 40
                            ? (n().fold(
                                  function() {
                                      e.getView().each(cd.highlightFirst);
                                  },
                                  function(n) {
                                      o(n, t);
                                  },
                              ),
                              t.preventDefault(),
                              t.stopImmediatePropagation())
                            : (t.which !== 37 &&
                                  38 !== t.which &&
                                  t.which !== 39) ||
                              n().each(function(n) {
                                  o(n, t),
                                      t.preventDefault(),
                                      t.stopImmediatePropagation();
                              })
                        : (t.which !== 13 &&
                              t.which !== 38 &&
                              40 !== t.which) ||
                          e.cancelIfNecessary());
        }),
            n.on('NodeChange', function(n) {
                e.isActive() &&
                    !e.isProcessingAction() &&
                    Rp(we.fromDom(n.element)).isNone() &&
                    e.cancelIfNecessary();
            });
    };
    let Hp = tinymce.util.Tools.resolve('tinymce.util.Promise');
    var Pp = function(n) {
        if (
            (function(n) {
                return n.nodeType === v.Node.TEXT_NODE;
            })(n)
        )
            return op(n, n.data.length);
        let t = n.childNodes;
        return t.length > 0 ? Pp(t[t.length - 1]) : op(n, t.length);
    };
    var zp = function(n, t) {
        var e = n.childNodes;
        return e.length > 0 && t < e.length
            ? zp(e[t], 0)
            : e.length > 0 &&
              (function(n) {
                  return n.nodeType === v.Node.ELEMENT_NODE;
              })(n) &&
              e.length === t
            ? Pp(e[e.length - 1])
            : op(n, t);
    };
    var Lp = function(t, n, e, o) {
        void 0 === o && (o = {});
        var r = n();
                var i = t.selection.getRng().startContainer.nodeValue;
                var u = C(r.lookupByChar(e.triggerChar), function(n) {
                return (
                    e.text.length >= n.minChars &&
                    n.matches.getOrThunk(function() {
                        return (function(e) {
                            function o(n, t, e, o) {
                                var r = o.getOr(e.length);
                                return r === 0
                                    ? n.kontinue()
                                    : n.finish(/\s/.test(e.charAt(r - 1)));
                            }
                            return function(n) {
                                var t = zp(n.startContainer, n.startOffset);
                                return Qg(e, t.element, t.offset, o).fold(
                                    nn(!0),
                                    nn(!0),
                                    l,
                                );
                            };
                        })(t.dom);
                    })(e.range, i, e.text)
                );
            });
        if (u.length === 0) return on.none();
        var a = Hp.all(
            S(u, function(t) {
                return t.fetch(e.text, t.maxResults, o).then(function(n) {
                    return {
                        matchText: e.text,
                        items: n,
                        columns: t.columns,
                        onAction: t.onAction,
                    };
                });
            }),
        );
        return on.some({ lookupData: a, context: e });
    };
    var jp = re([ft('type'), yt('text')]);
    var Up = re([
        At('type', function() {
            return 'autocompleteitem';
        }),
        At('active', function() {
            return !1;
        }),
        At('disabled', function() {
            return !1;
        }),
        St('meta', {}),
        ft('value'),
        yt('text'),
        yt('icon'),
    ]);
    var Wp = re([
        ft('type'),
        ft('ch'),
        kt('minChars', 1),
        St('columns', 1),
        kt('maxResults', 10),
        xt('matches'),
        dt('fetch'),
        dt('onAction'),
    ]);
    var Gp = [
        Tt('disabled', !1),
        yt('text'),
        yt('shortcut'),
        ce(
            'value',
            'value',
            In(function() {
                return Yo('menuitem-value');
            }),
            de(),
        ),
        St('meta', {}),
    ];
    var Xp = re(
        [
            ft('type'),
            Bt('onSetup', function() {
                return Z;
            }),
            Bt('onAction', Z),
            yt('icon'),
        ].concat(Gp),
    );
    let Yp = re(
        [
            ft('type'),
            dt('getSubmenuItems'),
            Bt('onSetup', function() {
                return Z;
            }),
            yt('icon'),
        ].concat(Gp),
    );
    var qp = re(
        [
            ft('type'),
            Tt('active', !1),
            Bt('onSetup', function() {
                return Z;
            }),
            dt('onAction'),
        ].concat(Gp),
    );
    let Kp = re([ft('type'), Tt('active', !1), yt('icon')].concat(Gp));
    var Jp = re([
        ft('type'),
        lt('fancytype', ['inserttable', 'colorswatch']),
        Bt('onAction', Z),
    ]);
    let $p = function(n) {
        return ap(Yo('unnamed-events'), n);
    };
    let Qp = [
        ct('lazySink'),
        ct('tooltipDom'),
        St('exclusive', !0),
        St('tooltipComponents', []),
        St('delay', 300),
        Et('mode', 'normal', ['normal', 'follow-highlight']),
        St('anchor', function(n) {
            return {
                anchor: 'hotspot',
                hotspot: n,
                layouts: {
                    onLtr: nn([ic, rc, aa, sa, ca, fa]),
                    onRtl: nn([ic, rc, aa, sa, ca, fa]),
                },
            };
        }),
        Ku('onHide'),
        Ku('onShow'),
    ];
    let Zp = /* */ Object.freeze({
        init() {
                function e() {
                    o.get().each(function(n) {
                        v.clearTimeout(n);
                    });
                }
                var o = ye(on.none()),
                    t = ye(on.none()),
                    n = nn('not-implemented');
                return tu({
                    getTooltip: function() {
                        return t.get();
                    },
                    isShowing: function() {
                        return t.get().isSome();
                    },
                    setTooltip: function(n) {
                        t.set(on.some(n));
                    },
                    clearTooltip: function() {
                        t.set(on.none());
                    },
                    clearTimer: e,
                    resetTimer: function(n, t) {
                        e(),
                            o.set(
                                on.some(
                                    v.setTimeout(function() {
                                        n();
                                    }, t),
                                ),
                            );
                    },
                    readState: n,
                });
            },
    });
    var nh = Yo('tooltip.exclusive');
    var th = Yo('tooltip.show');
    let eh = Yo('tooltip.hide');
    var oh = /* */ Object.freeze({
        hideAllExclusive: cp,
        setComponents(n, t, e, o) {
                e.getTooltip().each(function(n) {
                    n.getSystem().isConnected() && gg.set(n, o);
                });
            },
    });
    let rh = xa({
        fields: Qp,
        name: 'tooltipping',
        active: /* */ Object.freeze({
            events(o, r) {
                    function e(t) {
                        r.getTooltip().each(function(n) {
                            ys(n), o.onHide(t, n), r.clearTooltip();
                        }),
                            r.clearTimer();
                    }
                    return so(
                        H([
                            [
                                mo(th, function(n) {
                                    r.resetTimer(function() {
                                        !(function(t) {
                                            if (!r.isShowing()) {
                                                cp(t);
                                                var n = o
                                                        .lazySink(t)
                                                        .getOrDie(),
                                                    e = t.getSystem().build({
                                                        dom: o.tooltipDom,
                                                        components:
                                                            o.tooltipComponents,
                                                        events: so(
                                                            'normal' === o.mode
                                                                ? [
                                                                      mo(
                                                                          Qr(),
                                                                          function(
                                                                              n,
                                                                          ) {
                                                                              ro(
                                                                                  t,
                                                                                  th,
                                                                              );
                                                                          },
                                                                      ),
                                                                      mo(
                                                                          Jr(),
                                                                          function(
                                                                              n,
                                                                          ) {
                                                                              ro(
                                                                                  t,
                                                                                  eh,
                                                                              );
                                                                          },
                                                                      ),
                                                                  ]
                                                                : [],
                                                        ),
                                                        behaviours: ya([
                                                            gg.config({}),
                                                        ]),
                                                    });
                                                r.setTooltip(e),
                                                    vs(n, e),
                                                    o.onShow(t, e),
                                                    _f.position(
                                                        n,
                                                        o.anchor(t),
                                                        e,
                                                    );
                                            }
                                        })(n);
                                    }, o.delay);
                                }),
                                mo(eh, function(n) {
                                    r.resetTimer(function() {
                                        e(n);
                                    }, o.delay);
                                }),
                                mo(di(), function(n, t) {
                                    vn(t.channels(), nh) && e(n);
                                }),
                                Vi(function(n) {
                                    e(n);
                                }),
                            ],
                            'normal' === o.mode
                                ? [
                                      mo(Zr(), function(n) {
                                          ro(n, th);
                                      }),
                                      mo(fi(), function(n) {
                                          ro(n, eh);
                                      }),
                                      mo(Qr(), function(n) {
                                          ro(n, th);
                                      }),
                                      mo(Jr(), function(n) {
                                          ro(n, eh);
                                      }),
                                  ]
                                : [
                                      mo(Mi(), function(n, t) {
                                          ro(n, th);
                                      }),
                                      mo(Fi(), function(n) {
                                          ro(n, eh);
                                      }),
                                  ],
                        ]),
                    );
                },
        }),
        state: Zp,
        apis: oh,
    });
    var ih = tinymce.util.Tools.resolve('tinymce.util.I18n');
    var uh = 'tox-menu-nav__js';
    var ah = 'tox-collection__item';
    var ch = 'tox-swatch';
    var sh = { normal: uh, color: ch };
    let fh = 'tox-collection__item--enabled';
    var lh = 'tox-collection__item-icon';
    var dh = 'tox-collection__item-label';
    let mh = 'tox-collection__item-caret';
    var gh = 'tox-collection__item--active';
    var ph = tinymce.util.Tools.resolve('tinymce.Env');
    var hh = function(n) {
        var e = ph.mac
                ? {
                      alt: '&#x2325;',
                      ctrl: '&#x2303;',
                      shift: '&#x21E7;',
                      meta: '&#x2318;',
                      access: '&#x2303;&#x2325;',
                  }
                : { meta: 'Ctrl', access: 'Shift+Alt' };
                var t = n.split('+');
                var o = S(t, function(n) {
                let t = n.toLowerCase().trim();
                return En(e, t) ? e[t] : n;
            });
        return ph.mac ? o.join('') : o.join('+');
    };
    var vh = [
        'list-num-default',
        'list-num-lower-alpha',
        'list-num-lower-greek',
        'list-num-lower-roman',
        'list-num-upper-alpha',
        'list-num-upper-roman',
    ];
    var bh = ['list-bull-circle', 'list-bull-default', 'list-bull-square'];
    var yh = ['input', 'button', 'textarea', 'select'];
    var xh = function(t, n, e) {
        n.disableClass.each(function(n) {
            lr(t.element(), n);
        }),
            (yp(t, n) ? xp : Sp)(t),
            n.onDisabled(t);
    };
    var wh = /* */ Object.freeze({
        enable: kp,
        disable: xh,
        isDisabled: Op,
        onLoad: bp,
        set: function(n, t, e, o) {
            (o ? xh : kp)(n, t, e);
        },
    });
    let Sh = /* */ Object.freeze({
        exhibit: function(n, t, e) {
            return nr({
                classes: t.disabled ? t.disableClass.map(M).getOr([]) : [],
            });
        },
        events(e, n) {
                return so([
                    fo(mi(), function(n, t) {
                        return Op(n, e);
                    }),
                    pa(e, n, bp),
                ]);
            },
    });
    let Ch = [
        St('disabled', !1),
        St('useNative', !0),
        ht('disableClass'),
        Ku('onDisabled'),
        Ku('onEnabled'),
    ];
    var kh = xa({ fields: Ch, name: 'disabling', active: Sh, apis: wh });
    var Oh = function(n) {
        return kh.config({
            disabled: n,
            disableClass: 'tox-collection__item--state-disabled',
        });
    };
    let Eh = function(n) {
        return kh.config({ disabled: n });
    };
    let Th = function(n) {
        return kh.config({
            disabled: n,
            disableClass: 'tox-tbtn--disabled',
        });
    };
    let Bh = function(n) {
        return kh.config({
            disabled: n,
            disableClass: 'tox-tbtn--disabled',
            useNative: !1,
        });
    };
    ((Ap = Dp = Dp || {})[(Ap.CLOSE_ON_EXECUTE = 0)] = 'CLOSE_ON_EXECUTE'),
        (Ap[(Ap.BUBBLE_TO_SANDBOX = 1)] = 'BUBBLE_TO_SANDBOX');
    function Dh(n) {
        return B(n, function(n) {
            return n.toArray();
        });
    }
    function Ah(n, t, e) {
        const o = ye(Z);
        return {
            type: 'item',
            dom: t.dom,
            components: Dh(t.optComponents),
            data: n.data,
            eventOrder: Rh,
            hasSubmenu: n.triggersSubmenu,
            itemBehaviours: ya(
                [
                    Jd('item-events', [
                        (function(e, o) {
                            return Hi(function(n, t) {
                                Ep(e, n)(e.onAction),
                                    e.triggersSubmenu ||
                                        o !== Ih.CLOSE_ON_EXECUTE ||
                                        (ro(n, vi()), t.stop());
                            });
                        })(n, e),
                        Tp(n, o),
                        Bp(n, o),
                    ]),
                    Oh(n.disabled),
                    gg.config({}),
                ].concat(n.itemBehaviours),
            ),
        };
    }
    function _h(n) {
        return { value: n.value, meta: An({ text: n.text.getOr('') }, n.meta) };
    }
    function Mh(n, t) {
        const e = (function(n) {
            return Vh.DOM.encode(n);
        })(ih.translate(n));
        if (t.length > 0) {
            const o = new RegExp(
                (function(n) {
                    return n.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                })(t),
                'gi',
            );
            return e.replace(o, function(n) {
                return `<span class="tox-autocompleter-highlight">${n}</span>`;
            });
        }
        return e;
    }
    function Fh(t, e, n) {
        function o(n) {
            return io(n, Ph, { row: t, col: e });
        }
        function r(n, t) {
            t.stop(), o(n);
        }
        let i;
        return au({
            dom: {
                tag: 'div',
                attributes:
                    ((i = { role: 'button' }), (i['aria-labelledby'] = n), i),
            },
            behaviours: ya([
                Jd('insert-table-picker-cell', [
                    mo(Qr(), bg.focus),
                    mo(mi(), o),
                    mo(ii(), r),
                    mo(pi(), r),
                ]),
                kg.config({
                    toggleClass: 'tox-insert-table-picker__selected',
                    toggleOnExecute: !1,
                }),
                bg.config({
                    onFocus(n) {
                        return io(n, Hh, { row: t, col: e });
                    },
                }),
            ]),
        });
    }
    var Ih = Dp;
    var Rh = {
        'alloy.execute': [
            'disabling',
            'alloy.base.behaviour',
            'toggling',
            'item-events',
        ],
    };
    var Vh = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');
    var Nh = nn(Us('item-widget', _g()));
    var Hh = Yo('cell-over');
    var Ph = Yo('cell-execute');
    function zh(n) {
        return { value: nn(n) };
    }
    function Lh(n) {
        return $h.test(n) || Qh.test(n);
    }
    function jh(n) {
        const t = (function(n) {
            let t = n.value().replace($h, function(n, t, e, o) {
                return t + t + e + e + o + o;
            });
            return { value: nn(t) };
        })(n);
        let e = Qh.exec(t.value());
        return e === null ? ['FFFFFF', 'FF', 'FF', 'FF'] : e;
    }
    function Uh(n) {
        const t = n.toString(16);
        return t.length === 1 ? `0${t}` : t;
    }
    function Wh(n) {
        const t = Uh(n.red()) + Uh(n.green()) + Uh(n.blue());
        return zh(t);
    }
    function Gh(n, t, e, o) {
        return { red: nn(n), green: nn(t), blue: nn(e), alpha: nn(o) };
    }
    function Xh(n) {
        const t = parseInt(n, 10);
        return t.toString() === n && t >= 0 && t <= 255;
    }
    function Yh(n) {
        let t;
        var e;
        var o;
        var r = (n.hue() || 0) % 360;
        var i = n.saturation() / 100;
        let u = n.value() / 100;
        if (((i = nv(0, Zh(i, 1))), (u = nv(0, Zh(u, 1))), i === 0))
            return (t = e = o = tv(255 * u)), Gh(t, e, o, 1);
        const a = r / 60;
        var c = u * i;
        let s = c * (1 - Math.abs((a % 2) - 1));
        let f = u - c;
        switch (Math.floor(a)) {
            case 0:
                (t = c), (e = s), (o = 0);
                break;
            case 1:
                (t = s), (e = c), (o = 0);
                break;
            case 2:
                (t = 0), (e = c), (o = s);
                break;
            case 3:
                (t = 0), (e = s), (o = c);
                break;
            case 4:
                (t = s), (e = 0), (o = c);
                break;
            case 5:
                (t = c), (e = 0), (o = s);
                break;
            default:
                t = e = o = 0;
        }
        return (
            (t = tv(255 * (t + f))),
            (e = tv(255 * (e + f))),
            (o = tv(255 * (o + f))),
            Gh(t, e, o, 1)
        );
    }
    function qh(n) {
        const t = jh(n);
        var e = parseInt(t[1], 16);
        var o = parseInt(t[2], 16);
        let r = parseInt(t[3], 16);
        return Gh(e, o, r, 1);
    }
    function Kh(n, t, e, o) {
        const r = parseInt(n, 10);
        var i = parseInt(t, 10);
        var u = parseInt(e, 10);
        let a = parseFloat(o);
        return Gh(r, i, u, a);
    }
    function Jh(n) {
        return `rgba(${n.red()},${n.green()},${n.blue()},${n.alpha()})`;
    }
    var $h = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
    var Qh = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;
    var Zh = Math.min;
    var nv = Math.max;
    var tv = Math.round;
    var ev = /^rgb\((\d+),\s*(\d+),\s*(\d+)\)/;
    let ov = /^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/;
    let rv = nn(Gh(255, 0, 0, 1));
    var iv = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');
    let uv = 'tinymce-custom-colors';
    function av(n) {
        const t = [];
        var u = v.document.createElement('canvas');
        (u.height = 1), (u.width = 1);
        for (
            var a = u.getContext('2d'),
                c = function(n, t) {
                    const e = t / 255;
                    return `0${Math.round(n * e + 255 * (1 - e)).toString(16)}`
                        .slice(-2)
                        .toUpperCase();
                },
                e = function(n) {
                    if (/^[0-9A-Fa-f]{6}$/.test(n))
                        return `#${n.toUpperCase()}`;
                    a.clearRect(0, 0, u.width, u.height),
                        (a.fillStyle = '#FFFFFF'),
                        (a.fillStyle = n),
                        a.fillRect(0, 0, 1, 1);
                    const t = a.getImageData(0, 0, 1, 1).data;
                    var e = t[0];
                    let o = t[1];
                    var r = t[2];
                    let i = t[3];
                    return `#${c(e, i)}${c(o, i)}${c(r, i)}`;
                },
                o = 0;
            o < n.length;
            o += 2
        )
            t.push({ text: n[o + 1], value: e(n[o]), type: 'choiceitem' });
        return t;
    }
    function cv(n) {
        return n.getParam('color_map');
    }
    function sv(n, e) {
        let o;
        return (
            n.dom.getParents(n.selection.getStart(), function(n) {
                let t;
                (t =
                    n.style[
                        e === 'forecolor' ? 'color' : 'background-color'
                    ]) && (o = o || t);
            }),
            o
        );
    }
    function fv(n) {
        return Math.max(5, Math.ceil(Math.sqrt(n)));
    }
    function lv(n) {
        const t = Rv(n);
        var e = fv(t.length);
        return Fv(n, e);
    }
    function dv(t, e, n, o) {
        n === 'custom'
            ? Uv(t)(function(n) {
                  n.each(function(n) {
                      Nv(n), t.execCommand('mceApplyTextcolor', e, n), o(n);
                  });
              }, '#000000')
            : n === 'remove'
            ? (o(''), t.execCommand('mceRemoveTextcolor', e))
            : (o(n), t.execCommand('mceApplyTextcolor', e, n));
    }
    function mv(n, t) {
        return n.concat(
            Vv().concat(
                (function(n) {
                    const t = 'choiceitem';
                    var e = {
                        type: t,
                        text: 'Remove color',
                        icon: 'color-swatch-remove-color',
                        value: 'remove',
                    };
                    return n
                        ? [
                              e,
                              {
                                  type: t,
                                  text: 'Custom color',
                                  icon: 'color-picker',
                                  value: 'custom',
                              },
                          ]
                        : [e];
                })(t),
            ),
        );
    }
    function gv(t, e) {
        return function(n) {
            n(mv(t, e));
        };
    }
    function pv(n, t, e) {
        let o;
        let r;
        (o =
            t === 'forecolor'
                ? 'tox-icon-text-color__color'
                : 'tox-icon-highlight-bg-color__color'),
            (r = e),
            n.setIconFill(o, r),
            n.setIconStroke(o, r);
    }
    function hv(o, e, r, n, i) {
        o.ui.registry.addSplitButton(e, {
            tooltip: n,
            presets: 'color',
            icon: e === 'forecolor' ? 'text-color' : 'highlight-bg-color',
            select(e) {
                return on
                    .from(sv(o, r))
                    .bind(function(n) {
                        return (function(n) {
                            if (n === 'transparent')
                                return on.some(Gh(0, 0, 0, 0));
                            let t = ev.exec(n);
                            if (t !== null)
                                return on.some(Kh(t[1], t[2], t[3], '1'));
                            let e = ov.exec(n);
                            return e !== null
                                ? on.some(Kh(e[1], e[2], e[3], e[4]))
                                : on.none();
                        })(n).map(function(n) {
                            let t = Wh(n).value();
                            return Vt(e.toLowerCase(), t);
                        });
                    })
                    .getOr(!1);
            },
            columns: lv(o),
            fetch: gv(Rv(o), Iv(o)),
            onAction(n) {
                i.get() !== null && dv(o, r, i.get(), function() {});
            },
            onItemAction(n, t) {
                dv(o, r, t, function(n) {
                    i.set(n), jv(o, { name: e, color: n });
                });
            },
            onSetup(t) {
                i.get() !== null && pv(t, e, i.get());
                function n(n) {
                    n.name === e && pv(t, n.name, n.color);
                }
                return (
                    o.on('TextColorChange', n),
                    function() {
                        o.off('TextColorChange', n);
                    }
                );
            },
        });
    }
    function vv(t, n, e, o) {
        t.ui.registry.addNestedMenuItem(n, {
            text: o,
            icon: n === 'forecolor' ? 'text-color' : 'highlight-bg-color',
            getSubmenuItems() {
                return [
                    {
                        type: 'fancymenuitem',
                        fancytype: 'colorswatch',
                        onAction(n) {
                            dv(t, e, n.value, Z);
                        },
                    },
                ];
            },
        });
    }
    function bv(e, o) {
        return function(n) {
            const t = w(n, o);
            return S(t, function(n) {
                return { dom: e, components: n };
            });
        };
    }
    function yv(n, e) {
        const o = [];
        let r = [];
        return (
            bn(n, function(n, t) {
                e(n, t)
                    ? (r.length > 0 && o.push(r),
                      (r = []),
                      En(n.dom, 'innerHtml') && r.push(n))
                    : r.push(n);
            }),
            r.length > 0 && o.push(r),
            S(o, function(n) {
                return {
                    dom: { tag: 'div', classes: ['tox-collection__group'] },
                    components: n,
                };
            })
        );
    }
    function xv(t, e, n) {
        return {
            dom: {
                tag: 'div',
                classes: ['tox-menu', 'tox-collection'].concat(
                    t === 1
                        ? ['tox-collection--list']
                        : ['tox-collection--grid'],
                ),
            },
            components: [
                Ng.parts().items({
                    preprocess(n) {
                        return t !== 'auto' && t > 1
                            ? bv(
                                  {
                                      tag: 'div',
                                      classes: ['tox-collection__group'],
                                  },
                                  t,
                              )(n)
                            : yv(n, function(n, t) {
                                  return e[t].type === 'separator';
                              });
                    },
                }),
            ],
        };
    }
    function wv(n) {
        return {
            backgroundMenu: 'tox-background-menu',
            selectedMenu: 'tox-selected-menu',
            selectedItem: 'tox-collection__item--active',
            hasIcons: 'tox-menu--has-icons',
            menu: (function(n) {
                return n === 'color' ? 'tox-swatches' : 'tox-menu';
            })(n),
            tieredMenu: 'tox-tiered-menu',
        };
    }
    function Sv(n) {
        const t = wv(n);
        return {
            backgroundMenu: t.backgroundMenu,
            selectedMenu: t.selectedMenu,
            menu: t.menu,
            selectedItem: t.selectedItem,
            item: fp(n),
        };
    }
    function Cv(n, t, e) {
        const o = wv(e);
        return {
            dom: { tag: 'div', classes: H([[o.tieredMenu]]) },
            markers: Sv(e),
        };
    }
    function kv(n) {
        return (
            n.icon !== undefined ||
            n.type === 'togglemenuitem' ||
            n.type === 'choicemenuitem'
        );
    }
    function Ov(n) {
        return v.console.error(le(n)), v.console.log(n), on.none();
    }
    function Ev(n, t, e, o, r) {
        const i = (function(e) {
            return {
                dom: {
                    tag: 'div',
                    classes: ['tox-collection', 'tox-collection--horizontal'],
                },
                components: [
                    Ng.parts().items({
                        preprocess(n) {
                            return yv(n, function(n, t) {
                                return e[t].type === 'separator';
                            });
                        },
                    }),
                ],
            };
        })(e);
        return { value: n, dom: i.dom, components: i.components, items: e };
    }
    function Tv(n, t, e, o, r) {
        let i;
        return r === 'color'
            ? {
                  value: n,
                  dom: (i = (function(n) {
                      return {
                          dom: {
                              tag: 'div',
                              classes: ['tox-menu', 'tox-swatches-menu'],
                          },
                          components: [
                              {
                                  dom: {
                                      tag: 'div',
                                      classes: ['tox-swatches'],
                                  },
                                  components: [
                                      Ng.parts().items({
                                          preprocess:
                                              n !== 'auto'
                                                  ? bv(
                                                        {
                                                            tag: 'div',
                                                            classes: [
                                                                'tox-swatches__row',
                                                            ],
                                                        },
                                                        n,
                                                    )
                                                  : l,
                                      }),
                                  ],
                              },
                          ],
                      };
                  })(o)).dom,
                  components: i.components,
                  items: e,
              }
            : r === 'normal' && o === 'auto'
            ? {
                  value: n,
                  dom: (i = xv(o, e)).dom,
                  components: i.components,
                  items: e,
              }
            : r === 'normal' && o === 1
            ? {
                  value: n,
                  dom: (i = xv(1, e)).dom,
                  components: i.components,
                  items: e,
              }
            : r === 'normal'
            ? {
                  value: n,
                  dom: (i = xv(o, e)).dom,
                  components: i.components,
                  items: e,
              }
            : r !== 'listpreview' || o === 'auto'
            ? {
                  value: n,
                  dom: (function(n, t, e) {
                      const o = wv(e);
                      return {
                          tag: 'div',
                          classes: H([
                              [o.menu, `tox-menu-${t}-column`],
                              n ? [o.hasIcons] : [],
                          ]),
                      };
                  })(t, o, r),
                  components: Gv,
                  items: e,
              }
            : {
                  value: n,
                  dom: (i = (function(n) {
                      return {
                          dom: {
                              tag: 'div',
                              classes: [
                                  'tox-menu',
                                  'tox-collection',
                                  'tox-collection--toolbar',
                                  'tox-collection--toolbar-lg',
                              ],
                          },
                          components: [
                              Ng.parts().items({
                                  preprocess: bv(
                                      {
                                          tag: 'div',
                                          classes: ['tox-collection__group'],
                                      },
                                      n,
                                  ),
                              }),
                          ],
                      };
                  })(o)).dom,
                  components: i.components,
                  items: e,
              };
    }
    function Bv(n, t, e, o, r, i, u, a) {
        const c = (function(n) {
            return x(n, kv);
        })(t);
        let s = Xv(t, e, o, r !== 'color' ? 'normal' : 'color', i, u, a);
        return Tv(n, c, s, o, r);
    }
    function Dv(n, t) {
        const e = Sv(t);
        return n === 1
            ? { mode: 'menu', moveOnTab: !0 }
            : n === 'auto'
            ? {
                  mode: 'grid',
                  selector: `.${e.item}`,
                  initSize: { numColumns: 1, numRows: 1 },
              }
            : {
                  mode: 'matrix',
                  rowSelector: `.${
                      t === 'color'
                          ? 'tox-swatches__row'
                          : 'tox-collection__group'
                  }`,
              };
    }
    let Av = 'choiceitem';
    var _v = [
        { type: Av, text: 'Light Green', value: '#BFEDD2' },
        { type: Av, text: 'Light Yellow', value: '#FBEEB8' },
        { type: Av, text: 'Light Red', value: '#F8CAC6' },
        { type: Av, text: 'Light Purple', value: '#ECCAFA' },
        { type: Av, text: 'Light Blue', value: '#C2E0F4' },
        { type: Av, text: 'Green', value: '#2DC26B' },
        { type: Av, text: 'Yellow', value: '#F1C40F' },
        { type: Av, text: 'Red', value: '#E03E2D' },
        { type: Av, text: 'Purple', value: '#B96AD9' },
        { type: Av, text: 'Blue', value: '#3598DB' },
        { type: Av, text: 'Dark Turquoise', value: '#169179' },
        { type: Av, text: 'Orange', value: '#E67E23' },
        { type: Av, text: 'Dark Red', value: '#BA372A' },
        { type: Av, text: 'Dark Purple', value: '#843FA1' },
        { type: Av, text: 'Dark Blue', value: '#236FA1' },
        { type: Av, text: 'Light Gray', value: '#ECF0F1' },
        { type: Av, text: 'Medium Gray', value: '#CED4D9' },
        { type: Av, text: 'Gray', value: '#95A5A6' },
        { type: Av, text: 'Dark Gray', value: '#7E8C8D' },
        { type: Av, text: 'Navy Blue', value: '#34495E' },
        { type: Av, text: 'Black', value: '#000000' },
        { type: Av, text: 'White', value: '#ffffff' },
    ];
    let Mv = (function uI(t) {
        void 0 === t && (t = 10);
        var n;
                var e = iv.getItem(uv);
                var o = cn(e) ? JSON.parse(e) : [];
                var r = t - (n = o).length < 0 ? n.slice(0, t) : n;
                var i = function(n) {
                r.splice(n, 1);
            };
        return {
            add: function(n) {
                (function(n, t) {
                    var e = y(n, t);
                    return e === -1 ? on.none() : on.some(e);
                })(r, n).each(i),
                    r.unshift(n),
                    r.length > t && r.pop(),
                    iv.setItem(uv, JSON.stringify(r));
            },
            state() {
                    return r.slice(0);
                },
        };
    })(10);
    var Fv = function(n, t) {
        return n.getParam('color_cols', t, 'number');
    };
    var Iv = function(n) {
        return !1 !== n.getParam('custom_colors');
    };
    var Rv = function(n) {
        var t = cv(n);
        return t !== undefined ? av(t) : _v;
    };
    var Vv = function() {
        return S(Mv.state(), function(n) {
            return { type: Av, text: n, value: n };
        });
    };
    var Nv = function(n) {
        Mv.add(n);
    };
    let Hv = function(n) {
        return n.fire('SkinLoaded');
    };
    let Pv = function(n) {
        return n.fire('ResizeEditor');
    };
    var zv = function(n, t) {
        return n.fire('ScrollContent', t);
    };
    let Lv = function(n, t) {
        return n.fire('ResizeContent', t);
    };
    var jv = function(n, t) {
        return n.fire('TextColorChange', t);
    };
    var Uv = function(i) {
        return function(n, t) {
            var e;
                    var o = { colorpicker: t };
                    var r =
                    ((e = n),
                    function(n) {
                        var t = n.getData();
                        e(on.from(t.colorpicker)), n.close();
                    });
            i.windowManager.open({
                title: 'Color Picker',
                size: 'normal',
                body: {
                    type: 'panel',
                    items: [
                        {
                            type: 'colorpicker',
                            name: 'colorpicker',
                            label: 'Color',
                        },
                    ],
                },
                buttons: [
                    { type: 'cancel', name: 'cancel', text: 'Cancel' },
                    {
                        type: 'submit',
                        name: 'save',
                        text: 'Save',
                        primary: !0,
                    },
                ],
                initialData: o,
                onAction: function(n, t) {
                    'hex-valid' === t.name &&
                        (t.value ? n.enable('ok') : n.disable('ok'));
                },
                onSubmit: r,
                onClose: function() {},
                onCancel: function() {
                    n(on.none());
                },
            });
        };
    };
    var Wv = {
        register(n) {
                !(function(e) {
                    e.addCommand('mceApplyTextcolor', function(n, t) {
                        !(function(n, t, e) {
                            n.undoManager.transact(function() {
                                n.focus(),
                                    n.formatter.apply(t, { value: e }),
                                    n.nodeChanged();
                            });
                        })(e, n, t);
                    }),
                        e.addCommand('mceRemoveTextcolor', function(n) {
                            !(function(n, t) {
                                n.undoManager.transact(function() {
                                    n.focus(),
                                        n.formatter.remove(
                                            t,
                                            { value: null },
                                            null,
                                            !0,
                                        ),
                                        n.nodeChanged();
                                });
                            })(e, n);
                        });
                })(n);
                var t = ye(null),
                    e = ye(null);
                hv(n, 'forecolor', 'forecolor', 'Text color', t),
                    hv(n, 'backcolor', 'hilitecolor', 'Background color', e),
                    vv(n, 'forecolor', 'forecolor', 'Text color'),
                    vv(n, 'backcolor', 'hilitecolor', 'Background color');
            },
        getColors: mv,
        getFetch: gv,
        colorPickerDialog: Uv,
        getCurrentColor: sv,
        getColorCols: lv,
        calcCols: fv,
    };
    var Gv = [Ng.parts().items({})];
    var Xv = function(n, e, o, r, i, u, a) {
        return Du(
            S(n, function(t) {
                return t.type === 'choiceitem'
                    ? (function(n) {
                          return tt('choicemenuitem', Kp, n);
                      })(t).fold(Ov, function(n) {
                          return on.some(
                              (function(t, n, e, o, r, i, u) {
                                  const a = vp(
                                      {
                                          presets: e,
                                          textContent: n ? t.text : on.none(),
                                          htmlContent: on.none(),
                                          ariaLabel: t.text,
                                          iconContent: t.icon,
                                          shortcutContent: n
                                              ? t.shortcut
                                              : on.none(),
                                          checkMark: n
                                              ? on.some(pp(u.icons))
                                              : on.none(),
                                          caret: on.none(),
                                          value: t.value,
                                      },
                                      u,
                                      !0,
                                  );
                                  return Dn(
                                      Ah(
                                          {
                                              data: _h(t),
                                              disabled: t.disabled,
                                              getApi(t) {
                                                  return {
                                                      setActive: function(n) {
                                                          kg.set(t, n);
                                                      },
                                                      isActive() {
                                                              return kg.isOn(t);
                                                          },
                                                      isDisabled() {
                                                              return kh.isDisabled(
                                                                  t,
                                                              );
                                                          },
                                                      setDisabled: function(n) {
                                                          return kh.set(t, n);
                                                      },
                                                  };
                                              },
                                              onAction(n) {
                                                  return o(t.value);
                                              },
                                              onSetup(n) {
                                                  return (
                                                      n.setActive(r),
                                                      function() {}
                                                  );
                                              },
                                              triggersSubmenu: !1,
                                              itemBehaviours: [],
                                          },
                                          a,
                                          i,
                                      ),
                                      {
                                          toggling: {
                                              toggleClass: fh,
                                              toggleOnExecute: !1,
                                              selected: t.active,
                                          },
                                      },
                                  );
                              })(n, o === 1, r, e, u(t.value), i, a),
                          );
                      })
                    : on.none();
            }),
        );
    };
    let Yv;
    var qv;
    var Kv = {
        inserttable: function aI(o) {
            var n = Yo('size-label');
                    var i = (function(n, t, e) {
                        for (var o = [], r = 0; r < t; r++) {
                            for (var i = [], u = 0; u < e; u++)
                                i.push(Fh(r, u, n));
                            o.push(i);
                        }
                        return o;
                    })(n, 10, 10);
                    var u = bm({
                    dom: {
                        tag: 'span',
                        classes: ['tox-insert-table-picker__label'],
                        attributes: { id: n },
                    },
                    components: [Rr('0x0')],
                    behaviours: ya([gg.config({})]),
                });
            return {
                type: 'widget',
                data: { value: Yo('widget-id') },
                dom: { tag: 'div', classes: ['tox-fancymenuitem'] },
                autofocus: !0,
                components: [
                    Nh().widget({
                        dom: {
                            tag: 'div',
                            classes: ['tox-insert-table-picker'],
                        },
                        components: (function(n) {
                            return B(n, function(n) {
                                return S(n, cu);
                            });
                        })(i).concat(u.asSpec()),
                        behaviours: ya([
                            Jd('insert-table-picker', [
                                vo(Hh, function(n, t, e) {
                                    let o = e.event().row();
                                            var r = e.event().col();
                                    !(function(n, t, e, o, r) {
                                        for (let i = 0; i < o; i++)
                                            for (let u = 0; u < r; u++)
                                                kg.set(
                                                    n[i][u],
                                                    i <= t && u <= e,
                                                );
                                    })(i, o, r, 10, 10),
                                        gg.set(u.get(n), [
                                            (function(n, t) {
                                                return Rr(
                                                    t + 1 + 'x' + (n + 1),
                                                );
                                            })(o, r),
                                        ]);
                                }),
                                vo(Ph, function(n, t, e) {
                                    o.onAction({
                                        numRows: e.event().row() + 1,
                                        numColumns: e.event().col() + 1,
                                    }),
                                        ro(n, vi());
                                }),
                            ]),
                            dg.config({
                                initSize: { numRows: 10, numColumns: 10 },
                                mode: 'flatgrid',
                                selector: '[role="button"]',
                            }),
                        ]),
                    }),
                ],
            };
        },
        colorswatch: function cI(t, n) {
            var e = Wv.getColors(
                    n.colorinput.getColors(),
                    n.colorinput.hasCustomColors(),
                );
                    var o = n.colorinput.getColorCols();
                    var r = Bv(
                        Yo('menu-value'),
                        e,
                        function(n) {
                            t.onAction({ value: n });
                        },
                        o,
                        'color',
                        Ih.CLOSE_ON_EXECUTE,
                        function() {
                            return !1;
                        },
                        n.shared.providers,
                    );
                    var i = Dn(
                    N({ ...r}, {
                        markers: Sv('color'),
                        movement: Dv(o, 'color'),
                    }),
                );
            return {
                type: 'widget',
                data: { value: Yo('widget-id') },
                dom: { tag: 'div', classes: ['tox-fancymenuitem'] },
                autofocus: !0,
                components: [Nh().widget(Ng.sketch(i))],
            };
        },
    };
    var Jv = function(t, e, n, o, r, i, u, a) {
        void 0 === a && (a = !0);
        var c = vp(
            {
                presets: o,
                textContent: on.none(),
                htmlContent: n
                    ? t.text.map(function(n) {
                          return Mh(n, e);
                      })
                    : on.none(),
                ariaLabel: t.text,
                iconContent: t.icon,
                shortcutContent: on.none(),
                checkMark: on.none(),
                caret: on.none(),
                value: t.value,
            },
            u.providers,
            a,
            t.icon,
        );
        return Ah(
            {
                data: _h(t),
                disabled: t.disabled,
                getApi: function() {
                    return {};
                },
                onAction: function(n) {
                    return r(t.value, t.meta);
                },
                onSetup: function() {
                    return function() {};
                },
                triggersSubmenu: !1,
                itemBehaviours: (function(n, t) {
                    return V(n, 'tooltipWorker')
                        .map(function(e) {
                            return [
                                rh.config({
                                    lazySink: t.getSink,
                                    tooltipDom: {
                                        tag: 'div',
                                        classes: [
                                            'tox-tooltip-worker-container',
                                        ],
                                    },
                                    tooltipComponents: [],
                                    anchor: function(n) {
                                        return {
                                            anchor: 'submenu',
                                            item: n,
                                            overrides: {
                                                maxHeightFunction: kf,
                                            },
                                        };
                                    },
                                    mode: 'follow-highlight',
                                    onShow(t, n) {
                                            e(function(n) {
                                                rh.setComponents(t, [
                                                    iu({
                                                        element: we.fromDom(n),
                                                    }),
                                                ]);
                                            });
                                        },
                                }),
                            ];
                        })
                        .getOr([]);
                })(t.meta, u),
            },
            c,
            i,
        );
    };
    var $v = function(n) {
        let t = n.text.fold(
            function() {
                return {};
            },
            function(n) {
                return { innerHtml: n };
            },
        );
        return {
            type: 'separator',
            dom: {
                    tag: 'div',
                        classes: [ah, 'tox-collection__group-heading'],
                    ...t,
                },
            components: [],
        };
    };
    let Qv = function(n, t, e, o) {
        void 0 === o && (o = !0);
        var r = vp(
            {
                presets: 'normal',
                iconContent: n.icon,
                textContent: n.text,
                htmlContent: on.none(),
                ariaLabel: n.text,
                caret: on.none(),
                checkMark: on.none(),
                shortcutContent: n.shortcut,
            },
            e,
            o,
        );
        return Ah(
            {
                data: _h(n),
                getApi: function(t) {
                    return {
                        isDisabled: function() {
                            return kh.isDisabled(t);
                        },
                        setDisabled: function(n) {
                            return kh.set(t, n);
                        },
                    };
                },
                disabled: n.disabled,
                onAction: n.onAction,
                onSetup: n.onSetup,
                triggersSubmenu: !1,
                itemBehaviours: [],
            },
            r,
            t,
        );
    };
    var Zv = function(n, t, e, o, r) {
        void 0 === o && (o = !0), void 0 === r && (r = !1);
        var i = r
                ? (function(n) {
                      return {
                          dom: {
                              tag: 'div',
                              classes: [mh],
                              innerHtml: xm('chevron-down', n),
                          },
                      };
                  })(e.icons)
                : (function(n) {
                      return {
                          dom: {
                              tag: 'div',
                              classes: [mh],
                              innerHtml: xm('chevron-right', n),
                          },
                      };
                  })(e.icons);
                var u = vp(
                {
                    presets: 'normal',
                    iconContent: n.icon,
                    textContent: n.text,
                    htmlContent: on.none(),
                    ariaLabel: n.text,
                    caret: on.some(i),
                    checkMark: on.none(),
                    shortcutContent: n.shortcut,
                },
                e,
                o,
            );
        return Ah(
            {
                data: _h(n),
                getApi: function(t) {
                    return {
                        isDisabled: function() {
                            return kh.isDisabled(t);
                        },
                        setDisabled(n) {
                                return kh.set(t, n);
                            },
                    };
                },
                disabled: n.disabled,
                onAction: Z,
                onSetup: n.onSetup,
                triggersSubmenu: !0,
                itemBehaviours: [],
            },
            u,
            t,
        );
    };
    var nb = function(n, t, e) {
        let o = vp(
            {
                iconContent: on.none(),
                textContent: n.text,
                htmlContent: on.none(),
                ariaLabel: n.text,
                checkMark: on.some(pp(e.icons)),
                caret: on.none(),
                shortcutContent: n.shortcut,
                presets: 'normal',
                meta: n.meta,
            },
            e,
            !0,
        );
        return Dn(
            Ah(
                {
                    data: _h(n),
                    disabled: n.disabled,
                    getApi(t) {
                            return {
                                setActive: function(n) {
                                    kg.set(t, n);
                                },
                                isActive: function() {
                                    return kg.isOn(t);
                                },
                                isDisabled: function() {
                                    return kh.isDisabled(t);
                                },
                                setDisabled: function(n) {
                                    return kh.set(t, n);
                                },
                            };
                        },
                    onAction: n.onAction,
                    onSetup: n.onSetup,
                    triggersSubmenu: !1,
                    itemBehaviours: [],
                },
                o,
                t,
            ),
            {
                toggling: {
                    toggleClass: fh,
                    toggleOnExecute: !1,
                    selected: n.active,
                },
            },
        );
    };
    var tb = function(t, e) {
        return (function(n, t) {
            return Object.prototype.hasOwnProperty.call(n, t)
                ? on.some(n[t])
                : on.none();
        })(Kv, t.fancytype).map(function(n) {
            return n(t, e);
        });
    };
    ((qv = Yv = Yv || {})[(qv.ContentFocus = 0)] = 'ContentFocus'),
        (qv[(qv.UiFocus = 1)] = 'UiFocus');
    function eb(n) {
        return (
            n.icon !== undefined ||
            n.type === 'togglemenuitem' ||
            n.type === 'choicemenuitem'
        );
    }
    function ob(n) {
        return x(n, eb);
    }
    function rb(n, t, e, o, r) {
        function i(n) {
            return r
                ? ({...n, shortcut: on.none(),
                      icon: n.text.isSome() ? on.none() : n.icon,})
                : n;
        }
        const u = e.shared.providers;
        switch (n.type) {
            case 'menuitem':
                return (function(n) {
                    return tt('menuitem', Xp, n);
                })(n).fold(Ov, function(n) {
                    return on.some(Qv(i(n), t, u, o));
                });
            case 'nestedmenuitem':
                return (function(n) {
                    return tt('nestedmenuitem', Yp, n);
                })(n).fold(Ov, function(n) {
                    return on.some(Zv(i(n), t, u, o, r));
                });
            case 'togglemenuitem':
                return (function(n) {
                    return tt('togglemenuitem', qp, n);
                })(n).fold(Ov, function(n) {
                    return on.some(nb(i(n), t, u));
                });
            case 'separator':
                return (function(n) {
                    return tt('separatormenuitem', jp, n);
                })(n).fold(Ov, function(n) {
                    return on.some($v(n));
                });
            case 'fancymenuitem':
                return (function(n) {
                    return tt('fancymenuitem', Jp, n);
                })(n).fold(Ov, function(n) {
                    return tb(i(n), e);
                });
            default:
                return (
                    v.console.error('Unknown item in general menu', n),
                    on.none()
                );
        }
    }
    function ib(n, t, e, o, r, i) {
        const u = o === 1;
            let a = !u || ob(n);
        return Du(
            S(n, function(n) {
                return n.type === 'separator'
                    ? (function(n) {
                          return tt('Autocompleter.Separator', jp, n);
                      })(n).fold(Ov, function(n) {
                          return on.some($v(n));
                      })
                    : (function(n) {
                          return tt('Autocompleter.Item', Up, n);
                      })(n).fold(Ov, function(n) {
                          return on.some(Jv(n, t, u, 'normal', e, r, i, a));
                      });
            }),
        );
    }
    function ub(n, t, e, o, r) {
        const i = ob(t);
        var u = Du(
            S(t, function(n) {
                function t(n) {
                    return rb(
                        n,
                        e,
                        o,
                        (function(n) {
                            return r ? !n.hasOwnProperty('text') : i;
                        })(n),
                        r,
                    );
                }
                return n.type === 'nestedmenuitem' &&
                    n.getSubmenuItems().length <= 0
                    ? t(An(n, { disabled: !0 }))
                    : t(n);
            }),
        );
        return (r ? Ev : Tv)(n, i, u, 1, 'normal');
    }
    function ab(n) {
        return jg.singleData(n.value, n);
    }
    function cb(n) {
        function t() {
            n.stopPropagation();
        }
        function e() {
            n.preventDefault();
        }
        const o = we.fromDom(n.target);
        let r = i(e, t);
        return (function(n, t, e, o, r, i, u) {
            return {
                target: nn(n),
                x: nn(t),
                y: nn(e),
                stop: o,
                prevent: r,
                kill: i,
                raw: nn(u),
            };
        })(o, n.clientX, n.clientY, t, e, r, n);
    }
    function sb(n, t, e, o, r) {
        const i = (function(t, e) {
            return function(n) {
                t(n) && e(cb(n));
            };
        })(e, o);
        return n.dom().addEventListener(t, i, r), { unbind: d(gb, n, t, i, r) };
    }
    function fb(n, t, e) {
        return (function(n, t, e, o) {
            return sb(n, t, e, o, !1);
        })(n, t, pb, e);
    }
    function lb(n, t, e) {
        return (function(n, t, e, o) {
            return sb(n, t, e, o, !0);
        })(n, t, pb, e);
    }
    function db(n, t, e) {
        return Eu(n, t, e).isSome();
    }
    let mb = function(u, a) {
        function e() {
            return s.get().isSome();
        }
        function c() {
            e() && Ug.hide(l);
        }
        function i(n, t, e, o) {
            n.matchLength = t.text.length;
            let r = Au(e, function(n) {
                return on.from(n.columns);
            }).getOr(1);
            Ug.showAt(
                l,
                {
                    anchor: 'node',
                    root: we.fromDom(u.getBody()),
                    node: on.from(n.element),
                },
                Ng.sketch(
                    (function(n, t, e, o) {
                        const r = e === Yv.ContentFocus ? Yl() : Xl();
                        var i = Dv(t, o);
                        var u = Sv(o);
                        return {
                            dom: n.dom,
                            components: n.components,
                            items: n.items,
                            value: n.value,
                            markers: {
                                selectedItem: u.selectedItem,
                                item: u.item,
                            },
                            movement: i,
                            fakeFocus: e === Yv.ContentFocus,
                            focusManager: r,
                            menuBehaviours: $p(
                                t !== 'auto'
                                    ? []
                                    : [
                                          Ri(function(o, n) {
                                              up(o, 4, u.item).each(function(
                                                  n,
                                              ) {
                                                  const t = n.numColumns;
                                                  var e = n.numRows;
                                                  dg.setGridSize(o, e, t);
                                              });
                                          }),
                                      ],
                            ),
                        };
                    })(
                        Tv('autocompleter-value', !0, o, r, 'normal'),
                        r,
                        Yv.ContentFocus,
                        'normal',
                    ),
                ),
            ),
                Ug.getContent(l).each(cd.highlightFirst);
        }
        var s = ye(on.none());
        let f = ye(!1);
        var l = au(
            Ug.sketch({
                dom: { tag: 'div', classes: ['tox-autocompleter'] },
                components: [],
                fireDismissalEventInstead: {},
                inlineBehaviours: ya([
                    Jd('dismissAutocompleter', [
                        mo(Ei(), function() {
                            return d();
                        }),
                    ]),
                ]),
                lazySink: a.getSink,
            }),
        );
        var d = function() {
            if (e()) {
                var n = s.get().map(function(n) {
                    return n.element;
                });
                Rp(n.getOr(we.fromDom(u.selection.getNode()))).each(Vo),
                    c(),
                    s.set(on.none()),
                    f.set(!1);
            }
        };
        let o = L(function() {
            return ip(u);
        });
        var m = function(n) {
            (function(t) {
                return s
                    .get()
                    .map(function(n) {
                        return ep(
                            u.dom,
                            u.selection.getRng(),
                            n.triggerChar,
                        ).bind(function(n) {
                            return Lp(u, o, n, t);
                        });
                    })
                    .getOrThunk(function() {
                        return rp(u, o);
                    });
            })(n).fold(d, function(r) {
                !(function(n) {
                    if (!e()) {
                        let t = Zg(u, n.range);
                        s.set(
                            on.some({
                                triggerChar: n.triggerChar,
                                element: t,
                                matchLength: n.text.length,
                            }),
                        ),
                            f.set(!1);
                    }
                })(r.context),
                    r.lookupData.then(function(o) {
                        s.get().map(function(n) {
                            let t = r.context;
                            if (n.triggerChar === t.triggerChar) {
                                var e = (function(t, n) {
                                    let e = Au(n, function(n) {
                                        return on.from(n.columns);
                                    }).getOr(1);
                                    return B(n, function(i) {
                                        var n = i.items;
                                        return ib(
                                            n,
                                            i.matchText,
                                            function(o, r) {
                                                let n = u.selection.getRng();
                                                ep(u.dom, n, t).fold(
                                                    function() {
                                                        return v.console.error(
                                                            'Lost context. Cursor probably moved',
                                                        );
                                                    },
                                                    function(n) {
                                                        let t = n.range;
                                                                    var e = {
                                                                hide: function() {
                                                                    d();
                                                                },
                                                                reload: function(
                                                                    n,
                                                                ) {
                                                                    c(), m(n);
                                                                },
                                                            };
                                                        f.set(!0),
                                                            i.onAction(
                                                                e,
                                                                t,
                                                                o,
                                                                r,
                                                            ),
                                                            f.set(!1);
                                                    },
                                                );
                                            },
                                            e,
                                            Ih.BUBBLE_TO_SANDBOX,
                                            a,
                                        );
                                    });
                                })(t.triggerChar, o);
                                0 < e.length
                                    ? i(n, t, o, e)
                                    : 10 <= t.text.length - n.matchLength
                                    ? d()
                                    : c();
                            }
                        });
                    });
            });
        };
        let n = {
            onKeypress: $g(function(n) {
                n.which !== 27 && m();
            }, 50),
            cancelIfNecessary: d,
            isMenuOpen() {
                return Ug.isOpen(l);
            },
            isActive: e,
            isProcessingAction: f.get,
            getView() {
                return Ug.getContent(l);
            },
        };
        Np(n, u);
    };
    var gb = function(n, t, e, o) {
        n.dom().removeEventListener(t, e, o);
    };
    var pb = nn(!0);
    let hb = cb;
    function vb(e, o) {
        let r = null;
        return {
            cancel() {
                r !== null && (v.clearTimeout(r), (r = null));
            },
            schedule() {
                for (var n = [], t = 0; t < arguments.length; t++)
                    n[t] = arguments[t];
                r = v.setTimeout(function() {
                    e.apply(null, n), (r = null);
                }, o);
            },
        };
    }
    function bb(n) {
        const t = n.raw();
        return t.touches === undefined || t.touches.length !== 1
            ? on.none()
            : on.some(t.touches[0]);
    }
    function yb(e) {
        const o = ye(on.none());
        var r = ye(!1);
        let i = vb(function(n) {
            e.triggerEvent(hi(), n), r.set(!0);
        }, 400);
        let u = K([
            {
                key: Wr(),
                value(e) {
                    return (
                        bb(e).each(function(n) {
                            i.cancel();
                            var t = {
                                x: nn(n.clientX),
                                y: nn(n.clientY),
                                target: e.target,
                            };
                            i.schedule(e), r.set(!1), o.set(on.some(t));
                        }),
                        on.none()
                    );
                },
            },
            {
                key: Gr(),
                value(n) {
                    return (
                        i.cancel(),
                        bb(n).each(function(t) {
                            o.get().each(function(n) {
                                !(function(n, t) {
                                    var e = Math.abs(n.clientX - t.x());
                                            var o = Math.abs(n.clientY - t.y());
                                    return e > 5 || o > 5;
                                })(t, n) || o.set(on.none());
                            });
                        }),
                        on.none()
                    );
                },
            },
            {
                key: Xr(),
                value(t) {
                    i.cancel();
                    return o
                        .get()
                        .filter(function(n) {
                            return jt(n.target(), t.target());
                        })
                        .map(function(n) {
                            return r.get()
                                ? (t.prevent(), !1)
                                : e.triggerEvent(pi(), t);
                        });
                },
            },
        ]);
        return {
            fireIfReady(t, n) {
                return Nn(u, n).bind(function(n) {
                    return n(t);
                });
            },
        };
    }
    function xb(t, n) {
        const e = ot('Getting GUI events settings', Ob, n);
        var o = yb(e);
        var r = S(
            [
                'touchstart',
                'touchmove',
                'touchend',
                'touchcancel',
                'gesturestart',
                'mousedown',
                'mouseup',
                'mouseover',
                'mousemove',
                'mouseout',
                'click',
            ].concat([
                'selectstart',
                'input',
                'contextmenu',
                'change',
                'transitionend',
                'drag',
                'dragstart',
                'dragend',
                'dragenter',
                'dragleave',
                'dragover',
                'drop',
                'keyup',
            ]),
            function(n) {
                return fb(t, n, function(t) {
                    o.fireIfReady(t, n).each(function(n) {
                        n && t.kill();
                    }),
                        e.triggerEvent(n, t) && t.kill();
                });
            },
        );
        let i = ye(on.none());
        let u = fb(t, 'paste', function(t) {
            o.fireIfReady(t, 'paste').each(function(n) {
                n && t.kill();
            }),
                e.triggerEvent('paste', t) && t.kill(),
                i.set(
                    on.some(
                        v.setTimeout(function() {
                            e.triggerEvent(li(), t);
                        }, 0),
                    ),
                );
        });
        var a = fb(t, 'keydown', function(n) {
            e.triggerEvent('keydown', n)
                ? n.kill()
                : !0 === e.stopBackspace &&
                  (function(n) {
                      return (
                          n.raw().which === 8 &&
                          !vn(['input', 'textarea'], Je(n.target())) &&
                          !db(n.target(), '[contenteditable="true"]')
                      );
                  })(n) &&
                  n.prevent();
        });
        var c = (function(n, t) {
            return kb ? lb(n, 'focus', t) : fb(n, 'focusin', t);
        })(t, function(n) {
            e.triggerEvent('focusin', n) && n.kill();
        });
        let s = ye(on.none());
        var f = (function(n, t) {
            return kb ? lb(n, 'blur', t) : fb(n, 'focusout', t);
        })(t, function(n) {
            e.triggerEvent('focusout', n) && n.kill(),
                s.set(
                    on.some(
                        v.setTimeout(function() {
                            e.triggerEvent(fi(), n);
                        }, 0),
                    ),
                );
        });
        return {
            unbind() {
                bn(r, function(n) {
                    n.unbind();
                }),
                    a.unbind(),
                    c.unbind(),
                    f.unbind(),
                    u.unbind(),
                    i.get().each(v.clearTimeout),
                    s.get().each(v.clearTimeout);
            },
        };
    }
    function wb(n, t) {
        const e = Nn(n, 'target')
            .map(function(n) {
                return n();
            })
            .getOr(t);
        return ye(e);
    }
    function Sb(n, o, t, e, r, i) {
        const u = n(o, e);
        var a = (function(n, t) {
            let e = ye(!1);
            var o = ye(!1);
            return {
                stop() {
                    e.set(!0);
                },
                cut() {
                    o.set(!0);
                },
                isStopped: e.get,
                isCut: o.get,
                event: nn(n),
                setSource: t.set,
                getSource: t.get,
            };
        })(t, r);
        return u.fold(
            function() {
                return i.logEventNoHandlers(o, e), Eb.complete();
            },
            function(t) {
                const e = t.descHandler();
                return (
                    tr(e)(a),
                    a.isStopped()
                        ? (i.logEventStopped(o, t.element(), e.purpose()),
                          Eb.stopped())
                        : a.isCut()
                        ? (i.logEventCut(o, t.element(), e.purpose()),
                          Eb.complete())
                        : To(t.element()).fold(
                              function() {
                                  return (
                                      i.logNoParent(
                                          o,
                                          t.element(),
                                          e.purpose(),
                                      ),
                                      Eb.complete()
                                  );
                              },
                              function(n) {
                                  return (
                                      i.logEventResponse(
                                          o,
                                          t.element(),
                                          e.purpose(),
                                      ),
                                      Eb.resume(n)
                                  );
                              },
                          )
                );
            },
        );
    }
    function Cb(n, t, e) {
        const o = (function(n) {
            const t = ye(!1);
            return {
                stop() {
                    t.set(!0);
                },
                cut: Z,
                isStopped: t.get,
                isCut: nn(!1),
                event: nn(n),
                setSource: r('Cannot set source of a broadcasted event'),
                getSource: r('Cannot get source of a broadcasted event'),
            };
        })(t);
        return (
            bn(n, function(n) {
                const t = n.descHandler();
                tr(t)(o);
            }),
            o.isStopped()
        );
    }
    var kb = Ht().browser.isFirefox();
    var Ob = qn([dt('triggerEvent'), St('stopBackspace', !0)]);
    var Eb = Tn([{ stopped: [] }, { resume: ['element'] }, { complete: [] }]);
    var Tb = function(t, e, o, n, r, i) {
        return Sb(t, e, o, n, r, i).fold(
            function() {
                return !0;
            },
            function(n) {
                return Tb(t, e, o, n, r, i);
            },
            function() {
                return !1;
            },
        );
    };
    let Bb = function(n, t, e, o, r) {
        var i = wb(e, o);
        return Tb(n, t, e, o, i, r);
    };
    let Db = xo('element', 'descHandler');
    let Ab = function(n, t) {
        return { id: nn(n), descHandler: nn(t) };
    };
    function _b() {
        const i = {};
        return {
            registerId(o, r, n) {
                Cn(n, function(n, t) {
                    let e = i[t] !== undefined ? i[t] : {};
                    (e[r] = eu(n, o)), (i[t] = e);
                });
            },
            unregisterId(e) {
                Cn(i, function(n, t) {
                    n.hasOwnProperty(e) && delete n[e];
                });
            },
            filterByType(n) {
                return Nn(i, n)
                    .map(function(n) {
                        return On(n, function(n, t) {
                            return Ab(t, n);
                        });
                    })
                    .getOr([]);
            },
            find(n, t, e) {
                let o = Vn(t)(i);
                return Ur(
                    e,
                    function(n) {
                        return (function(e, o) {
                            return Ki(o).fold(
                                function() {
                                    return on.none();
                                },
                                function(n) {
                                    let t = Vn(n);
                                    return e.bind(t).map(function(n) {
                                        return Db(o, n);
                                    });
                                },
                            );
                        })(o, n);
                    },
                    n,
                );
            },
        };
    }
    function Mb() {
        function o(n) {
            const t = n.element();
            return Ki(t).fold(
                function() {
                    return (function(n, t) {
                        const e = Yo(Xi + n);
                        return qi(t, e), e;
                    })('uid-', n.element());
                },
                function(n) {
                    return n;
                },
            );
        }
        const r = _b();
        var i = {};
        let u = function(n) {
            Ki(n.element()).each(function(n) {
                delete i[n], r.unregisterId(n);
            });
        };
        return {
            find(n, t, e) {
                return r.find(n, t, e);
            },
            filter(n) {
                return r.filterByType(n);
            },
            register(n) {
                let t = o(n);
                $(i, t) &&
                    (function(n, t) {
                        let e = i[t];
                        if (e !== n)
                            throw new Error(
                                `The tagId "${ 
                                    t 
                                    }" is already used by: ${ 
                                    Xo(e.element()) 
                                    }\nCannot use it for: ${ 
                                    Xo(n.element()) 
                                    }\nThe conflicting element is${ 
                                    Qe(e.element()) ? ' ' : ' not ' 
                                    }already in the DOM`,
                            );
                        u(n);
                    })(n, t);
                let e = [n];
                r.registerId(e, t, n.events()), (i[t] = n);
            },
            unregister: u,
            getById(n) {
                return Vn(n)(i);
            },
        };
    }
    function Fb(e) {
        function o(t) {
            return To(e.element()).fold(
                function() {
                    return !0;
                },
                function(n) {
                    return jt(t, n);
                },
            );
        }
        function r(n, t) {
            return u.find(o, n, t);
        }
        function i(e) {
            const n = u.filter(di());
            bn(n, function(n) {
                const t = n.descHandler();
                tr(t)(e);
            });
        }
        var u = Mb();
        var n = xb(e.element(), {
            triggerEvent(t, e) {
                    return Gu(t, e.target(), function(n) {
                        return (function(n, t, e, o) {
                            var r = e.target();
                            return Bb(n, t, e, r, o);
                        })(r, t, e, n);
                    });
                },
        });
        var a = {
            debugInfo: nn('real'),
            triggerEvent(t, e, o) {
                    Gu(t, e, function(n) {
                        Bb(r, t, o, e, n);
                    });
                },
            triggerFocus: function(t, e) {
                Ki(t).fold(
                    function() {
                        Sa(t);
                    },
                    function(n) {
                        Gu(si(), t, function(n) {
                            !(function(n, t, e, o, r) {
                                var i = wb(e, o);
                                Sb(n, t, e, o, i, r);
                            })(
                                r,
                                si(),
                                {
                                    originator: nn(e),
                                    kill: Z,
                                    prevent: Z,
                                    target: nn(t),
                                },
                                t,
                                n,
                            );
                        });
                    },
                );
            },
            triggerEscape(n, t) {
                    a.triggerEvent('keydown', n.element(), t.event());
                },
            getByUid(n) {
                    return g(n);
                },
            getByDom(n) {
                    return p(n);
                },
            build: au,
            addToGui: function(n) {
                s(n);
            },
            removeFromGui(n) {
                    f(n);
                },
            addToWorld(n) {
                    t(n);
                },
            removeFromWorld(n) {
                    c(n);
                },
            broadcast: function(n) {
                l(n);
            },
            broadcastOn: function(n, t) {
                d(n, t);
            },
            broadcastEvent: function(n, t) {
                m(n, t);
            },
            isConnected: nn(!0),
        };
        var t = function(n) {
            n.connect(a),
                zr(n.element()) ||
                    (u.register(n),
                    bn(n.components(), t),
                    a.triggerEvent(yi(), n.element(), {
                        target: nn(n.element()),
                    }));
        };
        var c = function(n) {
            zr(n.element()) || (bn(n.components(), c), u.unregister(n)),
                n.disconnect();
        };
        var s = function(n) {
            vs(e, n);
        };
        var f = function(n) {
            ys(n);
        };
        var l = function(n) {
            i({ universal: nn(!0), data: nn(n) });
        };
        var d = function(n, t) {
            i({ universal: nn(!1), channels: nn(n), data: nn(t) });
        };
        var m = function(n, t) {
            let e = u.filter(n);
            return Cb(e, t);
        };
        var g = function(n) {
            return u.getById(n).fold(function() {
                return an.error(
                    new Error(
                        `Could not find component with uid: "${ 
                                n 
                                }" in system.`,
                    ),
                );
            }, an.value);
        };
        var p = function(n) {
            let t = Ki(n).getOr('not found');
            return g(t);
        };
        return (
            t(e),
            {
                root: nn(e),
                element: e.element,
                destroy() {
                    n.unbind(), zi(e.element());
                },
                add: s,
                remove: f,
                getByUid: g,
                getByDom: p,
                addToWorld: t,
                removeFromWorld: c,
                broadcast: l,
                broadcastOn: d,
                broadcastEvent: m,
            }
        );
    }
    function Ib(n) {
        return n.getParam('height', Math.max(n.getElement().offsetHeight, 200));
    }
    function Rb(n) {
        return n.getParam('width', Vh.DOM.getStyle(n.getElement(), 'width'));
    }
    function Vb(n) {
        return on.from(n.settings.min_width).filter(mn);
    }
    function Nb(n) {
        return on.from(n.settings.min_height).filter(mn);
    }
    function Hb(n) {
        return on.from(n.getParam('max_width')).filter(mn);
    }
    function Pb(n) {
        return on.from(n.getParam('max_height')).filter(mn);
    }
    function zb(n) {
        return !1 !== n.getParam('menubar', !0, 'boolean');
    }
    function Lb(n) {
        const t = n.getParam('toolbar', !0);
        var e = !0 === t;
        var o = cn(t);
        let r = fn(t) && t.length > 0;
        return !Yb(n) && (r || o || e);
    }
    function jb(t) {
        const n = wn(t.settings);
        var e = C(n, function(n) {
            return /^toolbar([1-9])$/.test(n);
        });
        var o = S(e, function(n) {
            return t.getParam(n, !1, 'string');
        });
        var r = C(o, function(n) {
            return typeof n === 'string';
        });
        return r.length > 0 ? on.some(r) : on.none();
    }
    let Ub;
    var Wb;
    var Gb = Al({
        name: 'Container',
        factory: function(n) {
            var t = n.dom;
                    var e = t.attributes;
                    var o = c(t, ['attributes']);
            return {
                uid: n.uid,
                dom: {
                        tag: 'div',
                            attributes: N({ role: 'presentation' }, e),
                        ...o,
                    },
                components: n.components,
                behaviours: Rs(n.containerBehaviours),
                events: n.events,
                domModification: n.domModification,
                eventOrder: n.eventOrder,
            };
        },
        configFields: [
            St('components', []),
            Is('containerBehaviours', []),
            St('events', {}),
            St('domModification', {}),
            St('eventOrder', {}),
        ],
    });
    var Xb = tinymce.util.Tools.resolve('tinymce.EditorManager');
    var Yb = function(n) {
        return jb(n).fold(
            function() {
                return n.getParam('toolbar', [], 'string[]').length > 0;
            },
            function() {
                return !0;
            },
        );
    };
    ((Wb = Ub = Ub || {}).default = ''),
        (Wb.floating = 'floating'),
        (Wb.sliding = 'sliding'),
        (Wb.scrolling = 'scrolling');
    function qb(n) {
        return n.getParam('toolbar_drawer', '', 'string');
    }
    function Kb(n) {
        const t = (function(n) {
            return n.getParam('fixed_toolbar_container', '', 'string');
        })(n);
        return t.length > 0 && n.inline ? Ou(Lr(), t) : on.none();
    }
    function Jb(n) {
        return n.inline && Kb(n).isSome();
    }
    function $b(n) {
        return n.inline && !zb(n) && !Lb(n) && !Yb(n);
    }
    function Qb(n) {
        return (
            (n.getParam('toolbar_sticky', !1, 'boolean') || n.inline) &&
            !Jb(n) &&
            !$b(n)
        );
    }
    function Zb(n) {
        return n.touches === undefined || n.touches.length !== 1
            ? on.none()
            : on.some(n.touches[0]);
    }
    function ny(n) {
        return ya([
            bg.config({
                onFocus:
                    !1 === n.selectOnFocus
                        ? Z
                        : function(n) {
                              const t = n.element();
                              var e = Tr(t);
                              t.dom().setSelectionRange(0, e.length);
                          },
            }),
        ]);
    }
    function ty(n) {
        return {
            tag: n.tag,
            attributes: { type: 'text', ...n.inputAttributes },
            styles: n.inputStyles,
            classes: n.inputClasses,
        };
    }
    let ey;
    var oy;
    var ry;
    var iy;
    var uy = function(e) {
        var o = ye(on.none());
                var r = ye(!1);
                var i = $g(function(n) {
                e.fire('longpress', N({ ...n}, { type: 'longpress' })),
                    r.set(!0);
            }, 400);
        e.on(
            'touchstart',
            function(e) {
                Zb(e).each(function(n) {
                    i.cancel();
                    var t = {
                        x: nn(n.clientX),
                        y: nn(n.clientY),
                        target: nn(e.target),
                    };
                    i.throttle(e), r.set(!1), o.set(on.some(t));
                });
            },
            !0,
        ),
            e.on(
                'touchmove',
                function(n) {
                    i.cancel(),
                        Zb(n).each(function(t) {
                            o.get().each(function(n) {
                                !(function(n, t) {
                                    let e = Math.abs(n.clientX - t.x());
                                            var o = Math.abs(n.clientY - t.y());
                                    return e > 5 || o > 5;
                                })(t, n) ||
                                    (o.set(on.none()),
                                    r.set(!1),
                                    e.fire('longpresscancel'));
                            });
                        });
                },
                !0,
            ),
            e.on(
                'touchend touchcancel',
                function(t) {
                    i.cancel(),
                        'touchcancel' !== t.type &&
                            o
                                .get()
                                .filter(function(n) {
                                    return n.target().isEqualNode(t.target);
                                })
                                .each(function() {
                                    r.get()
                                        ? t.preventDefault()
                                        : e
                                              .fire('tap', {
                                                  touches: t.touches,
                                              })
                                              .isDefaultPrevented() &&
                                          t.preventDefault();
                                });
                },
                !0,
            );
    };
    var ay = Yo('form-component-change');
    var cy = Yo('form-close');
    var sy = Yo('form-cancel');
    var fy = Yo('form-action');
    var ly = Yo('form-submit');
    var dy = Yo('form-block');
    var my = Yo('form-unblock');
    let gy = Yo('form-tabchange');
    var py = Yo('form-resize');
    var hy = nn([St('prefix', 'form-field'), Is('fieldBehaviours', [nd, nl])]);
    var vy = nn([
        Cl({ schema: [ct('dom')], name: 'label' }),
        Cl({
            factory: {
                sketch: function(n) {
                    return {
                        uid: n.uid,
                        dom: {
                            tag: 'span',
                            styles: { display: 'none' },
                            attributes: { 'aria-hidden': 'true' },
                            innerHtml: n.text,
                        },
                    };
                },
            },
            schema: [ct('text')],
            name: 'aria-descriptor',
        }),
        wl({
            factory: {
                sketch: function(n) {
                    var t = X(n, ['factory']);
                    return n.factory.sketch(t);
                },
            },
            schema: [ct('factory')],
            name: 'field',
        }),
    ]);
    var by = _l({
        name: 'FormField',
        configFields: hy(),
        partFields: vy(),
        factory: function(r, n, t, e) {
            let o = Vs(r.fieldBehaviours, [
                    nd.config({
                        find: function(n) {
                            return Ks(n, r, 'field');
                        },
                    }),
                    nl.config({
                        store: {
                            mode: 'manual',
                            getValue: function(n) {
                                return nd.getCurrent(n).bind(nl.getValue);
                            },
                            setValue(n, t) {
                                    nd.getCurrent(n).each(function(n) {
                                        nl.setValue(n, t);
                                    });
                                },
                        },
                    }),
                ]);
                    var i = so([
                        Ri(function(n, t) {
                            var o = $s(n, r, [
                                'label',
                                'field',
                                'aria-descriptor',
                            ]);
                            o.field().each(function(e) {
                                var t = Yo(r.prefix);
                                o.label().each(function(n) {
                                    zo(n.element(), 'for', t),
                                        zo(e.element(), 'id', t);
                                }),
                                    o['aria-descriptor']().each(function(n) {
                                        var t = Yo(r.prefix);
                                        zo(n.element(), 'id', t),
                                            zo(
                                                e.element(),
                                                'aria-describedby',
                                                t,
                                            );
                                    });
                            });
                        }),
                    ]);
                    var u = {
                    getField(n) {
                            return Ks(n, r, 'field');
                        },
                    getLabel(n) {
                            return Ks(n, r, 'label');
                        },
                };
            return {
                uid: r.uid,
                dom: r.dom,
                components: n,
                behaviours: o,
                events: i,
                apis: u,
            };
        },
        apis: {
            getField(n, t) {
                    return n.getField(t);
                },
            getLabel(n, t) {
                    return n.getLabel(t);
                },
        },
    });
    var yy = nn([
        ht('data'),
        St('inputAttributes', {}),
        St('inputStyles', {}),
        St('tag', 'input'),
        St('inputClasses', []),
        Ku('onSetValue'),
        St('styles', {}),
        St('eventOrder', {}),
        Is('inputBehaviours', [nl, bg]),
        St('selectOnFocus', !0),
    ]);
    var xy = Al({
        name: 'Input',
        configFields: yy(),
        factory(n, t) {
                return {
                    uid: n.uid,
                    dom: ty(n),
                    components: [],
                    behaviours: (function(n) {
                        return N(
                            N({}, ny(n)),
                            Vs(n.inputBehaviours, [
                                nl.config({
                                    store: {
                                        mode: 'manual',
                                        initialValue: n.data.getOr(undefined),
                                        getValue: function(n) {
                                            return Tr(n.element());
                                        },
                                        setValue: function(n, t) {
                                            Tr(n.element()) !== t &&
                                                Br(n.element(), t);
                                        },
                                    },
                                    onSetValue: n.onSetValue,
                                }),
                            ]),
                        );
                    })(n),
                    eventOrder: n.eventOrder,
                };
            },
    });
    let wy = {};
    var Sy = { exports: wy };
    (ey = undefined),
        (oy = wy),
        (ry = Sy),
        (iy = undefined),
        (function(n) {
            typeof oy === 'object' && void 0 !== ry
                ? (ry.exports = n())
                : typeof ey === 'function' && ey.amd
                ? ey([], n)
                : ((typeof window !== 'undefined'
                      ? window
                      : typeof global !== 'undefined'
                      ? global
                      : typeof self !== 'undefined'
                      ? self
                      : this
                  ).EphoxContactWrapper = n());
        })(function() {
            return (function f(i, u, a) {
                function c(t, n) {
                    if (!u[t]) {
                        if (!i[t]) {
                            const e = typeof iy === 'function' && iy;
                            if (!n && e) return e(t, !0);
                            if (s) return s(t, !0);
                            const o = new Error(`Cannot find module '${t}'`);
                            throw ((o.code = 'MODULE_NOT_FOUND'), o);
                        }
                        const r = (u[t] = { exports: {} });
                        i[t][0].call(
                            r.exports,
                            function(n) {
                                return c(i[t][1][n] || n);
                            },
                            r,
                            r.exports,
                            f,
                            i,
                            u,
                            a,
                        );
                    }
                    return u[t].exports;
                }
                for (
                    var s = typeof iy === 'function' && iy, n = 0;
                    n < a.length;
                    n++
                )
                    c(a[n]);
                return c;
            })(
                {
                    1: [
                        function(n, t, e) {
                            let o;
                            var r;
                            let i = (t.exports = {});
                            function u() {
                                throw new Error(
                                    'setTimeout has not been defined',
                                );
                            }
                            function a() {
                                throw new Error(
                                    'clearTimeout has not been defined',
                                );
                            }
                            function c(n) {
                                if (o === setTimeout) return setTimeout(n, 0);
                                if ((o === u || !o) && setTimeout)
                                    return (o = setTimeout), setTimeout(n, 0);
                                try {
                                    return o(n, 0);
                                } catch (t) {
                                    try {
                                        return o.call(null, n, 0);
                                    } catch (t) {
                                        return o.call(this, n, 0);
                                    }
                                }
                            }
                            !(function() {
                                try {
                                    o =
                                        typeof setTimeout === 'function'
                                            ? setTimeout
                                            : u;
                                } catch (n) {
                                    o = u;
                                }
                                try {
                                    r =
                                        typeof clearTimeout === 'function'
                                            ? clearTimeout
                                            : a;
                                } catch (n) {
                                    r = a;
                                }
                            })();
                            let s;
                            var f = [];
                            let l = !1;
                            let d = -1;
                            function m() {
                                l &&
                                    s &&
                                    ((l = !1),
                                    s.length ? (f = s.concat(f)) : (d = -1),
                                    f.length && g());
                            }
                            function g() {
                                if (!l) {
                                    const n = c(m);
                                    l = !0;
                                    for (let t = f.length; t; ) {
                                        for (s = f, f = []; ++d < t; )
                                            s && s[d].run();
                                        (d = -1), (t = f.length);
                                    }
                                    (s = null),
                                        (l = !1),
                                        (function e(n) {
                                            if (r === clearTimeout)
                                                return clearTimeout(n);
                                            if ((r === a || !r) && clearTimeout)
                                                return (
                                                    (r = clearTimeout),
                                                    clearTimeout(n)
                                                );
                                            try {
                                                return r(n);
                                            } catch (t) {
                                                try {
                                                    return r.call(null, n);
                                                } catch (t) {
                                                    return r.call(this, n);
                                                }
                                            }
                                        })(n);
                                }
                            }
                            function p(n, t) {
                                (this.fun = n), (this.array = t);
                            }
                            function h() {}
                            (i.nextTick = function(n) {
                                const t = new Array(arguments.length - 1);
                                if (arguments.length > 1)
                                    for (let e = 1; e < arguments.length; e++)
                                        t[e - 1] = arguments[e];
                                f.push(new p(n, t)),
                                    f.length !== 1 || l || c(g);
                            }),
                                (p.prototype.run = function() {
                                    this.fun.apply(null, this.array);
                                }),
                                (i.title = 'browser'),
                                (i.browser = !0),
                                (i.env = {}),
                                (i.argv = []),
                                (i.version = ''),
                                (i.versions = {}),
                                (i.on = h),
                                (i.addListener = h),
                                (i.once = h),
                                (i.off = h),
                                (i.removeListener = h),
                                (i.removeAllListeners = h),
                                (i.emit = h),
                                (i.prependListener = h),
                                (i.prependOnceListener = h),
                                (i.listeners = function(n) {
                                    return [];
                                }),
                                (i.binding = function(n) {
                                    throw new Error(
                                        'process.binding is not supported',
                                    );
                                }),
                                (i.cwd = function() {
                                    return '/';
                                }),
                                (i.chdir = function(n) {
                                    throw new Error(
                                        'process.chdir is not supported',
                                    );
                                }),
                                (i.umask = function() {
                                    return 0;
                                });
                        },
                        {},
                    ],
                    2: [
                        function(n, l, t) {
                            (function(t) {
                                function o() {}
                                function i(n) {
                                    if (typeof this !== 'object')
                                        throw new TypeError(
                                            'Promises must be constructed via new',
                                        );
                                    if (typeof n !== 'function')
                                        throw new TypeError('not a function');
                                    (this._state = 0),
                                        (this._handled = !1),
                                        (this._value = undefined),
                                        (this._deferreds = []),
                                        f(n, this);
                                }
                                function r(o, r) {
                                    for (; o._state === 3; ) o = o._value;
                                    o._state !== 0
                                        ? ((o._handled = !0),
                                          i._immediateFn(function() {
                                              const n =
                                                  o._state === 1
                                                      ? r.onFulfilled
                                                      : r.onRejected;
                                              if (n !== null) {
                                                  let t;
                                                  try {
                                                      t = n(o._value);
                                                  } catch (e) {
                                                      return void a(
                                                          r.promise,
                                                          e,
                                                      );
                                                  }
                                                  u(r.promise, t);
                                              } else (o._state === 1 ? u : a)(r.promise, o._value);
                                          }))
                                        : o._deferreds.push(r);
                                }
                                function u(n, t) {
                                    try {
                                        if (t === n)
                                            throw new TypeError(
                                                'A promise cannot be resolved with itself.',
                                            );
                                        if (
                                            t &&
                                            (typeof t === 'object' ||
                                                typeof t === 'function')
                                        ) {
                                            const e = t.then;
                                            if (t instanceof i)
                                                return (
                                                    (n._state = 3),
                                                    (n._value = t),
                                                    void c(n)
                                                );
                                            if (typeof e === 'function')
                                                return void f(
                                                    (function o(n, t) {
                                                        return function() {
                                                            n.apply(
                                                                t,
                                                                arguments,
                                                            );
                                                        };
                                                    })(e, t),
                                                    n,
                                                );
                                        }
                                        (n._state = 1), (n._value = t), c(n);
                                    } catch (r) {
                                        a(n, r);
                                    }
                                }
                                function a(n, t) {
                                    (n._state = 2), (n._value = t), c(n);
                                }
                                function c(n) {
                                    n._state === 2 &&
                                        n._deferreds.length === 0 &&
                                        i._immediateFn(function() {
                                            n._handled ||
                                                i._unhandledRejectionFn(
                                                    n._value,
                                                );
                                        });
                                    for (
                                        let t = 0, e = n._deferreds.length;
                                        t < e;
                                        t++
                                    )
                                        r(n, n._deferreds[t]);
                                    n._deferreds = null;
                                }
                                function s(n, t, e) {
                                    (this.onFulfilled =
                                        typeof n === 'function' ? n : null),
                                        (this.onRejected =
                                            typeof t === 'function' ? t : null),
                                        (this.promise = e);
                                }
                                function f(n, t) {
                                    let e = !1;
                                    try {
                                        n(
                                            function(n) {
                                                e || ((e = !0), u(t, n));
                                            },
                                            function(n) {
                                                e || ((e = !0), a(t, n));
                                            },
                                        );
                                    } catch (o) {
                                        if (e) return;
                                        (e = !0), a(t, o);
                                    }
                                }
                                let n;
                                let e;
                                (n = this),
                                    (e = setTimeout),
                                    (i.prototype.catch = function(n) {
                                        return this.then(null, n);
                                    }),
                                    (i.prototype.then = function(n, t) {
                                        const e = new this.constructor(o);
                                        return r(this, new s(n, t, e)), e;
                                    }),
                                    (i.all = function(n) {
                                        const c = Array.prototype.slice.call(n);
                                        return new i(function(r, i) {
                                            if (c.length === 0) return r([]);
                                            let u = c.length;
                                            function a(t, n) {
                                                try {
                                                    if (
                                                        n &&
                                                        (typeof n === 'object' ||
                                                            typeof n ===
                                                                'function')
                                                    ) {
                                                        const e = n.then;
                                                        if (
                                                            typeof e ===
                                                            'function'
                                                        )
                                                            return void e.call(
                                                                n,
                                                                function(n) {
                                                                    a(t, n);
                                                                },
                                                                i,
                                                            );
                                                    }
                                                    (c[t] = n),
                                                        --u == 0 && r(c);
                                                } catch (o) {
                                                    i(o);
                                                }
                                            }
                                            for (let n = 0; n < c.length; n++)
                                                a(n, c[n]);
                                        });
                                    }),
                                    (i.resolve = function(t) {
                                        return t &&
                                            typeof t === 'object' &&
                                            t.constructor === i
                                            ? t
                                            : new i(function(n) {
                                                  n(t);
                                              });
                                    }),
                                    (i.reject = function(e) {
                                        return new i(function(n, t) {
                                            t(e);
                                        });
                                    }),
                                    (i.race = function(r) {
                                        return new i(function(n, t) {
                                            for (
                                                let e = 0, o = r.length;
                                                e < o;
                                                e++
                                            )
                                                r[e].then(n, t);
                                        });
                                    }),
                                    (i._immediateFn =
                                        typeof t === 'function'
                                            ? function(n) {
                                                  t(n);
                                              }
                                            : function(n) {
                                                  e(n, 0);
                                              }),
                                    (i._unhandledRejectionFn = function(n) {
                                        typeof console !== 'undefined' &&
                                            console &&
                                            console.warn(
                                                'Possible Unhandled Promise Rejection:',
                                                n,
                                            );
                                    }),
                                    (i._setImmediateFn = function(n) {
                                        i._immediateFn = n;
                                    }),
                                    (i._setUnhandledRejectionFn = function(n) {
                                        i._unhandledRejectionFn = n;
                                    }),
                                    void 0 !== l && l.exports
                                        ? (l.exports = i)
                                        : n.Promise || (n.Promise = i);
                            }.call(this, n('timers').setImmediate));
                        },
                        { timers: 3 },
                    ],
                    3: [
                        function(c, n, s) {
                            (function(n, t) {
                                const o = c('process/browser.js').nextTick;
                                var e = Function.prototype.apply;
                                let r = Array.prototype.slice;
                                var i = {};
                                let u = 0;
                                function a(n, t) {
                                    (this._id = n), (this._clearFn = t);
                                }
                                (s.setTimeout = function() {
                                    return new a(
                                        e.call(setTimeout, window, arguments),
                                        clearTimeout,
                                    );
                                }),
                                    (s.setInterval = function() {
                                        return new a(
                                            e.call(
                                                setInterval,
                                                window,
                                                arguments,
                                            ),
                                            clearInterval,
                                        );
                                    }),
                                    (s.clearTimeout = s.clearInterval = function(
                                        n,
                                    ) {
                                        n.close();
                                    }),
                                    (a.prototype.unref = a.prototype.ref = function() {}),
                                    (a.prototype.close = function() {
                                        this._clearFn.call(window, this._id);
                                    }),
                                    (s.enroll = function(n, t) {
                                        clearTimeout(n._idleTimeoutId),
                                            (n._idleTimeout = t);
                                    }),
                                    (s.unenroll = function(n) {
                                        clearTimeout(n._idleTimeoutId),
                                            (n._idleTimeout = -1);
                                    }),
                                    (s._unrefActive = s.active = function(n) {
                                        clearTimeout(n._idleTimeoutId);
                                        const t = n._idleTimeout;
                                        t >= 0 &&
                                            (n._idleTimeoutId = setTimeout(
                                                function() {
                                                    n._onTimeout &&
                                                        n._onTimeout();
                                                },
                                                t,
                                            ));
                                    }),
                                    (s.setImmediate =
                                        typeof n === 'function'
                                            ? n
                                            : function(n) {
                                                  const t = u++;
                                                  var e =
                                                      !(arguments.length < 2) &&
                                                      r.call(arguments, 1);
                                                  return (
                                                      (i[t] = !0),
                                                      o(function() {
                                                          i[t] &&
                                                              (e
                                                                  ? n.apply(
                                                                        null,
                                                                        e,
                                                                    )
                                                                  : n.call(
                                                                        null,
                                                                    ),
                                                              s.clearImmediate(
                                                                  t,
                                                              ));
                                                      }),
                                                      t
                                                  );
                                              }),
                                    (s.clearImmediate =
                                        typeof t === 'function'
                                            ? t
                                            : function(n) {
                                                  delete i[n];
                                              });
                            }.call(
                                this,
                                c('timers').setImmediate,
                                c('timers').clearImmediate,
                            ));
                        },
                        { 'process/browser.js': 1, timers: 3 },
                    ],
                    4: [
                        function(n, t, e) {
                            const o = n('promise-polyfill');
                            var r =
                                typeof window !== 'undefined'
                                    ? window
                                    : Function('return this;')();
                            t.exports = { boltExport: r.Promise || o };
                        },
                        { 'promise-polyfill': 2 },
                    ],
                },
                {},
                [4],
            )(4);
        });
    function Cy(n) {
        v.setTimeout(function() {
            throw n;
        }, 0);
    }
    function ky(n) {
        const t = Je(n);
        return vn(Py, t);
    }
    function Oy(n, t) {
        const e = t.getRoot(n).getOr(n.element());
        mr(e, t.invalidClass),
            t.notify.each(function(t) {
                ky(n.element()) && zo(n.element(), 'aria-invalid', !1),
                    t.getContainer(n).each(function(n) {
                        Ho(n, t.validHtml);
                    }),
                    t.onValid(n);
            });
    }
    function Ey(t, n, e, o) {
        const r = n.getRoot(t).getOr(t.element());
        lr(r, n.invalidClass),
            n.notify.each(function(n) {
                ky(t.element()) && zo(t.element(), 'aria-invalid', !0),
                    n.getContainer(t).each(function(n) {
                        Ho(n, o);
                    }),
                    n.onInvalid(t, o);
            });
    }
    function Ty(t, n, e) {
        return n.validator.fold(
            function() {
                return Hy(an.value(!0));
            },
            function(n) {
                return n.validate(t);
            },
        );
    }
    function By(t, e, n) {
        return (
            e.notify.each(function(n) {
                n.onValidate(t);
            }),
            Ty(t, e).map(function(n) {
                return t.getSystem().isConnected()
                    ? n.fold(
                          function(n) {
                              return Ey(t, e, 0, n), an.error(n);
                          },
                          function(n) {
                              return Oy(t, e), an.value(n);
                          },
                      )
                    : an.error('No longer in system');
            })
        );
    }
    function Dy(n, t, e, o) {
        const r = Yy(n, t, e, o);
        return by.sketch(r);
    }
    function Ay(n, t) {
        return by.parts().label({
            dom: {
                tag: 'label',
                classes: ['tox-label'],
                innerHtml: t.translate(n),
            },
        });
    }
    let _y;
    var My;
    let Fy = Sy.exports.boltExport;
    var Iy = function(n) {
        var e = on.none();
                var t = [];
                var o = function(n) {
                    r() ? u(n) : t.push(n);
                };
                var r = function() {
                    return e.isSome();
                };
                var i = function(n) {
                    bn(n, u);
                };
                var u = function(t) {
                e.each(function(n) {
                    v.setTimeout(function() {
                        t(n);
                    }, 0);
                });
            };
        return (
            n(function(n) {
                (e = on.some(n)), i(t), (t = []);
            }),
            {
                get: o,
                map(e) {
                        return Iy(function(t) {
                            o(function(n) {
                                t(e(n));
                            });
                        });
                    },
                isReady: r,
            }
        );
    };
    var Ry = {
        nu: Iy,
        pure(t) {
                return Iy(function(n) {
                    n(t);
                });
            },
    };
    var Vy = function(e) {
        function n(n) {
            e().then(n, Cy);
        }
        return {
            map(n) {
                    return Vy(function() {
                        return e().then(n);
                    });
                },
            bind(t) {
                    return Vy(function() {
                        return e().then(function(n) {
                            return t(n).toPromise();
                        });
                    });
                },
            anonBind(n) {
                    return Vy(function() {
                        return e().then(function() {
                            return n.toPromise();
                        });
                    });
                },
            toLazy() {
                    return Ry.nu(n);
                },
            toCached() {
                    var n = null;
                    return Vy(function() {
                        return null === n && (n = e()), n;
                    });
                },
            toPromise: e,
            get: n,
        };
    };
    let Ny = function(n) {
        return Vy(function() {
            return new Fy(n);
        });
    };
    var Hy = function(n) {
        return Vy(function() {
            return Fy.resolve(n);
        });
    };
    var Py = ['input', 'textarea'];
    var zy = /* */ Object.freeze({
        markValid: Oy,
        markInvalid: Ey,
        query: Ty,
        run: By,
        isInvalid(n, t) {
                var e = t.getRoot(n).getOr(n.element());
                return gr(e, t.invalidClass);
            },
    });
    var Ly = /* */ Object.freeze({
        events(t, n) {
                return t.validator
                    .map(function(n) {
                        return so(
                            [
                                mo(n.onEvent, function(n) {
                                    By(n, t).get(l);
                                }),
                            ].concat(
                                n.validateOnLoad
                                    ? [
                                          Ri(function(n) {
                                              By(n, t).get(Z);
                                          }),
                                      ]
                                    : [],
                            ),
                        );
                    })
                    .getOr({});
            },
    });
    var jy = [
        ct('invalidClass'),
        St('getRoot', on.none),
        wt('notify', [
            St('aria', 'alert'),
            St('getContainer', on.none),
            St('validHtml', ''),
            Ku('onValid'),
            Ku('onInvalid'),
            Ku('onValidate'),
        ]),
        wt('validator', [
            ct('validate'),
            St('onEvent', 'input'),
            St('validateOnLoad', !0),
        ]),
    ];
    var Uy = xa({
        fields: jy,
        name: 'invalidating',
        active: Ly,
        apis: zy,
        extra: {
            validation: function(e) {
                return function(n) {
                    var t = nl.getValue(n);
                    return Hy(e(t));
                };
            },
        },
    });
    let Wy = /* */ Object.freeze({
        exhibit: function(n, t) {
            return nr({
                attributes: K([{ key: t.tabAttr, value: 'true' }]),
            });
        },
    });
    var Gy = [St('tabAttr', 'data-alloy-tabstop')];
    let Xy = xa({ fields: Gy, name: 'tabstopping', active: Wy });
    var Yy = function(n, t, e, o) {
        return {
            dom: qy(e),
            components: n.toArray().concat([t]),
            fieldBehaviours: ya(o),
        };
    };
    var qy = function(n) {
        return { tag: 'div', classes: ['tox-form__group'].concat(n) };
    };
    let Ky = /* */ Object.freeze({
        getCoupled: function(n, t, e, o) {
            return e.getOrCreate(n, t, o);
        },
    });
    var Jy = [st('others', nt(an.value, de()))];
    var $y = xa({
        fields: Jy,
        name: 'coupling',
        apis: Ky,
        state: /* */ Object.freeze({
            init: function(n) {
                var i = {};
                        var t = nn({});
                return tu({
                    readState: t,
                    getOrCreate: function(e, o, r) {
                        let n = wn(o.others);
                        if (n)
                            return Nn(i, r).getOrThunk(function() {
                                let n = Nn(o.others, r).getOrDie(
                                        'No information found for coupled component: ' +
                                            r,
                                    )(e);
                                        var t = e.getSystem().build(n);
                                return (i[r] = t);
                            });
                        throw new Error(
                            'Cannot find coupled component: ' +
                                r +
                                '. Known coupled components: ' +
                                JSON.stringify(n, null, 2),
                        );
                    },
                });
            },
        }),
    });
    let Qy = nn('sink');
    var Zy = nn(
        Cl({
            name: Qy(),
            overrides: nn({
                dom: { tag: 'div' },
                behaviours: ya([_f.config({ useFixed: a })]),
                events: so([bo(ti()), bo(qr()), bo(ii())]),
            }),
        }),
    );
    ((My = _y = _y || {})[(My.HighlightFirst = 0)] = 'HighlightFirst'),
        (My[(My.HighlightNone = 1)] = 'HighlightNone');
    function nx(n, t) {
        const e = n.getHotspot(t).getOr(t);
        let o = n.getAnchorOverrides();
        return n.layouts.fold(
            function() {
                return { anchor: 'hotspot', hotspot: e, overrides: o };
            },
            function(n) {
                return {
                    anchor: 'hotspot',
                    hotspot: e,
                    overrides: o,
                    layouts: n,
                };
            },
        );
    }
    function tx(n, t, e, o, r, i, u) {
        return (function(n, t, r, e, i, o, u) {
            const a = (function(n, t, e) {
                return (0, n.fetch)(e).map(t);
            })(n, t, e);
            let c = Cw(e, n);
            return a.map(function(n) {
                return n.bind(function(n) {
                    return on.from(
                        jg.sketch(
                            {...o.menu(), uid: qo(''),
                                data: n,
                                highlightImmediately: u === _y.HighlightFirst,
                                onOpenMenu(n, t) {
                                    var e = c().getOrDie();
                                    _f.position(e, r, t), Lf.decloak(i);
                                },
                                onOpenSubmenu(n, t, e) {
                                    var o = c().getOrDie();
                                    _f.position(
                                        o,
                                        { anchor: 'submenu', item: t },
                                        e,
                                    ),
                                        Lf.decloak(i);
                                },
                                onRepositionMenu(n, t, e) {
                                    var o = c().getOrDie();
                                    _f.position(o, r, t),
                                        bn(e, function(n) {
                                            _f.position(
                                                o,
                                                {
                                                    anchor: 'submenu',
                                                    item: n.triggeringItem,
                                                },
                                                n.triggeredMenu,
                                            );
                                        });
                                },
                                onEscape() {
                                    return (
                                        bg.focus(e), Lf.close(i), on.some(!0)
                                    );
                                },},
                        ),
                    );
                });
            });
        })(n, t, nx(n, e), e, o, r, u).map(function(n) {
            return (
                n.fold(
                    function() {
                        Lf.isOpen(o) && Lf.close(o);
                    },
                    function(n) {
                        Lf.cloak(o), Lf.open(o, n), i(o);
                    },
                ),
                o
            );
        });
    }
    function ex(n, t, e, o, r, i, u) {
        return Lf.close(o), Hy(o);
    }
    function ox(n, t, e, o, r, i) {
        const u = $y.getCoupled(e, 'sandbox');
        return (Lf.isOpen(u) ? ex : tx)(n, t, e, u, o, r, i);
    }
    function rx(n, t, e) {
        const o = nd.getCurrent(t).getOr(t);
        var r = gu(n.element());
        e
            ? xr(o.element(), 'min-width', `${r}px`)
            : (function(n, t) {
                  Nu.set(n, t);
              })(o.element(), r);
    }
    function ix(n) {
        Lf.getState(n).each(function(n) {
            jg.repositionMenus(n);
        });
    }
    function ux(o, r, i) {
        const u = Tu();
        let n = Cw(r, o);
        return {
            dom: {
                tag: 'div',
                classes: o.sandboxClasses,
                attributes: { id: u.id(), role: 'listbox' },
            },
            behaviours: el(o.sandboxBehaviours, [
                nl.config({ store: { mode: 'memory', initialValue: r } }),
                Lf.config({
                    onOpen(n, t) {
                        let e = nx(o, r);
                        u.link(r.element()),
                            o.matchWidth && rx(e.hotspot, t, o.useMinWidth),
                            o.onOpen(e, n, t),
                            i !== undefined &&
                                i.onOpen !== undefined &&
                                i.onOpen(n, t);
                    },
                    onClose(n, t) {
                        u.unlink(r.element()),
                            i !== undefined &&
                                i.onClose !== undefined &&
                                i.onClose(n, t);
                    },
                    isPartOf(n, t, e) {
                        return ju(t, e) || ju(r, e);
                    },
                    getAttachPoint() {
                        return n().getOrDie();
                    },
                }),
                nd.config({
                    find(n) {
                        return Lf.getState(n).bind(function(n) {
                            return nd.getCurrent(n);
                        });
                    },
                }),
                dc.config({
                    channels: {
                        ...Ts({ isExtraPart: nn(!1) }),
                        ...Bs({ isExtraPart: nn(!1), doReposition: ix }),
                    },
                }),
            ]),
        };
    }
    function ax(n) {
        const t = $y.getCoupled(n, 'sandbox');
        ix(t);
    }
    function cx() {
        return [
            St('sandboxClasses', []),
            tl('sandboxBehaviours', [nd, dc, Lf, nl]),
        ];
    }
    function sx(e, t, o) {
        function r(n, t) {
            io(n, Dw, { value: t });
        }
        let n = by.parts().field({
            factory: xy,
            inputClasses: ['tox-textfield'],
            onSetValue(n) {
                return Uy.run(n).get(function() {});
            },
            inputBehaviours: ya([
                Xy.config({}),
                Uy.config({
                    invalidClass: 'tox-textbox-field-invalid',
                    getRoot(n) {
                        return To(n.element());
                    },
                    notify: {
                        onValid(n) {
                            let t = nl.getValue(n);
                            io(n, Bw, { color: t });
                        },
                    },
                    validator: {
                        validateOnLoad: !1,
                        validate(n) {
                            var t = nl.getValue(n);
                            if (t.length === 0) return Hy(an.value(!0));
                            var e = we.fromTag('span');
                            xr(e, 'background-color', t);
                            let o = Cr(e, 'background-color').fold(
                                function() {
                                    return an.error('blah');
                                },
                                function(n) {
                                    return an.value(t);
                                },
                            );
                            return Hy(o);
                        },
                    },
                }),
            ]),
            selectOnFocus: !1,
        });
        let i = e.label.map(function(n) {
            return Ay(n, t.providers);
        });
        var u = bm(
            (function(e, o) {
                return Ew.sketch({
                    dom: e.dom,
                    components: e.components,
                    toggleClass: 'mce-active',
                    dropdownBehaviours: ya([Tw.config({}), Xy.config({})]),
                    layouts: e.layouts,
                    sandboxClasses: ['tox-dialog__popups'],
                    lazySink: o.getSink,
                    fetch(t) {
                        return Ny(function(n) {
                            return e.fetch(n);
                        }).map(function(n) {
                            return on.from(
                                ab(
                                    Dn(
                                        Bv(
                                            Yo('menu-value'),
                                            n,
                                            function(n) {
                                                e.onItemAction(t, n);
                                            },
                                            e.columns,
                                            e.presets,
                                            Ih.CLOSE_ON_EXECUTE,
                                            function() {
                                                return !1;
                                            },
                                            o.providers,
                                        ),
                                        {
                                            movement: Dv(e.columns, e.presets),
                                        },
                                    ),
                                ),
                            );
                        });
                    },
                    parts: { menu: Cv(0, 0, e.presets) },
                });
            })(
                {
                    dom: {
                        tag: 'span',
                        attributes: {
                            'aria-label': t.providers.translate('Color swatch'),
                        },
                    },
                    layouts: on.some({
                        onRtl() {
                            return [aa];
                        },
                        onLtr() {
                            return [ca];
                        },
                    }),
                    components: [],
                    fetch: Wv.getFetch(o.getColors(), o.hasCustomColors()),
                    columns: o.getColorCols(),
                    presets: 'color',
                    onItemAction(n, e) {
                        u.getOpt(n).each(function(t) {
                            'custom' === e
                                ? o.colorPicker(function(n) {
                                      n.fold(
                                          function() {
                                              return ro(t, Aw);
                                          },
                                          function(n) {
                                              r(t, n), Nv(n);
                                          },
                                      );
                                  }, '#ffffff')
                                : r(t, e === 'remove' ? '' : e);
                        });
                    },
                },
                t,
            ),
        );
        return by.sketch({
            dom: { tag: 'div', classes: ['tox-form__group'] },
            components: i.toArray().concat([
                {
                    dom: { tag: 'div', classes: ['tox-color-input'] },
                    components: [n, u.asSpec()],
                },
            ]),
            fieldBehaviours: ya([
                Jd('form-field-events', [
                    mo(Bw, function(n, t) {
                        u.getOpt(n).each(function(n) {
                            xr(
                                n.element(),
                                'background-color',
                                t.event().color(),
                            );
                        }),
                            io(n, ay, { name: e.name });
                    }),
                    mo(Dw, function(t, e) {
                        by.getField(t).each(function(n) {
                            nl.setValue(n, e.event().value()),
                                nd.getCurrent(t).each(bg.focus);
                        });
                    }),
                    mo(Aw, function(t, n) {
                        by.getField(t).each(function(n) {
                            nd.getCurrent(t).each(bg.focus);
                        });
                    }),
                ]),
            ]),
        });
    }
    function fx(n, t, e) {
        return { hue: nn(n), saturation: nn(t), value: nn(e) };
    }
    function lx(t) {
        return Cl({
            name: `${t}-edge`,
            overrides(n) {
                return n.model.manager.edgeActions[t].fold(
                    function() {
                        return {};
                    },
                    function(o) {
                        return {
                            events: so([
                                go(Wr(), o, [n]),
                                go(qr(), o, [n]),
                                go(
                                    Kr(),
                                    function(n, t, e) {
                                        e.mouseIsDown.get() && o(n, e);
                                    },
                                    [n],
                                ),
                            ]),
                        };
                    },
                );
            },
        });
    }
    function dx(n) {
        const t = n.event().raw();
        if (
            (function(n) {
                return n.type.indexOf('touch') !== -1;
            })(t)
        ) {
            const e = t;
            return e.touches !== undefined && e.touches.length === 1
                ? on.some(e.touches[0]).map(function(n) {
                      return Ru(n.clientX, n.clientY);
                  })
                : on.none();
        }
        const o = t;
        return o.clientX !== undefined
            ? on.some(o).map(function(n) {
                  return Ru(n.clientX, n.clientY);
              })
            : on.none();
    }
    function mx(n) {
        return n.model.minX;
    }
    function gx(n) {
        return n.model.minY;
    }
    function px(n) {
        return n.model.minX - 1;
    }
    function hx(n) {
        return n.model.minY - 1;
    }
    function vx(n) {
        return n.model.maxX;
    }
    function bx(n) {
        return n.model.maxY;
    }
    function yx(n) {
        return n.model.maxX + 1;
    }
    function xx(n) {
        return n.model.maxY + 1;
    }
    function wx(n, t, e) {
        return t(n) - e(n);
    }
    function Sx(n) {
        return wx(n, vx, mx);
    }
    function Cx(n) {
        return wx(n, bx, gx);
    }
    function kx(n) {
        return Sx(n) / 2;
    }
    function Ox(n) {
        return Cx(n) / 2;
    }
    function Ex(n) {
        return n.stepSize;
    }
    function Tx(n) {
        return n.snapToGrid;
    }
    function Bx(n) {
        return n.snapStart;
    }
    function Dx(n) {
        return n.rounded;
    }
    function Ax(n, t) {
        return n[`${t}-edge`] !== undefined;
    }
    function _x(n) {
        return Ax(n, 'left');
    }
    function Mx(n) {
        return Ax(n, 'right');
    }
    function Fx(n) {
        return Ax(n, 'top');
    }
    function Ix(n) {
        return Ax(n, 'bottom');
    }
    function Rx(n) {
        return n.model.value.get();
    }
    function Vx(n) {
        return { x: nn(n) };
    }
    function Nx(n) {
        return { y: nn(n) };
    }
    function Hx(n, t) {
        return { x: nn(n), y: nn(t) };
    }
    function Px(n, t) {
        io(n, Uw(), { value: t });
    }
    function zx(n, t, e, o) {
        return n < t ? n : e < n ? e : n === t ? t - 1 : Math.max(t, n - o);
    }
    function Lx(n, t, e, o) {
        return e < n ? n : n < t ? t : n === e ? e + 1 : Math.min(e, n + o);
    }
    function jx(n, t, e) {
        return Math.max(t, Math.min(e, n));
    }
    function Ux(n) {
        const t = n.min;
        var e = n.max;
        var o = n.range;
        let r = n.value;
        var i = n.step;
        var u = n.snap;
        let a = n.snapStart;
        var c = n.rounded;
        var s = n.hasMinEdge;
        var f = n.hasMaxEdge;
        var l = n.minBound;
        var d = n.maxBound;
        let m = n.screenRange;
        let g = s ? t - 1 : t;
        var p = f ? e + 1 : e;
        if (r < l) return g;
        if (d < r) return p;
        const h = (function(n, t, e) {
            return Math.min(e, Math.max(n, t)) - t;
        })(r, l, d);
        var v = jx((h / m) * o + t, g, p);
        return u && t <= v && v <= e
            ? (function(u, e, a, c, n) {
                  return n.fold(
                      function() {
                          const n = u - e;
                          var t = Math.round(n / c) * c;
                          return jx(e + t, e - 1, a + 1);
                      },
                      function(n) {
                          const t = (u - n) % c;
                          var e = Math.round(t / c);
                          let o = Math.floor((u - n) / c);
                          var r = Math.floor((a - n) / c);
                          let i = n + Math.min(r, o + e) * c;
                          return Math.max(n, i);
                      },
                  );
              })(v, t, e, i, a)
            : c
            ? Math.round(v)
            : v;
    }
    function Wx(n) {
        const t = n.min;
        var e = n.max;
        let o = n.range;
        var r = n.value;
        let i = n.hasMinEdge;
        var u = n.hasMaxEdge;
        var a = n.maxBound;
        let c = n.maxOffset;
        var s = n.centerMinEdge;
        let f = n.centerMaxEdge;
        return r < t ? (i ? 0 : s) : e < r ? (u ? a : f) : ((r - t) / o) * c;
    }
    function Gx(n) {
        return n
            .element()
            .dom()
            .getBoundingClientRect();
    }
    function Xx(n, t) {
        return n[t];
    }
    function Yx(n) {
        const t = Gx(n);
        return Xx(t, Ww);
    }
    function qx(n) {
        const t = Gx(n);
        return Xx(t, 'right');
    }
    function Kx(n) {
        const t = Gx(n);
        return Xx(t, 'top');
    }
    function Jx(n) {
        const t = Gx(n);
        return Xx(t, 'bottom');
    }
    function $x(n) {
        const t = Gx(n);
        return Xx(t, 'width');
    }
    function Qx(n) {
        const t = Gx(n);
        return Xx(t, 'height');
    }
    function Zx(n, t, e) {
        return (n + t) / 2 - e;
    }
    function nw(n, t) {
        const e = Gx(n);
        var o = Gx(t);
        let r = Xx(e, Ww);
        var i = Xx(e, 'right');
        let u = Xx(o, Ww);
        return Zx(r, i, u);
    }
    function tw(n, t) {
        const e = Gx(n);
        let o = Gx(t);
        var r = Xx(e, 'top');
        var i = Xx(e, 'bottom');
        let u = Xx(o, 'top');
        return Zx(r, i, u);
    }
    function ew(n, t) {
        io(n, Uw(), { value: t });
    }
    function ow(n) {
        return { x: nn(n) };
    }
    function rw(n, t, e) {
        const o = {
            min: mx(t),
            max: vx(t),
            range: Sx(t),
            value: e,
            step: Ex(t),
            snap: Tx(t),
            snapStart: Bx(t),
            rounded: Dx(t),
            hasMinEdge: _x(t),
            hasMaxEdge: Mx(t),
            minBound: Yx(n),
            maxBound: qx(n),
            screenRange: $x(n),
        };
        return Ux(o);
    }
    function iw(e) {
        return function(n, t) {
            return (function(n, t, e) {
                const o = (n > 0 ? Lx : zx)(Rx(e).x(), mx(e), vx(e), Ex(e));
                return ew(t, ow(o)), on.some(o);
            })(e, n, t).map(function() {
                return !0;
            });
        };
    }
    function uw(n, t, e, o, r, i) {
        const u = (function(t, n, e, o, r) {
            const i = $x(t);
            var u = o
                .bind(function(n) {
                    return on.some(nw(n, t));
                })
                .getOr(0);
            var a = r
                .bind(function(n) {
                    return on.some(nw(n, t));
                })
                .getOr(i);
            var c = {
                min: mx(n),
                max: vx(n),
                range: Sx(n),
                value: e,
                hasMinEdge: _x(n),
                hasMaxEdge: Mx(n),
                minBound: Yx(t),
                minOffset: 0,
                maxBound: qx(t),
                maxOffset: i,
                centerMinEdge: u,
                centerMaxEdge: a,
            };
            return Wx(c);
        })(t, i, e, o, r);
        return Yx(t) - Yx(n) + u;
    }
    function aw(n, t) {
        io(n, Uw(), { value: t });
    }
    function cw(n) {
        return { y: nn(n) };
    }
    function sw(n, t, e) {
        const o = {
            min: gx(t),
            max: bx(t),
            range: Cx(t),
            value: e,
            step: Ex(t),
            snap: Tx(t),
            snapStart: Bx(t),
            rounded: Dx(t),
            hasMinEdge: Fx(t),
            hasMaxEdge: Ix(t),
            minBound: Kx(n),
            maxBound: Jx(n),
            screenRange: Qx(n),
        };
        return Ux(o);
    }
    function fw(e) {
        return function(n, t) {
            return (function(n, t, e) {
                const o = (n > 0 ? Lx : zx)(Rx(e).y(), gx(e), bx(e), Ex(e));
                return aw(t, cw(o)), on.some(o);
            })(e, n, t).map(function() {
                return !0;
            });
        };
    }
    function lw(n, t, e, o, r, i) {
        const u = (function(t, n, e, o, r) {
            const i = Qx(t);
            var u = o
                .bind(function(n) {
                    return on.some(tw(n, t));
                })
                .getOr(0);
            let a = r
                .bind(function(n) {
                    return on.some(tw(n, t));
                })
                .getOr(i);
            var c = {
                min: gx(n),
                max: bx(n),
                range: Cx(n),
                value: e,
                hasMinEdge: Fx(n),
                hasMaxEdge: Ix(n),
                minBound: Kx(t),
                minOffset: 0,
                maxBound: Jx(t),
                maxOffset: i,
                centerMinEdge: u,
                centerMaxEdge: a,
            };
            return Wx(c);
        })(t, i, e, o, r);
        return Kx(t) - Kx(n) + u;
    }
    function dw(n, t) {
        io(n, Uw(), { value: t });
    }
    function mw(n, t) {
        return { x: nn(n), y: nn(t) };
    }
    function gw(e, o) {
        return function(n, t) {
            return (function(n, t, e, o) {
                const r = n > 0 ? Lx : zx;
                var i = t ? Rx(o).x() : r(Rx(o).x(), mx(o), vx(o), Ex(o));
                let u = t ? r(Rx(o).y(), gx(o), bx(o), Ex(o)) : Rx(o).y();
                return dw(e, mw(i, u)), on.some(i);
            })(e, o, n, t).map(function() {
                return !0;
            });
        };
    }
    function pw(n) {
        return `<alloy.field.${n}>`;
    }
    function hw(n) {
        return (function(n) {
            return kS[n];
        })(n);
    }
    function vw(n, t, e) {
        return nl.config(
            Dn(
                { store: { mode: 'manual', getValue: t, setValue: e } },
                n
                    .map(function(n) {
                        return { store: { initialValue: n } };
                    })
                    .getOr({}),
            ),
        );
    }
    function bw(n, t, e) {
        return vw(
            n,
            function(n) {
                return t(n.element());
            },
            function(n, t) {
                return e(n.element(), t);
            },
        );
    }
    function yw(e, t) {
        function o(n, t) {
            t.stop();
        }
        function r(n) {
            return function(t, e) {
                bn(n, function(n) {
                    n(t, e);
                });
            };
        }
        function i(n, t) {
            if (!kh.isDisabled(n)) {
                const e = t.event().raw();
                a(n, e.dataTransfer.files);
            }
        }
        function u(n, t) {
            const e = t.event().raw().target.files;
            a(n, e);
        }
        var a = function(n, t) {
            nl.setValue(
                n,
                (function(n) {
                    let t = new RegExp(
                        `(${'.jpg,.jpeg,.png,.gif'
                            .split(/\s*,\s*/)
                            .join('|')})$`,
                        'i',
                    );
                    return C(xn(n), function(n) {
                        return t.test(n.name);
                    });
                })(t),
            ),
                io(n, ay, { name: e.name });
        };
        var c = bm({
            dom: {
                tag: 'input',
                attributes: { type: 'file', accept: 'image/*' },
                styles: { display: 'none' },
            },
            behaviours: ya([Jd('input-file-events', [bo(ii()), bo(pi())])]),
        });
        let n = e.label.map(function(n) {
            return Ay(n, t);
        });
        let s = by.parts().field({
            factory: {
                sketch(n) {
                    return {
                        uid: n.uid,
                        dom: {
                            tag: 'div',
                            classes: ['tox-dropzone-container'],
                        },
                        behaviours: ya([
                            AS([]),
                            wS(),
                            kh.config({}),
                            kg.config({
                                toggleClass: 'dragenter',
                                toggleOnExecute: !1,
                            }),
                            Jd('dropzone-events', [
                                mo('dragenter', r([o, kg.toggle])),
                                mo('dragleave', r([o, kg.toggle])),
                                mo('dragover', o),
                                mo('drop', r([o, i])),
                                mo(ri(), u),
                            ]),
                        ]),
                        components: [
                            {
                                dom: {
                                    tag: 'div',
                                    classes: ['tox-dropzone'],
                                    styles: {},
                                },
                                components: [
                                    {
                                        dom: {
                                            tag: 'p',
                                            innerHtml: t.translate(
                                                'Drop an image here',
                                            ),
                                        },
                                    },
                                    Xg.sketch({
                                        dom: {
                                            tag: 'button',
                                            innerHtml: t.translate(
                                                'Browse for an image',
                                            ),
                                            styles: {
                                                position: 'relative',
                                            },
                                            classes: [
                                                'tox-button',
                                                'tox-button--secondary',
                                            ],
                                        },
                                        components: [c.asSpec()],
                                        action(n) {
                                                c.get(n)
                                                    .element()
                                                    .dom()
                                                    .click();
                                            },
                                        buttonBehaviours: ya([Xy.config({})]),
                                    }),
                                ],
                            },
                        ],
                    };
                },
            },
        });
        return Dy(n, s, ['tox-form__group--stretched'], []);
    }
    function xw(n) {
        return {
            dom: {
                tag: 'div',
                styles: { width: '1px', height: '1px', outline: 'none' },
                attributes: { tabindex: '0' },
                classes: n,
            },
            behaviours: ya([bg.config({ ignore: !0 }), Xy.config({})]),
        };
    }
    function ww(n, t) {
        io(n, ti(), { raw: { which: 9, shiftKey: t } });
    }
    function Sw(n, t) {
        const e = VS && n.sandboxed;
        var o = N(
            N(
                {},
                n.label
                    .map(function(n) {
                        return { title: n };
                    })
                    .getOr({}),
            ),
            e ? { sandbox: 'allow-scripts allow-same-origin' } : {},
        );
        let r = (function(o) {
            var r = ye('');
            return {
                getValue: function(n) {
                    return r.get();
                },
                setValue: function(n, t) {
                    if (o) zo(n.element(), 'srcdoc', t);
                    else {
                        zo(n.element(), 'src', "javascript:''");
                        var e = n.element().dom().contentWindow.document;
                        e.open(), e.write(t), e.close();
                    }
                    r.set(t);
                },
            };
        })(e);
        let i = n.label.map(function(n) {
            return Ay(n, t);
        });
        let u = by.parts().field({
            factory: {
                sketch(n) {
                    return RS({
                        uid: n.uid,
                        dom: { tag: 'iframe', attributes: o },
                        behaviours: ya([
                            Xy.config({}),
                            bg.config({}),
                            BS(on.none(), r.getValue, r.setValue),
                        ]),
                    });
                },
            },
        });
        return Dy(i, u, ['tox-form__group--stretched'], []);
    }
    var Cw = function(t, n) {
        return t
            .getSystem()
            .getByUid(`${n.uid}-${Qy()}`)
            .map(function(n) {
                return function() {
                    return an.value(n);
                };
            })
            .getOrThunk(function() {
                return n.lazySink.fold(
                    function() {
                        return function() {
                            return an.error(
                                new Error(
                                    'No internal sink is specified, nor could an external sink be found',
                                ),
                            );
                        };
                    },
                    function(n) {
                        return function() {
                            return n(t);
                        };
                    },
                );
            });
    };
    let kw = nn(
        [
            ct('dom'),
            ct('fetch'),
            Ku('onOpen'),
            Ju('onExecute'),
            St('getHotspot', on.some),
            St('getAnchorOverrides', nn({})),
            St('layouts', on.none()),
            Is('dropdownBehaviours', [kg, $y, dg, bg]),
            ct('toggleClass'),
            St('eventOrder', {}),
            ht('lazySink'),
            St('matchWidth', !1),
            St('useMinWidth', !1),
            ht('role'),
        ].concat(cx()),
    );
    var Ow = nn([
        Sl({
            schema: [Xu()],
            name: 'menu',
            defaults: function(n) {
                return { onExecute: n.onExecute };
            },
        }),
        Zy(),
    ]);
    var Ew = _l({
        name: 'Dropdown',
        configFields: kw(),
        partFields: Ow(),
        factory(t, n, e, o) {
                function r(n) {
                    Lf.getState(n).each(function(n) {
                        jg.highlightPrimary(n);
                    });
                }
                function i(n, t) {
                    return uo(n), on.some(!0);
                }
                var u,
                    a,
                    c = {
                        expand: function(n) {
                            kg.isOn(n) ||
                                ox(
                                    t,
                                    function(n) {
                                        return n;
                                    },
                                    n,
                                    o,
                                    Z,
                                    _y.HighlightNone,
                                ).get(Z);
                        },
                        open: function(n) {
                            kg.isOn(n) ||
                                ox(
                                    t,
                                    function(n) {
                                        return n;
                                    },
                                    n,
                                    o,
                                    Z,
                                    _y.HighlightFirst,
                                ).get(Z);
                        },
                        isOpen: kg.isOn,
                        close: function(n) {
                            kg.isOn(n) &&
                                ox(
                                    t,
                                    function(n) {
                                        return n;
                                    },
                                    n,
                                    o,
                                    Z,
                                    _y.HighlightFirst,
                                ).get(Z);
                        },
                        repositionMenus: function(n) {
                            kg.isOn(n) && ax(n);
                        },
                    };
                return {
                    uid: t.uid,
                    dom: t.dom,
                    components: n,
                    behaviours: Vs(t.dropdownBehaviours, [
                        kg.config({
                            toggleClass: t.toggleClass,
                            aria: { mode: 'expanded' },
                        }),
                        $y.config({
                            others: {
                                sandbox: function(n) {
                                    return ux(t, n, {
                                        onOpen: function() {
                                            kg.on(n);
                                        },
                                        onClose: function() {
                                            kg.off(n);
                                        },
                                    });
                                },
                            },
                        }),
                        dg.config({
                            mode: 'special',
                            onSpace: i,
                            onEnter: i,
                            onDown: function(n, t) {
                                if (Ew.isOpen(n)) {
                                    var e = $y.getCoupled(n, 'sandbox');
                                    r(e);
                                } else Ew.open(n);
                                return on.some(!0);
                            },
                            onEscape: function(n, t) {
                                return Ew.isOpen(n)
                                    ? (Ew.close(n), on.some(!0))
                                    : on.none();
                            },
                        }),
                        bg.config({}),
                    ]),
                    events: im(
                        on.some(function(n) {
                            ox(
                                t,
                                function(n) {
                                    return n;
                                },
                                n,
                                o,
                                r,
                                _y.HighlightFirst,
                            ).get(Z);
                        }),
                    ),
                    eventOrder: N(
                        N({}, t.eventOrder),
                        ((u = {}),
                        (u[mi()] = [
                            'disabling',
                            'toggling',
                            'alloy.base.behaviour',
                        ]),
                        u),
                    ),
                    apis: c,
                    domModification: {
                        attributes: N(
                            N(
                                { 'aria-haspopup': 'true' },
                                t.role.fold(
                                    function() {
                                        return {};
                                    },
                                    function(n) {
                                        return { role: n };
                                    },
                                ),
                            ),
                            'button' === t.dom.tag
                                ? {
                                      type: ((a = 'type'),
                                      Nn(t.dom, 'attributes').bind(function(n) {
                                          return Nn(n, a);
                                      })).getOr('button'),
                                  }
                                : {},
                        ),
                    },
                };
            },
        apis: {
            open(n, t) {
                    return n.open(t);
                },
            expand(n, t) {
                    return n.expand(t);
                },
            close(n, t) {
                    return n.close(t);
                },
            isOpen(n, t) {
                    return n.isOpen(t);
                },
            repositionMenus(n, t) {
                    return n.repositionMenus(t);
                },
        },
    });
    var Tw = xa({
        fields: [],
        name: 'unselecting',
        active: /* */ Object.freeze({
            events: function(n) {
                return so([fo(ai(), nn(!0))]);
            },
            exhibit: function(n, t) {
                return nr({
                    styles: {
                        '-webkit-user-select': 'none',
                        'user-select': 'none',
                        '-ms-user-select': 'none',
                        '-moz-user-select': '-moz-none',
                    },
                    attributes: { unselectable: 'on' },
                });
            },
        }),
    });
    var Bw = Yo('color-input-change');
    var Dw = Yo('color-swatch-change');
    var Aw = Yo('color-picker-cancel');
    var _w = nn(Yo('rgb-hex-update'));
    var Mw = nn(Yo('slider-update'));
    let Fw = nn(Yo('palette-update'));
    var Iw = Cl({ schema: [ct('dom')], name: 'label' });
    var Rw = lx('top-left');
    var Vw = lx('top');
    let Nw = lx('top-right');
    var Hw = lx('right');
    var Pw = lx('bottom-right');
    var zw = lx('bottom');
    var Lw = lx('bottom-left');
    var jw = [
        Iw,
        lx('left'),
        Hw,
        Vw,
        zw,
        Rw,
        Nw,
        Lw,
        Pw,
        wl({
            name: 'thumb',
            defaults: nn({ dom: { styles: { position: 'absolute' } } }),
            overrides: function(n) {
                return {
                    events: so([
                        ho(Wr(), n, 'spectrum'),
                        ho(Gr(), n, 'spectrum'),
                        ho(Xr(), n, 'spectrum'),
                        ho(qr(), n, 'spectrum'),
                        ho(Kr(), n, 'spectrum'),
                        ho($r(), n, 'spectrum'),
                    ]),
                };
            },
        }),
        wl({
            schema: [
                At('mouseIsDown', function() {
                    return ye(!1);
                }),
            ],
            name: 'spectrum',
            overrides(e) {
                    function o(t, n) {
                        return r.getValueFromEvent(n).map(function(n) {
                            return r.setValueFrom(t, e, n);
                        });
                    }
                    var r = e.model.manager;
                    return {
                        behaviours: ya([
                            dg.config({
                                mode: 'special',
                                onLeft: function(n) {
                                    return r.onLeft(n, e);
                                },
                                onRight: function(n) {
                                    return r.onRight(n, e);
                                },
                                onUp: function(n) {
                                    return r.onUp(n, e);
                                },
                                onDown: function(n) {
                                    return r.onDown(n, e);
                                },
                            }),
                            bg.config({}),
                        ]),
                        events: so([
                            mo(Wr(), o),
                            mo(Gr(), o),
                            mo(qr(), o),
                            mo(Kr(), function(n, t) {
                                e.mouseIsDown.get() && o(n, t);
                            }),
                        ]),
                    };
                },
        }),
    ];
    var Uw = nn('slider.change.value');
    var Ww = 'left';
    let Gw = iw(-1);
    var Xw = iw(1);
    var Yw = on.none;
    var qw = on.none;
    var Kw = {
        'top-left': on.none(),
        top: on.none(),
        'top-right': on.none(),
        right: on.some(function(n, t) {
            Px(n, Vx(yx(t)));
        }),
        'bottom-right': on.none(),
        bottom: on.none(),
        'bottom-left': on.none(),
        left: on.some(function(n, t) {
            Px(n, Vx(px(t)));
        }),
    };
    let Jw = /* */ Object.freeze({
        setValueFrom: function(n, t, e) {
            let o = rw(n, t, e);
                    var r = ow(o);
            return ew(n, r), o;
        },
        setToMin: function(n, t) {
            var e = mx(t);
            ew(n, ow(e));
        },
        setToMax: function(n, t) {
            var e = vx(t);
            ew(n, ow(e));
        },
        findValueOfOffset: rw,
        getValueFromEvent(n) {
                return dx(n).map(function(n) {
                    return n.left();
                });
            },
        findPositionOfValue: uw,
        setPositionFromValue: function(n, t, e, o) {
            var r = Rx(e);
                    var i = uw(
                        n,
                        o.getSpectrum(n),
                        r.x(),
                        o.getLeftEdge(n),
                        o.getRightEdge(n),
                        e,
                    );
                    var u = gu(t.element()) / 2;
            xr(t.element(), 'left', `${i - u  }px`);
        },
        onLeft: Gw,
        onRight: Xw,
        onUp: Yw,
        onDown: qw,
        edgeActions: Kw,
    });
    let $w = on.none;
    var Qw = on.none;
    var Zw = fw(-1);
    var nS = fw(1);
    var tS = {
        'top-left': on.none(),
        top: on.some(function(n, t) {
            Px(n, Nx(hx(t)));
        }),
        'top-right': on.none(),
        right: on.none(),
        'bottom-right': on.none(),
        bottom: on.some(function(n, t) {
            Px(n, Nx(xx(t)));
        }),
        'bottom-left': on.none(),
        left: on.none(),
    };
    let eS = /* */ Object.freeze({
        setValueFrom: function(n, t, e) {
            var o = sw(n, t, e);
                    var r = cw(o);
            return aw(n, r), o;
        },
        setToMin(n, t) {
                var e = gx(t);
                aw(n, cw(e));
            },
        setToMax: function(n, t) {
            var e = bx(t);
            aw(n, cw(e));
        },
        findValueOfOffset: sw,
        getValueFromEvent: function(n) {
            return dx(n).map(function(n) {
                return n.top();
            });
        },
        findPositionOfValue: lw,
        setPositionFromValue: function(n, t, e, o) {
            var r = Rx(e);
                    var i = lw(
                        n,
                        o.getSpectrum(n),
                        r.y(),
                        o.getTopEdge(n),
                        o.getBottomEdge(n),
                        e,
                    );
                    var u = fu(t.element()) / 2;
            xr(t.element(), 'top', `${i - u  }px`);
        },
        onLeft: $w,
        onRight: Qw,
        onUp: Zw,
        onDown: nS,
        edgeActions: tS,
    });
    var oS = gw(-1, !1);
    var rS = gw(1, !1);
    let iS = gw(-1, !0);
    var uS = gw(1, !0);
    var aS = {
        'top-left': on.some(function(n, t) {
            Px(n, Hx(px(t), hx(t)));
        }),
        top: on.some(function(n, t) {
            Px(n, Hx(kx(t), hx(t)));
        }),
        'top-right': on.some(function(n, t) {
            Px(n, Hx(yx(t), hx(t)));
        }),
        right: on.some(function(n, t) {
            Px(n, Hx(yx(t), Ox(t)));
        }),
        'bottom-right': on.some(function(n, t) {
            Px(n, Hx(yx(t), xx(t)));
        }),
        bottom: on.some(function(n, t) {
            Px(n, Hx(kx(t), xx(t)));
        }),
        'bottom-left': on.some(function(n, t) {
            Px(n, Hx(px(t), xx(t)));
        }),
        left: on.some(function(n, t) {
            Px(n, Hx(px(t), Ox(t)));
        }),
    };
    var cS = /* */ Object.freeze({
        setValueFrom: function(n, t, e) {
            var o = rw(n, t, e.left());
                    var r = sw(n, t, e.top());
                    var i = mw(o, r);
            return dw(n, i), i;
        },
        setToMin(n, t) {
                var e = mx(t),
                    o = gx(t);
                dw(n, mw(e, o));
            },
        setToMax(n, t) {
                var e = vx(t),
                    o = bx(t);
                dw(n, mw(e, o));
            },
        getValueFromEvent: function(n) {
            return dx(n);
        },
        setPositionFromValue: function(n, t, e, o) {
            var r = Rx(e);
                    var i = uw(
                        n,
                        o.getSpectrum(n),
                        r.x(),
                        o.getLeftEdge(n),
                        o.getRightEdge(n),
                        e,
                    );
                    var u = lw(
                        n,
                        o.getSpectrum(n),
                        r.y(),
                        o.getTopEdge(n),
                        o.getBottomEdge(n),
                        e,
                    );
                    var a = gu(t.element()) / 2;
                    var c = fu(t.element()) / 2;
            xr(t.element(), 'left', `${i - a  }px`),
                xr(t.element(), 'top', `${u - c  }px`);
        },
        onLeft: oS,
        onRight: rS,
        onUp: iS,
        onDown: uS,
        edgeActions: aS,
    });
    var sS = _l({
        name: 'Slider',
        configFields: [
            St('stepSize', 1),
            St('onChange', Z),
            St('onChoose', Z),
            St('onInit', Z),
            St('onDragStart', Z),
            St('onDragEnd', Z),
            St('snapToGrid', !1),
            St('rounded', !0),
            ht('snapStart'),
            st(
                'model',
                it('mode', {
                    x: [
                        St('minX', 0),
                        St('maxX', 100),
                        At('value', function(n) {
                            return ye(n.mode.minX);
                        }),
                        ct('getInitialValue'),
                        Zu('manager', Jw),
                    ],
                    y: [
                        St('minY', 0),
                        St('maxY', 100),
                        At('value', function(n) {
                            return ye(n.mode.minY);
                        }),
                        ct('getInitialValue'),
                        Zu('manager', eS),
                    ],
                    xy: [
                        St('minX', 0),
                        St('maxX', 100),
                        St('minY', 0),
                        St('maxY', 100),
                        At('value', function(n) {
                            return ye({
                                x: nn(n.mode.minX),
                                y: nn(n.mode.minY),
                            });
                        }),
                        ct('getInitialValue'),
                        Zu('manager', cS),
                    ],
                }),
            ),
            Is('sliderBehaviours', [dg, nl]),
            At('mouseIsDown', function() {
                return ye(!1);
            }),
        ],
        partFields: jw,
        factory(i, n, t, e) {
                function u(n) {
                    return Js(n, i, 'thumb');
                }
                function a(n) {
                    return Js(n, i, 'spectrum');
                }
                function o(n) {
                    return Ks(n, i, 'left-edge');
                }
                function r(n) {
                    return Ks(n, i, 'right-edge');
                }
                function c(n) {
                    return Ks(n, i, 'top-edge');
                }
                function s(n) {
                    return Ks(n, i, 'bottom-edge');
                }
                function f(n, t) {
                    v.setPositionFromValue(n, t, i, {
                        getLeftEdge: o,
                        getRightEdge: r,
                        getTopEdge: c,
                        getBottomEdge: s,
                        getSpectrum: a,
                    });
                }
                function l(n, t) {
                    h.value.set(t);
                    var e = u(n);
                    return f(n, e), i.onChange(n, e, t), on.some(!0);
                }
                function d(e) {
                    var n = i.mouseIsDown.get();
                    i.mouseIsDown.set(!1),
                        n &&
                            Ks(e, i, 'thumb').each(function(n) {
                                var t = h.value.get();
                                i.onChoose(e, n, t);
                            });
                }
                function m(n, t) {
                    t.stop(), i.mouseIsDown.set(!0), i.onDragStart(n, u(n));
                }
                function g(n, t) {
                    t.stop(), i.onDragEnd(n, u(n)), d(n);
                }
                var p,
                    h = i.model,
                    v = h.manager;
                return {
                    uid: i.uid,
                    dom: i.dom,
                    components: n,
                    behaviours: Vs(i.sliderBehaviours, [
                        dg.config({
                            mode: 'special',
                            focusIn: function(n) {
                                return Ks(n, i, 'spectrum')
                                    .map(dg.focusIn)
                                    .map(nn(!0));
                            },
                        }),
                        nl.config({
                            store: {
                                mode: 'manual',
                                getValue: function(n) {
                                    return h.value.get();
                                },
                            },
                        }),
                        dc.config({
                            channels:
                                ((p = {}), (p[Wf()] = { onReceive: d }), p),
                        }),
                    ]),
                    events: so([
                        mo(Uw(), function(n, t) {
                            l(n, t.event().value());
                        }),
                        Ri(function(n, t) {
                            var e = h.getInitialValue();
                            h.value.set(e);
                            var o = u(n);
                            f(n, o);
                            var r = a(n);
                            i.onInit(n, o, r, h.value.get());
                        }),
                        mo(Wr(), m),
                        mo(Xr(), g),
                        mo(qr(), m),
                        mo($r(), g),
                    ]),
                    apis: {
                        resetToMin: function(n) {
                            v.setToMin(n, i);
                        },
                        resetToMax: function(n) {
                            v.setToMax(n, i);
                        },
                        changeValue: l,
                        refresh: f,
                    },
                    domModification: { styles: { position: 'relative' } },
                };
            },
        apis: {
            resetToMin: function(n, t) {
                n.resetToMin(t);
            },
            resetToMax: function(n, t) {
                n.resetToMax(t);
            },
            refresh: function(n, t) {
                n.refresh(t);
            },
        },
    });
    var fS = function(n, t) {
        var e = sS.parts().spectrum({
                dom: {
                    tag: 'div',
                    classes: [t('hue-slider-spectrum')],
                    attributes: { role: 'presentation' },
                },
            });
                var o = sS
                    .parts()
                    .thumb({
                dom: {
                    tag: 'div',
                    classes: [t('hue-slider-thumb')],
                    attributes: { role: 'presentation' },
                },
            });
        return sS.sketch({
            dom: {
                tag: 'div',
                classes: [t('hue-slider')],
                attributes: { role: 'presentation' },
            },
            rounded: !1,
            model: { mode: 'y', getInitialValue: nn({ y: nn(0) }) },
            components: [e, o],
            sliderBehaviours: ya([bg.config({})]),
            onChange: function(n, t, e) {
                io(n, Mw(), { value: e });
            },
        });
    };
    let lS = [Is('formBehaviours', [nl])];
    var dS = function(o, n, t) {
        return {
            uid: o.uid,
            dom: o.dom,
            components: n,
            behaviours: Vs(o.formBehaviours, [
                nl.config({
                    store: {
                        mode: 'manual',
                        getValue: function(n) {
                            var t = Qs(n, o);
                            return P(t, function(n, t) {
                                return n()
                                    .bind(function(n) {
                                        return (function(n, t) {
                                            return n.fold(function() {
                                                return an.error(t);
                                            }, an.value);
                                        })(nd.getCurrent(n), 'missing current');
                                    })
                                    .map(nl.getValue);
                            });
                        },
                        setValue(e, n) {
                                Cn(n, function(t, n) {
                                    Ks(e, o, n).each(function(n) {
                                        nd.getCurrent(n).each(function(n) {
                                            nl.setValue(n, t);
                                        });
                                    });
                                });
                            },
                        },
                    },
                }),
            ]),
            apis: {
                getField: function(n, t) {
                    return Ks(n, o, t).bind(nd.getCurrent);
                },
            },
        };
    };
    var mS = {
        getField: Qo(function(n, t, e) {
            return n.getField(t, e);
        }),
        sketch(n) {
                var e,
                    t =
                        ((e = []),
                        {
                            field: function(n, t) {
                                return e.push(n), Ws('form', pw(n), t);
                            },
                            record: function() {
                                return e;
                            },
                        }),
                    o = n(t),
                    r = t.record(),
                    i = S(r, function(n) {
                        return wl({ name: n, pname: pw(n) });
                    });
                return rf('form', lS, i, dS, o);
            },
    };
    let gS = Yo('valid-input');
    let pS = Yo('invalid-input');
    var hS = Yo('validating-input');
    var vS = 'colorcustom.rgb.';
    let bS = function(d, m, g, p) {
        function h(n, t, e, o, r) {
            var i = d(`${vS  }range`);
                    var u = [
                        by
                            .parts()
                            .label({
                                dom: {
                                    tag: 'label',
                                    innerHtml: e,
                                    attributes: { 'aria-label': o },
                                },
                            }),
                        by.parts().field({
                            data: r,
                            factory: xy,
                            inputAttributes: N(
                                { type: 'text' },
                                'hex' === t ? { 'aria-live': 'polite' } : {},
                            ),
                            inputClasses: [m('textfield')],
                            inputBehaviours: ya([
                                (function(t, o) {
                                    return Uy.config({
                                        invalidClass: m('invalid'),
                                        notify: {
                                            onValidate: function(n) {
                                                io(n, hS, { type: t });
                                            },
                                            onValid: function(n) {
                                                io(n, gS, {
                                                    type: t,
                                                    value: nl.getValue(n),
                                                });
                                            },
                                            onInvalid: function(n) {
                                                io(n, pS, {
                                                    type: t,
                                                    value: nl.getValue(n),
                                                });
                                            },
                                        },
                                        validator: {
                                            validate: function(n) {
                                                var t = nl.getValue(n),
                                                    e = o(t)
                                                        ? an.value(!0)
                                                        : an.error(
                                                              d(
                                                                  'aria.input.invalid',
                                                              ),
                                                          );
                                                return Hy(e);
                                            },
                                            validateOnLoad: !1,
                                        },
                                    });
                                })(t, n),
                                Xy.config({}),
                            ]),
                            onSetValue: function(n) {
                                Uy.isInvalid(n) && Uy.run(n).get(Z);
                            },
                        }),
                    ];
                    var a =
                    'hex' !== t
                        ? [by.parts()['aria-descriptor']({ text: i })]
                        : [];
            return {
                dom: { tag: 'div', attributes: { role: 'presentation' } },
                components: u.concat(a),
            };
        }
        function v(n, t) {
            let e = t.red();
                    var o = t.green();
                    var r = t.blue();
            nl.setValue(n, { red: e, green: o, blue: r });
        }
        function b(n, t) {
            y.getOpt(n).each(function(n) {
                xr(n.element(), 'background-color', `#${  t.value()}`);
            });
        }
        var y = bm({
            dom: {
                tag: 'div',
                classes: [m('rgba-preview')],
                styles: { 'background-color': 'white' },
                attributes: { role: 'presentation' },
            },
        });
        return Al({
            factory: function() {
                function r(n) {
                    return u[n]().get();
                }
                function i(n, t) {
                    u[n]().set(t);
                }
                function t(n, t) {
                    var e = t.event();
                    'hex' !== e.type() ? i(e.type(), on.none()) : p(n);
                }
                function o(e, n, t) {
                    var o = parseInt(t, 10);
                    i(n, on.some(o)),
                        r('red')
                            .bind(function(e) {
                                return r('green').bind(function(t) {
                                    return r('blue').map(function(n) {
                                        return Gh(e, t, n, 1);
                                    });
                                });
                            })
                            .each(function(n) {
                                var t = (function(t, n) {
                                    let e = Wh(n);
                                    return (
                                        mS.getField(t, 'hex').each(function(n) {
                                            bg.isFocused(n) ||
                                                nl.setValue(t, {
                                                    hex: e.value(),
                                                });
                                        }),
                                        e
                                    );
                                })(e, n);
                                b(e, t);
                            });
                }
                function e(n, t) {
                    var e = t.event();
                    !(function(n) {
                        return n.type() === 'hex';
                    })(e)
                        ? o(n, e.type(), e.value())
                        : (function(n, t) {
                              g(n);
                              var e = zh(t);
                              i('hex', on.some(t));
                              let o = qh(e);
                              v(n, o), a(o), io(n, _w(), { hex: e }), b(n, e);
                          })(n, e.value());
                }
                function n(n) {
                    return {
                        label: d(`${vS + n  }.label`),
                        description: d(`${vS + n  }.description`),
                    };
                }
                var u = {
                        red: nn(ye(on.some(255))),
                        green: nn(ye(on.some(255))),
                        blue: nn(ye(on.some(255))),
                        hex: nn(ye(on.some('ffffff'))),
                    };
                        var a = function(n) {
                            var t = n.red(),
                                e = n.green(),
                                o = n.blue();
                            i('red', on.some(t)),
                                i('green', on.some(e)),
                                i('blue', on.some(o));
                        };
                        var c = n('red');
                        var s = n('green');
                        var f = n('blue');
                        var l = n('hex');
                return Dn(
                    mS.sketch(function(n) {
                        return {
                            dom: {
                                tag: 'form',
                                classes: [m('rgb-form')],
                                attributes: {
                                    'aria-label': d('aria.color.picker'),
                                },
                            },
                            components: [
                                n.field(
                                    'red',
                                    by.sketch(
                                        h(
                                            Xh,
                                            'red',
                                            c.label,
                                            c.description,
                                            255,
                                        ),
                                    ),
                                ),
                                n.field(
                                    'green',
                                    by.sketch(
                                        h(
                                            Xh,
                                            'green',
                                            s.label,
                                            s.description,
                                            255,
                                        ),
                                    ),
                                ),
                                n.field(
                                    'blue',
                                    by.sketch(
                                        h(
                                            Xh,
                                            'blue',
                                            f.label,
                                            f.description,
                                            255,
                                        ),
                                    ),
                                ),
                                n.field(
                                    'hex',
                                    by.sketch(
                                        h(
                                            Lh,
                                            'hex',
                                            l.label,
                                            l.description,
                                            'ffffff',
                                        ),
                                    ),
                                ),
                                y.asSpec(),
                            ],
                            formBehaviours: ya([
                                Uy.config({
                                    invalidClass: m('form-invalid'),
                                }),
                                Jd('rgb-form-events', [
                                    mo(gS, e),
                                    mo(pS, t),
                                    mo(hS, t),
                                ]),
                            ]),
                        };
                    }),
                    {
                        apis: {
                            updateHex(n, t) {
                                    nl.setValue(n, { hex: t.value() }),
                                        (function(n, t) {
                                            var e = qh(t);
                                            v(n, e), a(e);
                                        })(n, t),
                                        b(n, t);
                                },
                        },
                    },
                );
            },
            name: 'RgbForm',
            configFields: [],
            apis: {
                updateHex: function(n, t, e) {
                    n.updateHex(t, e);
                },
            },
            extraApis: {},
        });
    };
    var yS = function(n, o) {
        function r(n, t) {
            let e = n.width;
                    var o = n.height;
                    var r = n.getContext('2d');
            if (r !== null) {
                (r.fillStyle = t), r.fillRect(0, 0, e, o);
                var i = r.createLinearGradient(0, 0, e, 0);
                i.addColorStop(0, 'rgba(255,255,255,1)'),
                    i.addColorStop(1, 'rgba(255,255,255,0)'),
                    (r.fillStyle = i),
                    r.fillRect(0, 0, e, o);
                let u = r.createLinearGradient(0, 0, 0, o);
                u.addColorStop(0, 'rgba(0,0,0,0)'),
                    u.addColorStop(1, 'rgba(0,0,0,1)'),
                    (r.fillStyle = u),
                    r.fillRect(0, 0, e, o);
            }
        }
        var i = sS.parts().spectrum({
                dom: {
                    tag: 'canvas',
                    attributes: { role: 'presentation' },
                    classes: [o('sv-palette-spectrum')],
                },
            });
                var u = sS
                    .parts()
                    .thumb({
                dom: {
                    tag: 'div',
                    attributes: { role: 'presentation' },
                    classes: [o('sv-palette-thumb')],
                    innerHtml:
                        `<div class=${ 
                                o('sv-palette-inner-thumb') 
                                } role="presentation"></div>`,
                },
            });
        return Al({
            factory(n) {
                    var t = nn({ x: nn(0), y: nn(0) }),
                        e = ya([nd.config({ find: on.some }), bg.config({})]);
                    return sS.sketch({
                        dom: {
                            tag: 'div',
                            attributes: { role: 'presentation' },
                            classes: [o('sv-palette')],
                        },
                        model: { mode: 'xy', getInitialValue: t },
                        rounded: !1,
                        components: [i, u],
                        onChange: function(n, t, e) {
                            io(n, Fw(), { value: e });
                        },
                        onInit: function(n, t, e, o) {
                            r(e.element().dom(), Jh(rv()));
                        },
                        sliderBehaviours: e,
                    });
                },
            name: 'SaturationBrightnessPalette',
            configFields: [],
            apis: {
                setRgba: function(n, t, e) {
                    !(function(n, t) {
                        let e = n
                            .components()[0]
                            .element()
                            .dom();
                        r(e, Jh(t));
                    })(t, e);
                },
            },
            extraApis: {},
        });
    };
    var xS = function(l, d) {
        return Al({
            name: 'ColourPicker',
            configFields: [
                ct('dom'),
                St('onValidHex', Z),
                St('onInvalidHex', Z),
            ],
            factory(n) {
                    function t(n, e) {
                        u.getOpt(n).each(function(n) {
                            var t = qh(e);
                            s.paletteRgba().set(t), i.setRgba(n, t);
                        });
                    }
                    function e(n, t) {
                        f.getOpt(n).each(function(n) {
                            r.updateHex(n, t);
                        });
                    }
                    function a(t, e, n) {
                        bn(n, function(n) {
                            n(t, e);
                        });
                    }
                    var o,
                        c,
                        r = bS(l, d, n.onValidHex, n.onInvalidHex),
                        i = yS(l, d),
                        s = { paletteRgba: nn(ye(rv())) },
                        u = bm(i.sketch({})),
                        f = bm(r.sketch({}));
                    return {
                        uid: n.uid,
                        dom: n.dom,
                        components: [u.asSpec(), fS(l, d), f.asSpec()],
                        behaviours: ya([
                            Jd('colour-picker-events', [
                                mo(
                                    Fw(),
                                    ((c = [e]),
                                    function(n, t) {
                                        var e = t.event().value(),
                                            o = (function(n) {
                                                var t,
                                                    e = 0,
                                                    o = 0,
                                                    r = n.red() / 255,
                                                    i = n.green() / 255,
                                                    u = n.blue() / 255,
                                                    a = Math.min(
                                                        r,
                                                        Math.min(i, u),
                                                    ),
                                                    c = Math.max(
                                                        r,
                                                        Math.max(i, u),
                                                    );
                                                return a === c
                                                    ? fx(0, 0, 100 * (o = a))
                                                    : ((e =
                                                          60 *
                                                          ((e =
                                                              r === a
                                                                  ? 3
                                                                  : u === a
                                                                  ? 1
                                                                  : 5) -
                                                              (r === a
                                                                  ? i - u
                                                                  : u === a
                                                                  ? r - i
                                                                  : u - r) /
                                                                  (c - a))),
                                                      (t = (c - a) / c),
                                                      (o = c),
                                                      fx(
                                                          Math.round(e),
                                                          Math.round(100 * t),
                                                          Math.round(100 * o),
                                                      ));
                                            })(s.paletteRgba().get()),
                                            r = fx(o.hue(), e.x(), 100 - e.y()),
                                            i = Yh(r),
                                            u = Wh(i);
                                        a(n, u, c);
                                    }),
                                ),
                                mo(
                                    Mw(),
                                    ((o = [t, e]),
                                    function(n, t) {
                                        var e = (function(n) {
                                            var t = fx(
                                                    ((100 - n) / 100) * 360,
                                                    100,
                                                    100,
                                                ),
                                                e = Yh(t);
                                            return Wh(e);
                                        })(
                                            t
                                                .event()
                                                .value()
                                                .y(),
                                        );
                                        a(n, e, o);
                                    }),
                                ),
                            ]),
                            nd.config({
                                find: function(n) {
                                    return f.getOpt(n);
                                },
                            }),
                            dg.config({ mode: 'acyclic' }),
                        ]),
                    };
                },
        });
    };
    var wS = function() {
        return nd.config({ find: on.some });
    };
    var SS = function(n) {
        return nd.config({ find: n.getOpt });
    };
    var CS = function(n) {
        return nd.config({
            find: function(t) {
                return Ao(t.element(), n).bind(function(n) {
                    return t
                        .getSystem()
                        .getByDom(n)
                        .toOption();
                });
            },
        });
    };
    var kS = {
        'colorcustom.rgb.red.label': 'R',
        'colorcustom.rgb.red.description': 'Red component',
        'colorcustom.rgb.green.label': 'G',
        'colorcustom.rgb.green.description': 'Green component',
        'colorcustom.rgb.blue.label': 'B',
        'colorcustom.rgb.blue.description': 'Blue component',
        'colorcustom.rgb.hex.label': '#',
        'colorcustom.rgb.hex.description': 'Hex color code',
        'colorcustom.rgb.range': 'Range 0 to 255',
        'colorcustom.sb.saturation': 'Saturation',
        'colorcustom.sb.brightness': 'Brightness',
        'colorcustom.sb.picker': 'Saturation and Brightness Picker',
        'colorcustom.sb.palette': 'Saturation and Brightness Palette',
        'colorcustom.sb.instructions':
            'Use arrow keys to select saturation and brightness, on x and y axes',
        'colorcustom.hue.hue': 'Hue',
        'colorcustom.hue.slider': 'Hue Slider',
        'colorcustom.hue.palette': 'Hue Palette',
        'colorcustom.hue.instructions': 'Use arrow keys to select a hue',
        'aria.color.picker': 'Color Picker',
        'aria.input.invalid': 'Invalid input',
    };
    var OS = tinymce.util.Tools.resolve('tinymce.Resource');
    var ES = re([St('preprocess', l), St('postprocess', l)]);
    let TS = function(r, n) {
        var i = ot('RepresentingConfigs.memento processors', ES, n);
        return nl.config({
            store: {
                mode: 'manual',
                getValue: function(n) {
                    var t = r.get(n);
                            var e = nl.getValue(t);
                    return i.postprocess(e);
                },
                setValue(n, t) {
                        var e = i.preprocess(t),
                            o = r.get(n);
                        nl.setValue(o, e);
                    },
            },
        });
    };
    var BS = vw;
    let DS = function(n) {
        return bw(n, No, Ho);
    };
    var AS = function(n) {
        return nl.config({ store: { mode: 'memory', initialValue: n } });
    };
    let _S = Yo('alloy-fake-before-tabstop');
    var MS = Yo('alloy-fake-after-tabstop');
    var FS = function(n) {
        return db(n, [`.${  _S}`, `.${  MS}`].join(','), nn(!1));
    };
    let IS = function(n, t) {
        var e = t.element();
        gr(e, _S) ? ww(n, !0) : gr(e, MS) && ww(n, !1);
    };
    var RS = function(n) {
        return {
            dom: { tag: 'div', classes: ['tox-navobj'] },
            components: [xw([_S]), n, xw([MS])],
            behaviours: ya([CS(1)]),
        };
    };
    var VS = !(Ht().browser.isIE() || Ht().browser.isEdge());
    function NS(n, t) {
        return zS(v.document.createElement('canvas'), n, t);
    }
    function HS(n) {
        const t = NS(n.width, n.height);
        return PS(t).drawImage(n, 0, 0), t;
    }
    function PS(n) {
        return n.getContext('2d');
    }
    function zS(n, t, e) {
        return (n.width = t), (n.height = e), n;
    }
    function LS(n) {
        return n.naturalWidth || n.width;
    }
    function jS(n) {
        return n.naturalHeight || n.height;
    }
    let US;
    var WS;
    let GS = window.Promise
        ? window.Promise
        : ((US =
              XS.immediateFn ||
              (typeof window.setImmediate === 'function' &&
                  window.setImmediate) ||
              function(n) {
                  v.setTimeout(n, 1);
              }),
          (WS =
              Array.isArray ||
              function(n) {
                  return Object.prototype.toString.call(n) === '[object Array]';
              }),
          (XS.prototype.catch = function(n) {
              return this.then(null, n);
          }),
          (XS.prototype.then = function(e, o) {
              let r = this;
              return new XS(function(n, t) {
                  qS.call(r, new QS(e, o, n, t));
              });
          }),
          (XS.all = function() {
              for (var n = [], t = 0; t < arguments.length; t++)
                  n[t] = arguments[t];
              const c = Array.prototype.slice.call(
                  n.length === 1 && WS(n[0]) ? n[0] : n,
              );
              return new XS(function(r, i) {
                  if (c.length === 0) return r([]);
                  let u = c.length;
                  function a(t, n) {
                      try {
                          if (
                              n &&
                              (typeof n == 'object' || typeof n === 'function')
                          ) {
                              const e = n.then;
                              if (typeof e === 'function')
                                  return void e.call(
                                      n,
                                      function(n) {
                                          a(t, n);
                                      },
                                      i,
                                  );
                          }
                          (c[t] = n), --u == 0 && r(c);
                      } catch (o) {
                          i(o);
                      }
                  }
                  for (let n = 0; n < c.length; n++) a(n, c[n]);
              });
          }),
          (XS.resolve = function(t) {
              return t && typeof t === 'object' && t.constructor === XS
                  ? t
                  : new XS(function(n) {
                        n(t);
                    });
          }),
          (XS.reject = function(e) {
              return new XS(function(n, t) {
                  t(e);
              });
          }),
          (XS.race = function(r) {
              return new XS(function(n, t) {
                  for (let e = 0, o = r; e < o.length; e++) o[e].then(n, t);
              });
          }),
          XS);
    function XS(n) {
        if (typeof this !== 'object')
            throw new TypeError('Promises must be constructed via new');
        if (typeof n !== 'function') throw new TypeError('not a function');
        (this._state = null),
            (this._value = null),
            (this._deferreds = []),
            ZS(n, YS(KS, this), YS(JS, this));
    }
    function YS(n, t) {
        return function() {
            return n.apply(t, arguments);
        };
    }
    function qS(o) {
        const r = this;
        this._state !== null
            ? US(function() {
                  const n = r._state ? o.onFulfilled : o.onRejected;
                  if (n !== null) {
                      let t;
                      try {
                          t = n(r._value);
                      } catch (e) {
                          return void o.reject(e);
                      }
                      o.resolve(t);
                  } else (r._state ? o.resolve : o.reject)(r._value);
              })
            : this._deferreds.push(o);
    }
    function KS(n) {
        try {
            if (n === this)
                throw new TypeError(
                    'A promise cannot be resolved with itself.',
                );
            if (n && (typeof n === 'object' || typeof n === 'function')) {
                const t = n.then;
                if (typeof t === 'function')
                    return void ZS(YS(t, n), YS(KS, this), YS(JS, this));
            }
            (this._state = !0), (this._value = n), $S.call(this);
        } catch (e) {
            JS.call(this, e);
        }
    }
    function JS(n) {
        (this._state = !1), (this._value = n), $S.call(this);
    }
    function $S() {
        for (let n = 0, t = this._deferreds; n < t.length; n++) {
            const e = t[n];
            qS.call(this, e);
        }
        this._deferreds = [];
    }
    function QS(n, t, e, o) {
        (this.onFulfilled = typeof n === 'function' ? n : null),
            (this.onRejected = typeof t === 'function' ? t : null),
            (this.resolve = e),
            (this.reject = o);
    }
    function ZS(n, t, e) {
        let o = !1;
        try {
            n(
                function(n) {
                    o || ((o = !0), t(n));
                },
                function(n) {
                    o || ((o = !0), e(n));
                },
            );
        } catch (r) {
            if (o) return;
            (o = !0), e(r);
        }
    }
    function nC(e) {
        return new GS(function(n, t) {
            (function p(n) {
                const t = n.split(',');
                var e = /data:([^;]+)/.exec(t[0]);
                if (!e) return on.none();
                for (
                    var o = e[1],
                        r = t[1],
                        i = v.atob(r),
                        u = i.length,
                        a = Math.ceil(u / 1024),
                        c = new Array(a),
                        s = 0;
                    s < a;
                    ++s
                ) {
                    for (
                        var f = 1024 * s,
                            l = Math.min(1024 + f, u),
                            d = new Array(l - f),
                            m = f,
                            g = 0;
                        m < l;
                        ++g, ++m
                    )
                        d[g] = i[m].charCodeAt(0);
                    c[s] = new Uint8Array(d);
                }
                return on.some(new v.Blob(c, { type: o }));
            })(e).fold(function() {
                t(`uri is not base64: ${e}`);
            }, n);
        });
    }
    function tC(n, o, r) {
        return (
            (o = o || 'image/png'),
            v.HTMLCanvasElement.prototype.toBlob
                ? new GS(function(t, e) {
                      n.toBlob(
                          function(n) {
                              n ? t(n) : e();
                          },
                          o,
                          r,
                      );
                  })
                : nC(n.toDataURL(o, r))
        );
    }
    function eC(n) {
        return (function t(a) {
            return new GS(function(n, t) {
                const e = v.URL.createObjectURL(a);
                let o = new v.Image();
                var r = function() {
                    o.removeEventListener('load', i),
                        o.removeEventListener('error', u);
                };
                function i() {
                    r(), n(o);
                }
                function u() {
                    r(), t(`Unable to load data of type ${a.type}: ${e}`);
                }
                o.addEventListener('load', i),
                    o.addEventListener('error', u),
                    (o.src = e),
                    o.complete && i();
            });
        })(n).then(function(n) {
            !(function e(n) {
                v.URL.revokeObjectURL(n.src);
            })(n);
            const t = NS(LS(n), jS(n));
            return PS(t).drawImage(n, 0, 0), t;
        });
    }
    function oC(n, t, e) {
        const o = t.type;
        function r(t, e) {
            return n.then(function(n) {
                return (function o(n, t, e) {
                    return (t = t || 'image/png'), n.toDataURL(t, e);
                })(n, t, e);
            });
        }
        return {
            getType: nn(o),
            toBlob: function i() {
                return GS.resolve(t);
            },
            toDataURL: function u() {
                return e;
            },
            toBase64: function a() {
                return e.split(',')[1];
            },
            toAdjustedBlob: function c(t, e) {
                return n.then(function(n) {
                    return tC(n, t, e);
                });
            },
            toAdjustedDataURL: r,
            toAdjustedBase64: function s(n, t) {
                return r(n, t).then(function(n) {
                    return n.split(',')[1];
                });
            },
            toCanvas: function f() {
                return n.then(HS);
            },
        };
    }
    function rC(t) {
        return (function n(e) {
            return new GS(function(n) {
                const t = new v.FileReader();
                (t.onloadend = function() {
                    n(t.result);
                }),
                    t.readAsDataURL(e);
            });
        })(t).then(function(n) {
            return oC(eC(t), t, n);
        });
    }
    function iC(t, n) {
        return tC(t, n).then(function(n) {
            return oC(GS.resolve(t), n, t.toDataURL());
        });
    }
    function uC(n, t, e) {
        let o = typeof n === 'string' ? parseFloat(n) : n;
        return e < o ? (o = e) : o < t && (o = t), o;
    }
    const aC = [
        0,
        0.01,
        0.02,
        0.04,
        0.05,
        0.06,
        0.07,
        0.08,
        0.1,
        0.11,
        0.12,
        0.14,
        0.15,
        0.16,
        0.17,
        0.18,
        0.2,
        0.21,
        0.22,
        0.24,
        0.25,
        0.27,
        0.28,
        0.3,
        0.32,
        0.34,
        0.36,
        0.38,
        0.4,
        0.42,
        0.44,
        0.46,
        0.48,
        0.5,
        0.53,
        0.56,
        0.59,
        0.62,
        0.65,
        0.68,
        0.71,
        0.74,
        0.77,
        0.8,
        0.83,
        0.86,
        0.89,
        0.92,
        0.95,
        0.98,
        1,
        1.06,
        1.12,
        1.18,
        1.24,
        1.3,
        1.36,
        1.42,
        1.48,
        1.54,
        1.6,
        1.66,
        1.72,
        1.78,
        1.84,
        1.9,
        1.96,
        2,
        2.12,
        2.25,
        2.37,
        2.5,
        2.62,
        2.75,
        2.87,
        3,
        3.2,
        3.4,
        3.6,
        3.8,
        4,
        4.3,
        4.7,
        4.9,
        5,
        5.5,
        6,
        6.5,
        6.8,
        7,
        7.3,
        7.5,
        7.8,
        8,
        8.4,
        8.7,
        9,
        9.4,
        9.6,
        9.8,
        10,
    ];
    function cC(n, t) {
        for (var e, o = [], r = new Array(25), i = 0; i < 5; i++) {
            for (var u = 0; u < 5; u++) o[u] = t[u + 5 * i];
            for (u = 0; u < 5; u++) {
                for (let a = (e = 0); a < 5; a++) e += n[u + 5 * a] * o[a];
                r[u + 5 * i] = e;
            }
        }
        return r;
    }
    function sC(t, e) {
        return t.toCanvas().then(function(n) {
            return (function i(n, t, e) {
                const o = PS(n);
                const r = (function B(n, t) {
                    for (
                        var e,
                            o,
                            r,
                            i,
                            u = n.data,
                            a = t[0],
                            c = t[1],
                            s = t[2],
                            f = t[3],
                            l = t[4],
                            d = t[5],
                            m = t[6],
                            g = t[7],
                            p = t[8],
                            h = t[9],
                            v = t[10],
                            b = t[11],
                            y = t[12],
                            x = t[13],
                            w = t[14],
                            S = t[15],
                            C = t[16],
                            k = t[17],
                            O = t[18],
                            E = t[19],
                            T = 0;
                        T < u.length;
                        T += 4
                    )
                        (e = u[T]),
                            (o = u[T + 1]),
                            (r = u[T + 2]),
                            (i = u[T + 3]),
                            (u[T] = e * a + o * c + r * s + i * f + l),
                            (u[T + 1] = e * d + o * m + r * g + i * p + h),
                            (u[T + 2] = e * v + o * b + r * y + i * x + w),
                            (u[T + 3] = e * S + o * C + r * k + i * O + E);
                    return n;
                })(o.getImageData(0, 0, n.width, n.height), e);
                return o.putImageData(r, 0, 0), iC(n, t);
            })(n, t.getType(), e);
        });
    }
    function fC(t, e) {
        return t.toCanvas().then(function(n) {
            return (function u(n, t, e) {
                const o = PS(n);
                const r = o.getImageData(0, 0, n.width, n.height);
                var i = o.getImageData(0, 0, n.width, n.height);
                return (
                    (i = (function w(n, t, e) {
                        function o(n, t, e) {
                            return e < n ? (n = e) : n < t && (n = t), n;
                        }
                        for (
                            let r = Math.round(Math.sqrt(e.length)),
                                i = Math.floor(r / 2),
                                u = n.data,
                                a = t.data,
                                c = n.width,
                                s = n.height,
                                f = 0;
                            f < s;
                            f++
                        )
                            for (let l = 0; l < c; l++) {
                                for (var d = 0, m = 0, g = 0, p = 0; p < r; p++)
                                    for (let h = 0; h < r; h++) {
                                        const v = o(l + h - i, 0, c - 1);
                                        var b =
                                            4 *
                                            (o(f + p - i, 0, s - 1) * c + v);
                                        var y = e[p * r + h];
                                        (d += u[b] * y),
                                            (m += u[1 + b] * y),
                                            (g += u[2 + b] * y);
                                    }
                                const x = 4 * (f * c + l);
                                (a[x] = o(d, 0, 255)),
                                    (a[1 + x] = o(m, 0, 255)),
                                    (a[2 + x] = o(g, 0, 255));
                            }
                        return t;
                    })(r, i, e)),
                    o.putImageData(i, 0, 0),
                    iC(n, t)
                );
            })(n, t.getType(), e);
        });
    }
    function lC(e) {
        return function(n, t) {
            return sC(
                n,
                e(
                    [
                        1,
                        0,
                        0,
                        0,
                        0,
                        0,
                        1,
                        0,
                        0,
                        0,
                        0,
                        0,
                        1,
                        0,
                        0,
                        0,
                        0,
                        0,
                        1,
                        0,
                        0,
                        0,
                        0,
                        0,
                        1,
                    ],
                    t,
                ),
            );
        };
    }
    function dC(n, t, e, o) {
        return sC(
            n,
            (function r(n, t, e, o) {
                return cC(n, [
                    (t = uC(t, 0, 2)),
                    0,
                    0,
                    0,
                    0,
                    0,
                    (e = uC(e, 0, 2)),
                    0,
                    0,
                    0,
                    0,
                    0,
                    (o = uC(o, 0, 2)),
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                ]);
            })(
                [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                ],
                t,
                e,
                o,
            ),
        );
    }
    const mC = (function sI(t) {
        return function(n) {
            return sC(n, t);
        };
    })([
        -1,
        0,
        0,
        0,
        255,
        0,
        -1,
        0,
        0,
        255,
        0,
        0,
        -1,
        0,
        255,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
    ]);
    let gC = lC(function fI(n, t) {
        return cC(n, [
            1,
            0,
            0,
            0,
            (t = uC(255 * t, -255, 255)),
            0,
            1,
            0,
            0,
            t,
            0,
            0,
            1,
            0,
            t,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            1,
        ]);
    });
    let pC = lC(function lI(n, t) {
        var e;
        return (
            (t = uC(t, -1, 1)),
            cC(n, [
                (e =
                    (t *= 100) < 0
                        ? 127 + (t / 100) * 127
                        : 127 *
                              (e =
                                  (e = t % 1) === 0
                                      ? aC[t]
                                      : aC[Math.floor(t)] * (1 - e) +
                                        aC[Math.floor(t) + 1] * e) +
                          127) / 127,
                0,
                0,
                0,
                0.5 * (127 - e),
                0,
                e / 127,
                0,
                0,
                0.5 * (127 - e),
                0,
                0,
                e / 127,
                0,
                0.5 * (127 - e),
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                1,
            ])
        );
    });
    let hC = (function dI(t) {
        return function(n) {
            return fC(n, t);
        };
    })([0, -1, 0, -1, 5, -1, 0, -1, 0]);
    var vC = (function mI(c) {
        return function(t, e) {
            return t.toCanvas().then(function(n) {
                return (function(n, t, e) {
                    let o = PS(n);
                    var r = new Array(256);
                    for (let i = 0; i < r.length; i++) r[i] = c(i, e);
                    let u = (function a(n, t) {
                        for (let e = n.data, o = 0; o < e.length; o += 4)
                            (e[o] = t[e[o]]),
                                (e[o + 1] = t[e[o + 1]]),
                                (e[o + 2] = t[e[o + 2]]);
                        return n;
                    })(o.getImageData(0, 0, n.width, n.height), r);
                    return o.putImageData(u, 0, 0), iC(n, t);
                })(n, t.getType(), e);
            });
        };
    })(function(n, t) {
        return 255 * Math.pow(n / 255, 1 - t);
    });
    function bC(n, t, e) {
        const o = LS(n);
        let r = jS(n);
        var i = t / o;
        var u = e / r;
        var a = !1;
        (i < 0.5 || i > 2) && ((i = i < 0.5 ? 0.5 : 2), (a = !0)),
            (u < 0.5 || u > 2) && ((u = u < 0.5 ? 0.5 : 2), (a = !0));
        const c = (function s(u, a, c) {
            return new GS(function(n) {
                const t = LS(u);
                var e = jS(u);
                let o = Math.floor(t * a);
                var r = Math.floor(e * c);
                let i = NS(o, r);
                PS(i).drawImage(u, 0, 0, t, e, 0, 0, o, r), n(i);
            });
        })(n, i, u);
        return a
            ? c.then(function(n) {
                  return bC(n, t, e);
              })
            : c;
    }
    function yC(t, e) {
        return t.toCanvas().then(function(n) {
            return (function a(n, t, e) {
                const o = NS(n.width, n.height);
                var r = PS(o);
                var i = 0;
                let u = 0;
                ((e = e < 0 ? 360 + e : e) !== 90 && e !== 270) ||
                    zS(o, o.height, o.width);
                (e !== 90 && e !== 180) || (i = o.width);
                (e !== 270 && e !== 180) || (u = o.height);
                return (
                    r.translate(i, u),
                    r.rotate((e * Math.PI) / 180),
                    r.drawImage(n, 0, 0),
                    iC(o, t)
                );
            })(n, t.getType(), e);
        });
    }
    function xC(t, e) {
        return t.toCanvas().then(function(n) {
            return (function i(n, t, e) {
                const o = NS(n.width, n.height);
                let r = PS(o);
                e === 'v'
                    ? (r.scale(1, -1), r.drawImage(n, 0, -o.height))
                    : (r.scale(-1, 1), r.drawImage(n, -o.width, 0));
                return iC(o, t);
            })(n, t.getType(), e);
        });
    }
    function wC(t, e, o, r, i) {
        return t.toCanvas().then(function(n) {
            return (function a(n, t, e, o, r, i) {
                const u = NS(r, i);
                return PS(u).drawImage(n, -e, -o), iC(u, t);
            })(n, t.getType(), e, o, r, i);
        });
    }
    function SC(n) {
        return mC(n);
    }
    function CC(n) {
        return hC(n);
    }
    function kC(n, t) {
        return vC(n, t);
    }
    function OC(n, t) {
        return gC(n, t);
    }
    function EC(n, t) {
        return pC(n, t);
    }
    function TC(n, t) {
        return xC(n, t);
    }
    function BC(n, t, e) {
        return (function r(t, e, o) {
            return t.toCanvas().then(function(n) {
                return bC(n, e, o).then(function(n) {
                    return iC(n, t.getType());
                });
            });
        })(n, t, e);
    }
    function DC(n, t) {
        return yC(n, t);
    }
    function AC(n, t) {
        return {
            dom: {
                tag: 'span',
                innerHtml: n,
                classes: ['tox-icon', 'tox-tbtn__icon-wrap'],
            },
            ...t,
        };
    }
    function _C(n, t) {
        return AC(xm(n, t), {});
    }
    function MC(n, t) {
        return AC(xm(n, t), { behaviours: ya([gg.config({})]) });
    }
    function FC(n, t, e) {
        return {
            dom: {
                tag: 'span',
                innerHtml: e.translate(n),
                classes: [`${t}__select-label`],
            },
            behaviours: ya([gg.config({})]),
        };
    }
    function IC(n, t, o) {
        function e(n, t) {
            const e = nl.getValue(n);
            return (
                bg.focus(e),
                io(e, 'keydown', { raw: t.event().raw() }),
                Ew.close(e),
                on.some(!0)
            );
        }
        const r = ye(Z);
        var i = n.text.map(function(n) {
            return bm(FC(n, t, o.providers));
        });
        let u = n.icon.map(function(n) {
            return bm(MC(n, o.providers.icons));
        });
        let a = n.role.fold(
            function() {
                return {};
            },
            function(n) {
                return { role: n };
            },
        );
        let c = n.tooltip.fold(
            function() {
                return {};
            },
            function(n) {
                let t = o.providers.translate(n);
                return { title: t, 'aria-label': t };
            },
        );
        return bm(
            Ew.sketch(
                {...a, dom: {
                        tag: 'button',
                        classes: [t, `${t  }--select`].concat(
                            S(n.classes, function(n) {
                                return `${t  }--${  n}`;
                            }),
                        ),
                        attributes: { ...c},
                    },
                    components: Dh([
                        u.map(function(n) {
                            return n.asSpec();
                        }),
                        i.map(function(n) {
                            return n.asSpec();
                        }),
                        on.some({
                            dom: {
                                tag: 'div',
                                classes: [`${t  }__select-chevron`],
                                innerHtml: xm(
                                    'chevron-down',
                                    o.providers.icons,
                                ),
                            },
                        }),
                    ]),
                    matchWidth: !0,
                    useMinWidth: !0,
                    dropdownBehaviours: ya(
                        g(n.dropdownBehaviours, [
                            Eh(n.disabled),
                            Tw.config({}),
                            gg.config({}),
                            Jd('dropdown-events', [Tp(n, r), Bp(n, r)]),
                            Jd('menubutton-update-display-text', [
                                mo(ik, function(t, e) {
                                    i.bind(function(n) {
                                        return n.getOpt(t);
                                    }).each(function(n) {
                                        gg.set(n, [
                                            Rr(
                                                o.providers.translate(
                                                    e.event().text(),
                                                ),
                                            ),
                                        ]);
                                    });
                                }),
                                mo(uk, function(t, e) {
                                    u.bind(function(n) {
                                        return n.getOpt(t);
                                    }).each(function(n) {
                                        gg.set(n, [
                                            MC(
                                                e.event().icon(),
                                                o.providers.icons,
                                            ),
                                        ]);
                                    });
                                }),
                            ]),
                        ]),
                    ),
                    eventOrder: Dn(rk, {
                        mousedown: [
                            'focusing',
                            'alloy.base.behaviour',
                            'item-type-events',
                            'normal-dropdown-events',
                        ],
                    }),
                    sandboxBehaviours: ya([
                        dg.config({ mode: 'special', onLeft: e, onRight: e }),
                    ]),
                    lazySink: o.getSink,
                    toggleClass: `${t  }--active`,
                    parts: { menu: Cv(0, n.columns, n.presets) },
                    fetch() {
                        return Ny(n.fetch);
                    },},
            ),
        ).asSpec();
    }
    function RC(n) {
        return n.type === 'separator';
    }
    function VC(n, e) {
        const t = O(
            n,
            function(n, t) {
                return (function(n) {
                    return cn(n);
                })(t)
                    ? t === ''
                        ? n
                        : t === '|'
                        ? n.length > 0 && !RC(n[n.length - 1])
                            ? n.concat([ak])
                            : n
                        : En(e, t.toLowerCase())
                        ? n.concat([e[t.toLowerCase()]])
                        : n
                    : n.concat([t]);
            },
            [],
        );
        return t.length > 0 && RC(t[t.length - 1]) && t.pop(), t;
    }
    function NC(n, t) {
        return (function(n) {
            return En(n, 'getSubmenuItems');
        })(n)
            ? (function(n, t) {
                  const e = n.getSubmenuItems();
                  var o = ck(e, t);
                  return {
                      item: n,
                      menus: Dn(o.menus, q(n.value, o.items)),
                      expansions: Dn(o.expansions, q(n.value, n.value)),
                  };
              })(n, t)
            : { item: n, menus: {}, expansions: {} };
    }
    function HC(n, e, o, t) {
        const r = Yo('primary-menu');
        var i = ck(n, o.shared.providers.menuItems());
        if (i.items.length === 0) return on.none();
        const u = ub(r, i.items, e, o, t);
        var a = P(i.menus, function(n, t) {
            return ub(t, n, e, o, !1);
        });
        let c = Dn(a, q(r, u));
        return on.from(jg.tieredData(r, c, i.expansions));
    }
    function PC(e) {
        return {
            isDisabled() {
                return kh.isDisabled(e);
            },
            setDisabled(n) {
                return kh.set(e, n);
            },
            setActive(n) {
                let t = e.element();
                n
                    ? (lr(t, 'tox-tbtn--enabled'), zo(t, 'aria-pressed', !0))
                    : (mr(t, 'tox-tbtn--enabled'), Uo(t, 'aria-pressed'));
            },
            isActive() {
                return gr(e.element(), 'tox-tbtn--enabled');
            },
        };
    }
    function zC(n, t, e, o) {
        return IC(
            {
                text: n.text,
                icon: n.icon,
                tooltip: n.tooltip,
                role: o,
                fetch(t) {
                    n.fetch(function(n) {
                        t(HC(n, Ih.CLOSE_ON_EXECUTE, e, !1));
                    });
                },
                onSetup: n.onSetup,
                getApi: PC,
                columns: 1,
                presets: 'normal',
                classes: [],
                dropdownBehaviours: [Xy.config({})],
            },
            t,
            e.shared,
        );
    }
    function LC(t, o, r) {
        return function(n) {
            n(
                S(t, function(n) {
                    const t = n.text.fold(
                        function() {
                            return {};
                        },
                        function(n) {
                            return { text: n };
                        },
                    );
                    return {type: n.type, ...t, onAction: (function(e) {
                            return function(n) {
                                let t = !n.isActive();
                                n.setActive(t),
                                    e.storage.set(t),
                                    r.shared.getSink().each(function(n) {
                                        o()
                                            .getOpt(n)
                                            .each(function(n) {
                                                Sa(n.element()),
                                                    io(n, fy, {
                                                        name: e.name,
                                                        value: e.storage.get(),
                                                    });
                                            });
                                    });
                            };
                        })(n),
                        onSetup: (function(t) {
                            return function(n) {
                                n.setActive(t.storage.get());
                            };
                        })(n),};
                }),
            );
        };
    }
    function jC(n, t, e, o, r) {
        void 0 === e && (e = []);
        const i = t.fold(
            function() {
                return {};
            },
            function(n) {
                return { action: n };
            },
        );
        var u = {
                buttonBehaviours: ya(
                        [
                            Eh(n.disabled),
                            Xy.config({}),
                            Jd('button press', [lo('click'), lo('mousedown')]),
                        ].concat(e),
                    ),
                    eventOrder: {
                        click: ['button press', 'alloy.base.behaviour'],
                        mousedown: ['button press', 'alloy.base.behaviour'],
                    },
                ...i,
            };
        let a = Dn(u, { dom: o });
        return Dn(a, { components: r });
    }
    function UC(n, t, e, o) {
        void 0 === o && (o = []);
        const r = {
            tag: 'button',
            classes: ['tox-tbtn'],
            attributes: n.tooltip
                .map(function(n) {
                    return {
                        'aria-label': e.translate(n),
                        title: e.translate(n),
                    };
                })
                .getOr({}),
        };
        let i = n.icon.map(function(n) {
            return _C(n, e.icons);
        });
        let u = Dh([i]);
        return jC(n, t, o, r, u);
    }
    function WC(n, t, e, o) {
        void 0 === o && (o = []);
        const r = UC(n, on.some(t), e, o);
        return Xg.sketch(r);
    }
    function GC(n, t, e, o, r) {
        void 0 === o && (o = []), void 0 === r && (r = []);
        const i = e.translate(n.text);
        var u = n.icon
            ? n.icon.map(function(n) {
                  return _C(n, e.icons);
              })
            : on.none();
        var a = u.isSome() ? Dh([u]) : [];
        let c = u.isSome() ? {} : { innerHtml: i };
        var s = g(
            n.primary || n.borderless
                ? ['tox-button']
                : ['tox-button', 'tox-button--secondary'],
            u.isSome() ? ['tox-button--icon'] : [],
            n.borderless ? ['tox-button--naked'] : [],
            r,
        );
        var f = N(
            { tag: 'button', classes: s, ...c },
            {
                attributes: { title: i },
            },
        );
        return jC(n, t, o, f, a);
    }
    function XC(n, t, e, o, r) {
        void 0 === o && (o = []), void 0 === r && (r = []);
        const i = GC(n, on.some(t), e, o, r);
        return Xg.sketch(i);
    }
    function YC(t, e) {
        return function(n) {
            e === 'custom'
                ? io(n, fy, { name: t, value: {} })
                : e === 'submit'
                ? ro(n, ly)
                : e === 'cancel'
                ? ro(n, sy)
                : v.console.error('Unknown button type: ', e);
        };
    }
    function qC(n, t, e) {
        if (
            (function(n, t) {
                return t === 'menu';
            })(0, t)
        ) {
            let o = n;
            var r = N({ ...n}, {
                fetch: LC(
                    o.items,
                    function() {
                        return i;
                    },
                    e,
                ),
            });
            var i = bm(zC(r, 'tox-tbtn', e, on.none()));
            return i.asSpec();
        }
        if (
            (function(n, t) {
                return t === 'custom' || t === 'cancel' || t === 'submit';
            })(0, t)
        ) {
            const u = YC(n.name, t);
            var a = N({ ...n }, { borderless: !1 });
            return XC(a, u, e.shared.providers, []);
        }
        v.console.error('Unknown footer button type: ', t);
    }
    function KC(n, t) {
        const e = YC(n.name, 'custom');
        return (function(n, t) {
            return Dy(n, t, [], []);
        })(
            on.none(),
            by
                .parts()
                .field({
                    factory: Xg,
                    ...GC(n, on.some(e), t, [AS(''), wS()]),
                }),
        );
    }
    function JC(n, t) {
        return wl({
            factory: by,
            name: n,
            overrides(o) {
                return {
                    fieldBehaviours: ya([
                        Jd('coupled-input-behaviour', [
                            mo(oi(), function(e) {
                                (function(n, t, e) {
                                    return Ks(n, t, e).bind(nd.getCurrent);
                                })(e, o, t).each(function(t) {
                                    Ks(e, o, 'lock').each(function(n) {
                                        kg.isOn(n) && o.onLockedChange(e, t, n);
                                    });
                                });
                            }),
                        ]),
                    ]),
                };
            },
        });
    }
    function $C(n) {
        const t = /^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(
            n,
        );
        if (t === null) return an.error(n);
        const e = parseFloat(t[1]);
        let o = t[2];
        return an.value({ value: e, unit: o });
    }
    function QC(n, t) {
        function e(n) {
            return Object.prototype.hasOwnProperty.call(o, n);
        }
        var o = { '': 96, px: 96, pt: 72, cm: 2.54, pc: 12, mm: 25.4, in: 1 };
        return n.unit === t
            ? on.some(n.value)
            : e(n.unit) && e(t)
            ? o[n.unit] === o[t]
                ? on.some(n.value)
                : on.some((n.value / o[n.unit]) * o[t])
            : on.none();
    }
    function ZC(n) {
        return on.none();
    }
    function nk(n, t) {
        return (function(n, t, e) {
            return n.isSome() && t.isSome()
                ? on.some(e(n.getOrDie(), t.getOrDie()))
                : on.none();
        })($C(n).toOption(), $C(t).toOption(), function(n, t) {
            return QC(n, t.unit)
                .map(function(n) {
                    return t.value / n;
                })
                .map(function(n) {
                    return (function(t, e) {
                        return function(n) {
                            return QC(n, e).map(function(n) {
                                return { value: n * t, unit: e };
                            });
                        };
                    })(n, t.unit);
                })
                .getOr(ZC);
        }).getOr(ZC);
    }
    function tk(o, t) {
        function n(n) {
            return {
                dom: { tag: 'div', classes: ['tox-form__group'] },
                components: n,
            };
        }
        function e(e) {
            return by.parts().field({
                factory: xy,
                inputClasses: ['tox-textfield'],
                inputBehaviours: ya([
                    kh.config({ disabled: o.disabled }),
                    Xy.config({}),
                    Jd('size-input-events', [
                        mo(Zr(), function(n, t) {
                            io(n, i, { isField1: e });
                        }),
                        mo(ri(), function(n, t) {
                            io(n, ay, { name: o.name });
                        }),
                    ]),
                ]),
                selectOnFocus: !1,
            });
        }
        function r(n) {
            return {
                dom: {
                    tag: 'label',
                    classes: ['tox-label'],
                    innerHtml: t.translate(n),
                },
            };
        }
        let a = ZC;
        var i = Yo('ratio-event');
        var u = lk.parts().lock({
            dom: {
                tag: 'button',
                classes: [
                    'tox-lock',
                    'tox-button',
                    'tox-button--naked',
                    'tox-button--icon',
                ],
                attributes: {
                    title: t.translate(o.label.getOr('Constrain proportions')),
                },
            },
            components: [
                {
                    dom: {
                        tag: 'span',
                        classes: ['tox-icon', 'tox-lock-icon__lock'],
                        innerHtml: xm('lock', t.icons),
                    },
                },
                {
                    dom: {
                        tag: 'span',
                        classes: ['tox-icon', 'tox-lock-icon__unlock'],
                        innerHtml: xm('unlock', t.icons),
                    },
                },
            ],
            buttonBehaviours: ya([Eh(o.disabled), Xy.config({})]),
        });
        let c = lk.parts().field1(n([by.parts().label(r('Width')), e(!0)]));
        let s = lk.parts().field2(n([by.parts().label(r('Height')), e(!1)]));
        return lk.sketch({
            dom: { tag: 'div', classes: ['tox-form__group'] },
            components: [
                {
                    dom: {
                        tag: 'div',
                        classes: ['tox-form__controls-h-stack'],
                    },
                    components: [c, s, n([r('&nbsp;'), u])],
                },
            ],
            field1Name: 'width',
            field2Name: 'height',
            locked: !0,
            markers: { lockClass: 'tox-locked' },
            onLockedChange(n, t, e) {
                $C(nl.getValue(n)).each(function(n) {
                    a(n).each(function(n) {
                        nl.setValue(
                            t,
                            (function(n) {
                                let t;
                                    var e = {
                                        '': 0,
                                        px: 0,
                                        pt: 1,
                                        mm: 1,
                                        pc: 2,
                                        ex: 2,
                                        em: 2,
                                        ch: 2,
                                        rem: 2,
                                        cm: 3,
                                        in: 4,
                                        '%': 4,
                                    };
                                    var o = n.value.toFixed(
                                        (t = n.unit) in e ? e[t] : 1,
                                    );
                                return (
                                    o.indexOf('.') !== -1 &&
                                        (o = o.replace(/\.?0*$/, '')),
                                    o + n.unit
                                );
                            })(n),
                        );
                    });
                });
            },
            coupledFieldBehaviours: ya([
                kh.config({
                    disabled: o.disabled,
                    onDisabled(n) {
                        lk
                            .getField1(n)
                            .bind(by.getField)
                            .each(kh.disable),
                            lk
                                .getField2(n)
                                .bind(by.getField)
                                .each(kh.disable),
                            lk.getLock(n).each(kh.disable);
                    },
                    onEnabled(n) {
                        lk
                            .getField1(n)
                            .bind(by.getField)
                            .each(kh.enable),
                            lk
                                .getField2(n)
                                .bind(by.getField)
                                .each(kh.enable),
                            lk.getLock(n).each(kh.enable);
                    },
                }),
                Jd('size-input-events2', [
                    mo(i, function(n, t) {
                        const e = t.event().isField1();
                        var o = e ? lk.getField1(n) : lk.getField2(n);
                        let r = e ? lk.getField2(n) : lk.getField1(n);
                        var i = o.map(nl.getValue).getOr('');
                        let u = r.map(nl.getValue).getOr('');
                        a = nk(i, u);
                    }),
                ]),
            ]),
        });
    }
    function ek(r, c) {
        function n(n, t, e, o) {
            return bm(
                XC(
                    {
                        name: n,
                        text: n,
                        disabled: e,
                        primary: o,
                        icon: on.none(),
                        borderless: !1,
                    },
                    t,
                    c,
                ),
            );
        }
        function t(n, t, e, o) {
            return bm(
                WC(
                    {
                        name: n,
                        icon: on.some(n),
                        tooltip: on.some(t),
                        disabled: o,
                        primary: !1,
                        borderless: !1,
                    },
                    e,
                    c,
                ),
            );
        }
        function u(n, e) {
            n.map(function(n) {
                const t = n.get(e);
                t.hasConfigured(kh) && kh.disable(t);
            });
        }
        function a(n, e) {
            n.map(function(n) {
                const t = n.get(e);
                t.hasConfigured(kh) && kh.enable(t);
            });
        }
        function i(n, t, e) {
            io(n, t, e);
        }
        function e(n) {
            return ro(n, hk.disable());
        }
        function o(n) {
            return ro(n, hk.enable());
        }
        function s(n, t) {
            e(n), i(n, dk.transform(), { transform: t }), o(n);
        }
        function f(n) {
            return function() {
                Q.getOpt(n).each(function(n) {
                    gg.set(n, [J]);
                });
            };
        }
        function l(n, t) {
            e(n), i(n, dk.transformApply(), { transform: t, swap: f(n) }), o(n);
        }
        function d() {
            return n(
                'Back',
                function(n) {
                    return i(n, dk.back(), { swap: f(n) });
                },
                !1,
                !1,
            );
        }
        function m() {
            return bm({
                dom: { tag: 'div', classes: ['tox-spacer'] },
                behaviours: ya([kh.config({})]),
            });
        }
        function g() {
            return n(
                'Apply',
                function(n) {
                    return i(n, dk.apply(), { swap: f(n) });
                },
                !0,
                !0,
            );
        }
        function p() {
            return function(n) {
                const t = r.getRect();
                return (function(n, t, e, o, r) {
                    return wC(n, t, e, o, r);
                })(n, t.x, t.y, t.w, t.h);
            };
        }
        function h(t, e) {
            return function(n) {
                return t(n, e);
            };
        }
        function v(n, t) {
            !(function(n, t) {
                e(n), i(n, dk.tempTransform(), { transform: t }), o(n);
            })(n, t);
        }
        function b(n, t, e, o, r) {
            const i = sS.parts().label({
                dom: {
                    tag: 'label',
                    classes: ['tox-label'],
                    innerHtml: c.translate(n),
                },
            });
            var u = sS.parts().spectrum({
                dom: {
                    tag: 'div',
                    classes: ['tox-slider__rail'],
                    attributes: { role: 'presentation' },
                },
            });
            let a = sS.parts().thumb({
                dom: {
                    tag: 'div',
                    classes: ['tox-slider__handle'],
                    attributes: { role: 'presentation' },
                },
            });
            return bm(
                sS.sketch({
                    dom: {
                        tag: 'div',
                        classes: ['tox-slider'],
                        attributes: { role: 'presentation' },
                    },
                    model: {
                        mode: 'x',
                        minX: e,
                        maxX: r,
                        getInitialValue: nn({ x: nn(o) }),
                    },
                    components: [i, u, a],
                    sliderBehaviours: ya([bg.config({})]),
                    onChoose: t,
                }),
            );
        }
        function y(n, t, e, o, r) {
            return [
                d(),
                (function(n, r, t, e, o) {
                    return b(
                        n,
                        function(n, t, e) {
                            const o = h(r, e.x() / 100);
                            s(n, o);
                        },
                        t,
                        e,
                        o,
                    );
                })(n, t, e, o, r),
                g(),
            ];
        }
        function x(n, t, e, o, r) {
            const i = y(n, t, e, o, r);
            return Gb.sketch({
                dom: k,
                components: i.map(function(n) {
                    return n.asSpec();
                }),
                containerBehaviours: ya([
                    Jd('image-tools-filter-panel-buttons-events', [
                        mo(hk.disable(), function(n, t) {
                            u(i, n);
                        }),
                        mo(hk.enable(), function(n, t) {
                            a(i, n);
                        }),
                    ]),
                ]),
            });
        }
        function w(t, e, o) {
            return function(n) {
                return (function(n, t, e, o) {
                    return dC(n, t, e, o);
                })(n, t, e, o);
            };
        }
        function S(n) {
            return b(
                n,
                function(a, n, t) {
                    const e = j.getOpt(a);
                    var o = W.getOpt(a);
                    let r = U.getOpt(a);
                    e.each(function(u) {
                        o.each(function(i) {
                            r.each(function(n) {
                                const t = nl.getValue(u).x() / 100;
                                var e = nl.getValue(n).x() / 100;
                                let o = nl.getValue(i).x() / 100;
                                let r = w(t, e, o);
                                s(a, r);
                            });
                        });
                    });
                },
                0,
                100,
                200,
            );
        }
        function C(t, e, o) {
            return function(n) {
                i(n, dk.swap(), {
                    transform: e,
                    swap() {
                        Q.getOpt(n).each(function(n) {
                            gg.set(n, [t]), o(n);
                        });
                    },
                });
            };
        }
        var k = {
            tag: 'div',
            classes: ['tox-image-tools__toolbar', 'tox-image-tools-edit-panel'],
        };
        var O = Z;
        var E = [
            d(),
            m(),
            n(
                'Apply',
                function(n) {
                    var t = p();
                    l(n, t), r.hideCrop();
                },
                !1,
                !0,
            ),
        ];
        let T = Gb.sketch({
            dom: k,
            components: E.map(function(n) {
                return n.asSpec();
            }),
            containerBehaviours: ya([
                Jd('image-tools-crop-buttons-events', [
                    mo(hk.disable(), function(n, t) {
                        u(E, n);
                    }),
                    mo(hk.enable(), function(n, t) {
                        a(E, n);
                    }),
                ]),
            ]),
        });
        let B = bm(
            tk(
                {
                    name: 'size',
                    label: on.none(),
                    constrain: !0,
                    disabled: !1,
                },
                c,
            ),
        );
        let D = [
            d(),
            m(),
            B,
            m(),
            n(
                'Apply',
                function(o) {
                    B.getOpt(o).each(function(n) {
                        let t = nl.getValue(n);
                                var e = (function(t, e) {
                                return function(n) {
                                    return BC(n, t, e);
                                };
                            })(parseInt(t.width, 10), parseInt(t.height, 10));
                        l(o, e);
                    });
                },
                !1,
                !0,
            ),
        ];
        var A = Gb.sketch({
            dom: k,
            components: D.map(function(n) {
                return n.asSpec();
            }),
            containerBehaviours: ya([
                Jd('image-tools-resize-buttons-events', [
                    mo(hk.disable(), function(n, t) {
                        u(D, n);
                    }),
                    mo(hk.enable(), function(n, t) {
                        a(D, n);
                    }),
                ]),
            ]),
        });
        let _ = h(TC, 'h');
        var M = h(TC, 'v');
        var F = h(DC, -90);
        let I = h(DC, 90);
        var R = [
            d(),
            m(),
            t(
                'flip-horizontally',
                'Flip horizontally',
                function(n) {
                    v(n, _);
                },
                !1,
            ),
            t(
                'flip-vertically',
                'Flip vertically',
                function(n) {
                    v(n, M);
                },
                !1,
            ),
            t(
                'rotate-left',
                'Rotate counterclockwise',
                function(n) {
                    v(n, F);
                },
                !1,
            ),
            t(
                'rotate-right',
                'Rotate clockwise',
                function(n) {
                    v(n, I);
                },
                !1,
            ),
            m(),
            g(),
        ];
        let V = Gb.sketch({
            dom: k,
            components: R.map(function(n) {
                return n.asSpec();
            }),
            containerBehaviours: ya([
                Jd('image-tools-fliprotate-buttons-events', [
                    mo(hk.disable(), function(n, t) {
                        u(R, n);
                    }),
                    mo(hk.enable(), function(n, t) {
                        a(R, n);
                    }),
                ]),
            ]),
        });
        let N = [d(), m(), g()];
        var H = Gb.sketch({
            dom: k,
            components: N.map(function(n) {
                return n.asSpec();
            }),
        });
        let P = x('Brightness', OC, -100, 0, 100);
        var z = x('Contrast', EC, -100, 0, 100);
        var L = x('Gamma', kC, -100, 0, 100);
        var j = S('R');
        var U = S('G');
        var W = S('B');
        let G = [d(), j, U, W, g()];
        var X = Gb.sketch({
            dom: k,
            components: G.map(function(n) {
                return n.asSpec();
            }),
        });
        let Y = on.some(CC);
        var q = on.some(SC);
        var K = [
            t(
                'crop',
                'Crop',
                C(T, on.none(), function(n) {
                    r.showCrop();
                }),
                !1,
            ),
            t(
                'resize',
                'Resize',
                C(A, on.none(), function(n) {
                    B.getOpt(n).each(function(n) {
                        let t = r.getMeasurements();
                                var e = t.width;
                                var o = t.height;
                        nl.setValue(n, { width: e, height: o });
                    });
                }),
                !1,
            ),
            t('orientation', 'Orientation', C(V, on.none(), O), !1),
            t('brightness', 'Brightness', C(P, on.none(), O), !1),
            t('sharpen', 'Sharpen', C(H, Y, O), !1),
            t('contrast', 'Contrast', C(z, on.none(), O), !1),
            t('color-levels', 'Color levels', C(X, on.none(), O), !1),
            t('gamma', 'Gamma', C(L, on.none(), O), !1),
            t('invert', 'Invert', C(H, q, O), !1),
        ];
        var J = Gb.sketch({
            dom: k,
            components: K.map(function(n) {
                return n.asSpec();
            }),
        });
        var $ = Gb.sketch({
            dom: { tag: 'div' },
            components: [J],
            containerBehaviours: ya([gg.config({})]),
        });
        var Q = bm($);
        return {
            memContainer: Q,
            getApplyButton(n) {
                return Q.getOpt(n).map(function(n) {
                    let t = n.components()[0];
                    return t.components()[t.components().length - 1];
                });
            },
        };
    }
    let ok = Yo('toolbar.button.execute');
    var rk = {
        'alloy.execute': [
            'disabling',
            'alloy.base.behaviour',
            'toggling',
            'toolbar-button-events',
        ],
    };
    var ik = Yo('update-menu-text');
    var uk = Yo('update-menu-icon');
    var ak = { type: 'separator' };
    var ck = function(n, r) {
        var t = VC(cn(n) ? n.split(' ') : n, r);
        return k(
            t,
            function(n, t) {
                var e = (function(n) {
                        if (RC(n)) return n;
                        let t = Nn(n, 'value').getOrThunk(function() {
                            return Yo('generated-menu-item');
                        });
                        return Dn({ value: t }, n);
                    })(t);
                        var o = NC(e, r);
                return {
                    menus: Dn(n.menus, o.menus),
                    items: [o.item].concat(n.items),
                    expansions: Dn(n.expansions, o.expansions),
                };
            },
            { menus: {}, expansions: {}, items: [] },
        );
    };
    let sk = nn([
        St('field1Name', 'field1'),
        St('field2Name', 'field2'),
        $u('onLockedChange'),
        Yu(['lockClass']),
        St('locked', !1),
        tl('coupledFieldBehaviours', [nd, nl]),
    ]);
    let fk = nn([
        JC('field1', 'field2'),
        JC('field2', 'field1'),
        wl({
            factory: Xg,
            schema: [ct('dom')],
            name: 'lock',
            overrides: function(n) {
                return {
                    buttonBehaviours: ya([
                        kg.config({
                            selected: n.locked,
                            toggleClass: n.markers.lockClass,
                            aria: { mode: 'pressed' },
                        }),
                    ]),
                };
            },
        }),
    ]);
    var lk = _l({
        name: 'FormCoupledInputs',
        configFields: sk(),
        partFields: fk(),
        factory: function(o, n, t, e) {
            return {
                uid: o.uid,
                dom: o.dom,
                components: n,
                behaviours: el(o.coupledFieldBehaviours, [
                    nd.config({ find: on.some }),
                    nl.config({
                        store: {
                            mode: 'manual',
                            getValue: function(n) {
                                let t;
                                        var e = nf(n, o, ['field1', 'field2']);
                                return (
                                    ((t = {})[o.field1Name] = nl.getValue(
                                        e.field1(),
                                    )),
                                    (t[o.field2Name] = nl.getValue(e.field2())),
                                    t
                                );
                            },
                            setValue(n, t) {
                                    var e = nf(n, o, ['field1', 'field2']);
                                    $(t, o.field1Name) &&
                                        nl.setValue(
                                            e.field1(),
                                            t[o.field1Name],
                                        ),
                                        $(t, o.field2Name) &&
                                            nl.setValue(
                                                e.field2(),
                                                t[o.field2Name],
                                            );
                                },
                        },
                    }),
                ]),
                apis: {
                    getField1(n) {
                            return Ks(n, o, 'field1');
                        },
                    getField2: function(n) {
                        return Ks(n, o, 'field2');
                    },
                    getLock(n) {
                            return Ks(n, o, 'lock');
                        },
                },
            };
        },
        apis: {
            getField1: function(n, t) {
                return n.getField1(t);
            },
            getField2(n, t) {
                    return n.getField2(t);
                },
            getLock(n, t) {
                    return n.getLock(t);
                },
        },
    });
    var dk = {
        undo: nn(Yo('undo')),
        redo: nn(Yo('redo')),
        zoom: nn(Yo('zoom')),
        back: nn(Yo('back')),
        apply: nn(Yo('apply')),
        swap: nn(Yo('swap')),
        transform: nn(Yo('transform')),
        tempTransform: nn(Yo('temp-transform')),
        transformApply: nn(Yo('transform-apply')),
    };
    let mk = nn('save-state');
    var gk = nn('disable');
    var pk = nn('enable');
    var hk = { formActionEvent: fy, saveState: mk, disable: gk, enable: pk };
    var vk = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');
    var bk = tinymce.util.Tools.resolve('tinymce.geom.Rect');
    var yk = tinymce.util.Tools.resolve('tinymce.util.Observable');
    var xk = tinymce.util.Tools.resolve('tinymce.util.Tools');
    var wk = tinymce.util.Tools.resolve('tinymce.util.VK');
    function Sk(n) {
        let t;
        let e;
        if (n.changedTouches)
            for (
                t = 'screenX screenY pageX pageY clientX clientY'.split(' '),
                    e = 0;
                e < t.length;
                e++
            )
                n[t[e]] = n.changedTouches[0][t[e]];
    }
    function Ck(n, r) {
        let i;
        var u;
        var t;
        var a;
        let c;
        var f;
        var l;
        let d = r.document || v.document;
        r = r || {};
        const m = d.getElementById(r.handle || n);
        (t = function(n) {
            let t;
            var e;
            let o = (function s(n) {
                let t;
                let e;
                var o;
                var r;
                var i;
                let u;
                var a;
                let c = Math.max;
                return (
                    (t = n.documentElement),
                    (e = n.body),
                    (o = c(t.scrollWidth, e.scrollWidth)),
                    (r = c(t.clientWidth, e.clientWidth)),
                    (i = c(t.offsetWidth, e.offsetWidth)),
                    (u = c(t.scrollHeight, e.scrollHeight)),
                    (a = c(t.clientHeight, e.clientHeight)),
                    {
                        width: o < i ? r : o,
                        height: u < c(t.offsetHeight, e.offsetHeight) ? a : u,
                    }
                );
            })(d);
            Sk(n),
                n.preventDefault(),
                (u = n.button),
                (t = m),
                (f = n.screenX),
                (l = n.screenY),
                (e = v.window.getComputedStyle
                    ? v.window
                          .getComputedStyle(t, null)
                          .getPropertyValue('cursor')
                    : t.runtimeStyle.cursor),
                (i = vk('<div></div>')
                    .css({
                        position: 'absolute',
                        top: 0,
                        left: 0,
                        width: o.width,
                        height: o.height,
                        zIndex: 2147483647,
                        opacity: 1e-4,
                        cursor: e,
                    })
                    .appendTo(d.body)),
                vk(d)
                    .on('mousemove touchmove', c)
                    .on('mouseup touchend', a),
                r.start(n);
        }),
            (c = function(n) {
                if ((Sk(n), n.button !== u)) return a(n);
                (n.deltaX = n.screenX - f),
                    (n.deltaY = n.screenY - l),
                    n.preventDefault(),
                    r.drag(n);
            }),
            (a = function(n) {
                Sk(n),
                    vk(d)
                        .off('mousemove touchmove', c)
                        .off('mouseup touchend', a),
                    i.remove(),
                    r.stop && r.stop(n);
            }),
            (this.destroy = function() {
                vk(m).off();
            }),
            vk(m).on('mousedown touchstart', t);
    }
    function kk(t) {
        function u(n, s) {
            c.getOpt(n).each(function(n) {
                const e = l.get();
                var o = gu(n.element());
                let r = fu(n.element());
                var i = s.dom().naturalWidth * e;
                let u = s.dom().naturalHeight * e;
                var a = Math.max(0, o / 2 - i / 2);
                let c = Math.max(0, r / 2 - u / 2);
                let t = {
                    left: `${a.toString()}px`,
                    top: `${c.toString()}px`,
                    width: `${i.toString()}px`,
                    height: `${u.toString()}px`,
                    position: 'absolute',
                };
                wr(s, t),
                    f.getOpt(n).each(function(n) {
                        wr(n.element(), t);
                    }),
                    d.get().each(function(n) {
                        const t = m.get();
                        n.setRect({
                            x: t.x * e + a,
                            y: t.y * e + c,
                            w: t.w * e,
                            h: t.h * e,
                        }),
                            n.setClampRect({ x: a, y: c, w: i, h: u }),
                            n.setViewPortRect({ x: 0, y: 0, w: o, h: r });
                    });
            });
        }
        function e(n, t) {
            const i = we.fromTag('img');
            return (
                zo(i, 'src', t),
                (function(e) {
                    return new Hp(function(n) {
                        var t = function() {
                            e.removeEventListener('load', t), n(e);
                        };
                        e.complete ? n(e) : e.addEventListener('load', t);
                    });
                })(i.dom()).then(function() {
                    return c.getOpt(n).map(function(n) {
                        const t = iu({ element: i });
                        gg.replaceAt(n, 1, on.some(t));
                        const e = a.get();
                        let o = {
                            x: 0,
                            y: 0,
                            w: i.dom().naturalWidth,
                            h: i.dom().naturalHeight,
                        };
                        a.set(o);
                        const r = bk.inflate(o, -20, -20);
                        return (
                            m.set(r),
                            (e.w === o.w && e.h === o.h) ||
                                (function(n, u) {
                                    c.getOpt(n).each(function(n) {
                                        const t = gu(n.element());
                                        var e = fu(n.element());
                                        let o = u.dom().naturalWidth;
                                        var r = u.dom().naturalHeight;
                                        let i = Math.min(t / o, e / r);
                                        i >= 1 ? l.set(1) : l.set(i);
                                    });
                                })(n, i),
                            u(n, i),
                            i
                        );
                    });
                })
            );
        }
        var f = bm({
            dom: {
                tag: 'div',
                classes: ['tox-image-tools__image-bg'],
                attributes: { role: 'presentation' },
            },
        });
        var l = ye(1);
        var d = ye(on.none());
        var m = ye({ x: 0, y: 0, w: 1, h: 1 });
        var a = ye({ x: 0, y: 0, w: 1, h: 1 });
        var n = Gb.sketch({
            dom: { tag: 'div', classes: ['tox-image-tools__image'] },
            components: [
                f.asSpec(),
                { dom: { tag: 'img', attributes: { src: t } } },
                {
                    dom: { tag: 'div' },
                    behaviours: ya([
                        Jd('image-panel-crop-events', [
                            Ri(function(n) {
                                c.getOpt(n).each(function(n) {
                                    var t = n.element().dom();
                                            var e = Bk(
                                            {
                                                x: 10,
                                                y: 10,
                                                w: 100,
                                                h: 100,
                                            },
                                            { x: 0, y: 0, w: 200, h: 200 },
                                            { x: 0, y: 0, w: 200, h: 200 },
                                            t,
                                            function() {},
                                        );
                                    e.toggleVisibility(!1),
                                        e.on('updateRect', function(n) {
                                            let t = n.rect;
                                                    var e = l.get();
                                                    var o = {
                                                    x: Math.round(t.x / e),
                                                    y: Math.round(t.y / e),
                                                    w: Math.round(t.w / e),
                                                    h: Math.round(t.h / e),
                                                };
                                            m.set(o);
                                        }),
                                        d.set(on.some(e));
                                });
                            }),
                        ]),
                    ]),
                },
            ],
            containerBehaviours: ya([
                gg.config({}),
                Jd('image-panel-events', [
                    Ri(function(n) {
                        e(n, t);
                    }),
                ]),
            ]),
        });
        var c = bm(n);
        return {
            memContainer: c,
            updateSrc: e,
            zoom(n, t) {
                let e = l.get();
                    var o = t > 0 ? Math.min(2, e + 0.1) : Math.max(0.1, e - 0.1);
                l.set(o),
                    c.getOpt(n).each(function(n) {
                        let t = n.components()[1].element();
                        u(n, t);
                    });
            },
            showCrop() {
                d.get().each(function(n) {
                    n.toggleVisibility(!0);
                });
            },
            hideCrop() {
                d.get().each(function(n) {
                    n.toggleVisibility(!1);
                });
            },
            getRect() {
                return m.get();
            },
            getMeasurements() {
                let n = a.get();
                return { width: n.w, height: n.h };
            },
        };
    }
    function Ok(n, t, e, o, r) {
        return WC(
            {
                name: n,
                icon: on.some(t),
                disabled: e,
                tooltip: on.some(n),
                primary: !1,
                borderless: !1,
            },
            o,
            r,
        );
    }
    function Ek(n, t) {
        t ? kh.enable(n) : kh.disable(n);
    }
    let Tk = 0;
    var Bk = function(s, e, f, o, r) {
        let l;
        var t;
        var i;
        let u = 'tox-';
        var a = `tox-crid-${  Tk++}`;
        var c = [
            {
                name: 'move',
                xMul: 0,
                yMul: 0,
                deltaX: 1,
                deltaY: 1,
                deltaW: 0,
                deltaH: 0,
                label: 'Crop Mask',
            },
            {
                name: 'nw',
                xMul: 0,
                yMul: 0,
                deltaX: 1,
                deltaY: 1,
                deltaW: -1,
                deltaH: -1,
                label: 'Top Left Crop Handle',
            },
            {
                name: 'ne',
                xMul: 1,
                yMul: 0,
                deltaX: 0,
                deltaY: 1,
                deltaW: 1,
                deltaH: -1,
                label: 'Top Right Crop Handle',
            },
            {
                name: 'sw',
                xMul: 0,
                yMul: 1,
                deltaX: 1,
                deltaY: 0,
                deltaW: -1,
                deltaH: 1,
                label: 'Bottom Left Crop Handle',
            },
            {
                name: 'se',
                xMul: 1,
                yMul: 1,
                deltaX: 0,
                deltaY: 0,
                deltaW: 1,
                deltaH: 1,
                label: 'Bottom Right Crop Handle',
            },
        ];
        i = ['top', 'right', 'bottom', 'left'];
        let d = function(n, t) {
            return { x: t.x + n.x, y: t.y + n.y, w: t.w, h: t.h };
        };
        let m = function(n, t) {
            return { x: t.x - n.x, y: t.y - n.y, w: t.w, h: t.h };
        };
        function g(n, t, e, o) {
            let r;
            var i;
            var u;
            var a;
            let c;
            (r = t.x),
                (i = t.y),
                (u = t.w),
                (a = t.h),
                (r += e * n.deltaX),
                (i += o * n.deltaY),
                (u += e * n.deltaW) < 20 && (u = 20),
                (a += o * n.deltaH) < 20 && (a = 20),
                (c = s = bk.clamp(
                    { x: r, y: i, w: u, h: a },
                    f,
                    n.name === 'move',
                )),
                (c = m(f, c)),
                l.fire('updateRect', { rect: c }),
                v(c);
        }
        function p(t) {
            function n(n, t) {
                t.h < 0 && (t.h = 0),
                    t.w < 0 && (t.w = 0),
                    vk(`#${a}-${n}`, o).css({
                        left: t.x,
                        top: t.y,
                        width: t.w,
                        height: t.h,
                    });
            }
            xk.each(c, function(n) {
                vk(`#${a}-${n.name}`, o).css({
                    left: t.w * n.xMul + t.x,
                    top: t.h * n.yMul + t.y,
                });
            }),
                n('top', { x: e.x, y: e.y, w: e.w, h: t.y - e.y }),
                n('right', {
                    x: t.x + t.w,
                    y: t.y,
                    w: e.w - t.x - t.w + e.x,
                    h: t.h,
                }),
                n('bottom', {
                    x: e.x,
                    y: t.y + t.h,
                    w: e.w,
                    h: e.h - t.y - t.h + e.y,
                }),
                n('left', { x: e.x, y: t.y, w: t.x - e.x, h: t.h }),
                n('move', t);
        }
        function h(n) {
            p((s = n));
        }
        function v(n) {
            h(d(f, n));
        }
        return (
            (function b() {
                vk(
                    `<div id="${a}" class="${u}croprect-container" role="grid" aria-dropeffect="execute">`,
                ).appendTo(o),
                    xk.each(i, function(n) {
                        vk(`#${a}`, o).append(
                            `<div id="${a}-${n}"class="${u}croprect-block" style="display: none" data-mce-bogus="all">`,
                        );
                    }),
                    xk.each(c, function(n) {
                        vk(`#${a}`, o).append(
                            `<div id="${a}-${n.name}" class="${u}croprect-handle ${u}croprect-handle-${n.name}"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="${n.label}" aria-grabbed="false" title="${n.label}">`,
                        );
                    }),
                    (t = xk.map(c, function n(t) {
                        let e;
                        return new Ck(a, {
                            document: o.ownerDocument,
                            handle: `${a}-${t.name}`,
                            start() {
                                e = s;
                            },
                            drag(n) {
                                g(t, e, n.deltaX, n.deltaY);
                            },
                        });
                    })),
                    p(s),
                    vk(o).on('focusin focusout', function(n) {
                        vk(n.target).attr(
                            'aria-grabbed',
                            n.type === 'focus' ? 'true' : 'false',
                        );
                    }),
                    vk(o).on('keydown', function(t) {
                        let i;
                        function n(n, t, e, o, r) {
                            n.stopPropagation(),
                                n.preventDefault(),
                                g(i, e, o, r);
                        }
                        switch (
                            (xk.each(c, function(n) {
                                if (t.target.id === `${a}-${n.name}`)
                                    return (i = n), !1;
                            }),
                            t.keyCode)
                        ) {
                            case wk.LEFT:
                                n(t, 0, s, -10, 0);
                                break;
                            case wk.RIGHT:
                                n(t, 0, s, 10, 0);
                                break;
                            case wk.UP:
                                n(t, 0, s, 0, -10);
                                break;
                            case wk.DOWN:
                                n(t, 0, s, 0, 10);
                                break;
                            case wk.ENTER:
                            case wk.SPACEBAR:
                                t.preventDefault(), r();
                        }
                    });
            })(),
            (l = xk.extend(
                {
                    toggleVisibility: function y(n) {
                        let t;
                        (t = xk
                            .map(c, function(n) {
                                return `#${a}-${n.name}`;
                            })
                            .concat(
                                xk.map(i, function(n) {
                                    return `#${a}-${n}`;
                                }),
                            )
                            .join(',')),
                            n ? vk(t, o).show() : vk(t, o).hide();
                    },
                    setClampRect: function x(n) {
                        (f = n), p(s);
                    },
                    setRect: h,
                    getInnerRect() {
                        return m(f, s);
                    },
                    setInnerRect: v,
                    setViewPortRect: function w(n) {
                        (e = n), p(s);
                    },
                    destroy: function n() {
                        xk.each(t, function(n) {
                            n.destroy();
                        }),
                            (t = []);
                    },
                },
                yk,
            ))
        );
    };
    function Dk(n) {
        const t = ye(n);
        var e = ye(on.none());
        var o = (function s() {
            let e = [];
            let o = -1;
            function n() {
                return o > 0;
            }
            function t() {
                return o !== -1 && o < e.length - 1;
            }
            return {
                data: e,
                add: function r(n) {
                    let t;
                    return (
                        (t = e.splice(++o)), e.push(n), { state: n, removed: t }
                    );
                },
                undo: function i() {
                    if (n()) return e[--o];
                },
                redo: function u() {
                    if (t()) return e[++o];
                },
                canUndo: n,
                canRedo: t,
            };
        })();
        function r(n) {
            t.set(n);
        }
        function i(n) {
            v.URL.revokeObjectURL(n.url);
        }
        function u(n) {
            const t = a(n);
            return (
                r(t),
                (function(n) {
                    xk.each(n, i);
                })(o.add(t).removed),
                t.url
            );
        }
        o.add(n);
        var a = function(n) {
            return { blob: n, url: v.URL.createObjectURL(n) };
        };
        var c = function() {
            e.get().each(i), e.set(on.none());
        };
        return {
            getBlobState() {
                return t.get();
            },
            setBlobState: r,
            addBlobState: u,
            getTempState() {
                return e.get().fold(
                    function() {
                        return t.get();
                    },
                    function(n) {
                        return n;
                    },
                );
            },
            updateTempState(n) {
                let t = a(n);
                return c(), e.set(on.some(t)), t.url;
            },
            addTempState(n) {
                let t = a(n);
                return e.set(on.some(t)), t.url;
            },
            applyTempState(t) {
                return e.get().fold(
                    function() {},
                    function(n) {
                        u(n.blob), t();
                    },
                );
            },
            destroyTempState: c,
            undo() {
                let n = o.undo();
                return r(n), n.url;
            },
            redo() {
                let n = o.redo();
                return r(n), n.url;
            },
            getHistoryStates() {
                return { undoEnabled: o.canUndo(), redoEnabled: o.canRedo() };
            },
        };
    }
    function Ak(n, t) {
        function i(n) {
            const t = s.getHistoryStates();
            m.updateButtonUndoStates(n, t.undoEnabled, t.redoEnabled),
                io(n, hk.formActionEvent, {
                    name: hk.saveState(),
                    value: t.undoEnabled,
                });
        }
        function u(n) {
            return n.toBlob();
        }
        function a(n) {
            io(n, hk.formActionEvent, { name: hk.disable(), value: {} });
        }
        function r(t, n, e, o, r) {
            return (
                a(t),
                (function(n) {
                    return rC(n);
                })(n)
                    .then(e)
                    .then(u)
                    .then(o)
                    .then(function(n) {
                        return l(t, n).then(function(n) {
                            return i(t), r(), f(t), n;
                        });
                    })
                    .catch(function(n) {
                        return v.console.log(n), f(t), n;
                    })
            );
        }
        function c(n, t, e) {
            const o = s.getBlobState().blob;
            r(
                n,
                o,
                t,
                function(n) {
                    return s.updateTempState(n);
                },
                e,
            );
        }
        var s = Dk(n.currentState);
        var f = function(n) {
            e.getApplyButton(n).each(function(n) {
                kh.enable(n);
            }),
                io(n, hk.formActionEvent, { name: hk.enable(), value: {} });
        };
        var l = function(n, t) {
            return a(n), o.updateSrc(n, t);
        };
        var d = function(n) {
            let t = s.getBlobState().url;
            return s.destroyTempState(), i(n), t;
        };
        var o = kk(n.currentState.url);
        var m = (function(n) {
            var o = bm(
                    Ok(
                        'Undo',
                        'undo',
                        !0,
                        function(n) {
                            io(n, dk.undo(), { direction: 1 });
                        },
                        n,
                    ),
                );
                    var r = bm(
                    Ok(
                        'Redo',
                        'redo',
                        !0,
                        function(n) {
                            io(n, dk.redo(), { direction: 1 });
                        },
                        n,
                    ),
                );
            return {
                container: Gb.sketch({
                    dom: {
                        tag: 'div',
                        classes: [
                            'tox-image-tools__toolbar',
                            'tox-image-tools__sidebar',
                        ],
                    },
                    components: [
                        o.asSpec(),
                        r.asSpec(),
                        Ok(
                            'Zoom in',
                            'zoom-in',
                            !1,
                            function(n) {
                                io(n, dk.zoom(), { direction: 1 });
                            },
                            n,
                        ),
                        Ok(
                            'Zoom out',
                            'zoom-out',
                            !1,
                            function(n) {
                                io(n, dk.zoom(), { direction: -1 });
                            },
                            n,
                        ),
                    ],
                }),
                updateButtonUndoStates: function(n, t, e) {
                    o.getOpt(n).each(function(n) {
                        Ek(n, t);
                    }),
                        r.getOpt(n).each(function(n) {
                            Ek(n, e);
                        });
                },
            };
        })(t);
        var e = ek(o, t);
        return {
            dom: { tag: 'div', attributes: { role: 'presentation' } },
            components: [
                e.memContainer.asSpec(),
                o.memContainer.asSpec(),
                m.container,
            ],
            behaviours: ya([
                nl.config({
                    store: {
                        mode: 'manual',
                        getValue() {
                            return s.getBlobState();
                        },
                    },
                }),
                Jd('image-tools-events', [
                    mo(dk.undo(), function(t, n) {
                        const e = s.undo();
                        l(t, e).then(function(n) {
                            f(t), i(t);
                        });
                    }),
                    mo(dk.redo(), function(t, n) {
                        const e = s.redo();
                        l(t, e).then(function(n) {
                            f(t), i(t);
                        });
                    }),
                    mo(dk.zoom(), function(n, t) {
                        const e = t.event().direction();
                        o.zoom(n, e);
                    }),
                    mo(dk.back(), function(n, t) {
                        !(function(t) {
                            const n = d(t);
                            l(t, n).then(function(n) {
                                f(t);
                            });
                        })(n),
                            t.event().swap()(),
                            o.hideCrop();
                    }),
                    mo(dk.apply(), function(n, t) {
                        s.applyTempState(function() {
                            d(n), t.event().swap()();
                        });
                    }),
                    mo(dk.transform(), function(n, t) {
                        return c(n, t.event().transform(), Z);
                    }),
                    mo(dk.tempTransform(), function(n, t) {
                        return (function(n, t) {
                            const e = s.getTempState().blob;
                            r(
                                n,
                                e,
                                t,
                                function(n) {
                                    return s.addTempState(n);
                                },
                                Z,
                            );
                        })(n, t.event().transform());
                    }),
                    mo(dk.transformApply(), function(n, t) {
                        return (function(e, n, t) {
                            const o = s.getBlobState().blob;
                            r(
                                e,
                                o,
                                n,
                                function(n) {
                                    const t = s.addBlobState(n);
                                    return d(e), t;
                                },
                                t,
                            );
                        })(n, t.event().transform(), t.event().swap());
                    }),
                    mo(dk.swap(), function(t, n) {
                        !(function(n) {
                            m.updateButtonUndoStates(n, !1, !1);
                        })(t);
                        const e = n.event().transform();
                        var o = n.event().swap();
                        e.fold(
                            function() {
                                o();
                            },
                            function(n) {
                                c(t, n, o);
                            },
                        );
                    }),
                ]),
                wS(),
            ]),
        };
    }
    function _k(e, t) {
        const n = e.label.map(function(n) {
            return Ay(n, t);
        });
        var o = [
            kh.config({ disabled: e.disabled }),
            dg.config({
                mode: 'execution',
                useEnter: !0 !== e.multiline,
                useControlEnter: !0 === e.multiline,
                execute: function(n) {
                    return ro(n, ly), on.some(!0);
                },
            }),
            Jd('textfield-change', [
                mo(oi(), function(n, t) {
                    io(n, ay, { name: e.name });
                }),
                mo(li(), function(n, t) {
                    io(n, ay, { name: e.name });
                }),
            ]),
            Xy.config({}),
        ];
        var r = e.validation
            .map(function(o) {
                return Uy.config({
                    getRoot: function(n) {
                        return To(n.element());
                    },
                    invalidClass: 'tox-invalid',
                    validator: {
                        validate: function(n) {
                            let t = nl.getValue(n);
                                    var e = o.validator(t);
                            return Hy(!0 === e ? an.value(t) : an.error(e));
                        },
                        validateOnLoad: o.validateOnLoad,
                    },
                });
            })
            .toArray();
        var i = e.placeholder.fold(nn({}), function(n) {
            return { placeholder: t.translate(n) };
        });
        var u = e.inputMode.fold(nn({}), function(n) {
            return { inputmode: n };
        });
        var a = N({ ...i}, u);
        var c = by.parts().field({
            tag: !0 === e.multiline ? 'textarea' : 'input',
            inputAttributes: a,
            inputClasses: [e.classname],
            inputBehaviours: ya(H([o, r])),
            selectOnFocus: !1,
            factory: xy,
        });
        let s = (e.flex ? ['tox-form__group--stretched'] : []).concat(
            e.maximized ? ['tox-form-group--maximize'] : [],
        );
        let f = [
            kh.config({
                disabled: e.disabled,
                onDisabled(n) {
                    by.getField(n).each(kh.disable);
                },
                onEnabled(n) {
                    by.getField(n).each(kh.enable);
                },
            }),
        ];
        return Dy(n, c, s, f);
    }
    function Mk(n) {
        const t = ye(null);
        return tu({
            readState() {
                return { timer: t.get() !== null ? 'set' : 'unset' };
            },
            setTimer(n) {
                t.set(n);
            },
            cancel() {
                let n = t.get();
                n !== null && n.cancel();
            },
        });
    }
    function Fk(n, t, e) {
        const o = nl.getValue(e);
        nl.setValue(t, o), kE(t);
    }
    function Ik(n, t) {
        const e = n.element();
        var o = Tr(e);
        let r = e.dom();
        Lo(e, 'type') !== 'number' && t(r, o);
    }
    function Rk(n, t, e) {
        if (n.selectsOver) {
            const o = nl.getValue(t);
            var r = n.getDisplayText(o);
            let i = nl.getValue(e);
            return n.getDisplayText(i).indexOf(r) === 0
                ? on.some(function() {
                      Fk(0, t, e),
                          (function(n, e) {
                              Ik(n, function(n, t) {
                                  return n.setSelectionRange(e, t.length);
                              });
                          })(t, r.length);
                  })
                : on.none();
        }
        return on.none();
    }
    function Vk(n) {
        return DE(Ny(n));
    }
    function Nk(n) {
        return {
            type: 'menuitem',
            value: n.url,
            text: n.title,
            meta: { attach: n.attach },
            onAction() {},
        };
    }
    function Hk(n, t) {
        return {
            type: 'menuitem',
            value: t,
            text: n,
            meta: { attach: undefined },
            onAction() {},
        };
    }
    function Pk(n, t) {
        return (function(n) {
            return S(n, Nk);
        })(
            (function(t, n) {
                return C(n, function(n) {
                    return n.type === t;
                });
            })(n, t),
        );
    }
    function zk(n, t) {
        const e = n.toLowerCase();
        return C(t, function(n) {
            const t =
                n.meta !== undefined && n.meta.text !== undefined
                    ? n.meta.text
                    : n.text;
            return Vt(t.toLowerCase(), e) || Vt(n.value.toLowerCase(), e);
        });
    }
    function Lk(e, n, o) {
        const t = nl.getValue(n);
        let r = t.meta.text !== undefined ? t.meta.text : t.value;
        return o.getLinkInformation().fold(
            function() {
                return [];
            },
            function(n) {
                const t = zk(
                    r,
                    (function(n) {
                        return S(n, function(n) {
                            return Hk(n, n);
                        });
                    })(o.getHistory(e)),
                );
                return e === 'file'
                    ? (function(n) {
                          return O(
                              n,
                              function(n, t) {
                                  return n.length === 0 || t.length === 0
                                      ? n.concat(t)
                                      : n.concat(_E, t);
                              },
                              [],
                          );
                      })([
                          t,
                          zk(
                              r,
                              (function(n) {
                                  return Pk('header', n.targets);
                              })(n),
                          ),
                          zk(
                              r,
                              H([
                                  (function(n) {
                                      return on
                                          .from(n.anchorTop)
                                          .map(function(n) {
                                              return Hk('<top>', n);
                                          })
                                          .toArray();
                                  })(n),
                                  (function(n) {
                                      return Pk('anchor', n.targets);
                                  })(n),
                                  (function(n) {
                                      return on
                                          .from(n.anchorBottom)
                                          .map(function(n) {
                                              return Hk('<bottom>', n);
                                          })
                                          .toArray();
                                  })(n),
                              ]),
                          ),
                      ])
                    : t;
            },
        );
    }
    function jk(r, o, i) {
        function u(n) {
            const t = nl.getValue(n);
            i.addToHistory(t.value, r.filetype);
        }
        let n;
        var t;
        var e;
        var a;
        let c;
        let s = o.shared.providers;
        var f = by.parts().field({
            factory: BE,
            dismissOnBlur: !0,
            inputClasses: ['tox-textfield'],
            sandboxClasses: ['tox-dialog__popups'],
            inputAttributes: { 'aria-errormessage': ME, type: 'url' },
            minChars: 0,
            responseTime: 0,
            fetch: function(n) {
                let t = Lk(r.filetype, n, i);
                        var e = HC(t, Ih.BUBBLE_TO_SANDBOX, o, !1);
                return Hy(e);
            },
            getHotspot: function(n) {
                return h.getOpt(n);
            },
            onSetValue(n, t) {
                    n.hasConfigured(Uy) && Uy.run(n).get(Z);
                },
            typeaheadBehaviours: ya(
                H([
                    i
                        .getValidationHandler()
                        .map(function(e) {
                            return Uy.config({
                                getRoot(n) {
                                        return To(n.element());
                                    },
                                invalidClass:
                                    'tox-control-wrap--status-invalid',
                                notify: {
                                    onInvalid(n, t) {
                                            d.getOpt(n).each(function(n) {
                                                zo(
                                                    n.element(),
                                                    'title',
                                                    s.translate(t),
                                                );
                                            });
                                        },
                                },
                                validator: {
                                    validate(n) {
                                            var t = nl.getValue(n);
                                            return AE(function(o) {
                                                e(
                                                    {
                                                        type: r.filetype,
                                                        url: t.value,
                                                    },
                                                    function(n) {
                                                        if (
                                                            'invalid' ===
                                                            n.status
                                                        ) {
                                                            var t = an.error(
                                                                n.message,
                                                            );
                                                            o(t);
                                                        } else {
                                                            var e = an.value(
                                                                n.message,
                                                            );
                                                            o(e);
                                                        }
                                                    },
                                                );
                                            });
                                        },
                                    validateOnLoad: !1,
                                },
                            });
                        })
                        .toArray(),
                    [
                        kh.config({ disabled: r.disabled }),
                        Xy.config({}),
                        Jd(
                            'urlinput-events',
                            H([
                                r.filetype === 'file'
                                    ? [
                                          mo(oi(), function(n) {
                                              io(n, ay, { name: r.name });
                                          }),
                                      ]
                                    : [],
                                [
                                    mo(ri(), function(n) {
                                        io(n, ay, { name: r.name }), u(n);
                                    }),
                                    mo(li(), function(n) {
                                        io(n, ay, { name: r.name }), u(n);
                                    }),
                                ],
                            ]),
                        ),
                    ],
                ]),
            ),
            eventOrder:
                ((n = {}),
                (n[oi()] = ['streaming', 'urlinput-events', 'invalidating']),
                n),
            model: {
                getDisplayText(n) {
                        return n.value;
                    },
                selectsOver: !1,
                populateFromBrowse: !1,
            },
            markers: { openClass: 'tox-textfield--popup-open' },
            lazySink: o.shared.getSink,
            parts: { menu: Cv(0, 0, 'normal') },
            onExecute: function(n, t, e) {
                io(t, ly, {});
            },
            onItemExecute(n, t, e, o) {
                    u(n), io(n, ay, { name: r.name });
                },
        });
        var l = r.label.map(function(n) {
            return Ay(n, s);
        });
        var d = bm(
            ((t = 'invalid'),
            (e = on.some(ME)),
            void 0 === (a = 'warning') && (a = t),
            void 0 === c && (c = t),
            {
                dom: {
                    tag: 'div',
                    classes: ['tox-icon', 'tox-control-wrap__status-icon-' + t],
                    innerHtml: xm(a, s.icons),
                    attributes: {
                            title: s.translate(c), 'aria-live': 'polite',
                            ...e.fold(
                                function() {
                                    return {};
                                },
                                function(n) {
                                    return { id: n };
                                },
                            ),
                        },
                },
            }),
        );
        let m = bm({
            dom: {
                tag: 'div',
                classes: ['tox-control-wrap__status-icon-wrap'],
            },
            components: [d.asSpec()],
        });
        var g = i.getUrlPicker(r.filetype);
        var p = Yo('browser.url.event');
        var h = bm({
            dom: { tag: 'div', classes: ['tox-control-wrap'] },
            components: [f, m.asSpec()],
            behaviours: ya([kh.config({ disabled: r.disabled })]),
        });
        let v = bm(
            XC(
                {
                    name: r.name,
                    icon: on.some('browse'),
                    text: r.label.getOr(''),
                    disabled: r.disabled,
                    primary: !1,
                    borderless: !0,
                },
                function(n) {
                    return ro(n, p);
                },
                s,
                [],
                ['tox-browse-url'],
            ),
        );
        return by.sketch({
            dom: qy([]),
            components: l.toArray().concat([
                {
                    dom: {
                        tag: 'div',
                        classes: ['tox-form__controls-h-stack'],
                    },
                    components: H([
                        [h.asSpec()],
                        g
                            .map(function() {
                                return v.asSpec();
                            })
                            .toArray(),
                    ]),
                },
            ]),
            fieldBehaviours: ya([
                kh.config({
                    disabled: r.disabled,
                    onDisabled(n) {
                        by.getField(n).each(kh.disable),
                            v.getOpt(n).each(kh.disable);
                    },
                    onEnabled(n) {
                        by.getField(n).each(kh.enable),
                            v.getOpt(n).each(kh.enable);
                    },
                }),
                Jd('url-input-events', [
                    mo(p, function(o) {
                        nd.getCurrent(o).each(function(t) {
                            const e = nl.getValue(t);
                            g.each(function(n) {
                                n(e).get(function(n) {
                                    nl.setValue(t, n),
                                        io(o, ay, { name: r.name });
                                });
                            });
                        });
                    }),
                ]),
            ]),
        });
    }
    function Uk(u, t) {
        function n(o) {
            return function(t, e) {
                Eu(e.event().target(), '[data-collection-item-value]').each(
                    function(n) {
                        o(t, e, n, Lo(n, 'data-collection-item-value'));
                    },
                );
            };
        }
        const e = u.label.map(function(n) {
            return Ay(n, t);
        });
        var o = n(function(n, t, e, o) {
            t.stop(), io(n, fy, { name: u.name, value: o });
        });
        let r = [
            mo(
                Qr(),
                n(function(n, t, e) {
                    Sa(e);
                }),
            ),
            mo(ii(), o),
            mo(pi(), o),
            mo(
                Zr(),
                n(function(n, t, e) {
                    Ou(n.element(), `.${  gh}`).each(function(n) {
                        mr(n, gh);
                    }),
                        lr(e, gh);
                }),
            ),
            mo(
                ni(),
                n(function(n) {
                    Ou(n.element(), `.${  gh}`).each(function(n) {
                        mr(n, gh);
                    });
                }),
            ),
            Hi(
                n(function(n, t, e, o) {
                    io(n, fy, { name: u.name, value: o });
                }),
            ),
        ];
        let i = by.parts().field({
            dom: {
                tag: 'div',
                classes: ['tox-collection'].concat(
                    u.columns !== 1
                        ? ['tox-collection--grid']
                        : ['tox-collection--list'],
                ),
            },
            components: [],
            factory: { sketch: l },
            behaviours: ya([
                gg.config({}),
                nl.config({
                    store: { mode: 'memory', initialValue: [] },
                    onSetValue(o, n) {
                        !(function(n, t) {
                            let e = S(t, function(n) {
                                    var t = ih.translate(n.text);
                                            var e =
                                                1 === u.columns
                                                    ? '<div class="tox-collection__item-label">' +
                                                      t +
                                                      '</div>'
                                                    : '';
                                            var o =
                                                '<div class="tox-collection__item-icon">' +
                                                n.icon +
                                                '</div>';
                                            var r = {
                                                _: ' ',
                                                ' - ': ' ',
                                                '-': ' ',
                                            };
                                            var i = t.replace(
                                                /\_| \- |\-/g,
                                        ) {
                                            return r[n];
                                        });
                                    return (
                                        `<div class="tox-collection__item" tabindex="-1" data-collection-item-value="${ 
                                            (function(n) {
                                                return '"' === n ? '&quot;' : n;
                                            })(n.value) 
                                            }" title="${ 
                                            i 
                                            }" aria-label="${ 
                                            i 
                                            }">${ 
                                            o 
                                            }${e 
                                            }</div>`
                                    );
                                });
                                    var o =
                                        1 < u.columns && 'auto' !== u.columns
                                            ? w(e, u.columns)
                                            : [e];
                                    var r = S(o, function(n) {
                                    return (
                                        '<div class="tox-collection__group">' +
                                        n.join('') +
                                        '</div>'
                                    );
                                });
                            Ho(n.element(), r.join(''));
                        })(o, n),
                            u.columns === 'auto' &&
                                up(o, 5, 'tox-collection__item').each(function(
                                    n,
                                ) {
                                    let t = n.numRows;
                                                var e = n.numColumns;
                                    dg.setGridSize(o, t, e);
                                }),
                            ro(o, py);
                    },
                }),
                Xy.config({}),
                dg.config(
                    (function(n, t) {
                        return n === 1
                            ? {
                                  mode: 'menu',
                                  moveOnTab: !1,
                                  selector: '.tox-collection__item',
                              }
                            : n === 'auto'
                            ? {
                                  mode: 'flatgrid',
                                  selector: '.tox-collection__item',
                                  initSize: { numColumns: 1, numRows: 1 },
                              }
                            : {
                                  mode: 'matrix',
                                  selectors: {
                                      row:
                                          t === 'color'
                                              ? '.tox-swatches__row'
                                              : '.tox-collection__group',
                                      cell: t === 'color' ? `.${ch}` : `.${ah}`,
                                  },
                              };
                    })(u.columns, 'normal'),
                ),
                Jd('collection-events', r),
            ]),
        });
        return Dy(e, i, ['tox-form__group--collection'], []);
    }
    function Wk(r) {
        return function(t, e, o) {
            return Nn(e, 'name').fold(
                function() {
                    return r(e, o);
                },
                function(n) {
                    return t.field(n, r(e, o));
                },
            );
        };
    }
    function Gk(t, n, e) {
        var o = Dn(e, {
            shared: {
                interpreter(n) {
                    return RE(t, n, o);
                },
            },
        });
        return RE(t, n, o);
    }
    function Xk(n) {
        return {
            colorPicker: (function(e) {
                return function(n, t) {
                    Wv.colorPickerDialog(e)(n, t);
                };
            })(n),
            hasCustomColors: (function(n) {
                return function() {
                    return Iv(n);
                };
            })(n),
            getColors: (function(n) {
                return function() {
                    return Rv(n);
                };
            })(n),
            getColorCols: (function(n) {
                return function() {
                    return Wv.getColorCols(n);
                };
            })(n),
        };
    }
    function Yk(e) {
        return (function(n) {
            return on.from(n.getParam('style_formats')).filter(fn);
        })(e)
            .map(function(n) {
                const t = (function(t, n) {
                    function e(n) {
                        bn(n, function(n) {
                            t.formatter.has(n.name) ||
                                t.formatter.register(n.name, n.format);
                        });
                    }
                    const o = zE(n);
                    return (
                        t.formatter
                            ? e(o.customFormats)
                            : t.on('init', function() {
                                  e(o.customFormats);
                              }),
                        o.formats
                    );
                })(e, n);
                return (function(n) {
                    return n.getParam('style_formats_merge', !1, 'boolean');
                })(e)
                    ? PE.concat(t)
                    : t;
            })
            .getOr(PE);
    }
    function qk(n, t, e) {
        const o = {
            type: 'formatter',
            isSelected: t(n.format),
            getStylePreview: e(n.format),
        };
        return Dn(n, o);
    }
    function Kk(r, n, i, u) {
        var o = function(n) {
            return S(n, function(n) {
                const t = wn(n);
                if ($(n, 'items')) {
                    const e = o(n.items);
                    return Dn(
                        (function(n) {
                            const t = {
                                type: 'submenu',
                                isSelected: nn(!1),
                                getStylePreview() {
                                    return on.none();
                                },
                            };
                            return Dn(n, t);
                        })(n),
                        {
                            getStyleItems() {
                                return e;
                            },
                        },
                    );
                }
                return $(n, 'format')
                    ? (function(n) {
                          return qk(n, i, u);
                      })(n)
                    : t.length === 1 && vn(t, 'title')
                    ? Dn(n, { type: 'separator' })
                    : (function(n) {
                          const t = Yo(n.title);
                          var e = {
                              type: 'formatter',
                              format: t,
                              isSelected: i(t),
                              getStylePreview: u(t),
                          };
                          let o = Dn(n, e);
                          return r.formatter.register(t, o), o;
                      })(n);
            });
        };
        return o(n);
    }
    function Jk(t) {
        return function(n) {
            if (n && n.nodeType === 1) {
                if (n.contentEditable === t) return !0;
                if (n.getAttribute('data-mce-contenteditable') === t) return !0;
            }
            return !1;
        };
    }
    function $k(n, t, e, o, r) {
        return { type: n, title: t, url: e, level: o, attach: r };
    }
    function Qk(n) {
        return n.innerText || n.textContent;
    }
    function Zk(n) {
        return (
            (function(n) {
                return (
                    n && n.nodeName === 'A' && (n.id || n.name) !== undefined
                );
            })(n) && WE(n)
        );
    }
    function nO(n) {
        return n && /^(H[1-6])$/.test(n.nodeName);
    }
    function tO(n) {
        return nO(n) && WE(n);
    }
    function eO(n) {
        const t = (function(n) {
            return n.id ? n.id : Yo('h');
        })(n);
        return $k(
            'header',
            Qk(n),
            `#${t}`,
            (function(n) {
                return nO(n) ? parseInt(n.nodeName.substr(1), 10) : 0;
            })(n),
            function() {
                n.id = t;
            },
        );
    }
    function oO(n) {
        const t = n.id || n.name;
        var e = Qk(n);
        return $k('anchor', e || `#${t}`, `#${t}`, 0, Z);
    }
    function rO(n) {
        return (function(n, t) {
            return S(Lc(we.fromDom(t), n), function(n) {
                return n.dom();
            });
        })('h1,h2,h3,h4,h5,h6,a:not([href])', n);
    }
    function iO(n) {
        return LE(n.title).length > 0;
    }
    function uO(n) {
        return cn(n) && /^https?/.test(n);
    }
    function aO(n) {
        return (
            sn(n) &&
            I(n, function(n) {
                return !(function(n) {
                    return fn(n) && n.length <= 5 && D(n, uO);
                })(n);
            }).isNone()
        );
    }
    function cO() {
        let n;
        var t = v.localStorage.getItem(XE);
        if (t === null) return {};
        try {
            n = JSON.parse(t);
        } catch (e) {
            if (e instanceof SyntaxError)
                return (
                    v.console.log(`Local storage ${XE} was not valid JSON`, e),
                    {}
                );
            throw e;
        }
        return aO(n)
            ? n
            : (v.console.log(`Local storage ${XE} was not valid format`, n),
              {});
    }
    function sO(n) {
        const t = cO();
        return Object.prototype.hasOwnProperty.call(t, n) ? t[n] : [];
    }
    function fO(t, n) {
        if (uO(t)) {
            const e = cO();
            let o = Object.prototype.hasOwnProperty.call(e, n) ? e[n] : [];
            var r = C(o, function(n) {
                return n !== t;
            });
            (e[n] = [t].concat(r).slice(0, 5)),
                (function(n) {
                    if (!aO(n))
                        throw new Error(
                            `Bad format for history:\n${JSON.stringify(n)}`,
                        );
                    v.localStorage.setItem(XE, JSON.stringify(n));
                })(e);
        }
    }
    function lO(n) {
        return !!n;
    }
    function dO(n) {
        return P(xk.makeMap(n, /[, ]/), lO);
    }
    function mO(n, t, e) {
        const o = (function(n, t) {
            return YE.call(n, t) ? on.some(n[t]) : on.none();
        })(n, t).getOr(e);
        return cn(o) ? on.some(o) : on.none();
    }
    function gO(n) {
        return on.some(n.file_picker_callback).filter(dn);
    }
    function pO(n, t) {
        const e = (function(n) {
            const t = on.some(n.file_picker_types).filter(lO);
            var e = on.some(n.file_browser_callback_types).filter(lO);
            let o = t.or(e).map(dO);
            return gO(n).fold(
                function() {
                    return !1;
                },
                function(n) {
                    return o.fold(
                        function() {
                            return !0;
                        },
                        function(n) {
                            return wn(n).length > 0 && n;
                        },
                    );
                },
            );
        })(n);
        return ln(e) ? (e ? gO(n) : on.none()) : e[t] ? gO(n) : on.none();
    }
    function hO(t) {
        return {
            getHistory: sO,
            addToHistory: fO,
            getLinkInformation() {
                return (function(n) {
                    return !1 === n.settings.typeahead_urls
                        ? on.none()
                        : on.some({
                              targets: GE(n.getBody()),
                              anchorTop: mO(
                                  n.settings,
                                  'anchor_top',
                                  '#top',
                              ).getOrUndefined(),
                              anchorBottom: mO(
                                  n.settings,
                                  'anchor_bottom',
                                  '#bottom',
                              ).getOrUndefined(),
                          });
                })(t);
            },
            getValidationHandler() {
                return (function(n) {
                    return on
                        .from(n.settings.file_picker_validator_handler)
                        .filter(dn)
                        .orThunk(function() {
                            return on
                                .from(n.settings.filepicker_validator_handler)
                                .filter(dn);
                        });
                })(t);
            },
            getUrlPicker(n) {
                return (function(r, i) {
                    return pO(r.settings, i).map(function(o) {
                        return function(t) {
                            return Ny(function(e) {
                                let n = xk.extend(
                                    { filetype: i },
                                    on.from(t.meta).getOr({}),
                                );
                                o.call(
                                    r,
                                    function(n, t) {
                                        if (!cn(n))
                                            throw new Error(
                                                'Expected value to be string',
                                            );
                                        if (t !== undefined && !sn(t))
                                            throw new Error(
                                                'Expected meta to be a object',
                                            );
                                        e({ value: n, meta: t });
                                    },
                                    t.value,
                                    n,
                                );
                            });
                        };
                    });
                })(t, n);
            },
        };
    }
    function vO(n, t, e, o) {
        let r = ye(!1);
        var i = {
            shared: {
                providers: {
                    icons() {
                        return t.ui.registry.getAll().icons;
                    },
                    menuItems() {
                        return t.ui.registry.getAll().menuItems;
                    },
                    translate: ih.translate,
                },
                interpreter(n) {
                    return (function(n, t) {
                        return RE(IE, n, t);
                    })(n, i);
                },
                anchors: HE(t, e, o),
                getSink() {
                    return an.value(n);
                },
            },
            urlinput: hO(t),
            styleselect: (function(e) {
                function o(n) {
                    return function() {
                        return e.formatter.match(n);
                    };
                }
                function r(t) {
                    return function() {
                        let n = e.formatter.get(t);
                        return n !== undefined
                            ? on.some({
                                  tag:
                                      (n.length > 0 &&
                                          (n[0].inline || n[0].block)) ||
                                      'div',
                                  styleAttr: e.formatter.getCssText(t),
                              })
                            : on.none();
                    };
                }
                var i = function(n) {
                    let t = n.items;
                    return t !== undefined && t.length > 0
                        ? B(t, i)
                        : [n.format];
                };
                var u = ye([]);
                var a = ye([]);
                let c = ye([]);
                var s = ye([]);
                var f = ye(!1);
                e.on('init', function() {
                    const n = Yk(e);
                    var t = Kk(e, n, o, r);
                    u.set(t), a.set(B(t, i));
                }),
                    e.on('addStyleModifications', function(n) {
                        let t = Kk(e, n.items, o, r);
                        c.set(t), f.set(n.replace), s.set(B(t, i));
                    });
                return {
                    getData() {
                        let n = f.get() ? [] : u.get();
                                var t = c.get();
                        return n.concat(t);
                    },
                    getFlattenedKeys() {
                        let n = f.get() ? [] : a.get();
                                var t = s.get();
                        return n.concat(t);
                    },
                };
            })(t),
            colorinput: Xk(t),
            dialog: (function(n) {
                return {
                    isDraggableModal: (function(n) {
                        return function() {
                            return (function(n) {
                                return n.getParam(
                                    'draggable_modal',
                                    !1,
                                    'boolean',
                                );
                            })(n);
                        };
                    })(n),
                };
            })(t),
            isContextMenuOpen() {
                return r.get();
            },
            setContextMenuState(n) {
                return r.set(n);
            },
        };
        return i;
    }
    function bO(n, t, o) {
        const e = (function(n, e) {
            return O(
                n,
                function(t, n) {
                    return e(n, t.len).fold(nn(t), function(n) {
                        return {
                            len: n.finish(),
                            list: t.list.concat([n]),
                        };
                    });
                },
                { len: 0, list: [] },
            ).list;
        })(n, function(n, t) {
            let e = o(n);
            return on.some({
                element: nn(n),
                start: nn(t),
                finish: nn(t + e),
                width: nn(e),
            });
        });
        let r = C(e, function(n) {
            return n.finish() <= t;
        });
        var i = k(
            r,
            function(n, t) {
                return n + t.width();
            },
            0,
        );
        let u = e.slice(r.length);
        return { within: nn(r), extra: nn(u), withinWidth: nn(i) };
    }
    function yO(n) {
        return S(n, function(n) {
            return n.element();
        });
    }
    function xO(n, t, e, o) {
        const r = (function(n, t, e) {
            let o = bO(t, n, e);
            return o.extra().length === 0 ? on.some(o) : on.none();
        })(n, t, e).getOrThunk(function() {
            return bO(t, n - e(o), e);
        });
        let i = r.within();
        var u = r.extra();
        var a = r.withinWidth();
        return u.length === 1 && u[0].width() <= e(o)
            ? (function(n, t, e) {
                  const o = yO(n.concat(t));
                  return QE(o, [], e);
              })(i, u, a)
            : u.length >= 1
            ? (function(n, t, e, o) {
                  const r = yO(n).concat([e]);
                  return QE(r, yO(t), o);
              })(i, u, o, a)
            : (function(n, t, e) {
                  return QE(yO(n), [], e);
              })(i, 0, a);
    }
    function wO(n, t) {
        const e = S(t, function(n) {
            return cu(n);
        });
        $E.setGroups(n, e);
    }
    function SO(n, t, e, o) {
        const r = Js(n, t, 'primary');
        let i = Ks(n, t, 'overflow-button');
        var u = $y.getCoupled(n, 'overflowGroup');
        xr(r.element(), 'visibility', 'hidden');
        const a = (function(n, t) {
            return n
                .bind(function(t) {
                    return ka(t.element()).bind(function(n) {
                        return t
                            .getSystem()
                            .getByDom(n)
                            .toOption();
                    });
                })
                .orThunk(function() {
                    return t.filter(bg.isFocused);
                });
        })(e, i);
        e.each(function(n) {
            $E.setGroups(n, []);
        });
        const c = t.builtGroups.get();
        wO(r, c.concat([u]));
        const s = gu(r.element());
        var f = xO(
            s,
            c,
            function(n) {
                return gu(n.element());
            },
            u,
        );
        f.extra().length === 0
            ? (gg.remove(r, u),
              e.each(function(n) {
                  $E.setGroups(n, []);
              }))
            : (wO(r, f.within()),
              e.each(function(n) {
                  wO(n, f.extra());
              })),
            Or(r.element(), 'visibility'),
            Er(r.element()),
            e.each(function(t) {
                i.each(function(n) {
                    return kg.set(n, o(t));
                }),
                    a.each(bg.focus);
            });
    }
    function CO(o, n, t, e, r) {
        const i = 'alloy.toolbar.toggle';
        return {
            uid: o.uid,
            dom: o.dom,
            components: n,
            behaviours: Vs(o.splitToolbarBehaviours, [
                $y.config({
                    others: {...r.coupling, overflowGroup(t) {
                            return tT.sketch(
                                N(N({}, e['overflow-group']()), {
                                    items: [
                                        Xg.sketch(
                                            N(N({}, e['overflow-button']()), {
                                                action: function(n) {
                                                    ro(t, i);
                                                },
                                            }),
                                        ),
                                    ],
                                }),
                            );
                        },},
                }),
                Jd('toolbar-toggle-events', [
                    mo(i, function(n) {
                        r.apis.toggle(n);
                    }),
                ]),
            ]),
            apis: {
                setGroups(n, t) {
                        !(function(n, t) {
                            var e = S(t, n.getSystem().build);
                            o.builtGroups.set(e);
                        })(n, t),
                            r.apis.refresh(n);
                    },
                getMoreButton: function(n) {
                    return (function(n) {
                        return Ks(n, o, 'overflow-button');
                    })(n);
                },
                ...r.apis,
            },
            domModification: { attributes: { role: 'group' } },
        };
    }
    function kO(n) {
        return n.getSystem().isConnected();
    }
    function OO(n, t, e) {
        const o = t.lazySink(n).getOrDie();
        var r = t.getAnchor(n);
        let i = t.getOverflowBounds.map(function(n) {
            return n();
        });
        _f.positionWithinBounds(o, r, e, i);
    }
    function EO(t, e) {
        const n = Lf.getState($y.getCoupled(t, 'sandbox'));
        SO(t, e, n, kO),
            n.each(function(n) {
                return OO(t, e, n);
            });
    }
    function TO(t, e) {
        Lf.getState($y.getCoupled(t, 'sandbox')).each(function(n) {
            return OO(t, e, n);
        });
    }
    function BO(t, n) {
        return n.getAnimationRoot.fold(
            function() {
                return t.element();
            },
            function(n) {
                return n(t);
            },
        );
    }
    function DO(n) {
        return n.dimension.property;
    }
    function AO(n, t) {
        return n.dimension.getDimension(t);
    }
    function _O(n, t) {
        const e = BO(n, t);
        hr(e, [t.shrinkingClass, t.growingClass]);
    }
    function MO(n, t) {
        mr(n.element(), t.openClass),
            lr(n.element(), t.closedClass),
            xr(n.element(), DO(t), '0px'),
            Er(n.element());
    }
    function FO(n, t) {
        mr(n.element(), t.closedClass),
            lr(n.element(), t.openClass),
            Or(n.element(), DO(t));
    }
    function IO(n, t, e, o) {
        e.setCollapsed(),
            xr(n.element(), DO(t), AO(t, n.element())),
            Er(n.element()),
            _O(n, t),
            MO(n, t),
            t.onStartShrink(n),
            t.onShrunk(n);
    }
    function RO(n, t, e, o) {
        const r = o.getOrThunk(function() {
            return AO(t, n.element());
        });
        e.setCollapsed(), xr(n.element(), DO(t), r), Er(n.element());
        const i = BO(n, t);
        mr(i, t.growingClass),
            lr(i, t.shrinkingClass),
            MO(n, t),
            t.onStartShrink(n);
    }
    function VO(n, t, e) {
        const o = AO(t, n.element());
        (o === '0px' ? IO : RO)(n, t, e, on.some(o));
    }
    function NO(n, t, e) {
        const o = BO(n, t);
        var r = gr(o, t.shrinkingClass);
        let i = AO(t, n.element());
        FO(n, t);
        const u = AO(t, n.element());
        (r
            ? function() {
                  xr(n.element(), DO(t), i), Er(n.element());
              }
            : function() {
                  MO(n, t);
              })(),
            mr(o, t.shrinkingClass),
            lr(o, t.growingClass),
            FO(n, t),
            xr(n.element(), DO(t), u),
            e.setExpanded(),
            t.onStartGrow(n);
    }
    function HO(n, t, e) {
        const o = BO(n, t);
        return !0 === gr(o, t.growingClass);
    }
    function PO(n, t, e) {
        const o = BO(n, t);
        return !0 === gr(o, t.shrinkingClass);
    }
    function zO(n) {
        return sT.hasGrown(n);
    }
    function LO(n, t) {
        const e = n.outerContainer;
        !(function(n, t) {
            const e = n.outerContainer.element();
            t &&
                (n.mothership.broadcastOn([jf()], { target: e }),
                n.uiMothership.broadcastOn([jf()], { target: e })),
                n.mothership.broadcastOn([pT], { readonly: t }),
                n.uiMothership.broadcastOn([pT], { readonly: t });
        })(n, t),
            Lt('*', e.element()).forEach(function(n) {
                e.getSystem()
                    .getByDom(n)
                    .each(function(n) {
                        n.hasConfigured(kh) && kh.set(n, t);
                    });
            });
    }
    function jO(n, t) {
        n.on('init', function() {
            n.readonly && LO(t, !0);
        }),
            n.on('SwitchMode', function() {
                return LO(t, n.readonly);
            }),
            (function(n) {
                return n.getParam('readonly', !1, 'boolean');
            })(n) && n.setMode('readonly');
    }
    function UO(e) {
        let n;
        return dc.config({
            channels:
                ((n = {}),
                (n[pT] = {
                    schema: hT,
                    onReceive(n, t) {
                        e(n).each(function(n) {
                            !(function(t, e) {
                                Lt('*', t.element()).forEach(function(n) {
                                    t.getSystem()
                                        .getByDom(n)
                                        .each(function(n) {
                                            n.hasConfigured(kh) && kh.set(n, e);
                                        });
                                });
                            })(n, t.readonly);
                        });
                    },
                }),
                n),
        });
    }
    function WO(n) {
        const t = n.title.fold(
            function() {
                return {};
            },
            function(n) {
                return { attributes: { title: n } };
            },
        );
        return {
            dom: { tag: 'div', classes: ['tox-toolbar__group'], ...t },
            components: [tT.parts().items({})],
            items: n.items,
            markers: {
                itemSelector:
                    '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])',
            },
            tgroupBehaviours: ya([Xy.config({}), bg.config({})]),
        };
    }
    function GO(n) {
        return tT.sketch(WO(n));
    }
    function XO(e, n, t) {
        const o = Ri(function(n) {
            const t = S(e.initGroups, GO);
            $E.setGroups(n, t);
        });
        return ya([
            dg.config({
                mode: n,
                onEscape: e.onEscape,
                selector: '.tox-toolbar__group',
            }),
            Jd('toolbar-events', [o]),
            UO(t),
        ]);
    }
    function YO(n, t) {
        const e = n.cyclicKeying ? 'cyclic' : 'acyclic';
        return {
            uid: n.uid,
            dom: { tag: 'div', classes: ['tox-toolbar-overlord'] },
            parts: {
                'overflow-group': WO({ title: on.none(), items: [] }),
                'overflow-button': UC(
                    {
                        name: 'more',
                        icon: on.some('more-drawer'),
                        disabled: !1,
                        tooltip: on.some('More...'),
                        primary: !1,
                        borderless: !1,
                    },
                    on.none(),
                    n.backstage.shared.providers,
                ),
            },
            splitToolbarBehaviours: XO(n, e, t),
        };
    }
    function qO(r) {
        const n = YO(r, iT.getOverflow);
        var t = iT.parts().primary({
            dom: { tag: 'div', classes: ['tox-toolbar__primary'] },
        });
        return iT.sketch(
            {...n, lazySink: r.getSink,
                getAnchor() {
                    return r.backstage.shared.anchors.toolbarOverflow();
                },
                getOverflowBounds() {
                    var n = r.moreDrawerData.lazyHeader().element(),
                        t = Su(n),
                        e = Oo(n),
                        o = Su(e);
                    return xu(t.x() + 4, o.y(), t.width() - 8, o.height());
                },
                parts: N({ ...n.parts}, {
                    overflow: {
                        dom: { tag: 'div', classes: ['tox-toolbar__overflow'] },
                    },
                }),
                components: [t],
                markers: { overflowToggledClass: 'tox-tbtn--enabled' },},
        );
    }
    function KO(n) {
        const t = mT.parts().primary({
            dom: { tag: 'div', classes: ['tox-toolbar__primary'] },
        });
        var e = mT.parts().overflow({
            dom: { tag: 'div', classes: ['tox-toolbar__overflow'] },
        });
        var o = YO(n, mT.getOverflow);
        return mT.sketch(
            {...o, components: [t, e],
                markers: {
                    openClass: 'tox-toolbar__overflow--open',
                    closedClass: 'tox-toolbar__overflow--closed',
                    growingClass: 'tox-toolbar__overflow--growing',
                    shrinkingClass: 'tox-toolbar__overflow--shrinking',
                    overflowToggledClass: 'tox-tbtn--enabled',
                },
                onOpened(n) {
                    n.getSystem().broadcastOn([gT()], { type: 'opened' });
                },
                onClosed(n) {
                    n.getSystem().broadcastOn([gT()], { type: 'closed' });
                },},
        );
    }
    function JO(n) {
        const t = n.cyclicKeying ? 'cyclic' : 'acyclic';
        return $E.sketch({
            uid: n.uid,
            dom: {
                tag: 'div',
                classes: ['tox-toolbar'].concat(
                    n.type === Ub.scrolling ? ['tox-toolbar--scrolling'] : [],
                ),
            },
            components: [$E.parts().groups({})],
            toolbarBehaviours: XO(n, t, nn(on.none())),
        });
    }
    function $O(n) {
        return tt('toolbarbutton', bT, n);
    }
    function QO(n) {
        return tt('menubutton', xT, n);
    }
    function ZO(n) {
        return tt('ToggleButton', CT, n);
    }
    function nE(t) {
        return {
            isDisabled() {
                return kh.isDisabled(t);
            },
            setDisabled(n) {
                return kh.set(t, n);
            },
        };
    }
    function tE(t) {
        return {
            setActive(n) {
                kg.set(t, n);
            },
            isActive() {
                return kg.isOn(t);
            },
            isDisabled() {
                return kh.isDisabled(t);
            },
            setDisabled(n) {
                return kh.set(t, n);
            },
        };
    }
    function eE(n, t) {
        return n
            .map(function(n) {
                return { 'aria-label': t.translate(n), title: t.translate(n) };
            })
            .getOr({});
    }
    function oE(t, e, n, o, r, i) {
        function u(n) {
            return ih.isRtl() && vn(UT, n) ? `${n}-rtl` : n;
        }
        let a;
        var c =
            ih.isRtl() &&
            t.exists(function(n) {
                return vn(WT, n);
            });
        return {
            dom: {
                tag: 'button',
                classes: ['tox-tbtn']
                    .concat(e.isSome() ? ['tox-tbtn--select'] : [])
                    .concat(c ? ['tox-tbtn__icon-rtl'] : []),
                attributes: eE(n, i),
            },
            components: Dh([
                t.map(function(n) {
                    return _C(u(n), i.icons);
                }),
                e.map(function(n) {
                    return FC(n, 'tox-tbtn', i);
                }),
            ]),
            eventOrder:
                ((a = {}),
                (a[qr()] = [
                    'focusing',
                    'alloy.base.behaviour',
                    'common-button-display-events',
                ]),
                a),
            buttonBehaviours: ya(
                [
                    Jd('common-button-display-events', [
                        mo(qr(), function(n, t) {
                            t.event().prevent(), ro(n, jT);
                        }),
                    ]),
                ]
                    .concat(
                        o
                            .map(function(n) {
                                return VT.config({
                                    channel: n,
                                    initialData: { icon: t, text: e },
                                    renderComponents(n, t) {
                                        return Dh([
                                            n.icon.map(function(n) {
                                                return _C(u(n), i.icons);
                                            }),
                                            n.text.map(function(n) {
                                                return FC(n, 'tox-tbtn', i);
                                            }),
                                        ]);
                                    },
                                });
                            })
                            .toArray(),
                    )
                    .concat(r.getOr([])),
            ),
        };
    }
    function rE(n, t, e) {
        const o = ye(Z);
        let r = oE(n.icon, n.text, n.tooltip, on.none(), on.none(), e);
        return Xg.sketch({
            dom: r.dom,
            components: r.components,
            eventOrder: rk,
            buttonBehaviours: ya(
                [
                    Jd('toolbar-button-events', [
                        (function(e) {
                            return Hi(function(t, n) {
                                Ep(
                                    e,
                                    t,
                                )(function(n) {
                                    io(t, ok, { buttonApi: n }), e.onAction(n);
                                });
                            });
                        })({ onAction: n.onAction, getApi: t.getApi }),
                        Tp(t, o),
                        Bp(t, o),
                    ]),
                    Bh(n.disabled),
                ].concat(t.toolbarButtonBehaviours),
            ),
        });
    }
    function iE(t, n) {
        function e(e) {
            return {
                isDisabled() {
                    return kh.isDisabled(e);
                },
                setDisabled(n) {
                    return kh.set(e, n);
                },
                setIconFill(n, t) {
                    Ou(
                        e.element(),
                        `svg path[id="${  n  }"], rect[id="${  n  }"]`,
                    ).each(function(n) {
                        zo(n, 'fill', t);
                    });
                },
                setIconStroke(n, t) {
                    Ou(
                        e.element(),
                        `svg path[id="${  n  }"], rect[id="${  n  }"]`,
                    ).each(function(n) {
                        zo(n, 'stroke', t);
                    });
                },
                setActive(t) {
                    zo(e.element(), 'aria-pressed', t),
                        Ou(e.element(), 'span').each(function(n) {
                            e.getSystem()
                                .getByDom(n)
                                .each(function(n) {
                                    return kg.set(n, t);
                                });
                        });
                },
                isActive() {
                    return Ou(e.element(), 'span').exists(function(n) {
                        return e
                            .getSystem()
                            .getByDom(n)
                            .exists(kg.isOn);
                    });
                },
            };
        }
        let o;
        var r = Yo('channel-update-split-dropdown-display');
        var i = ye(Z);
        let u = { getApi: e, onSetup: t.onSetup };
        return LT.sketch({
            dom: {
                tag: 'div',
                classes: ['tox-split-button'],
                attributes: An(
                    { 'aria-pressed': !1 },
                    eE(t.tooltip, n.providers),
                ),
            },
            onExecute(n) {
                t.onAction(e(n));
            },
            onItemExecute(n, t, e) {},
            splitDropdownBehaviours: ya([
                Th(!1),
                Jd('split-dropdown-events', [
                    mo(jT, bg.focus),
                    Tp(u, i),
                    Bp(u, i),
                ]),
                Tw.config({}),
            ]),
            eventOrder:
                ((o = {}),
                (o[ki()] = ['alloy.base.behaviour', 'split-dropdown-events']),
                o),
            toggleClass: 'tox-tbtn--enabled',
            lazySink: n.getSink,
            fetch: (function(e, r, o) {
                return function(t) {
                    return Ny(function(n) {
                        return r.fetch(n);
                    }).map(function(n) {
                        return on.from(
                            ab(
                                Dn(
                                    Bv(
                                        Yo('menu-value'),
                                        n,
                                        function(n) {
                                            r.onItemAction(e(t), n);
                                        },
                                        r.columns,
                                        r.presets,
                                        Ih.CLOSE_ON_EXECUTE,
                                        r.select.getOr(function() {
                                            return !1;
                                        }),
                                        o,
                                    ),
                                    {
                                        movement: Dv(r.columns, r.presets),
                                        menuBehaviours: $p(
                                            r.columns !== 'auto'
                                                ? []
                                                : [
                                                      Ri(function(o, n) {
                                                          up(
                                                              o,
                                                              4,
                                                              fp(r.presets),
                                                          ).each(function(n) {
                                                              const t = n.numRows;
                                                              var e =
                                                                  n.numColumns;
                                                              dg.setGridSize(
                                                                  o,
                                                                  t,
                                                                  e,
                                                              );
                                                          });
                                                      }),
                                                  ],
                                        ),
                                    },
                                ),
                            ),
                        );
                    });
                };
            })(e, t, n.providers),
            parts: { menu: Cv(0, t.columns, t.presets) },
            components: [
                LT.parts().button(
                    oE(
                        t.icon,
                        t.text,
                        on.none(),
                        on.some(r),
                        on.some([
                            kg.config({
                                toggleClass: 'tox-tbtn--enabled',
                                toggleOnExecute: !1,
                            }),
                        ]),
                        n.providers,
                    ),
                ),
                LT.parts().arrow({
                    dom: {
                        tag: 'button',
                        classes: ['tox-tbtn', 'tox-split-button__chevron'],
                        innerHtml: xm('chevron-down', n.providers.icons),
                    },
                }),
                LT.parts()['aria-descriptor']({
                    text: n.providers.translate(
                        'To open the popup, press Shift+Enter',
                    ),
                }),
            ],
        });
    }
    function uE(o, r) {
        return mo(ok, function(n, t) {
            const e = (function(n) {
                return {
                    hide() {
                        return ro(n, vi());
                    },
                    getValue() {
                        return nl.getValue(n);
                    },
                };
            })(o.get(n));
            r.onAction(e, t.event().buttonApi());
        });
    }
    function aE(n, t, e) {
        const o = { backstage: { shared: { providers: e } } };
        return t.type === 'contextformtogglebutton'
            ? (function(n, t, e) {
                  const o = t.original;
                  var r = (o.primary, c(o, ['primary']));
                  var i = et(
                      ZO(
                          N(
                              { ...r },
                              {
                                  type: 'togglebutton',
                                  onAction() {},
                              },
                          ),
                      ),
                  );
                  return XT(i, e.backstage.shared.providers, [uE(n, t)]);
              })(n, t, o)
            : (function(n, t, e) {
                  const o = t.original;
                  var r = (o.primary, c(o, ['primary']));
                  var i = et(
                      $O(
                          N(
                              { ...r },
                              {
                                  type: 'button',
                                  onAction() {},
                              },
                          ),
                      ),
                  );
                  return GT(i, e.backstage.shared.providers, [uE(n, t)]);
              })(n, t, o);
    }
    function cE(n, t) {
        const e = Math.max(t.x(), n.x());
        var o = n.right() - e;
        var r = t.width() - (e - t.x());
        return { x: e, width: Math.min(o, r) };
    }
    function sE(n) {
        const t = zb(n) || Lb(n) || Yb(n);
        let e = bu(v.window);
        var o = wu(we.fromDom(n.getContentAreaContainer()));
        return n.inline && !t
            ? (function(n, t, e) {
                  const o = cE(t, e);
                  var r = o.x;
                  let i = o.width;
                  return xu(r, e.y(), i, e.height());
              })(0, o, e)
            : n.inline
            ? (function(n, t, e) {
                  const o = cE(t, e);
                  var r = o.x;
                  let i = o.width;
                  var u = we.fromDom(n.getContainer());
                  let a = Ou(u, '.tox-editor-header').getOr(u);
                  var c = wu(a);
                  let s = e.height();
                  let f = e.y();
                  if (c.y() >= t.bottom()) {
                      const l = Math.min(s + f, c.y());
                      return xu(r, f, i, l - f);
                  }
                  const d = Math.max(f, c.bottom());
                  return xu(r, d, i, s - (d - f));
              })(n, o, e)
            : (function(n, t, e) {
                  const o = cE(t, e);
                  var r = o.x;
                  let i = o.width;
                  let u = we.fromDom(n.getContainer());
                  var a = Ou(u, '.tox-editor-header').getOr(u);
                  var c = wu(u);
                  let s = wu(a);
                  var f = Math.max(e.y(), t.y(), s.bottom());
                  var l = c.bottom() - f;
                  var d = e.height() - (f - e.y());
                  let m = Math.min(l, d);
                  return xu(r, f, i, m);
              })(n, o, e);
    }
    function fE(t, n) {
        return Au(n, function(n) {
            return n.predicate(t.dom())
                ? on.some({ toolbarApi: n, elem: t })
                : on.none();
        });
    }
    function lE(o, r) {
        return function(t) {
            function n() {
                t.setActive(o.formatter.match(r));
                const n = o.formatter.formatChanged(r, t.setActive).unbind;
                e.set(on.some(n));
            }
            var e = ye(on.none());
            return (
                o.initialized ? n() : o.on('init', n),
                function() {
                    return e.get().each(function(n) {
                        return n();
                    });
                }
            );
        };
    }
    function dE(t) {
        return function(n) {
            return function() {
                t.undoManager.transact(function() {
                    t.focus(), t.execCommand('mceToggleFormat', !1, n.format);
                });
            };
        };
    }
    function mE(n, t, e) {
        const o = e.dataset;
        var r =
            o.type === 'basic'
                ? function() {
                      return S(o.data, function(n) {
                          return qk(n, e.isSelectedFor, e.getPreviewFor);
                      });
                  }
                : o.getData;
        return {
            items: (function(n, u, a) {
                function r(n, t, e, o) {
                    const r = u.shared.providers.translate(n.title);
                    if (n.type === 'separator')
                        return on.some({ type: 'separator', text: r });
                    if (n.type !== 'submenu')
                        return on.some({
                            type: 'togglemenuitem',
                            text: r,
                            active: n.isSelected(o),
                            disabled: e,
                            onAction: a.onAction(n),
                            ...n.getStylePreview().fold(
                                function() {
                                    return {};
                                },
                                function(n) {
                                    return { meta: { style: n } };
                                },
                            ),
                        });
                    const i = B(n.getStyleItems(), function(n) {
                        return c(n, t, o);
                    });
                    return t === 0 && i.length <= 0
                        ? on.none()
                        : on.some({
                              type: 'nestedmenuitem',
                              text: r,
                              disabled: i.length <= 0,
                              getSubmenuItems() {
                                  return B(n.getStyleItems(), function(n) {
                                      return c(n, t, o);
                                  });
                              },
                          });
                }
                function i(n) {
                    const t = a.getCurrentValue();
                    let e = a.shouldHide ? 0 : 1;
                    return B(n, function(n) {
                        return c(n, e, t);
                    });
                }
                var c = function(n, t, e) {
                    const o = n.type === 'formatter' && a.isInvalid(n);
                    return t === 0
                        ? o
                            ? []
                            : r(n, t, !1, e).toArray()
                        : r(n, t, o, e).toArray();
                };
                return {
                    validateItems: i,
                    getFetch(o, r) {
                        return function(n) {
                            let t = r();
                                var e = i(t);
                            n(HC(e, Ih.CLOSE_ON_EXECUTE, o, !1));
                        };
                    },
                };
            })(0, t, e),
            getStyleItems: r,
        };
    }
    function gE(o, n, t) {
        const e = mE(0, n, t);
        var r = e.items;
        var i = e.getStyleItems;
        return IC(
            {
                text: t.icon.isSome() ? on.none() : on.some(''),
                icon: t.icon,
                tooltip: on.from(t.tooltip),
                role: on.none(),
                fetch: r.getFetch(n, i),
                onSetup(e) {
                    return (
                        t.setInitialValue.each(function(n) {
                            return n(e.getComponent());
                        }),
                        t.nodeChangeHandler
                            .map(function(n) {
                                let t = n(e.getComponent());
                                return (
                                    o.on('NodeChange', t),
                                    function() {
                                        o.off('NodeChange', t);
                                    }
                                );
                            })
                            .getOr(Z)
                    );
                },
                getApi(n) {
                    return {
                        getComponent() {
                            return n;
                        },
                    };
                },
                columns: 1,
                presets: 'normal',
                classes: t.icon.isSome() ? [] : ['bespoke'],
                dropdownBehaviours: [],
            },
            'tox-tbtn',
            n.shared,
        );
    }
    let pE;
    var hE;
    let vE;
    var bE;
    var yE = Al({
        name: 'HtmlSelect',
        configFields: [
            ct('options'),
            Is('selectBehaviours', [bg, nl]),
            St('selectClasses', []),
            St('selectAttributes', {}),
            ht('data'),
        ],
        factory(e, n) {
                var t = S(e.options, function(n) {
                        return {
                            dom: {
                                tag: 'option',
                                value: n.value,
                                innerHtml: n.text,
                            },
                        };
                    }),
                    o = e.data
                        .map(function(n) {
                            return q('initialValue', n);
                        })
                        .getOr({});
                return {
                    uid: e.uid,
                    dom: {
                        tag: 'select',
                        classes: e.selectClasses,
                        attributes: e.selectAttributes,
                    },
                    components: t,
                    behaviours: Vs(e.selectBehaviours, [
                        bg.config({}),
                        nl.config({
                            store: N(
                                {
                                    mode: 'manual',
                                    getValue: function(n) {
                                        return Tr(n.element());
                                    },
                                    setValue: function(n, t) {
                                        E(e.options, function(n) {
                                            return n.value === t;
                                        }).isSome() && Br(n.element(), t);
                                    },
                                },
                                o,
                            ),
                        }),
                    ]),
                };
            },
    });
    let xE = /* */ Object.freeze({
        events: function(n, t) {
            var e = n.stream.streams.setup(n, t);
            return so(
                [
                    mo(n.event, e),
                    Vi(function() {
                        return t.cancel();
                    }),
                ].concat(
                    n.cancelEvent
                        .map(function(n) {
                            return [
                                mo(n, function() {
                                    return t.cancel();
                                }),
                            ];
                        })
                        .getOr([]),
                ),
            );
        },
    });
    let wE = /* */ Object.freeze({
        throttle: Mk,
        init: function(n) {
            return n.stream.streams.state(n);
        },
    });
    let SE = [
        st(
            'stream',
            it('mode', {
                throttle: [
                    ct('delay'),
                    St('stopEvent', !0),
                    Zu('streams', {
                        setup: function(n, t) {
                            var e = n.stream;
                                    var o = $g(n.onStream, e.delay);
                            return (
                                t.setTimer(o),
                                function(n, t) {
                                    o.throttle(n, t), e.stopEvent && t.stop();
                                }
                            );
                        },
                        state: Mk,
                    }),
                ],
            }),
        ),
        St('event', 'input'),
        ht('cancelEvent'),
        $u('onStream'),
    ];
    let CE = xa({ fields: SE, name: 'streaming', active: xE, state: wE });
    var kE = function(n) {
        Ik(n, function(n, t) {
            return n.setSelectionRange(t.length, t.length);
        });
    };
    let OE = nn('alloy.typeahead.itemexecute');
    var EE = nn(
        [
            ht('lazySink'),
            ct('fetch'),
            St('minChars', 5),
            St('responseTime', 1e3),
            Ku('onOpen'),
            St('getHotspot', on.some),
            St('getAnchorOverrides', nn({})),
            St('layouts', on.none()),
            St('eventOrder', {}),
            Dt('model', {}, [
                St('getDisplayText', function(n) {
                    return n.meta !== undefined && n.meta.text !== undefined
                        ? n.meta.text
                        : n.value;
                }),
                St('selectsOver', !0),
                St('populateFromBrowse', !0),
            ]),
            Ku('onSetValue'),
            Ju('onExecute'),
            Ku('onItemExecute'),
            St('inputClasses', []),
            St('inputAttributes', {}),
            St('inputStyles', {}),
            St('matchWidth', !0),
            St('useMinWidth', !1),
            St('dismissOnBlur', !0),
            Yu(['openClass']),
            ht('initialData'),
            Is('typeaheadBehaviours', [bg, nl, CE, dg, kg, $y]),
            At('previewing', function() {
                return ye(!0);
            }),
        ]
            .concat(yy())
            .concat(cx()),
    );
    let TE = nn([
        Sl({
            schema: [Xu()],
            name: 'menu',
            overrides: function(o) {
                return {
                    fakeFocus: !0,
                    onHighlight: function(t, e) {
                        o.previewing.get()
                            ? t
                                  .getSystem()
                                  .getByUid(o.uid)
                                  .each(function(n) {
                                      Rk(o.model, n, e).fold(
                                          function() {
                                              return cd.dehighlight(t, e);
                                          },
                                          function(n) {
                                              return n();
                                          },
                                      );
                                  })
                            : t
                                  .getSystem()
                                  .getByUid(o.uid)
                                  .each(function(n) {
                                      o.model.populateFromBrowse &&
                                          Fk(o.model, n, e);
                                  }),
                            o.previewing.set(!1);
                    },
                    onExecute(n, t) {
                            return n
                                .getSystem()
                                .getByUid(o.uid)
                                .toOption()
                                .map(function(n) {
                                    return io(n, OE(), { item: t }), !0;
                                });
                        },
                    onHover(n, t) {
                            o.previewing.set(!1),
                                n
                                    .getSystem()
                                    .getByUid(o.uid)
                                    .each(function(n) {
                                        o.model.populateFromBrowse &&
                                            Fk(o.model, n, t);
                                    });
                        },
                };
            },
        }),
    ]);
    var BE = _l({
        name: 'Typeahead',
        configFields: EE(),
        partFields: TE(),
        factory: function(r, n, t, i) {
            function e(n, t, e) {
                r.previewing.set(!1);
                var o = $y.getCoupled(n, 'sandbox');
                if (Lf.isOpen(o))
                    nd.getCurrent(o).each(function(n) {
                        cd.getHighlighted(n).fold(
                            function() {
                                e(n);
                            },
                            function() {
                                co(o, n.element(), 'keydown', t);
                            },
                        );
                    });
                else {
                    tx(
                        r,
                        u(n),
                        n,
                        o,
                        i,
                        function(n) {
                            nd.getCurrent(n).each(e);
                        },
                        _y.HighlightFirst,
                    ).get(Z);
                }
            }
            var o = ny(r);
                    var u = function(o) {
                        return function(n) {
                            return n.map(function(n) {
                                var t = R(n.menus),
                                    e = B(t, function(n) {
                                        return C(n.items, function(n) {
                                            return 'item' === n.type;
                                        });
                                    });
                                return (
                                    nl.getState(o).update(
                                        S(e, function(n) {
                                            return n.data;
                                        }),
                                    ),
                                    n
                                );
                            });
                        };
                    };
                    var a = [
                    bg.config({}),
                    nl.config({
                        onSetValue: r.onSetValue,
                        store: {
                                mode: 'dataset',
                                    getDataKey: function(n) {
                                        return Tr(n.element());
                                    },
                                    getFallbackEntry: function(n) {
                                        return { value: n, meta: {} };
                                    },
                                    setValue: function(n, t) {
                                        Br(
                                            n.element(),
                                            r.model.getDisplayText(t),
                                        );
                                    },
                                ...r.initialData
                                    .map(function(n) {
                                        return q('initialValue', n);
                                    })
                                    .getOr({}),
                            },
                    }),
                    CE.config({
                        stream: {
                            mode: 'throttle',
                            delay: r.responseTime,
                            stopEvent: !1,
                        },
                        onStream(n, t) {
                                var e = $y.getCoupled(n, 'sandbox');
                                if (
                                    bg.isFocused(n) &&
                                    Tr(n.element()).length >= r.minChars
                                ) {
                                    var o = nd.getCurrent(e).bind(function(n) {
                                        return cd
                                            .getHighlighted(n)
                                            .map(nl.getValue);
                                    });
                                    r.previewing.set(!0);
                                    tx(
                                        r,
                                        u(n),
                                        n,
                                        e,
                                        i,
                                        function(n) {
                                            nd.getCurrent(e).each(function(n) {
                                                o.fold(
                                                    function() {
                                                        r.model.selectsOver &&
                                                            cd.highlightFirst(
                                                                n,
                                                            );
                                                    },
                                                    function(t) {
                                                        cd.highlightBy(
                                                            n,
                                                            function(n) {
                                                                return (
                                                                    nl.getValue(
                                                                        n,
                                                                    ).value ===
                                                                    t.value
                                                                );
                                                            },
                                                        ),
                                                            cd
                                                                .getHighlighted(
                                                                    n,
                                                                )
                                                                .orThunk(
                                                                    function() {
                                                                        return (
                                                                            cd.highlightFirst(
                                                                                n,
                                                                            ),
                                                                            on.none()
                                                                        );
                                                                    },
                                                                );
                                                    },
                                                );
                                            });
                                        },
                                        _y.HighlightFirst,
                                    ).get(Z);
                                }
                            },
                        cancelEvent: bi(),
                    }),
                    dg.config({
                        mode: 'special',
                        onDown: function(n, t) {
                            return e(n, t, cd.highlightFirst), on.some(!0);
                        },
                        onEscape(n) {
                                var t = $y.getCoupled(n, 'sandbox');
                                return Lf.isOpen(t)
                                    ? (Lf.close(t), on.some(!0))
                                    : on.none();
                            },
                        onUp: function(n, t) {
                            return e(n, t, cd.highlightLast), on.some(!0);
                        },
                        onEnter(t) {
                                var n = $y.getCoupled(t, 'sandbox'),
                                    e = Lf.isOpen(n);
                                if (e && !r.previewing.get())
                                    return nd
                                        .getCurrent(n)
                                        .bind(function(n) {
                                            return cd.getHighlighted(n);
                                        })
                                        .map(function(n) {
                                            return io(t, OE(), { item: n }), !0;
                                        });
                                var o = nl.getValue(t);
                                return (
                                    ro(t, bi()),
                                    r.onExecute(n, t, o),
                                    e && Lf.close(n),
                                    on.some(!0)
                                );
                            },
                    }),
                    kg.config({
                        toggleClass: r.markers.openClass,
                        aria: { mode: 'expanded' },
                    }),
                    $y.config({
                        others: {
                            sandbox: function(n) {
                                return ux(r, n, {
                                    onOpen() {
                                            return kg.on(n);
                                        },
                                    onClose: function() {
                                        return kg.off(n);
                                    },
                                });
                            },
                        },
                    }),
                    Jd(
                        'typeaheadevents',
                        [
                            Hi(function(n) {
                                var t = Z;
                                ox(r, u(n), n, i, t, _y.HighlightFirst).get(Z);
                            }),
                            mo(OE(), function(n, t) {
                                var e = $y.getCoupled(n, 'sandbox');
                                Fk(r.model, n, t.event().item()),
                                    ro(n, bi()),
                                    r.onItemExecute(
                                        n,
                                        e,
                                        t.event().item(),
                                        nl.getValue(n),
                                    ),
                                    Lf.close(e),
                                    kE(n);
                            }),
                        ].concat(
                            r.dismissOnBlur
                                ? [
                                      mo(fi(), function(n) {
                                          var t = $y.getCoupled(n, 'sandbox');
                                          ka(t.element()).isNone() &&
                                              Lf.close(t);
                                      }),
                                  ]
                                : [],
                        ),
                    ),
                ];
            return {
                uid: r.uid,
                dom: ty(
                    Dn(r, {
                        inputAttributes: {
                            role: 'combobox',
                            'aria-autocomplete': 'list',
                            'aria-haspopup': 'true',
                        },
                    }),
                ),
                behaviours: N({ ...o}, Vs(r.typeaheadBehaviours, a)),
                eventOrder: r.eventOrder,
            };
        },
    });
    var DE = function(i) {
        return N({ ...i}, {
            toCached: function() {
                return DE(i.toCached());
            },
            bindFuture: function(t) {
                return DE(
                    i.bind(function(n) {
                        return n.fold(
                            function(n) {
                                return Hy(an.error(n));
                            },
                            function(n) {
                                return t(n);
                            },
                        );
                    }),
                );
            },
            bindResult(t) {
                    return DE(
                        i.map(function(n) {
                            return n.bind(t);
                        }),
                    );
                },
            mapResult: function(t) {
                return DE(
                    i.map(function(n) {
                        return n.map(t);
                    }),
                );
            },
            mapError(t) {
                    return DE(
                        i.map(function(n) {
                            return n.mapError(t);
                        }),
                    );
                },
            foldResult: function(t, e) {
                return i.map(function(n) {
                    return n.fold(t, e);
                });
            },
            withTimeout(n, r) {
                    return DE(
                        Ny(function(t) {
                            var e = !1,
                                o = v.setTimeout(function() {
                                    (e = !0), t(an.error(r()));
                                }, n);
                            i.get(function(n) {
                                e || (v.clearTimeout(o), t(n));
                            });
                        }),
                    );
                },
        });
    };
    var AE = Vk;
    var _E = { type: 'separator' };
    var ME = Yo('aria-invalid');
    var FE = {
        bar: Wk(function(n, t) {
            return (function(n, t) {
                return {
                    dom: {
                        tag: 'div',
                        classes: ['tox-bar', 'tox-form__controls-h-stack'],
                    },
                    components: S(n.items, t.interpreter),
                };
            })(n, t.shared);
        }),
        collection: Wk(function(n, t) {
            return Uk(n, t.shared.providers);
        }),
        alertbanner: Wk(function(n, t) {
            return (function(t, n) {
                return Gb.sketch({
                    dom: {
                        tag: 'div',
                        attributes: { role: 'alert' },
                        classes: [
                            'tox-notification',
                            'tox-notification--in',
                            `tox-notification--${  t.level}`,
                        ],
                    },
                    components: [
                        {
                            dom: {
                                tag: 'div',
                                classes: ['tox-notification__icon'],
                            },
                            components: [
                                Xg.sketch({
                                    dom: {
                                        tag: 'button',
                                        classes: [
                                            'tox-button',
                                            'tox-button--naked',
                                            'tox-button--icon',
                                        ],
                                        innerHtml: xm(t.icon, n.icons),
                                        attributes: {
                                            title: n.translate(t.iconTooltip),
                                        },
                                    },
                                    action(n) {
                                            io(n, fy, {
                                                name: 'alert-banner',
                                                value: t.url,
                                            });
                                        },
                                }),
                            ],
                        },
                        {
                            dom: {
                                tag: 'div',
                                classes: ['tox-notification__body'],
                                innerHtml: n.translate(t.text),
                            },
                        },
                    ],
                });
            })(n, t.shared.providers);
        }),
        input: Wk(function(n, t) {
            return (function(n, t) {
                return _k(
                    {
                        name: n.name,
                        multiline: !1,
                        label: n.label,
                        inputMode: n.inputMode,
                        placeholder: n.placeholder,
                        flex: !1,
                        disabled: n.disabled,
                        classname: 'tox-textfield',
                        validation: on.none(),
                        maximized: n.maximized,
                    },
                    t,
                );
            })(n, t.shared.providers);
        }),
        textarea: Wk(function(n, t) {
            return (function(n, t) {
                return _k(
                    {
                        name: n.name,
                        multiline: !0,
                        label: n.label,
                        inputMode: on.none(),
                        placeholder: n.placeholder,
                        flex: !0,
                        disabled: n.disabled,
                        classname: 'tox-textarea',
                        validation: on.none(),
                        maximized: n.maximized,
                    },
                    t,
                );
            })(n, t.shared.providers);
        }),
        label: Wk(function(n, t) {
            return (function(n, t) {
                var e = {
                        dom: {
                            tag: 'label',
                            innerHtml: t.providers.translate(n.label),
                            classes: ['tox-label'],
                        },
                    };
                        var o = S(n.items, t.interpreter);
                return {
                    dom: { tag: 'div', classes: ['tox-form__group'] },
                    components: [e].concat(o),
                    behaviours: ya([
                        wS(),
                        gg.config({}),
                        DS(on.none()),
                        dg.config({ mode: 'acyclic' }),
                    ]),
                };
            })(n, t.shared);
        }),
        iframe:
            ((pE = function(n, t) {
                return Sw(n, t.shared.providers);
            }),
            function(n, t, e) {
                let o = Dn(t, { source: 'dynamic' });
                return Wk(pE)(n, o, e);
            }),
        button: Wk(function(n, t) {
            return KC(n, t.shared.providers);
        }),
        checkbox: Wk(function(n, t) {
            return (function(e, t) {
                function n(n) {
                    return (
                        n
                            .element()
                            .dom()
                            .click(),
                        on.some(!0)
                    );
                }
                function o(n) {
                    return {
                        dom: {
                            tag: 'span',
                            classes: ['tox-icon', 'tox-checkbox-icon__' + n],
                            innerHtml: xm(
                                n === 'checked' ? 'selected' : 'unselected',
                                t.icons,
                            ),
                        },
                    };
                }
                var r = nl.config({
                        store: {
                            mode: 'manual',
                            getValue: function(n) {
                                return n.element().dom().checked;
                            },
                            setValue: function(n, t) {
                                n.element().dom().checked = t;
                            },
                        },
                    });
                        var i = by.parts().field({
                            factory: { sketch: l },
                            dom: {
                                tag: 'input',
                                classes: ['tox-checkbox__input'],
                                attributes: { type: 'checkbox' },
                            },
                            behaviours: ya([
                                wS(),
                                kh.config({ disabled: e.disabled }),
                                Xy.config({}),
                                bg.config({}),
                                r,
                                dg.config({
                                    mode: 'special',
                                    onEnter: n,
                                    onSpace: n,
                                    stopSpaceKeyup: !0,
                                }),
                                Jd('checkbox-events', [
                                    mo(ri(), function(n, t) {
                                        io(n, ay, { name: e.name });
                                    }),
                                ]),
                            ]),
                        });
                        var u = by
                            .parts()
                            .label({
                                dom: {
                                    tag: 'span',
                                    classes: ['tox-checkbox__label'],
                                    innerHtml: t.translate(e.label),
                                },
                                behaviours: ya([Tw.config({})]),
                            });
                        var a = bm({
                        dom: {
                            tag: 'div',
                            classes: ['tox-checkbox__icons'],
                        },
                        components: [o('checked'), o('unchecked')],
                    });
                return by.sketch({
                    dom: { tag: 'label', classes: ['tox-checkbox'] },
                    components: [i, a.asSpec(), u],
                    fieldBehaviours: ya([
                        kh.config({
                            disabled: e.disabled,
                            disableClass: 'tox-checkbox--disabled',
                            onDisabled: function(n) {
                                by.getField(n).each(kh.disable);
                            },
                            onEnabled: function(n) {
                                by.getField(n).each(kh.enable);
                            },
                        }),
                    ]),
                });
            })(n, t.shared.providers);
        }),
        colorinput: Wk(function(n, t) {
            return sx(n, t.shared, t.colorinput);
        }),
        colorpicker: Wk(function(n) {
            function t(n) {
                return `tox-${  n}`;
            }
            let e = xS(hw, t);
                    var r = bm(
                    e.sketch({
                        dom: {
                            tag: 'div',
                            classes: [t('color-picker-container')],
                            attributes: { role: 'presentation' },
                        },
                        onValidHex: function(n) {
                            io(n, fy, { name: 'hex-valid', value: !0 });
                        },
                        onInvalidHex: function(n) {
                            io(n, fy, { name: 'hex-valid', value: !1 });
                        },
                    }),
                );
            return {
                dom: { tag: 'div' },
                components: [r.asSpec()],
                behaviours: ya([
                    nl.config({
                        store: {
                            mode: 'manual',
                            getValue(n) {
                                    var t = r.get(n);
                                    return nd
                                        .getCurrent(t)
                                        .bind(function(n) {
                                            return nl.getValue(n).hex;
                                        })
                                        .map(function(n) {
                                            return '#' + n;
                                        })
                                        .getOr('');
                                },
                            setValue(n, t) {
                                    var e = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(
                                            t,
                                        ),
                                        o = r.get(n);
                                    nd.getCurrent(o).fold(
                                        function() {
                                            v.console.log('Can not find form');
                                        },
                                        function(n) {
                                            nl.setValue(n, {
                                                hex: on.from(e[1]).getOr(''),
                                            }),
                                                mS
                                                    .getField(n, 'hex')
                                                    .each(function(n) {
                                                        ro(n, oi());
                                                    });
                                        },
                                    );
                                },
                        },
                    }),
                    wS(),
                ]),
            };
        }),
        dropzone: Wk(function(n, t) {
            return yw(n, t.shared.providers);
        }),
        grid: Wk(function(n, t) {
            return (function(n, t) {
                return {
                    dom: {
                        tag: 'div',
                        classes: [
                            'tox-form__grid',
                            `tox-form__grid--${  n.columns  }col`,
                        ],
                    },
                    components: S(n.items, t.interpreter),
                };
            })(n, t.shared);
        }),
        selectbox: Wk(function(n, t) {
            return (function(e, t) {
                let n = S(e.items, function(n) {
                        return {
                            text: t.translate(n.text),
                            value: n.value,
                        };
                    });
                        var o = e.label.map(function(n) {
                            return Ay(n, t);
                        });
                        var r = by.parts().field({
                            dom: {},
                            selectAttributes: { size: e.size },
                            options: n,
                            factory: yE,
                            selectBehaviours: ya([
                                kh.config({ disabled: e.disabled }),
                                Xy.config({}),
                                Jd('selectbox-change', [
                                    mo(ri(), function(n, t) {
                                        io(n, ay, { name: e.name });
                                    }),
                                ]),
                            ]),
                        });
                        var i =
                            1 < e.size
                                ? on.none()
                                : on.some({
                                      dom: {
                                          tag: 'div',
                                          classes: ['tox-selectfield__icon-js'],
                                          innerHtml: xm(
                                              'chevron-down',
                                              t.icons,
                                          ),
                                      },
                                  });
                        var u = {
                        dom: { tag: 'div', classes: ['tox-selectfield'] },
                        components: H([[r], i.toArray()]),
                    };
                return by.sketch({
                    dom: { tag: 'div', classes: ['tox-form__group'] },
                    components: H([o.toArray(), [u]]),
                    fieldBehaviours: ya([
                        kh.config({
                            disabled: e.disabled,
                            onDisabled: function(n) {
                                by.getField(n).each(kh.disable);
                            },
                            onEnabled: function(n) {
                                by.getField(n).each(kh.enable);
                            },
                        }),
                    ]),
                });
            })(n, t.shared.providers);
        }),
        sizeinput: Wk(function(n, t) {
            return tk(n, t.shared.providers);
        }),
        urlinput: Wk(function(n, t) {
            return jk(n, t, t.urlinput);
        }),
        customeditor: Wk(function(e) {
            let o = ye(on.none());
                    var t = bm({ dom: { tag: e.tag } });
                    var r = ye(on.none());
            return {
                dom: { tag: 'div', classes: ['tox-custom-editor'] },
                behaviours: ya([
                    Jd('editor-foo-events', [
                        Ri(function(n) {
                            t.getOpt(n).each(function(t) {
                                (!(function(n) {
                                    return Object.prototype.hasOwnProperty.call(
                                        n,
                                        'init',
                                    );
                                })(e)
                                    ? OS.load(e.scriptId, e.scriptUrl).then(
                                          function(n) {
                                              return n(
                                                  t.element().dom(),
                                                  e.settings,
                                              );
                                          },
                                      )
                                    : e.init(t.element().dom())
                                ).then(function(t) {
                                    r.get().each(function(n) {
                                        t.setValue(n);
                                    }),
                                        r.set(on.none()),
                                        o.set(on.some(t));
                                });
                            });
                        }),
                    ]),
                    nl.config({
                        store: {
                            mode: 'manual',
                            getValue: function() {
                                return o.get().fold(
                                    function() {
                                        return r.get().getOr('');
                                    },
                                    function(n) {
                                        return n.getValue();
                                    },
                                );
                            },
                            setValue: function(n, t) {
                                o.get().fold(
                                    function() {
                                        r.set(on.some(t));
                                    },
                                    function(n) {
                                        return n.setValue(t);
                                    },
                                );
                            },
                        },
                    }),
                    wS(),
                ]),
                components: [t.asSpec()],
            };
        }),
        htmlpanel: Wk(function(n) {
            return n.presets === 'presentation'
                ? Gb.sketch({
                      dom: {
                          tag: 'div',
                          classes: ['tox-form__group'],
                          innerHtml: n.html,
                      },
                  })
                : Gb.sketch({
                      dom: {
                          tag: 'div',
                          classes: ['tox-form__group'],
                          innerHtml: n.html,
                          attributes: { role: 'document' },
                      },
                      containerBehaviours: ya([Xy.config({}), bg.config({})]),
                  });
        }),
        imagetools: Wk(function(n, t) {
            return Ak(n, t.shared.providers);
        }),
        table: Wk(function(n, t) {
            return (function(n, t) {
                function e(n) {
                    return {
                        dom: { tag: 'th', innerHtml: t.translate(n) },
                    };
                }
                function o(n) {
                    return {
                        dom: { tag: 'td', innerHtml: t.translate(n) },
                    };
                }
                function r(n) {
                    return { dom: { tag: 'tr' }, components: S(n, o) };
                }
                let i; var u;
                return {
                    dom: { tag: 'table', classes: ['tox-dialog__table'] },
                    components: [
                        ((u = n.header),
                        {
                            dom: { tag: 'thead' },
                            components: [
                                { dom: { tag: 'tr' }, components: S(u, e) },
                            ],
                        }),
                        ((i = n.cells),
                        { dom: { tag: 'tbody' }, components: S(i, r) }),
                    ],
                    behaviours: ya([Xy.config({}), bg.config({})]),
                };
            })(n, t.shared.providers);
        }),
        panel: Wk(function(n, t) {
            return (function(n, t) {
                return {
                    dom: { tag: 'div', classes: n.classes },
                    components: S(n.items, t.shared.interpreter),
                };
            })(n, t);
        }),
    };
    var IE = {
        field(n, t) {
                return t;
            },
    };
    var RE = function(t, e, o) {
        return Nn(FE, e.type).fold(
            function() {
                return (
                    v.console.error(
                        `Unknown factory type "${ 
                                e.type 
                                }", defaulting to container: `,
                        e,
                    ),
                    e
                );
            },
            function(n) {
                return n(t, e, o);
            },
        );
    };
    var VE = nn(function(n, t) {
        !(function(n, t) {
            var e = Nu.max(n, t, [
                'margin-left',
                'border-left-width',
                'padding-left',
                'padding-right',
                'border-right-width',
                'margin-right',
            ]);
            xr(n, 'max-width', `${e  }px`);
        })(n, Math.floor(t));
    });
    let NE = {
        valignCentre: [],
        alignCentre: [],
        alignLeft: [],
        alignRight: [],
        right: [],
        left: [],
        bottom: [],
        top: [],
    };
    var HE = function(n, t, e) {
        function o() {
            return we.fromDom(n.getBody());
        }
        let r = Jb(n);
        return {
            toolbar: (function(n, t, e) {
                return e
                    ? function() {
                          return {
                              anchor: 'node',
                              root: n(),
                              node: on.from(n()),
                              bubble: Ea(-12, -12, NE),
                              layouts: {
                                  onRtl: function() {
                                      return [hm];
                                  },
                                  onLtr: function() {
                                      return [vm];
                                  },
                              },
                              overrides: { maxHeightFunction: kf() },
                          };
                      }
                    : function() {
                          return {
                              anchor: 'hotspot',
                              hotspot: t(),
                              bubble: Ea(-12, 12, NE),
                              layouts: {
                                  onRtl: function() {
                                      return [aa];
                                  },
                                  onLtr: function() {
                                      return [ca];
                                  },
                              },
                              overrides: { maxHeightFunction: kf() },
                          };
                      };
            })(o, t, r),
            toolbarOverflow: (function(n) {
                return function() {
                    return {
                        anchor: 'hotspot',
                        hotspot: n(),
                        overrides: { maxWidthFunction: VE() },
                        layouts: {
                            onRtl: function() {
                                return [aa, ca];
                            },
                            onLtr: function() {
                                return [ca, aa];
                            },
                        },
                    };
                };
            })(e),
            banner: (function(n, t, e) {
                return e
                    ? function() {
                          return {
                              anchor: 'node',
                              root: n(),
                              node: on.from(n()),
                              layouts: {
                                  onRtl() {
                                          return [Wg];
                                      },
                                  onLtr() {
                                          return [Wg];
                                      },
                              },
                          };
                      }
                    : function() {
                          return {
                              anchor: 'hotspot',
                              hotspot: t(),
                              layouts: {
                                  onRtl: function() {
                                      return [ic];
                                  },
                                  onLtr: function() {
                                      return [ic];
                                  },
                              },
                          };
                      };
            })(o, t, r),
            cursor: (function(t, n) {
                return function() {
                    return {
                        anchor: 'selection',
                        root: n(),
                        getSelection() {
                                var n = t.selection.getRng();
                                return on.some(
                                    Bc.range(
                                        we.fromDom(n.startContainer),
                                        n.startOffset,
                                        we.fromDom(n.endContainer),
                                        n.endOffset,
                                    ),
                                );
                            },
                    };
                };
            })(n, o),
            node: (function(t) {
                return function(n) {
                    return { anchor: 'node', root: t(), node: n };
                };
            })(o),
        };
    };
    var PE = [
        {
            title: 'Headings',
            items: [
                { title: 'Heading 1', format: 'h1' },
                { title: 'Heading 2', format: 'h2' },
                { title: 'Heading 3', format: 'h3' },
                { title: 'Heading 4', format: 'h4' },
                { title: 'Heading 5', format: 'h5' },
                { title: 'Heading 6', format: 'h6' },
            ],
        },
        {
            title: 'Inline',
            items: [
                { title: 'Bold', icon: 'bold', format: 'bold' },
                { title: 'Italic', icon: 'italic', format: 'italic' },
                {
                    title: 'Underline',
                    icon: 'underline',
                    format: 'underline',
                },
                {
                    title: 'Strikethrough',
                    icon: 'strike-through',
                    format: 'strikethrough',
                },
                {
                    title: 'Superscript',
                    icon: 'superscript',
                    format: 'superscript',
                },
                {
                    title: 'Subscript',
                    icon: 'subscript',
                    format: 'subscript',
                },
                { title: 'Code', icon: 'code', format: 'code' },
            ],
        },
        {
            title: 'Blocks',
            items: [
                { title: 'Paragraph', format: 'p' },
                { title: 'Blockquote', format: 'blockquote' },
                { title: 'Div', format: 'div' },
                { title: 'Pre', format: 'pre' },
            ],
        },
        {
            title: 'Align',
            items: [
                { title: 'Left', icon: 'align-left', format: 'alignleft' },
                {
                    title: 'Center',
                    icon: 'align-center',
                    format: 'aligncenter',
                },
                {
                    title: 'Right',
                    icon: 'align-right',
                    format: 'alignright',
                },
                {
                    title: 'Justify',
                    icon: 'align-justify',
                    format: 'alignjustify',
                },
            ],
        },
    ];
    var zE = function(n) {
        return O(
            n,
            function(n, t) {
                if (
                    (function(n) {
                        return En(n, 'items');
                    })(t)
                ) {
                    let e = zE(t.items);
                    return {
                        customFormats: n.customFormats.concat(e.customFormats),
                        formats: n.formats.concat([
                            { title: t.title, items: e.formats },
                        ]),
                    };
                }
                if (
                    (function(n) {
                        return En(n, 'inline');
                    })(t) ||
                    (function(n) {
                        return En(n, 'block');
                    })(t) ||
                    (function(n) {
                        return En(n, 'selector');
                    })(t)
                ) {
                    let o = `custom-${  t.title.toLowerCase()}`;
                    return {
                        customFormats: n.customFormats.concat([
                            { name: o, format: t },
                        ]),
                        formats: n.formats.concat([
                            { title: t.title, format: o, icon: t.icon },
                        ]),
                    };
                }
                return N({ ...n}, { formats: n.formats.concat(t) });
            },
            { customFormats: [], formats: [] },
        );
    };
    var LE = xk.trim;
    var jE = Jk('true');
    let UE = Jk('false');
    var WE = function(n) {
        return (
            (function(n) {
                for (; (n = n.parentNode); ) {
                    var t = n.contentEditable;
                    if (t && t !== 'inherit') return jE(n);
                }
                return !1;
            })(n) && !UE(n)
        );
    };
    var GE = function(n) {
        var t = rO(n);
        return C(
            (function(n) {
                return S(C(n, tO), eO);
            })(t).concat(
                (function(n) {
                    return S(C(n, Zk), oO);
                })(t),
            ),
            iO,
        );
    };
    var XE = 'tinymce-url-history';
    var YE = Object.prototype.hasOwnProperty;
    var qE = 'contexttoolbar-hide';
    var KE = nn([ct('dom'), St('shell', !0), Is('toolbarBehaviours', [gg])]);
    var JE = nn([
        Cl({
            name: 'groups',
            overrides(n) {
                    return { behaviours: ya([gg.config({})]) };
                },
        }),
    ]);
    var $E = _l({
        name: 'Toolbar',
        configFields: KE(),
        partFields: JE(),
        factory: function(t, n, e, o) {
            var r = function(n) {
                    return t.shell ? on.some(n) : Ks(n, t, 'groups');
                };
                    var i = t.shell
                    ? { behaviours: [gg.config({})], components: [] }
                    : { behaviours: [], components: n };
            return {
                uid: t.uid,
                dom: t.dom,
                components: i.components,
                behaviours: Vs(t.toolbarBehaviours, i.behaviours),
                apis: {
                    setGroups: function(n, t) {
                        r(n).fold(
                            function() {
                                throw (v.console.error(
                                    'Toolbar was defined to not be a shell, but no groups container was specified in components',
                                ),
                                new Error(
                                    'Toolbar was defined to not be a shell, but no groups container was specified in components',
                                ));
                            },
                            function(n) {
                                gg.set(n, t);
                            },
                        );
                    },
                },
                domModification: { attributes: { role: 'group' } },
            };
        },
        apis: {
            setGroups: function(n, t, e) {
                n.setGroups(t, e);
            },
        },
    });
    var QE = xo('within', 'extra', 'withinWidth');
    var ZE = nn([
        ct('items'),
        Yu(['itemSelector']),
        Is('tgroupBehaviours', [dg]),
    ]);
    var nT = nn([kl({ name: 'items', unit: 'item' })]);
    var tT = _l({
        name: 'ToolbarGroup',
        configFields: ZE(),
        partFields: nT(),
        factory: function(n, t, e, o) {
            return {
                uid: n.uid,
                dom: n.dom,
                components: t,
                behaviours: Vs(n.tgroupBehaviours, [
                    dg.config({
                        mode: 'flow',
                        selector: n.markers.itemSelector,
                    }),
                ]),
                domModification: { attributes: { role: 'toolbar' } },
            };
        },
    });
    var eT = nn([
        Is('splitToolbarBehaviours', [$y]),
        At('builtGroups', function() {
            return ye([]);
        }),
    ]);
    var oT = nn(
        [
            Yu(['overflowToggledClass']),
            ct('getAnchor'),
            xt('getOverflowBounds'),
            ct('lazySink'),
        ].concat(eT()),
    );
    let rT = nn([
        wl({ factory: $E, schema: KE(), name: 'primary' }),
        Sl({
            factory: $E,
            schema: KE(),
            name: 'overflow',
            overrides(t) {
                    return {
                        toolbarBehaviours: ya([
                            dg.config({
                                mode: 'cyclic',
                                onEscape: function(n) {
                                    return (
                                        Ks(n, t, 'overflow-button').each(
                                            bg.focus,
                                        ),
                                        on.none()
                                    );
                                },
                            }),
                        ]),
                    };
                },
        }),
        Sl({
            name: 'overflow-button',
            overrides: function(n) {
                return {
                    dom: { attributes: { 'aria-haspopup': 'true' } },
                    buttonBehaviours: ya([
                        kg.config({
                            toggleClass: n.markers.overflowToggledClass,
                            aria: { mode: 'expanded' },
                            toggleOnExecute: !1,
                        }),
                    ]),
                };
            },
        }),
        Sl({ name: 'overflow-group' }),
    ]);
    var iT = _l({
        name: 'SplitFloatingToolbar',
        configFields: oT(),
        partFields: rT(),
        factory: function(t, n, e, o) {
            return CO(t, n, 0, o, {
                coupling: {
                    sandbox(n) {
                            return (function(o, e) {
                                var r = Tu();
                                return {
                                    dom: {
                                        tag: 'div',
                                        attributes: { id: r.id() },
                                    },
                                    behaviours: ya([
                                        dg.config({
                                            mode: 'special',
                                            onEscape: function(n) {
                                                return Lf.close(n), on.some(!0);
                                            },
                                        }),
                                        Lf.config({
                                            onOpen: function(n, t) {
                                                EO(o, e),
                                                    Ks(
                                                        o,
                                                        e,
                                                        'overflow-button',
                                                    ).each(function(n) {
                                                        kg.on(n),
                                                            r.link(n.element());
                                                    }),
                                                    dg.focusIn(t);
                                            },
                                            onClose: function() {
                                                Ks(
                                                    o,
                                                    e,
                                                    'overflow-button',
                                                ).each(function(n) {
                                                    kg.off(n),
                                                        bg.focus(n),
                                                        r.unlink(n.element());
                                                });
                                            },
                                            isPartOf: function(n, t, e) {
                                                return ju(t, e) || ju(o, e);
                                            },
                                            getAttachPoint: function() {
                                                return e.lazySink(o).getOrDie();
                                            },
                                        }),
                                        dc.config({
                                            channels: N(
                                                {},
                                                Bs({
                                                    isExtraPart: nn(!1),
                                                    doReposition: function() {
                                                        return TO(o, e);
                                                    },
                                                }),
                                            ),
                                        }),
                                    ]),
                                };
                            })(n, t);
                        },
                },
                apis: {
                    refresh(n) {
                            return EO(n, t);
                        },
                    toggle: function(n) {
                        return (function(n, t, e) {
                            let o = $y.getCoupled(n, 'sandbox');
                            Lf.isOpen(o)
                                ? Lf.close(o)
                                : Lf.open(o, e.overflow());
                        })(n, 0, o);
                    },
                    getOverflow(n) {
                            return Lf.getState($y.getCoupled(n, 'sandbox'));
                        },
                    reposition(n) {
                            return TO(n, t);
                        },
                },
            });
        },
        apis: {
            setGroups(n, t, e) {
                    n.setGroups(t, e);
                },
            refresh(n, t) {
                    n.refresh(t);
                },
            reposition(n, t) {
                    n.reposition(t);
                },
            getMoreButton: function(n, t) {
                return n.getMoreButton(t);
            },
            getOverflow: function(n, t) {
                return n.getOverflow(t);
            },
            toggle: function(n, t) {
                n.toggle(t);
            },
        },
    });
    let uT = /* */ Object.freeze({
        refresh: function(n, t, e) {
            if (e.isExpanded()) {
                Or(n.element(), DO(t));
                var o = AO(t, n.element());
                xr(n.element(), DO(t), o);
            }
        },
        grow(n, t, e) {
                e.isExpanded() || NO(n, t, e);
            },
        shrink(n, t, e) {
                e.isExpanded() && VO(n, t, e);
            },
        immediateShrink: function(n, t, e) {
            e.isExpanded() && IO(n, t, e);
        },
        hasGrown: function(n, t, e) {
            return e.isExpanded();
        },
        hasShrunk: function(n, t, e) {
            return e.isCollapsed();
        },
        isGrowing: HO,
        isShrinking: PO,
        isTransitioning: function(n, t, e) {
            return !0 === HO(n, t) || !0 === PO(n, t);
        },
        toggleGrow(n, t, e) {
                (e.isExpanded() ? VO : NO)(n, t, e);
            },
        disableTransitions: _O,
    });
    var aT = /* */ Object.freeze({
        exhibit: function(n, t) {
            var e = t.expanded;
            return nr(
                e
                    ? { classes: [t.openClass], styles: {} }
                    : {
                          classes: [t.closedClass],
                          styles: q(t.dimension.property, '0px'),
                      },
            );
        },
        events(e, o) {
                return so([
                    yo(ui(), function(n, t) {
                        t.event().raw().propertyName === e.dimension.property &&
                            (_O(n, e),
                            o.isExpanded() &&
                                Or(n.element(), e.dimension.property),
                            (o.isExpanded() ? e.onGrown : e.onShrunk)(n));
                    }),
                ]);
            },
    });
    var cT = [
        ct('closedClass'),
        ct('openClass'),
        ct('shrinkingClass'),
        ct('growingClass'),
        ht('getAnimationRoot'),
        Ku('onShrunk'),
        Ku('onStartShrink'),
        Ku('onGrown'),
        Ku('onStartGrow'),
        St('expanded', !1),
        st(
            'dimension',
            it('property', {
                width: [
                    Zu('property', 'width'),
                    Zu('getDimension', function(n) {
                        return `${gu(n)  }px`;
                    }),
                ],
                height: [
                    Zu('property', 'height'),
                    Zu('getDimension', function(n) {
                        return `${fu(n)  }px`;
                    }),
                ],
            }),
        ),
    ];
    var sT = xa({
        fields: cT,
        name: 'sliding',
        active: aT,
        apis: uT,
        state: /* */ Object.freeze({
            init: function(n) {
                let t = ye(n.expanded);
                return tu({
                    isExpanded: function() {
                        return !0 === t.get();
                    },
                    isCollapsed() {
                            return !1 === t.get();
                        },
                    setCollapsed: d(t.set, !1),
                    setExpanded: d(t.set, !0),
                    readState: function() {
                        return `expanded: ${  t.get()}`;
                    },
                });
            },
        }),
    });
    let fT = nn(
        [
            Yu([
                'closedClass',
                'openClass',
                'shrinkingClass',
                'growingClass',
                'overflowToggledClass',
            ]),
            Ku('onOpened'),
            Ku('onClosed'),
        ].concat(eT()),
    );
    var lT = nn([
        wl({ factory: $E, schema: KE(), name: 'primary' }),
        wl({
            factory: $E,
            schema: KE(),
            name: 'overflow',
            overrides: function(t) {
                return {
                    toolbarBehaviours: ya([
                        sT.config({
                            dimension: { property: 'height' },
                            closedClass: t.markers.closedClass,
                            openClass: t.markers.openClass,
                            shrinkingClass: t.markers.shrinkingClass,
                            growingClass: t.markers.growingClass,
                            onShrunk: function(n) {
                                Ks(n, t, 'overflow-button').each(function(n) {
                                    kg.off(n), bg.focus(n);
                                }),
                                    t.onClosed(n);
                            },
                            onGrown: function(n) {
                                dg.focusIn(n), t.onOpened(n);
                            },
                            onStartGrow: function(n) {
                                Ks(n, t, 'overflow-button').each(kg.on);
                            },
                        }),
                        dg.config({
                            mode: 'acyclic',
                            onEscape: function(n) {
                                return (
                                    Ks(n, t, 'overflow-button').each(bg.focus),
                                    on.some(!0)
                                );
                            },
                        }),
                    ]),
                };
            },
        }),
        Sl({
            name: 'overflow-button',
            overrides(n) {
                    return {
                        buttonBehaviours: ya([
                            kg.config({
                                toggleClass: n.markers.overflowToggledClass,
                                aria: { mode: 'pressed' },
                                toggleOnExecute: !1,
                            }),
                        ]),
                    };
                },
        }),
        Sl({ name: 'overflow-group' }),
    ]);
    var dT = function(n, t) {
        let e = Ks(n, t, 'overflow');
        SO(n, t, e, zO), e.each(sT.refresh);
    };
    var mT = _l({
        name: 'SplitSlidingToolbar',
        configFields: fT(),
        partFields: lT(),
        factory: function(t, n, e, o) {
            return CO(t, n, 0, o, {
                coupling: {},
                apis: {
                    refresh(n) {
                            return dT(n, t);
                        },
                    toggle(n) {
                            return (function(t, e) {
                                Ks(t, e, 'overflow').each(function(n) {
                                    dT(t, e), sT.toggleGrow(n);
                                });
                            })(n, t);
                        },
                    getOverflow(n) {
                            return Ks(n, t, 'overflow');
                        },
                },
            });
        },
        apis: {
            setGroups: function(n, t, e) {
                n.setGroups(t, e);
            },
            refresh(n, t) {
                    n.refresh(t);
                },
            getMoreButton(n, t) {
                    return n.getMoreButton(t);
                },
            getOverflow(n, t) {
                    return n.getOverflow(t);
                },
            toggle(n, t) {
                    n.toggle(t);
                },
        },
    });
    var gT = nn(Yo('toolbar-height-change'));
    var pT = 'silver.readonly';
    var hT = re([((hE = 'readonly'), st(hE, pe))]);
    var vT = [
        Tt('disabled', !1),
        yt('tooltip'),
        yt('icon'),
        yt('text'),
        Bt('onSetup', function() {
            return Z;
        }),
    ];
    var bT = re([ft('type'), dt('onAction')].concat(vT));
    var yT = [
        yt('text'),
        yt('tooltip'),
        yt('icon'),
        dt('fetch'),
        Bt('onSetup', function() {
            return Z;
        }),
    ];
    var xT = re(g([ft('type')], yT));
    var wT = re([
        ft('type'),
        yt('tooltip'),
        yt('icon'),
        yt('text'),
        xt('select'),
        dt('fetch'),
        Bt('onSetup', function() {
            return Z;
        }),
        Et('presets', 'normal', ['normal', 'color', 'listpreview']),
        St('columns', 1),
        dt('onAction'),
        dt('onItemAction'),
    ]);
    let ST = [Tt('active', !1)].concat(vT);
    var CT = re(ST.concat([ft('type'), dt('onAction')]));
    var kT = [
        Bt('predicate', function() {
            return !1;
        }),
        Et('scope', 'node', ['node', 'editor']),
        Et('position', 'selection', ['node', 'selection', 'line']),
    ];
    let OT = vT.concat([
        St('type', 'contextformbutton'),
        St('primary', !1),
        dt('onAction'),
        At('original', l),
    ]);
    let ET = ST.concat([
        St('type', 'contextformbutton'),
        St('primary', !1),
        dt('onAction'),
        At('original', l),
    ]);
    let TT = vT.concat([St('type', 'contextformbutton')]);
    var BT = ST.concat([St('type', 'contextformtogglebutton')]);
    let DT = it('type', { contextformbutton: OT, contextformtogglebutton: ET });
    var AT = re(
        [
            St('type', 'contextform'),
            Bt('initValue', function() {
                return '';
            }),
            yt('label'),
            pt('commands', DT),
            vt(
                'launch',
                it('type', {
                    contextformbutton: TT,
                    contextformtogglebutton: BT,
                }),
            ),
        ].concat(kT),
    );
    let _T = re([St('type', 'contexttoolbar'), ft('items')].concat(kT));
    let MT = /* */ Object.freeze({
        getState: function(n, t, e) {
            return e;
        },
    });
    let FT = /* */ Object.freeze({
        events: function(i, u) {
            function o(o, r) {
                i.updateState.each(function(n) {
                    var t = n(o, r);
                    u.set(t);
                }),
                    i.renderComponents.each(function(n) {
                        let t = n(r, u.get());
                                var e = S(t, o.getSystem().build);
                        hs(o, e);
                    });
            }
            return so([
                mo(di(), function(n, t) {
                    let e = i.channel;
                    vn(t.channels(), e) && o(n, t.data());
                }),
                Ri(function(t, n) {
                    i.initialData.each(function(n) {
                        o(t, n);
                    });
                }),
            ]);
        },
    });
    let IT = /* */ Object.freeze({
        init: function(n) {
            let t = ye(on.none());
            return {
                readState: function() {
                    return t.get().fold(
                        function() {
                            return 'none';
                        },
                        function(n) {
                            return n;
                        },
                    );
                },
                get() {
                        return t.get();
                    },
                set(n) {
                        return t.set(n);
                    },
                clear: function() {
                    return t.set(on.none());
                },
            };
        },
    });
    var RT = [
        ct('channel'),
        ht('renderComponents'),
        ht('updateState'),
        ht('initialData'),
    ];
    var VT = xa({
        fields: RT,
        name: 'reflecting',
        active: FT,
        apis: MT,
        state: IT,
    });
    var NT = nn(
        [
            ct('toggleClass'),
            ct('fetch'),
            $u('onExecute'),
            St('getHotspot', on.some),
            St('getAnchorOverrides', nn({})),
            St('layouts', on.none()),
            $u('onItemExecute'),
            ht('lazySink'),
            ct('dom'),
            Ku('onOpen'),
            Is('splitDropdownBehaviours', [$y, dg, bg]),
            St('matchWidth', !1),
            St('useMinWidth', !1),
            St('eventOrder', {}),
            ht('role'),
        ].concat(cx()),
    );
    let HT = wl({
        factory: Xg,
        schema: [ct('dom')],
        name: 'arrow',
        defaults: function(n) {
            return { buttonBehaviours: ya([bg.revoke()]) };
        },
        overrides(t) {
                return {
                    dom: { tag: 'span', attributes: { role: 'presentation' } },
                    action: function(n) {
                        n.getSystem()
                            .getByUid(t.uid)
                            .each(uo);
                    },
                    buttonBehaviours: ya([
                        kg.config({
                            toggleOnExecute: !1,
                            toggleClass: t.toggleClass,
                        }),
                    ]),
                };
            },
    });
    var PT = wl({
        factory: Xg,
        schema: [ct('dom')],
        name: 'button',
        defaults(n) {
                return { buttonBehaviours: ya([bg.revoke()]) };
            },
        overrides(e) {
                return {
                    dom: { tag: 'span', attributes: { role: 'presentation' } },
                    action: function(t) {
                        t.getSystem()
                            .getByUid(e.uid)
                            .each(function(n) {
                                e.onExecute(n, t);
                            });
                    },
                };
            },
    });
    var zT = nn([
        HT,
        PT,
        Cl({
            factory: {
                sketch(n) {
                        return {
                            uid: n.uid,
                            dom: {
                                tag: 'span',
                                styles: { display: 'none' },
                                attributes: { 'aria-hidden': 'true' },
                                innerHtml: n.text,
                            },
                        };
                    },
            },
            schema: [ct('text')],
            name: 'aria-descriptor',
        }),
        Sl({
            schema: [Xu()],
            name: 'menu',
            defaults: function(o) {
                return {
                    onExecute(t, e) {
                            t.getSystem()
                                .getByUid(o.uid)
                                .each(function(n) {
                                    o.onItemExecute(n, t, e);
                                });
                        },
                };
            },
        }),
        Zy(),
    ]);
    var LT = _l({
        name: 'SplitDropdown',
        configFields: NT(),
        partFields: zT(),
        factory(o, n, t, e) {
                function r(n) {
                    nd.getCurrent(n).each(function(n) {
                        cd.highlightFirst(n), dg.focusIn(n);
                    });
                }
                function i(n) {
                    ox(
                        o,
                        function(n) {
                            return n;
                        },
                        n,
                        e,
                        r,
                        _y.HighlightFirst,
                    ).get(Z);
                }
                function u(n) {
                    var t = Js(n, o, 'button');
                    return uo(t), on.some(!0);
                }
                var a = An(
                        so([
                            Ri(function(e, n) {
                                Ks(e, o, 'aria-descriptor').each(function(n) {
                                    var t = Yo('aria');
                                    zo(n.element(), 'id', t),
                                        zo(e.element(), 'aria-describedby', t);
                                });
                            }),
                        ]),
                        im(on.some(i)),
                    ),
                    c = {
                        repositionMenus: function(n) {
                            kg.isOn(n) && ax(n);
                        },
                    };
                return {
                    uid: o.uid,
                    dom: o.dom,
                    components: n,
                    apis: c,
                    eventOrder: N(N({}, o.eventOrder), {
                        'alloy.execute': [
                            'disabling',
                            'toggling',
                            'alloy.base.behaviour',
                        ],
                    }),
                    events: a,
                    behaviours: Vs(o.splitDropdownBehaviours, [
                        $y.config({
                            others: {
                                sandbox: function(n) {
                                    var t = Js(n, o, 'arrow');
                                    return ux(o, n, {
                                        onOpen: function() {
                                            kg.on(t), kg.on(n);
                                        },
                                        onClose: function() {
                                            kg.off(t), kg.off(n);
                                        },
                                    });
                                },
                            },
                        }),
                        dg.config({
                            mode: 'special',
                            onSpace: u,
                            onEnter: u,
                            onDown: function(n) {
                                return i(n), on.some(!0);
                            },
                        }),
                        bg.config({}),
                        kg.config({
                            toggleOnExecute: !1,
                            aria: { mode: 'expanded' },
                        }),
                    ]),
                    domModification: {
                        attributes: {
                            role: o.role.getOr('button'),
                            'aria-haspopup': !0,
                        },
                    },
                };
            },
        apis: {
            repositionMenus: function(n, t) {
                return n.repositionMenus(t);
            },
        },
    });
    var jT = Yo('focus-button');
    var UT = ['checklist', 'ordered-list'];
    var WT = [
        'indent',
        'outdent',
        'table-insert-column-after',
        'table-insert-column-before',
        'unordered-list',
    ];
    var GT = function(n, t, e) {
        return rE(
            n,
            {
                toolbarButtonBehaviours: [].concat(
                    e.length > 0 ? [Jd('toolbarButtonWith', e)] : [],
                ),
                getApi: nE,
                onSetup: n.onSetup,
            },
            t,
        );
    };
    var XT = function(n, t, e) {
        return Dn(
            rE(
                n,
                {
                    toolbarButtonBehaviours: [
                        gg.config({}),
                        kg.config({
                            toggleClass: 'tox-tbtn--enabled',
                            aria: { mode: 'pressed' },
                            toggleOnExecute: !1,
                        }),
                    ].concat(
                        0 < e.length ? [Jd('toolbarToggleButtonWith', e)] : [],
                    ),
                    getApi: tE,
                    onSetup: n.onSetup,
                },
                t,
            ),
        );
    };
    let YT = function(n, t, e) {
        var o = t.label.fold(
                function() {
                    return {};
                },
                function(n) {
                    return { 'aria-label': n };
                },
            );
                var r = bm(
                    xy.sketch({
                        inputClasses: [
                            'tox-toolbar-textfield',
                            'tox-toolbar-nav-js',
                        ],
                        data: t.initValue(),
                        inputAttributes: o,
                        selectOnFocus: !0,
                        inputBehaviours: ya([
                            dg.config({
                                mode: 'special',
                                onEnter: function(n) {
                                    return i.findPrimary(n).map(function(n) {
                                        return uo(n), !0;
                                    });
                                },
                                onLeft: function(n, t) {
                                    return t.cut(), on.none();
                                },
                                onRight: function(n, t) {
                                    return t.cut(), on.none();
                                },
                            }),
                        ]),
                    }),
                );
                var i = (function(t, n, e) {
                let o = S(n, function(n) {
                    return bm(aE(t, n, e));
                });
                return {
                    asSpecs: function() {
                        return S(o, function(n) {
                            return n.asSpec();
                        });
                    },
                    findPrimary(e) {
                            return Au(n, function(n, t) {
                                return n.primary
                                    ? on
                                          .from(o[t])
                                          .bind(function(n) {
                                              return n.getOpt(e);
                                          })
                                          .filter(b(kh.isDisabled))
                                    : on.none();
                            });
                        },
                };
            })(r, t.commands, e.shared.providers);
        return JO({
            type: n,
            uid: Yo('context-toolbar'),
            initGroups: [
                { title: on.none(), items: [r.asSpec()] },
                { title: on.none(), items: i.asSpecs() },
            ],
            onEscape: on.none,
            cyclicKeying: !0,
            backstage: e,
            getSink: function() {
                return an.error('');
            },
        });
    };
    let qT = function(t, e) {
        function n(n) {
            return n.dom() === e.getBody();
        }
        let o = we.fromDom(e.selection.getNode());
        return fE(o, t.inNodeScope).orThunk(function() {
            return fE(o, t.inEditorScope).orThunk(function() {
                return (function(n, t, e) {
                    for (
                        var o = n.dom(), r = dn(e) ? e : nn(!1);
                        o.parentNode;

                    ) {
                        o = o.parentNode;
                        var i = we.fromDom(o);
                                var u = t(i);
                        if (u.isSome()) return u;
                        if (r(i)) break;
                    }
                    return on.none();
                })(
                    o,
                    function(n) {
                        return fE(n, t.inNodeScope);
                    },
                    n,
                );
            });
        });
    };
    let KT = function(e, r) {
        function o(t, e) {
            var o = et(
                (function(n) {
                    return tt('ContextForm', AT, n);
                })(e),
            );
            (n[t] = o).launch.map(function(n) {
                c[`form:${  t}`] = N({ ...e.launch}, {
                    type:
                        'contextformtogglebutton' === n.type
                            ? 'togglebutton'
                            : 'button',
                    onAction: function() {
                        r(o);
                    },
                });
            }),
                o.scope === 'editor' ? a.push(o) : u.push(o),
                (s[t] = o);
        }
        function i(t, e) {
            (function(n) {
                return tt('ContextToolbar', _T, n);
            })(e).each(function(n) {
                e.scope === 'editor' ? a.push(n) : u.push(n), (s[t] = n);
            });
        }
        var n = {};
                var u = [];
                var a = [];
                var c = {};
                var s = {};
                var t = wn(e);
        return (
            bn(t, function(n) {
                var t = e[n];
                t.type === 'contextform'
                    ? o(n, t)
                    : t.type === 'contexttoolbar' && i(n, t);
            }),
            {
                forms: n,
                inNodeScope: u,
                inEditorScope: a,
                lookupTable: s,
                formNavigators: c,
            }
        );
    };
    let JT = Yo('forward-slide');
    var $T = Yo('backward-slide');
    var QT = Yo('change-slide-event');
    let ZT = 'tox-pop--resizing';
    ((bE = vE = vE || {})[(bE.SemiColon = 0)] = 'SemiColon'),
        (bE[(bE.Space = 1)] = 'Space');
    function nB(n, t, e, o) {
        return {
            type: 'basic',
            data: (function(n) {
                return S(n, function(n) {
                    let t = n;
                    var e = n;
                    let o = n.split('=');
                    return (
                        o.length > 1 && ((t = o[0]), (e = o[1])),
                        { title: t, format: e }
                    );
                });
            })(
                (function(n, t) {
                    return t === vE.SemiColon
                        ? n.replace(/;$/, '').split(';')
                        : n.split(' ');
                })(Nn(n.settings, t).getOr(e), o),
            ),
        };
    }
    function tB(e) {
        function t(n) {
            const t = E(VD, function(n) {
                return e.formatter.match(n.format);
            }).fold(
                function() {
                    return 'left';
                },
                function(n) {
                    return n.title.toLowerCase();
                },
            );
            io(n, uk, { icon: `align-${t}` });
        }
        const n = on.some(function(n) {
            return function() {
                return t(n);
            };
        });
        let o = on.some(function(n) {
            return t(n);
        });
        var r = (function(n) {
            return { type: 'basic', data: n };
        })(VD);
        return {
            tooltip: 'Align',
            icon: on.some('align-left'),
            isSelectedFor(n) {
                return function() {
                    return e.formatter.match(n);
                };
            },
            getCurrentValue: nn(on.none()),
            getPreviewFor(n) {
                return function() {
                    return on.none();
                };
            },
            onAction: dE(e),
            setInitialValue: o,
            nodeChangeHandler: n,
            dataset: r,
            shouldHide: !1,
            isInvalid(n) {
                return !e.formatter.canApply(n.format);
            },
        };
    }
    function eB(n) {
        const t = n.split(/\s*,\s*/);
        return S(t, function(n) {
            return n.replace(/^['"]+|['"]+$/g, '');
        });
    }
    function oB(r) {
        function i() {
            function e(n) {
                return n ? eB(n)[0] : '';
            }
            const n = r.queryCommandValue('FontName');
            var t = u.data;
            var o = n ? n.toLowerCase() : '';
            return {
                matchOpt: E(t, function(n) {
                    const t = n.format;
                    return (
                        t.toLowerCase() === o ||
                        e(t).toLowerCase() === e(o).toLowerCase()
                    );
                }).orThunk(function() {
                    return (function(n) {
                        let t;
                        return (
                            n.indexOf('-apple-system') === 0 &&
                            ((t = eB(n.toLowerCase())),
                            D(ND, function(n) {
                                return t.indexOf(n.toLowerCase()) > -1;
                            }))
                        );
                    })(o)
                        ? on.from({ title: 'System Font', format: o })
                        : on.none();
                }),
                font: n,
            };
        }
        function t(n) {
            const t = i();
            var e = t.matchOpt;
            var o = t.font;
            var r = e.fold(
                function() {
                    return o;
                },
                function(n) {
                    return n.title;
                },
            );
            io(n, ik, { text: r });
        }
        let n = on.some(function(n) {
            return function() {
                return t(n);
            };
        });
        let e = on.some(function(n) {
            return t(n);
        });
        var u = nB(
            r,
            'font_formats',
            'Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats',
            vE.SemiColon,
        );
        return {
            tooltip: 'Fonts',
            icon: on.none(),
            isSelectedFor(t) {
                return function(n) {
                    return n.exists(function(n) {
                        return n.format === t;
                    });
                };
            },
            getCurrentValue() {
                return i().matchOpt;
            },
            getPreviewFor(n) {
                return function() {
                    return on.some({
                        tag: 'div',
                        styleAttr:
                            n.indexOf('dings') === -1 ? `font-family:${  n}` : '',
                    });
                };
            },
            onAction(n) {
                return function() {
                    r.undoManager.transact(function() {
                        r.focus(), r.execCommand('FontName', !1, n.format);
                    });
                };
            },
            setInitialValue: e,
            nodeChangeHandler: n,
            dataset: u,
            shouldHide: !1,
            isInvalid() {
                return !1;
            },
        };
    }
    function rB(n, t) {
        return /[0-9.]+px$/.test(n)
            ? `${(function(n, t) {
                  let e = Math.pow(10, t);
                  return Math.round(n * e) / e;
              })((72 * parseInt(n, 10)) / 96, t || 0)}pt`
            : n;
    }
    function iB(e) {
        function i() {
            let o = on.none();
            var r = u.data;
            var i = e.queryCommandValue('FontSize');
            if (i)
                for (
                    let n = function(n) {
                            const t = rB(i, n);
                            var e = (function(n) {
                                return V(HD, n).getOr('');
                            })(t);
                            o = E(r, function(n) {
                                return (
                                    n.format === i ||
                                    n.format === t ||
                                    n.format === e
                                );
                            });
                        },
                        t = 3;
                    o.isNone() && t >= 0;
                    t--
                )
                    n(t);
            return { matchOpt: o, size: i };
        }
        function t(n) {
            const t = i();
            var e = t.matchOpt;
            var o = t.size;
            var r = e.fold(
                function() {
                    return o;
                },
                function(n) {
                    return n.title;
                },
            );
            io(n, ik, { text: r });
        }
        let n = nn(nn(on.none()));
        var o = on.some(function(n) {
            return function() {
                return t(n);
            };
        });
        let r = on.some(function(n) {
            return t(n);
        });
        var u = nB(
            e,
            'fontsize_formats',
            '8pt 10pt 12pt 14pt 18pt 24pt 36pt',
            vE.Space,
        );
        return {
            tooltip: 'Font sizes',
            icon: on.none(),
            isSelectedFor(t) {
                return function(n) {
                    return n.exists(function(n) {
                        return n.format === t;
                    });
                };
            },
            getPreviewFor: n,
            getCurrentValue() {
                return i().matchOpt;
            },
            onAction(n) {
                return function() {
                    e.undoManager.transact(function() {
                        e.focus(), e.execCommand('FontSize', !1, n.format);
                    });
                };
            },
            setInitialValue: r,
            nodeChangeHandler: o,
            dataset: u,
            shouldHide: !1,
            isInvalid() {
                return !1;
            },
        };
    }
    function uB(e, n, t) {
        const o = n();
        return Au(t, function(t) {
            return E(o, function(n) {
                return e.formatter.matchNode(t, n.format);
            });
        }).orThunk(function() {
            return e.formatter.match('p')
                ? on.some({ title: 'Paragraph', format: 'p' })
                : on.none();
        });
    }
    function aB(n) {
        const t = n.selection.getStart(!0) || n.getBody();
        return n.dom.getParents(
            t,
            function() {
                return !0;
            },
            n.getBody(),
        );
    }
    function cB(o) {
        function e(n, t) {
            const e = (function(n) {
                return uB(
                    o,
                    function() {
                        return r.data;
                    },
                    n,
                );
            })(n).fold(
                function() {
                    return 'Paragraph';
                },
                function(n) {
                    return n.title;
                },
            );
            io(t, ik, { text: e });
        }
        let n = on.some(function(t) {
            return function(n) {
                return e(n.parents, t);
            };
        });
        let t = on.some(function(n) {
            var t = aB(o);
            e(t, n);
        });
        var r = nB(
            o,
            'block_formats',
            'Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre',
            vE.SemiColon,
        );
        return {
            tooltip: 'Blocks',
            icon: on.none(),
            isSelectedFor(n) {
                return function() {
                    return o.formatter.match(n);
                };
            },
            getCurrentValue: nn(on.none()),
            getPreviewFor(t) {
                return function() {
                    let n = o.formatter.get(t);
                    return on.some({
                        tag:
                            (n.length > 0 && (n[0].inline || n[0].block)) ||
                            'div',
                        styleAttr: o.formatter.getCssText(t),
                    });
                };
            },
            onAction: dE(o),
            setInitialValue: t,
            nodeChangeHandler: n,
            dataset: r,
            shouldHide: !1,
            isInvalid(n) {
                return !o.formatter.canApply(n.format);
            },
        };
    }
    function sB(i, n) {
        function e(n, t) {
            var e = function(n) {
                let t = n.items;
                return t !== undefined && t.length > 0
                    ? B(t, e)
                    : [{ title: n.title, format: n.format }];
            };
            let o = B(Yk(i), e);
            var r = uB(
                i,
                function() {
                    return o;
                },
                n,
            ).fold(
                function() {
                    return 'Paragraph';
                },
                function(n) {
                    return n.title;
                },
            );
            io(t, ik, { text: r });
        }
        const t = on.some(function(t) {
            return function(n) {
                return e(n.parents, t);
            };
        });
        let o = on.some(function(n) {
            let t = aB(i);
            e(t, n);
        });
        return {
            tooltip: 'Formats',
            icon: on.none(),
            isSelectedFor(n) {
                return function() {
                    return i.formatter.match(n);
                };
            },
            getCurrentValue: nn(on.none()),
            getPreviewFor(t) {
                return function() {
                    let n = i.formatter.get(t);
                    return n !== undefined
                        ? on.some({
                              tag:
                                  (n.length > 0 &&
                                      (n[0].inline || n[0].block)) ||
                                  'div',
                              styleAttr: i.formatter.getCssText(t),
                          })
                        : on.none();
                };
            },
            onAction: dE(i),
            setInitialValue: o,
            nodeChangeHandler: t,
            shouldHide: i.getParam('style_formats_autohide', !1, 'boolean'),
            isInvalid(n) {
                return !i.formatter.canApply(n.format);
            },
            dataset: n,
        };
    }
    function fB(o, r) {
        return function(n, t) {
            const e = o(n)
                .mapError(function(n) {
                    return le(n);
                })
                .getOrDie();
            return r(e, t);
        };
    }
    function lB(n) {
        const t = n.toolbar;
        var e = n.buttons;
        return !1 === t
            ? []
            : t === undefined || !0 === t
            ? (function(e) {
                  const n = S(PD, function(n) {
                      const t = C(n.items, function(n) {
                          return En(e, n) || En(LD, n);
                      });
                      return { name: n.name, items: t };
                  });
                  return C(n, function(n) {
                      return n.items.length > 0;
                  });
              })(e)
            : cn(t)
            ? (function(n) {
                  const t = n.split('|');
                  return S(t, function(n) {
                      return { items: n.trim().split(' ') };
                  });
              })(t)
            : (function(n) {
                  return h(n, function(n) {
                      return En(n, 'name') && En(n, 'items');
                  });
              })(t)
            ? t
            : (v.console.error(
                  'Toolbar type should be string, string[], boolean or ToolbarGroup[]',
              ),
              []);
    }
    function dB(t, e, o, r, n) {
        return V(e, o.toLowerCase())
            .orThunk(function() {
                return n.bind(function(n) {
                    return Au(n, function(n) {
                        return V(e, n + o.toLowerCase());
                    });
                });
            })
            .fold(
                function() {
                    return V(LD, o.toLowerCase())
                        .map(function(n) {
                            return n(t, r);
                        })
                        .orThunk(function() {
                            return on.none();
                        });
                },
                function(n) {
                    return (function(t, e) {
                        return V(zD, t.type).fold(
                            function() {
                                return (
                                    v.console.error(
                                        'skipping button defined by',
                                        t,
                                    ),
                                    on.none()
                                );
                            },
                            function(n) {
                                return on.some(n(t, e));
                            },
                        );
                    })(n, r);
                },
            );
    }
    function mB(e, o, r, i) {
        const n = lB(o);
        var t = S(n, function(n) {
            const t = B(n.items, function(n) {
                return n.trim().length === 0
                    ? []
                    : dB(e, o.buttons, n, r, i).toArray();
            });
            return { title: on.from(e.translate(n.name)), items: t };
        });
        return C(t, function(n) {
            return n.items.length > 0;
        });
    }
    function gB(e) {
        return (Cr(e, 'position').is('fixed') ? on.none() : Bo(e))
            .orThunk(function() {
                const n = we.fromTag('span');
                _o(e, n);
                const t = Bo(n);
                return zi(n), t;
            })
            .map(mu)
            .getOrThunk(function() {
                return Ru(0, 0);
            });
    }
    function pB(t) {
        return function(n) {
            return n.translate(-t.left(), -t.top());
        };
    }
    function hB(t) {
        return function(n) {
            return n.translate(t.left(), t.top());
        };
    }
    function vB(e) {
        return function(n, t) {
            return O(
                e,
                function(n, t) {
                    return t(n);
                },
                Ru(n, t),
            );
        };
    }
    function bB(n, t, e) {
        return n.fold(vB([hB(e), pB(t)]), vB([pB(t)]), vB([]));
    }
    function yB(n, t, e) {
        return n.fold(vB([hB(e)]), vB([]), vB([hB(t)]));
    }
    function xB(n, t, e) {
        return n.fold(vB([]), vB([pB(e)]), vB([hB(t), pB(e)]));
    }
    function wB(n, t, e) {
        return n.fold(
            function(n, t) {
                return { position: 'absolute', left: `${n}px`, top: `${t}px` };
            },
            function(n, t) {
                return {
                    position: 'absolute',
                    left: `${n - e.left()}px`,
                    top: `${t - e.top()}px`,
                };
            },
            function(n, t) {
                return { position: 'fixed', left: `${n}px`, top: `${t}px` };
            },
        );
    }
    function SB(n, i, u, a) {
        function t(o, r) {
            return function(n, t) {
                const e = o(i, u, a);
                return r(n.getOr(e.left()), t.getOr(e.top()));
            };
        }
        return n.fold(t(xB, nA.offset), t(yB, nA.absolute), t(bB, nA.fixed));
    }
    function CB(n, t) {
        const e = n.element();
        lr(e, t.transitionClass),
            mr(e, t.fadeOutClass),
            lr(e, t.fadeInClass),
            t.onShow(n);
    }
    function kB(n, t) {
        const e = n.element();
        lr(e, t.transitionClass),
            mr(e, t.fadeInClass),
            lr(e, t.fadeOutClass),
            t.onHide(n);
    }
    function OB(n, t, e) {
        return D(n, function(n) {
            switch (n) {
                case 'bottom':
                    return (function(n, t) {
                        return n.bottom() <= t.bottom();
                    })(t, e);
                case 'top':
                    return (function(n, t) {
                        return n.y() >= t.y();
                    })(t, e);
            }
        });
    }
    function EB(n, t) {
        return jo(n, t) ? on.some(parseInt(Lo(n, t), 10)) : on.none();
    }
    function TB(r, n) {
        return EB(r, n.leftAttr).bind(function(o) {
            return EB(r, n.topAttr).map(function(n) {
                const t = gu(r);
                var e = fu(r);
                return xu(o, n, t, e);
            });
        });
    }
    function BB(n, t, e) {
        const o = Lo(n, t.positionAttr);
        switch (
            ((function(n, t) {
                Uo(n, t.leftAttr), Uo(n, t.topAttr), Uo(n, t.positionAttr);
            })(n, t),
            o)
        ) {
            case 'static':
                return on.some(rA.static());
            case 'absolute':
                return on.some(rA.absolute(e.x(), e.y()));
            default:
                return on.none();
        }
    }
    function DB(n, t, e, o, r) {
        const i = wu(n);
        if (OB(t.modes, i, e)) return on.none();
        const u = r();
        var a = Sr(n, 'position');
        !(function(n, t, e, o, r) {
            zo(n, t.leftAttr, e), zo(n, t.topAttr, o), zo(n, t.positionAttr, r);
        })(n, t, i.x(), i.y(), a);
        const c = eA(i.x(), i.y());
        var s = bB(c, o, u);
        var f = eA(e.x(), e.y());
        var l = bB(f, o, u);
        var d = i.y() <= e.y() ? l.top() : l.top() + e.height() - i.height();
        return on.some(rA.fixed(s.left(), d));
    }
    function AB(n, t, e, o, r) {
        const i = n.element();
        return Cr(i, 'position').is('fixed')
            ? (function(t, e, o) {
                  return TB(t, e)
                      .filter(function(n) {
                          return OB(e.modes, n, o);
                      })
                      .bind(function(n) {
                          return BB(t, e, n);
                      });
              })(i, t, e)
            : DB(i, t, e, o, r);
    }
    function _B(t, n) {
        bn(['left', 'top', 'position'], function(n) {
            return Or(t.element(), n);
        }),
            n.onUndocked(t);
    }
    function MB(n, t, e, o, r) {
        const i = wB(r, 0, o);
        wr(n.element(), i),
            (i.position === 'fixed' ? t.onDocked : t.onUndocked)(n);
    }
    function FB(o, n, r, i, u) {
        void 0 === u && (u = !1),
            n.contextual.each(function(e) {
                e.lazyContext(o).each(function(n) {
                    const t = (function(n, t) {
                        return n.y() < t.bottom() && n.bottom() > t.y();
                    })(n, i);
                    t !== r.isVisible() &&
                        (r.setVisible(t),
                        u && !t
                            ? (pr(o.element(), [e.fadeOutClass]), e.onHide(o))
                            : (t ? CB : kB)(o, e));
                });
            });
    }
    function IB(r, i, n) {
        const u = r.element();
        n.setDocked(!1),
            (function(n, t) {
                const e = n.element();
                return TB(e, t).bind(function(n) {
                    return BB(e, t, n);
                });
            })(r, i).each(function(n) {
                n.fold(
                    function() {
                        return _B(r, i);
                    },
                    function(n, t) {
                        const e = ko(u);
                        var o = (hu(e), gB(u));
                        MB(r, i, 0, o, eA(n, t));
                    },
                    Z,
                );
            }),
            n.setVisible(!0),
            i.contextual.each(function(n) {
                hr(u, [n.fadeInClass, n.fadeOutClass, n.transitionClass]),
                    n.onShow(r);
            }),
            iA(r, i, n);
    }
    function RB(n, t, e) {
        e.isDocked() && IB(n, t, e);
    }
    function VB(o) {
        const r = o.element();
        To(r).each(function(n) {
            if (sA.isDocked(o)) {
                const t = gu(n);
                xr(r, 'width', `${t}px`);
                const e = lu(r);
                xr(n, 'padding-top', `${e}px`);
            } else Or(r, 'width'), Or(n, 'padding-top');
        });
    }
    function NB(n, t) {
        t
            ? (mr(n, fA.fadeOutClass),
              pr(n, [fA.transitionClass, fA.fadeInClass]))
            : (mr(n, fA.fadeInClass),
              pr(n, [fA.fadeOutClass, fA.transitionClass]));
    }
    function HB(n, t) {
        const e = we.fromDom(n.getContainer());
        t ? (lr(e, lA), mr(e, dA)) : (lr(e, dA), mr(e, lA));
    }
    function PB(i, e) {
        function o(t) {
            e().each(function(n) {
                return t(n.element());
            });
        }
        function n(n) {
            i.inline || VB(n),
                HB(i, sA.isDocked(n)),
                n.getSystem().broadcastOn([Uf()], {}),
                e().each(function(n) {
                    return n.getSystem().broadcastOn([Uf()], {});
                });
        }
        const r = ye(on.none());
        var t = i.inline
            ? []
            : (function() {
                  let n;
                  return [
                      dc.config({
                          channels:
                              ((n = {}), (n[gT()] = { onReceive: VB }), n),
                      }),
                  ];
              })();
        return g(
            [
                bg.config({}),
                sA.config({
                    leftAttr: 'data-dock-left',
                    topAttr: 'data-dock-top',
                    positionAttr: 'data-dock-pos',
                    contextual: {
                        lazyContext(n) {
                                var t = lu(n.element()),
                                    e = i.inline
                                        ? i.getContentAreaContainer()
                                        : i.getContainer(),
                                    o = wu(we.fromDom(e)),
                                    r = o.height() - t;
                                return on.some(xu(o.x(), o.y(), o.width(), r));
                            },
                        onShow() {
                                o(function(n) {
                                    return NB(n, !0);
                                });
                            },
                        onShown(t) {
                                o(function(n) {
                                    return hr(n, [
                                        fA.transitionClass,
                                        fA.fadeInClass,
                                    ]);
                                }),
                                    r.get().each(function(n) {
                                        !(function(t, e) {
                                            var o = ko(e);
                                            Ca(o)
                                                .filter(function(n) {
                                                    return !jt(e, n);
                                                })
                                                .filter(function(n) {
                                                    return (
                                                        jt(
                                                            n,
                                                            we.fromDom(
                                                                o.dom().body,
                                                            ),
                                                        ) || qe(t, n)
                                                    );
                                                })
                                                .each(function() {
                                                    return Sa(e);
                                                });
                                        })(t.element(), n),
                                            r.set(on.none());
                                    });
                            },
                        onHide(n) {
                                r.set(
                                    (function(n, t) {
                                        return ka(n).orThunk(function() {
                                            return t()
                                                .toOption()
                                                .bind(function(n) {
                                                    return ka(n.element());
                                                });
                                        });
                                    })(n.element(), e),
                                ),
                                    o(function(n) {
                                        return NB(n, !1);
                                    });
                            },
                        onHidden: function() {
                            o(function(n) {
                                return hr(n, [fA.transitionClass]);
                            });
                        },
                        ...fA,
                    },
                    modes: ['top'],
                    onDocked: n,
                    onUndocked: n,
                }),
            ],
            t,
        );
    }
    function zB(n) {
        return `<alloy.field.${n}>`;
    }
    function LB(n) {
        return {
            element() {
                return n.element().dom();
            },
        };
    }
    function jB(e, o) {
        const r = S(wn(o), function(n) {
            const t = o[n];
            var e = et(
                (function(n) {
                    return tt('sidebar', kA, n);
                })(t),
            );
            return {
                name: n,
                getApi: LB,
                onSetup: e.onSetup,
                onShow: e.onShow,
                onHide: e.onHide,
            };
        });
        return S(r, function(n) {
            const t = ye(Z);
            return e.slot(n.name, {
                dom: { tag: 'div', classes: ['tox-sidebar__pane'] },
                behaviours: $p([
                    Tp(n, t),
                    Bp(n, t),
                    mo(Di(), function(t, n) {
                        const e = n.event();
                        E(r, function(n) {
                            return n.name === e.name();
                        }).each(function(n) {
                            (e.visible() ? n.onShow : n.onHide)(n.getApi(t));
                        });
                    }),
                ]),
            });
        });
    }
    function UB(n, t) {
        nd.getCurrent(n).each(function(n) {
            return gg.set(n, [
                (function(t) {
                    return CA.sketch(function(n) {
                        return {
                            dom: {
                                tag: 'div',
                                classes: ['tox-sidebar__pane-container'],
                            },
                            components: jB(n, t),
                            slotBehaviours: $p([
                                Ri(function(n) {
                                    return CA.hideAllSlots(n);
                                }),
                            ]),
                        };
                    });
                })(t),
            ]);
        });
    }
    function WB(n) {
        return nd.getCurrent(n).bind(function(n) {
            return sT.isGrowing(n) || sT.hasGrown(n)
                ? nd.getCurrent(n).bind(function(t) {
                      return E(CA.getSlotNames(t), function(n) {
                          return CA.isShowing(t, n);
                      });
                  })
                : on.none();
        });
    }
    function GB(n, t, e) {
        const o = n.element();
        !0 === t
            ? (gg.set(n, [
                  (function(n) {
                      return {
                          dom: {
                              tag: 'div',
                              attributes: {
                                  'aria-label': n.translate('Loading...'),
                              },
                              classes: ['tox-throbber__busy-spinner'],
                          },
                          components: [
                              {
                                  dom: sp(
                                      '<div class="tox-spinner"><div></div><div></div><div></div></div>',
                                  ),
                              },
                          ],
                          behaviours: ya([
                              dg.config({
                                  mode: 'special',
                                  onTab() {
                                      return on.some(!0);
                                  },
                                  onShiftTab() {
                                      return on.some(!0);
                                  },
                              }),
                              bg.config({}),
                          ]),
                      };
                  })(e),
              ]),
              Or(o, 'display'),
              Uo(o, 'aria-hidden'))
            : (gg.set(n, []),
              xr(o, 'display', 'none'),
              zo(o, 'aria-hidden', 'true'));
    }
    function XB(n) {
        return typeof n === 'string' ? n.split(' ') : n;
    }
    function YB(e, o) {
        const r = An(RA, o.menus);
        var t = wn(o.menus).length > 0;
        var n =
            o.menubar === undefined || !0 === o.menubar
                ? XB('file edit view insert format tools table help')
                : XB(!1 === o.menubar ? '' : o.menubar);
        var i = C(n, function(n) {
            return (
                (t &&
                    o.menus.hasOwnProperty(n) &&
                    o.menus[n].hasOwnProperty('items')) ||
                RA.hasOwnProperty(n)
            );
        });
        let u = S(i, function(n) {
            let t = r[n];
            return (function(n, e, t) {
                const o = (function(n) {
                    return n.getParam('removed_menuitems', '');
                })(t).split(/[ ,]/);
                return {
                    text: n.title,
                    getItems() {
                        return B(n.items, function(n) {
                            var t = n.toLowerCase();
                            return t.trim().length === 0
                                ? []
                                : x(o, function(n) {
                                      return n === t;
                                  })
                                ? []
                                : t === 'separator' || t === '|'
                                ? [{ type: 'separator' }]
                                : e.menuItems[t]
                                ? [e.menuItems[t]]
                                : [];
                        });
                    },
                };
            })({ title: t.title, items: XB(t.items) }, o, e);
        });
        return C(u, function(n) {
            return (
                n.getItems().length > 0 &&
                x(n.getItems(), function(n) {
                    return n.type !== 'separator';
                })
            );
        });
    }
    function qB(n, t) {
        let e;
        var o = (function(n) {
            let t = n.settings;
            var e = t.skin;
            let o = t.skin_url;
            if (!1 !== e) {
                const r = e || 'oxide';
                o = o
                    ? n.documentBaseURI.toAbsolute(o)
                    : `${Xb.baseURL}/skins/ui/${r}`;
            }
            return o;
        })(t);
        o &&
            ((e = `${o}/skin.min.css`),
            t.contentCSS.push(
                `${o + (n ? '/content.inline' : '/content')}.min.css`,
            )),
            !1 ===
                (function(n) {
                    return !1 === n.getParam('skin');
                })(t) && e
                ? Vh.DOM.styleSheetLoader.load(e, VA(t))
                : VA(t)();
    }
    function KB(t, n, e, o) {
        const r = n.outerContainer;
        var i = e.toolbar;
        let u = e.buttons;
        if (h(i, cn)) {
            const a = i.map(function(n) {
                return mB(
                    t,
                    { toolbar: n, buttons: u },
                    { backstage: o },
                    on.none(),
                );
            });
            IA.setToolbars(r, a);
        } else IA.setToolbar(r, mB(t, e, { backstage: o }, on.none()));
    }
    function JB(n) {
        return (function(n) {
            const t = Ib(n);
            var e = Nb(n);
            let o = Pb(n);
            return WA(t).map(function(n) {
                return UA(n, e, o);
            });
        })(n).getOr(Ib(n));
    }
    function $B(n) {
        const t = Rb(n);
        var e = Vb(n);
        let o = Hb(n);
        return WA(t).map(function(n) {
            return UA(n, e, o);
        });
    }
    function QB(n, t) {
        return function() {
            n.execCommand('mceToggleFormat', !1, t);
        };
    }
    function ZB(n) {
        !(function(e) {
            xk.each(
                [
                    { name: 'bold', text: 'Bold', icon: 'bold' },
                    { name: 'italic', text: 'Italic', icon: 'italic' },
                    { name: 'underline', text: 'Underline', icon: 'underline' },
                    {
                        name: 'strikethrough',
                        text: 'Strikethrough',
                        icon: 'strike-through',
                    },
                    { name: 'subscript', text: 'Subscript', icon: 'subscript' },
                    {
                        name: 'superscript',
                        text: 'Superscript',
                        icon: 'superscript',
                    },
                ],
                function(n, t) {
                    e.ui.registry.addToggleButton(n.name, {
                        tooltip: n.text,
                        icon: n.icon,
                        onSetup: lE(e, n.name),
                        onAction: QB(e, n.name),
                    });
                },
            );
            for (let n = 1; n <= 6; n++) {
                const t = `h${n}`;
                e.ui.registry.addToggleButton(t, {
                    text: t.toUpperCase(),
                    tooltip: `Heading ${n}`,
                    onSetup: lE(e, t),
                    onAction: QB(e, t),
                });
            }
        })(n),
            (function(t) {
                xk.each(
                    [
                        {
                            name: 'cut',
                            text: 'Cut',
                            action: 'Cut',
                            icon: 'cut',
                        },
                        {
                            name: 'copy',
                            text: 'Copy',
                            action: 'Copy',
                            icon: 'copy',
                        },
                        {
                            name: 'paste',
                            text: 'Paste',
                            action: 'Paste',
                            icon: 'paste',
                        },
                        {
                            name: 'help',
                            text: 'Help',
                            action: 'mceHelp',
                            icon: 'help',
                        },
                        {
                            name: 'selectall',
                            text: 'Select all',
                            action: 'SelectAll',
                            icon: 'select-all',
                        },
                        {
                            name: 'newdocument',
                            text: 'New document',
                            action: 'mceNewDocument',
                            icon: 'new-document',
                        },
                        {
                            name: 'removeformat',
                            text: 'Clear formatting',
                            action: 'RemoveFormat',
                            icon: 'remove-formatting',
                        },
                        {
                            name: 'remove',
                            text: 'Remove',
                            action: 'Delete',
                            icon: 'remove',
                        },
                    ],
                    function(n) {
                        t.ui.registry.addButton(n.name, {
                            tooltip: n.text,
                            icon: n.icon,
                            onAction() {
                                return t.execCommand(n.action);
                            },
                        });
                    },
                );
            })(n),
            (function(t) {
                xk.each(
                    [
                        {
                            name: 'blockquote',
                            text: 'Blockquote',
                            action: 'mceBlockQuote',
                            icon: 'quote',
                        },
                    ],
                    function(n) {
                        t.ui.registry.addToggleButton(n.name, {
                            tooltip: n.text,
                            icon: n.icon,
                            onAction() {
                                return t.execCommand(n.action);
                            },
                            onSetup: lE(t, n.name),
                        });
                    },
                );
            })(n);
    }
    function nD(n, t, e) {
        function o() {
            return !!t.undoManager && t.undoManager[e]();
        }
        function r() {
            n.setDisabled(t.readonly || !o());
        }
        return (
            n.setDisabled(!o()),
            t.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', r),
            function() {
                return t.off(
                    'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode',
                    r,
                );
            }
        );
    }
    function tD(n, t) {
        return { anchor: 'makeshift', x: n, y: t };
    }
    function eD(n) {
        return n.type === 'longpress' || n.type.indexOf('touch') === 0;
    }
    function oD(n, t) {
        const e = Vh.DOM.getPos(n);
        return (function(n, t, e) {
            return tD(n.x + t, n.y + e);
        })(t, e.x, e.y);
    }
    function rD(n, t) {
        return t.type === 'contextmenu'
            ? n.inline
                ? (function(n) {
                      if (eD(n)) {
                          const t = n.touches[0];
                          return tD(t.pageX, t.pageY);
                      }
                      return tD(n.pageX, n.pageY);
                  })(t)
                : oD(
                      n.getContentAreaContainer(),
                      (function(n) {
                          if (eD(n)) {
                              const t = n.touches[0];
                              return tD(t.clientX, t.clientY);
                          }
                          return tD(n.clientX, n.clientY);
                      })(t),
                  )
            : n_(n);
    }
    function iD(n) {
        return {
            anchor: 'node',
            node: on.some(we.fromDom(n.selection.getNode())),
            root: we.fromDom(n.getBody()),
        };
    }
    function uD(n, t, e, o, r, i) {
        const u = e();
        var a = (function(n, t, e) {
            return e ? iD(n) : rD(n, t);
        })(n, t, i);
        HC(u, Ih.CLOSE_ON_EXECUTE, o, !1).map(function(n) {
            t.preventDefault(),
                Ug.showMenuAt(r, a, {
                    menu: { markers: Sv('normal') },
                    data: n,
                });
        });
    }
    function aD(t, e, n, o, r, i) {
        const u = (function(n, t) {
            const e = t ? iD(n) : n_(n);
            return {
                bubble: Ea(0, 12, e_),
                layouts: t_,
                overrides: {
                    maxWidthFunction: VE(),
                    maxHeightFunction: kf(),
                },
                ...e,
            };
        })(t, i);
        HC(n, Ih.CLOSE_ON_EXECUTE, o, !0).map(function(n) {
            e.preventDefault(),
                Ug.showMenuWithinBounds(
                    r,
                    u,
                    {
                        menu: { markers: Sv('normal') },
                        data: n,
                        type: 'horizontal',
                    },
                    function() {
                        return on.some(sE(t));
                    },
                ),
                t.fire(qE);
        });
    }
    function cD(t, e, o, r, i, u) {
        function n() {
            const n = o();
            aD(t, e, n, r, i, u);
        }
        const a = Ht();
        var c = a.os.isiOS();
        var s = a.os.isOSX();
        var f = a.os.isAndroid();
        if ((!s && !c) || u)
            f && !u && t.selection.setCursorLocation(e.target, 0), n();
        else {
            const l = function() {
                !(function(n) {
                    function t() {
                        Kg.setEditorTimeout(
                            n,
                            function() {
                                n.selection.setRng(e);
                            },
                            10,
                        ),
                            i();
                    }
                    var e = n.selection.getRng();
                    n.once('touchend', t);
                    function o(n) {
                        n.preventDefault(), n.stopImmediatePropagation();
                    }
                    n.on('mousedown', o, !0);
                    function r() {
                        return i();
                    }
                    n.once('longpresscancel', r);
                    var i = function() {
                        n.off('touchend', t),
                            n.off('longpresscancel', r),
                            n.off('mousedown', o);
                    };
                })(t),
                    n();
            };
            !(function(n, t) {
                const e = n.selection;
                if (e.isCollapsed() || t.touches.length < 1) return !1;
                const o = t.touches[0];
                let r = e.getRng();
                return Wc(n.getWin(), Bc.domRange(r)).exists(function(n) {
                    return (
                        n.left() <= o.clientX &&
                        n.right() >= o.clientX &&
                        n.top() <= o.clientY &&
                        n.bottom() >= o.clientY
                    );
                });
            })(t, e)
                ? (t.once('selectionchange', l),
                  t.once('touchend', function() {
                      return t.off('selectionchange', l);
                  }))
                : l();
        }
    }
    function sD(n) {
        return typeof n === 'string' ? n.split(/[ ,]/) : n;
    }
    function fD(n) {
        return cn(n) ? n === '|' : n.type === 'separator';
    }
    function lD(n, t) {
        if (t.length === 0) return n;
        const e = F(n)
            .filter(function(n) {
                return !fD(n);
            })
            .fold(
                function() {
                    return [];
                },
                function(n) {
                    return [u_];
                },
            );
        return n
            .concat(e)
            .concat(t)
            .concat([u_]);
    }
    function dD(i, n, t) {
        function e(n) {
            return Ug.hide(a);
        }
        function o(o) {
            if (
                (o_(i) && o.preventDefault(),
                !(function(n, t) {
                    return t.ctrlKey && !o_(n);
                })(i, o) && !i_(i))
            ) {
                const r = (function(n, t) {
                    return (
                        t.type !== 'longpress' &&
                        (t.button !== 2 ||
                            (t.target === n.getBody() && t.pointerType === ''))
                    );
                })(i, o);
                (u() ? cD : uD)(
                    i,
                    o,
                    function() {
                        const n = r ? i.selection.getStart(!0) : o.target;
                        var t = i.ui.registry.getAll();
                        var e = r_(i);
                        return (function(r, n, i) {
                            const t = O(
                                n,
                                function(n, t) {
                                    if (En(r, t)) {
                                        const e = r[t].update(i);
                                        if (cn(e)) return lD(n, e.split(' '));
                                        if (e.length > 0) {
                                            const o = S(e, a_);
                                            return lD(n, o);
                                        }
                                        return n;
                                    }
                                    return n.concat([t]);
                                },
                                [],
                            );
                            return (
                                t.length > 0 && fD(t[t.length - 1]) && t.pop(),
                                t
                            );
                        })(t.contextMenus, e, n);
                    },
                    t,
                    a,
                    r,
                );
            }
        }
        var u = Ht().deviceType.isTouch;
        var a = au(
            Ug.sketch({
                dom: { tag: 'div' },
                lazySink: n,
                onEscape() {
                    return i.focus();
                },
                onShow() {
                    return t.setContextMenuState(!0);
                },
                onHide() {
                    return t.setContextMenuState(!1);
                },
                fireDismissalEventInstead: {},
                inlineBehaviours: ya([
                    Jd('dismissContextMenu', [
                        mo(Ei(), function(n, t) {
                            Lf.close(n), i.focus();
                        }),
                    ]),
                ]),
            }),
        );
        i.on('init', function() {
            const n = `ResizeEditor ScrollContent ScrollWindow longpresscancel${
                u() ? '' : ' ResizeWindow'
            }`;
            i.on(n, e), i.on('longpress contextmenu', o);
        });
    }
    function mD(n, t) {
        n.getSystem().addToGui(t),
            (function(n) {
                To(n.element())
                    .filter(Pr)
                    .each(function(t) {
                        Cr(t, 'z-index').each(function(n) {
                            zo(t, c_, n);
                        }),
                            xr(t, 'z-index', Sr(n.element(), 'z-index'));
                    });
            })(t);
    }
    function gD(n) {
        !(function(n) {
            To(n.element())
                .filter(Pr)
                .each(function(n) {
                    const t = Lo(n, c_);
                    jo(n, c_) ? xr(n, 'z-index', t) : Or(n, 'z-index'),
                        Uo(n, c_);
                });
        })(n),
            n.getSystem().removeFromGui(n);
    }
    function pD(n, t, e) {
        return n.getSystem().build(
            Gb.sketch({
                dom: {
                    styles: {
                        left: '0px',
                        top: '0px',
                        width: '100%',
                        height: '100%',
                        position: 'fixed',
                        'z-index': '1000000000000000',
                    },
                    classes: [t],
                },
                events: e,
            }),
        );
    }
    function hD(n, t, e, o) {
        return (function(n, t) {
            const e = n.element();
            var o = parseInt(Lo(e, t.leftAttr), 10);
            let r = parseInt(Lo(e, t.topAttr), 10);
            return isNaN(o) || isNaN(r) ? on.none() : on.some(Ru(o, r));
        })(n, t).fold(
            function() {
                return e;
            },
            function(n) {
                return oA(n.left() + o.left(), n.top() + o.top());
            },
        );
    }
    function vD(n, t, e, o, r, i) {
        const u = hD(n, t, e, o);
        var a = t.mustSnap ? l_(n, t, u, r, i) : d_(n, t, u, r, i);
        var c = bB(u, r, i);
        return (
            (function(n, t, e) {
                const o = n.element();
                zo(o, t.leftAttr, `${e.left()}px`),
                    zo(o, t.topAttr, `${e.top()}px`);
            })(n, t, c),
            a.fold(
                function() {
                    return { coord: oA(c.left(), c.top()), extra: on.none() };
                },
                function(n) {
                    return { coord: n.output(), extra: n.extra() };
                },
            )
        );
    }
    function bD(n, t) {
        !(function(n, t) {
            const e = n.element();
            Uo(e, t.leftAttr), Uo(e, t.topAttr);
        })(n, t);
    }
    function yD(n, e, o, r) {
        return Au(n, function(n) {
            const t = n.sensor();
            return (function(n, t, e, o, r, i) {
                const u = yB(n, r, i);
                let a = yB(t, r, i);
                return (
                    Math.abs(u.left() - a.left()) <= e &&
                    Math.abs(u.top() - a.top()) <= o
                );
            })(e, t, n.range().left(), n.range().top(), o, r)
                ? on.some({
                      output: nn(SB(n.output(), e, o, r)),
                      extra: n.extra,
                  })
                : on.none();
        });
    }
    function xD(t) {
        return (function(n, t, e, o) {
            return n.isSome() && t.isSome() && e.isSome()
                ? on.some(o(n.getOrDie(), t.getOrDie(), e.getOrDie()))
                : on.none();
        })(Cr(t, 'left'), Cr(t, 'top'), Cr(t, 'position'), function(n, t, e) {
            return (e === 'fixed' ? oA : tA)(parseInt(n, 10), parseInt(t, 10));
        }).getOrThunk(function() {
            const n = mu(t);
            return eA(n.left(), n.top());
        });
    }
    function wD(e, n, o, r, i, u, t) {
        return (function(n, t, e, o, r) {
            const i = r.bounds;
            var u = yB(t, e, o);
            var a = as(u.left(), i.x(), i.x() + i.width() - r.width);
            let c = as(u.top(), i.y(), i.y() + i.height() - r.height);
            var s = eA(a, c);
            return t.fold(
                function() {
                    const n = xB(s, e, o);
                    return tA(n.left(), n.top());
                },
                function() {
                    return s;
                },
                function() {
                    const n = bB(s, e, o);
                    return oA(n.left(), n.top());
                },
            );
        })(
            0,
            n.fold(
                function() {
                    const n = (function(n, e, o) {
                        return n.fold(
                            function(n, t) {
                                return nA.offset(n + e, t + o);
                            },
                            function(n, t) {
                                return nA.absolute(n + e, t + o);
                            },
                            function(n, t) {
                                return nA.fixed(n + e, t + o);
                            },
                        );
                    })(o, u.left(), u.top());
                    let t = bB(n, r, i);
                    return oA(t.left(), t.top());
                },
                function(t) {
                    const n = vD(e, t, o, u, r, i);
                    return (
                        n.extra.each(function(n) {
                            t.onSensor(e, n);
                        }),
                        n.coord
                    );
                },
            ),
            r,
            i,
            t,
        );
    }
    function SD(n, t) {
        return {
            bounds: n.getBounds(),
            height: lu(t.element()),
            width: pu(t.element()),
        };
    }
    function CD(t, e, n, o, r) {
        const i = n.update(o, r);
        var u = n.getStartData().getOrThunk(function() {
            return SD(e, t);
        });
        i.each(function(n) {
            !(function(n, t, e, o) {
                const r = t.getTarget(n.element());
                if (t.repositionTarget) {
                    const i = ko(n.element());
                    var u = hu(i);
                    let a = gB(r);
                    var c = xD(r);
                    let s = wD(n, t.snaps, c, u, a, o, e);
                    let f = wB(s, 0, a);
                    wr(r, f);
                }
                t.onDrag(n, r, o);
            })(t, e, u, n);
        });
    }
    function kD(t, n, e, o) {
        n.each(gD),
            e.snaps.each(function(n) {
                bD(t, n);
            });
        const r = e.getTarget(t.element());
        o.reset(), e.onDrop(t, r);
    }
    function OD(n) {
        return function(t, e) {
            function o(n) {
                e.setStartData(SD(t, n));
            }
            return so(
                g(
                    [
                        mo(Si(), function(n) {
                            e.getStartData().each(function() {
                                return o(n);
                            });
                        }),
                    ],
                    n(t, e, o),
                ),
            );
        };
    }
    function ED(u, a, c) {
        return [
            mo(qr(), function(t, n) {
                if (n.event().raw().button === 0) {
                    n.stop();
                    let e = function() {
                        return kD(t, on.some(i), u, a);
                    };
                    let o = vb(e, 200);
                    var r = {
                        drop: e,
                        delayDrop: o.schedule,
                        forceDrop: e,
                        move: function(n) {
                            o.cancel(), CD(t, u, a, m_, n);
                        },
                    };
                    var i = pD(
                        t,
                        u.blockerClass,
                        (function(e) {
                            return so([
                                mo(qr(), e.forceDrop),
                                mo($r(), e.drop),
                                mo(Kr(), function(n, t) {
                                    e.move(t.event());
                                }),
                                mo(Jr(), e.delayDrop),
                            ]);
                        })(r),
                    );
                    c(t), mD(t, i);
                }
            }),
        ];
    }
    function TD(i, u, a) {
        const c = ye(on.none());
        return [
            mo(Wr(), function(t, n) {
                n.stop();
                function e() {
                    kD(t, c.get(), i, u), c.set(on.none());
                }
                const o = {
                    drop: e,
                    delayDrop() {},
                    forceDrop: e,
                    move(n) {
                        CD(t, i, u, p_, n);
                    },
                };
                var r = pD(
                    t,
                    i.blockerClass,
                    (function(e) {
                        return so([
                            mo(Wr(), e.forceDrop),
                            mo(Xr(), e.drop),
                            mo(Yr(), e.drop),
                            mo(Gr(), function(n, t) {
                                e.move(t.event());
                            }),
                        ]);
                    })(o),
                );
                c.set(on.some(r));
                a(t), mD(t, r);
            }),
            mo(Gr(), function(n, t) {
                t.stop(), CD(n, i, u, p_, t.event());
            }),
            mo(Xr(), function(n, t) {
                t.stop(), kD(n, c.get(), i, u), c.set(on.none());
            }),
            mo(Yr(), function(n) {
                kD(n, c.get(), i, u), c.set(on.none());
            }),
        ];
    }
    function BD(n, r, i, u, t, e) {
        return n.fold(
            function() {
                return S_.snap({
                    sensor: eA(i - 20, u - 20),
                    range: Ru(t, e),
                    output: eA(on.some(i), on.some(u)),
                    extra: { td: r },
                });
            },
            function(n) {
                const t = i - 20;
                var e = u - 20;
                var o = n
                    .element()
                    .dom()
                    .getBoundingClientRect();
                return S_.snap({
                    sensor: eA(t, e),
                    range: Ru(40, 40),
                    output: eA(
                        on.some(i - o.width / 2),
                        on.some(u - o.height / 2),
                    ),
                    extra: { td: r },
                });
            },
        );
    }
    function DD(n, o, r) {
        return {
            getSnapPoints: n,
            leftAttr: 'data-drag-left',
            topAttr: 'data-drag-top',
            onSensor(n, t) {
                let e = t.td;
                !(function(n, t) {
                    return n.exists(function(n) {
                        return jt(n, t);
                    });
                })(o.get(), e) && (o.set(on.some(e)), r(e));
            },
            mustSnap: !0,
        };
    }
    function AD(n) {
        return bm(
            Xg.sketch({
                dom: { tag: 'div', classes: ['tox-selector'] },
                buttonBehaviours: ya([
                    S_.config({
                        mode: 'mouseOrTouch',
                        blockerClass: 'blocker',
                        snaps: n,
                    }),
                    Tw.config({}),
                ]),
                eventOrder: {
                    mousedown: ['dragging', 'alloy.base.behaviour'],
                    touchstart: ['dragging', 'alloy.base.behaviour'],
                },
            }),
        );
    }
    let _D;
    var MD;
    var FD;
    var ID;
    var RD;
    var VD = [
        { title: 'Left', icon: 'align-left', format: 'alignleft' },
        { title: 'Center', icon: 'align-center', format: 'aligncenter' },
        { title: 'Right', icon: 'align-right', format: 'alignright' },
        { title: 'Justify', icon: 'align-justify', format: 'alignjustify' },
    ];
    var ND = [
        '-apple-system',
        'Segoe UI',
        'Roboto',
        'Helvetica Neue',
        'sans-serif',
    ];
    var HD = {
        '8pt': '1',
        '10pt': '2',
        '12pt': '3',
        '14pt': '4',
        '18pt': '5',
        '24pt': '6',
        '36pt': '7',
    };
    var PD = [
        { name: 'history', items: ['undo', 'redo'] },
        { name: 'styles', items: ['styleselect'] },
        { name: 'formatting', items: ['bold', 'italic'] },
        {
            name: 'alignment',
            items: ['alignleft', 'aligncenter', 'alignright', 'alignjustify'],
        },
        { name: 'indentation', items: ['outdent', 'indent'] },
        { name: 'permanent pen', items: ['permanentpen'] },
        { name: 'comments', items: ['addcomment'] },
    ];
    var zD = {
        button: fB($O, function(n, t) {
            return (function(n, t) {
                return GT(n, t, []);
            })(n, t.backstage.shared.providers);
        }),
        togglebutton: fB(ZO, function(n, t) {
            return (function(n, t) {
                return XT(n, t, []);
            })(n, t.backstage.shared.providers);
        }),
        menubutton: fB(QO, function(n, t) {
            return zC(n, 'tox-tbtn', t.backstage, on.none());
        }),
        splitbutton: fB(
            function(n) {
                return tt('SplitButton', wT, n);
            },
            function(n, t) {
                return iE(n, t.backstage.shared);
            },
        ),
        styleSelectButton(n, t) {
                return (function(n, t) {
                    var e = N({ type: 'advanced' }, t.styleselect);
                    return gE(n, t, sB(n, e));
                })(n, t.backstage);
            },
        fontsizeSelectButton: function(n, t) {
            return (function(n, t) {
                return gE(n, t, iB(n));
            })(n, t.backstage);
        },
        fontSelectButton(n, t) {
                return (function(n, t) {
                    return gE(n, t, oB(n));
                })(n, t.backstage);
            },
        formatButton(n, t) {
                return (function(n, t) {
                    return gE(n, t, cB(n));
                })(n, t.backstage);
            },
        alignMenuButton: function(n, t) {
            return (function(n, t) {
                return gE(n, t, tB(n));
            })(n, t.backstage);
        },
    };
    var LD = {
        styleselect: zD.styleSelectButton,
        fontsizeselect: zD.fontsizeSelectButton,
        fontselect: zD.fontSelectButton,
        formatselect: zD.formatButton,
        align: zD.alignMenuButton,
    };
    let jD = {
        valignCentre: [],
        alignCentre: [],
        alignLeft: ['tox-pop--align-left'],
        alignRight: ['tox-pop--align-right'],
        right: ['tox-pop--right'],
        left: ['tox-pop--left'],
        bottom: ['tox-pop--bottom'],
        top: ['tox-pop--top'],
    };
    var UD = { maxHeightFunction: kf(), maxWidthFunction: VE() };
    var WD = {
        onLtr() {
                return [rc, ic, sa, aa, fa, ca, Wg, Gg, hm, gm, vm, pm];
            },
        onRtl() {
                return [rc, ic, fa, ca, sa, aa, Wg, Gg, vm, pm, hm, gm];
            },
    };
    var GD = {
        onLtr() {
                return [ic, aa, ca, sa, fa, rc, Wg, Gg, hm, gm, vm, pm];
            },
        onRtl() {
                return [ic, ca, aa, fa, sa, rc, Wg, Gg, vm, pm, hm, gm];
            },
    };
    var XD = function(u, n, e, a) {
        function c() {
            return sE(u);
        }
        function s() {
            if (l() && a.backstage.isContextMenuOpen()) return !0;
            var n = (function() {
                    let n = g
                            .get()
                            .map(function(n) {
                                return n.getBoundingClientRect();
                            })
                            .getOrThunk(function() {
                                return u.selection
                                    .getRng()
                                    .getBoundingClientRect();
                            });
                            var t = u.inline
                            ? hu().top()
                            : Su(we.fromDom(u.getBody())).y();
                    return { y: n.top + t, bottom: n.bottom + t };
                })();
                    var t = c();
            return !(function(n, t, e, o) {
                return Math.max(n, e) <= Math.min(t, o);
            })(n.y, n.bottom, t.y(), t.bottom());
        }
        function t() {
            Ug.hide(d);
        }
        function o() {
            m.get().each(function(n) {
                var t = d.element();
                Or(t, 'display'),
                    s()
                        ? xr(t, 'display', 'none')
                        : _f.positionWithinBounds(e, n, d, on.some(c()));
            });
        }
        function f(n) {
            return {
                dom: { tag: 'div', classes: ['tox-pop__dialog'] },
                components: [n],
                behaviours: ya([
                    dg.config({ mode: 'acyclic' }),
                    Jd('pop-dialog-wrap-events', [
                        Ri(function(n) {
                            u.shortcuts.add(
                                'ctrl+F9',
                                'focus statusbar',
                                function() {
                                    return dg.focusIn(n);
                                },
                            );
                        }),
                        Vi(function(n) {
                            u.shortcuts.remove('ctrl+F9');
                        }),
                    ]),
                ]),
            };
        }
        var l = Ht().deviceType.isTouch;
                var d = au(
                    (function(n) {
                        var e = ye([]);
                        return Ug.sketch({
                            dom: { tag: 'div', classes: ['tox-pop'] },
                            fireDismissalEventInstead: {
                                event: 'doNotDismissYet',
                            },
                            onShow: function(n) {
                                e.set([]),
                                    Ug.getContent(n).each(function(n) {
                                        Or(n.element(), 'visibility');
                                    }),
                                    mr(n.element(), ZT),
                                    Or(n.element(), 'width');
                            },
                            inlineBehaviours: ya([
                                Jd('context-toolbar-events', [
                                    yo(ui(), function(n, t) {
                                        Ug.getContent(n).each(function(n) {}),
                                            mr(n.element(), ZT),
                                            Or(n.element(), 'width');
                                    }),
                                    mo(QT, function(t, e) {
                                        Or(t.element(), 'width');
                                        var n = gu(t.element());
                                        Ug.setContent(t, e.event().contents()),
                                            lr(t.element(), ZT);
                                        var o = gu(t.element());
                                        xr(t.element(), 'width', n + 'px'),
                                            Ug.getContent(t).each(function(n) {
                                                e.event()
                                                    .focus()
                                                    .bind(function(n) {
                                                        return (
                                                            Sa(n),
                                                            ka(t.element())
                                                        );
                                                    })
                                                    .orThunk(function() {
                                                        return (
                                                            dg.focusIn(n), Ca()
                                                        );
                                                    });
                                            }),
                                            Kg.setTimeout(function() {
                                                xr(
                                                    t.element(),
                                                    'width',
                                                    o + 'px',
                                                );
                                            }, 0);
                                    }),
                                    mo(JT, function(n, t) {
                                        Ug.getContent(n).each(function(n) {
                                            e.set(
                                                e
                                                    .get()
                                                    .concat([
                                                        { bar: n, focus: Ca() },
                                                    ]),
                                            );
                                        }),
                                            io(n, QT, {
                                                contents: t
                                                    .event()
                                                    .forwardContents(),
                                                focus: on.none(),
                                            });
                                    }),
                                    mo($T, function(t, n) {
                                        F(e.get()).each(function(n) {
                                            e.set(
                                                e
                                                    .get()
                                                    .slice(
                                                        0,
                                                        e.get().length - 1,
                                                    ),
                                            ),
                                                io(t, QT, {
                                                    contents: cu(n.bar),
                                                    focus: n.focus,
                                                });
                                        });
                                    }),
                                ]),
                                dg.config({
                                    mode: 'special',
                                    onEscape: function(t) {
                                        return F(e.get()).fold(
                                            function() {
                                                return n.onEscape();
                                            },
                                            function(n) {
                                                return ro(t, $T), on.some(!0);
                                            },
                                        );
                                    },
                                }),
                            ]),
                            lazySink: function() {
                                return an.value(n.sink);
                            },
                        });
                    })({
                        sink: e,
                        onEscape: function() {
                            return u.focus(), on.some(!0);
                        },
                    }),
                );
                var m = ye(on.none());
                var g = ye(on.none());
                var r = ye(null);
                var p = L(function() {
                    return KT(n, function(n) {
                        var t = h(n);
                        io(d, JT, { forwardContents: f(t) });
                    });
                });
                var h = function(n) {
                let t;
                        var e;
                        var o = u.ui.registry.getAll().buttons;
                        var r =
                            qb(u) === Ub.scrolling
                                ? Ub.scrolling
                                : Ub['default'];
                        var i = p();
                return n.type === 'contexttoolbar'
                    ? ((t = An(o, i.formNavigators)),
                      (e = mB(
                          u,
                          { buttons: t, toolbar: n.items },
                          a,
                          on.some(['form:']),
                      )),
                      JO({
                          type: r,
                          uid: Yo('context-toolbar'),
                          initGroups: e,
                          onEscape: on.none,
                          cyclicKeying: !0,
                          backstage: a.backstage,
                          getSink: function() {
                              return an.error('');
                          },
                      }))
                    : YT(r, n, a.backstage);
            };
        u.on('contexttoolbar-show', function(t) {
            var n = p();
            Nn(n.lookupTable, t.toolbarKey).each(function(n) {
                y(n, t.target === u ? on.none() : on.some(t)),
                    Ug.getContent(d).each(dg.focusIn);
            });
        });
        function v(n, t) {
            var e =
                'node' === n
                    ? a.backstage.shared.anchors.node(t)
                    : a.backstage.shared.anchors.cursor();
            return Dn(
                e,
                (function(n, t) {
                    return n === 'line'
                        ? {
                              bubble: Ea(12, 0, jD),
                              layouts: {
                                  onLtr() {
                                          return [la];
                                      },
                                  onRtl() {
                                          return [da];
                                      },
                              },
                              overrides: UD,
                          }
                        : {
                              bubble: Ea(0, 12, jD),
                              layouts: t ? GD : WD,
                              overrides: UD,
                          };
                })(n, l()),
            );
        }
        function i() {
            var n = p();
            qT(n, u).fold(
                function() {
                    m.set(on.none()), Ug.hide(d);
                },
                function(n) {
                    y(n.toolbarApi, on.some(n.elem.dom()));
                },
            );
        }
        function b(n) {
            x(), r.set(n);
        }
        var y = function(n, t) {
                if ((x(), !l() || !a.backstage.isContextMenuOpen())) {
                    var e = h(n);
                            var o = t.map(we.fromDom);
                            var r = v(n.position, o);
                    m.set(on.some(r)), g.set(t);
                    let i = d.element();
                    Or(i, 'display'),
                        Ug.showWithinBounds(d, r, f(e), function() {
                            return on.some(c());
                        }),
                        s() && xr(i, 'display', 'none');
                }
            };
                var x = function() {
                let n = r.get();
                n !== null && (Kg.clearTimeout(n), r.set(null));
            };
        u.on('init', function() {
            u.on(qE, t),
                u.on('ScrollContent ScrollWindow longpress', o),
                u.on(
                    'click keyup SetContent ObjectResized ResizeEditor',
                    function(n) {
                        b(Kg.setEditorTimeout(u, i, 0));
                    },
                ),
                u.on('focusout', function(n) {
                    Kg.setEditorTimeout(
                        u,
                        function() {
                            ka(e.element()).isNone() &&
                                ka(d.element()).isNone() &&
                                (m.set(on.none()), Ug.hide(d));
                        },
                        0,
                    );
                }),
                u.on('SwitchMode', function() {
                    u.readonly && (m.set(on.none()), Ug.hide(d));
                }),
                u.on('NodeChange', function(n) {
                    ka(d.element()).fold(
                        function() {
                            b(Kg.setEditorTimeout(u, i, 0));
                        },
                        function(n) {},
                    );
                });
        });
    };
    let YD = function(n, o, r) {
        function t(t, e) {
            bn([o, r], function(n) {
                n.broadcastEvent(t, e);
            });
        }
        function e(t, e) {
            bn([o, r], function(n) {
                n.broadcastOn([t], e);
            });
        }
        function i(n) {
            return e(jf(), { target: n.target() });
        }
        function u(n) {
            return e(jf(), { target: we.fromDom(n.target) });
        }
        function a(n) {
            0 === n.button && e(Wf(), { target: we.fromDom(n.target) });
        }
        function c(n) {
            return t(Si(), hb(n));
        }
        function s(n) {
            e(Uf(), {}), t(Ci(), hb(n));
        }
        function f() {
            return e(Uf(), {});
        }
        var l = fb(we.fromDom(v.document), 'touchstart', i);
                var d = fb(we.fromDom(v.document), 'touchmove', function(n) {
                    return t(xi(), n);
                });
                var m = fb(we.fromDom(v.document), 'touchend', function(n) {
                    return t(wi(), n);
                });
                var g = fb(we.fromDom(v.document), 'mousedown', i);
                var p = fb(we.fromDom(v.document), 'mouseup', function(n) {
                0 === n.raw().button && e(Wf(), { target: n.target() });
            });
        n.on('PostRender', function() {
            n.on('click', u),
                n.on('tap', u),
                n.on('mouseup', a),
                n.on('ScrollWindow', c),
                n.on('ResizeWindow', s),
                n.on('ResizeEditor', f);
        }),
            n.on('remove', function() {
                n.off('click', u),
                    n.off('tap', u),
                    n.off('mouseup', a),
                    n.off('ScrollWindow', c),
                    n.off('ResizeWindow', s),
                    n.off('ResizeEditor', f),
                    g.unbind(),
                    l.unbind(),
                    d.unbind(),
                    m.unbind(),
                    p.unbind();
            }),
            n.on('detach', function() {
                Ss(o), Ss(r), o.destroy(), r.destroy();
            });
    };
    let qD = Bl;
    let KD = El;
    var JD = nn([
        St('shell', !1),
        ct('makeItem'),
        St('setupItem', Z),
        tl('listBehaviours', [gg]),
    ]);
    let $D = Cl({
        name: 'items',
        overrides: function(n) {
            return { behaviours: ya([gg.config({})]) };
        },
    });
    let QD = nn([$D]);
    var ZD = _l({
        name: nn('CustomList')(),
        configFields: JD(),
        partFields: QD(),
        factory: function(s, n, t, e) {
            var o = s.shell
                    ? { behaviours: [gg.config({})], components: [] }
                    : { behaviours: [], components: n };
                    var r = function(n) {
                    return s.shell ? on.some(n) : Ks(n, s, 'items');
                };
            return {
                uid: s.uid,
                dom: s.dom,
                components: o.components,
                behaviours: Vs(s.listBehaviours, o.behaviours),
                apis: {
                    setItems: function(a, c) {
                        r(a).fold(
                            function() {
                                throw (v.console.error(
                                    'Custom List was defined to not be a shell, but no item container was specified in components',
                                ),
                                new Error(
                                    'Custom List was defined to not be a shell, but no item container was specified in components',
                                ));
                            },
                            function(t) {
                                let n = gg.contents(t);
                                        var e = c.length;
                                        var o = e - n.length;
                                        var r =
                                            0 < o
                                                ? (function(n, t) {
                                                      for (
                                                          var e = [], o = 0;
                                                          o < n;
                                                          o++
                                                      )
                                                          e.push(t(o));
                                                      return e;
                                                  })(o, function() {
                                                      return s.makeItem();
                                                  })
                                                : [];
                                        var i = n.slice(e);
                                bn(i, function(n) {
                                    return gg.remove(t, n);
                                }),
                                    bn(r, function(n) {
                                        return gg.append(t, n);
                                    });
                                var u = gg.contents(t);
                                bn(u, function(n, t) {
                                    s.setupItem(a, n, c[t], t);
                                });
                            },
                        );
                    },
                },
            };
        },
        apis: {
            setItems(n, t, e) {
                    n.setItems(t, e);
                },
        },
    });
    var nA = Tn([
        { offset: ['x', 'y'] },
        { absolute: ['x', 'y'] },
        { fixed: ['x', 'y'] },
    ]);
    var tA = nA.offset;
    var eA = nA.absolute;
    var oA = nA.fixed;
    var rA = Tn([
        { static: [] },
        { absolute: ['x', 'y'] },
        { fixed: ['x', 'y'] },
    ]);
    var iA = function(n, t, e) {
        n.getSystem().isConnected() &&
            (function(e, o, r) {
                let i = o.lazyViewport(e);
                        var n = e.element();
                        var t = ko(n);
                        var u = hu(t);
                        var a = L(function() {
                            return gB(n);
                        });
                        var c = r.isDocked();
                c && FB(e, o, r, i),
                    AB(e, o, i, u, a).each(function(n) {
                        r.setDocked(!c),
                            n.fold(
                                function() {
                                    return _B(e, o);
                                },
                                function(n, t) {
                                    return MB(e, o, 0, a(), eA(n, t));
                                },
                                function(n, t) {
                                    FB(e, o, r, i, !0),
                                        MB(e, o, 0, a(), oA(n, t));
                                },
                            );
                    });
            })(n, t, e);
    };
    let uA = /* */ Object.freeze({
        refresh: iA,
        reset: RB,
        isDocked: function(n, t, e) {
            return e.isDocked();
        },
    });
    let aA = /* */ Object.freeze({
        events: function(o, r) {
            return so([
                yo(ui(), function(t, e) {
                    o.contextual.each(function(n) {
                        gr(t.element(), n.transitionClass) &&
                            (hr(t.element(), [
                                n.transitionClass,
                                n.fadeInClass,
                            ]),
                            (r.isVisible() ? n.onShown : n.onHidden)(t));
                        e.stop();
                    });
                }),
                mo(Si(), function(n, t) {
                    iA(n, o, r);
                }),
                mo(Ci(), function(n, t) {
                    RB(n, o, r);
                }),
            ]);
        },
    });
    let cA = [
        wt('contextual', [
            ft('fadeInClass'),
            ft('fadeOutClass'),
            ft('transitionClass'),
            dt('lazyContext'),
            Ku('onShow'),
            Ku('onShown'),
            Ku('onHide'),
            Ku('onHidden'),
        ]),
        Bt('lazyViewport', Cu),
        ft('leftAttr'),
        ft('topAttr'),
        ft('positionAttr'),
        ((_D = 'modes'),
        (MD = ['top', 'bottom']),
        (FD = ge),
        Ct(_D, MD, Kn(FD))),
        Ku('onDocked'),
        Ku('onUndocked'),
    ];
    var sA = xa({
        fields: cA,
        name: 'docking',
        active: aA,
        apis: uA,
        state: /* */ Object.freeze({
            init: function() {
                let t = ye(!1);
                        var e = ye(!0);
                return tu({
                    isDocked() {
                            return t.get();
                        },
                    setDocked(n) {
                            return t.set(n);
                        },
                    isVisible() {
                            return e.get();
                        },
                    setVisible(n) {
                            return e.set(n);
                        },
                    readState() {
                            return (
                                'docked:  ' + t.get() + ', visible: ' + e.get()
                            );
                        },
                });
            },
        }),
    });
    var fA = {
        fadeInClass: 'tox-editor-dock-fadein',
        fadeOutClass: 'tox-editor-dock-fadeout',
        transitionClass: 'tox-editor-dock-transition',
    };
    var lA = 'tox-tinymce--toolbar-sticky-on';
    var dA = 'tox-tinymce--toolbar-sticky-off';
    var mA = /* */ Object.freeze({
        setup: function(n, t) {
            n.inline ||
                (n.on('ResizeWindow ResizeEditor ResizeContent', function() {
                    t().each(VB);
                }),
                n.on('SkinLoaded', function() {
                    t().each(sA.reset);
                }),
                n.on('FullscreenStateChanged', function() {
                    t().each(sA.refresh);
                })),
                n.on('PostRender', function() {
                    HB(n, !1);
                });
        },
        isDocked(n) {
                return n()
                    .map(sA.isDocked)
                    .getOr(!1);
            },
        getBehaviours: PB,
    });
    let gA = Z;
    var pA = u;
    var hA = nn([]);
    let vA = /* */ Object.freeze({
        setup: gA,
        isDocked: pA,
        getBehaviours: hA,
    });
    let bA = Al({
        factory(t, o) {
                var n = {
                    focus: dg.focusIn,
                    setMenus: function(n, t) {
                        var e = S(t, function(t) {
                            var n = {
                                    type: 'menubutton',
                                    text: t.text,
                                    fetch: function(n) {
                                        n(t.getItems());
                                    },
                                },
                                e = QO(n)
                                    .mapError(function(n) {
                                        return le(n);
                                    })
                                    .getOrDie();
                            return zC(
                                e,
                                'tox-mbtn',
                                o.backstage,
                                on.some('menuitem'),
                            );
                        });
                        gg.set(n, e);
                    },
                };
                return {
                    uid: t.uid,
                    dom: t.dom,
                    components: [],
                    behaviours: ya([
                        gg.config({}),
                        Jd('menubar-events', [
                            Ri(function(n) {
                                t.onSetup(n);
                            }),
                            mo(Qr(), function(e, n) {
                                Ou(e.element(), '.tox-mbtn--active').each(
                                    function(t) {
                                        Eu(
                                            n.event().target(),
                                            '.tox-mbtn',
                                        ).each(function(n) {
                                            jt(t, n) ||
                                                e
                                                    .getSystem()
                                                    .getByDom(t)
                                                    .each(function(t) {
                                                        e.getSystem()
                                                            .getByDom(n)
                                                            .each(function(n) {
                                                                Ew.expand(n),
                                                                    Ew.close(t),
                                                                    bg.focus(n);
                                                            });
                                                    });
                                        });
                                    },
                                );
                            }),
                            mo(Bi(), function(e, n) {
                                n.event()
                                    .prevFocus()
                                    .bind(function(n) {
                                        return e
                                            .getSystem()
                                            .getByDom(n)
                                            .toOption();
                                    })
                                    .each(function(t) {
                                        n.event()
                                            .newFocus()
                                            .bind(function(n) {
                                                return e
                                                    .getSystem()
                                                    .getByDom(n)
                                                    .toOption();
                                            })
                                            .each(function(n) {
                                                Ew.isOpen(t) &&
                                                    (Ew.expand(n), Ew.close(t));
                                            });
                                    });
                            }),
                        ]),
                        dg.config({
                            mode: 'flow',
                            selector: '.tox-mbtn',
                            onEscape: function(n) {
                                return t.onEscape(n), on.some(!0);
                            },
                        }),
                        Xy.config({}),
                    ]),
                    apis: n,
                    domModification: { attributes: { role: 'menubar' } },
                };
            },
        name: 'silver.Menubar',
        configFields: [
            ct('dom'),
            ct('uid'),
            ct('onEscape'),
            ct('backstage'),
            St('onSetup', Z),
        ],
        apis: {
            focus(n, t) {
                    n.focus(t);
                },
            setMenus(n, t, e) {
                    n.setMenus(t, e);
                },
        },
    });
    let yA = 'container';
    var xA = [Is('slotBehaviours', [])];
    var wA = function(r, n, t) {
        function e(n) {
            return Zs(r);
        }
        function o(e, o) {
            return (
                void 0 === o && (o = undefined),
                function(n, t) {
                    return Ks(n, r, t)
                        .map(function(n) {
                            return e(n, t);
                        })
                        .getOr(o);
                }
            );
        }
        function i(n, t) {
            return Lo(n.element(), 'aria-hidden') !== 'true';
        }
        var u;
                var a = o(i, !1);
                var c = o(function(n, t) {
                    if (i(n)) {
                        var e = n.element();
                        xr(e, 'display', 'none'),
                            zo(e, 'aria-hidden', 'true'),
                            io(n, Di(), { name: t, visible: !1 });
                    }
                });
                var s =
                    ((u = c),
                    function(t, n) {
                        bn(n, function(n) {
                            return u(t, n);
                        });
                    });
                var f = o(function(n, t) {
                    if (!i(n)) {
                        var e = n.element();
                        Or(e, 'display'),
                            Uo(e, 'aria-hidden'),
                            io(n, Di(), { name: t, visible: !0 });
                    }
                });
                var l = {
                getSlotNames: e,
                getSlot: function(n, t) {
                    return Ks(n, r, t);
                },
                isShowing: a,
                hideSlot: c,
                hideAllSlots: function(n) {
                    return s(n, e());
                },
                showSlot: f,
            };
        return {
            uid: r.uid,
            dom: r.dom,
            components: n,
            behaviours: Rs(r.slotBehaviours),
            apis: l,
        };
    };
    let SA = P(
        {
            getSlotNames: function(n, t) {
                return n.getSlotNames(t);
            },
            getSlot: function(n, t, e) {
                return n.getSlot(t, e);
            },
            isShowing(n, t, e) {
                    return n.isShowing(t, e);
                },
            hideSlot(n, t, e) {
                    return n.hideSlot(t, e);
                },
            hideAllSlots(n, t) {
                    return n.hideAllSlots(t);
                },
            showSlot(n, t, e) {
                    return n.showSlot(t, e);
                },
        },
        Qo,
    );
    var CA = N({ ...SA}, {
        sketch(n) {
                var e,
                    t =
                        ((e = []),
                        {
                            slot: function(n, t) {
                                return e.push(n), Ws(yA, zB(n), t);
                            },
                            record: function() {
                                return e;
                            },
                        }),
                    o = n(t),
                    r = t.record(),
                    i = S(r, function(n) {
                        return wl({ name: n, pname: zB(n) });
                    });
                return rf(yA, xA, i, wA, o);
            },
    });
    var kA = re([
        yt('icon'),
        yt('tooltip'),
        Bt('onShow', Z),
        Bt('onHide', Z),
        Bt('onSetup', function() {
            return Z;
        }),
    ]);
    var OA = Yo('FixSizeEvent');
    var EA = Yo('AutoSizeEvent');
    var TA = KD.optional({
        factory: bA,
        name: 'menubar',
        schema: [ct('backstage')],
    });
    let BA = KD.optional({
        factory: {
            sketch: function(n) {
                return ZD.sketch({
                    uid: n.uid,
                    dom: n.dom,
                    listBehaviours: ya([
                        dg.config({
                            mode: 'acyclic',
                            selector: '.tox-toolbar',
                        }),
                    ]),
                    makeItem() {
                            return JO({
                                type: n.split,
                                uid: Yo('multiple-toolbar-item'),
                                backstage: n.backstage,
                                cyclicKeying: !1,
                                getSink: n.getSink,
                                initGroups: [],
                                onEscape: function() {
                                    return on.none();
                                },
                            });
                        },
                    setupItem: function(n, t, e, o) {
                        $E.setGroups(t, e);
                    },
                    shell: !0,
                });
            },
        },
        name: 'multiple-toolbar',
        schema: [ct('dom'), ct('onEscape')],
    });
    let DA = KD.optional({
        factory: {
            sketch: function(n) {
                return (function(n) {
                    return n.split === Ub.sliding
                        ? KO
                        : n.split === Ub.floating
                        ? qO
                        : JO;
                })(n)({
                    type: n.split,
                    uid: n.uid,
                    onEscape: function() {
                        return n.onEscape(), on.some(!0);
                    },
                    cyclicKeying: !1,
                    initGroups: [],
                    getSink: n.getSink,
                    backstage: n.backstage,
                    moreDrawerData: {
                        lazyToolbar: n.lazyToolbar,
                        lazyMoreButton: n.lazyMoreButton,
                        lazyHeader: n.lazyHeader,
                    },
                });
            },
        },
        name: 'toolbar',
        schema: [ct('dom'), ct('onEscape'), ct('getSink')],
    });
    var AA = KD.optional({
        factory: {
            sketch: function(n) {
                var t = n.editor;
                        var e = n.sticky ? PB : hA;
                return {
                    uid: n.uid,
                    dom: n.dom,
                    components: n.components,
                    behaviours: ya(e(t, n.getSink)),
                };
            },
        },
        name: 'header',
        schema: [ct('dom')],
    });
    let _A = KD.optional({ name: 'socket', schema: [ct('dom')] });
    let MA = KD.optional({
        factory: {
            sketch(n) {
                    return {
                        uid: n.uid,
                        dom: {
                            tag: 'div',
                            classes: ['tox-sidebar'],
                            attributes: { role: 'complementary' },
                        },
                        components: [
                            {
                                dom: {
                                    tag: 'div',
                                    classes: ['tox-sidebar__slider'],
                                },
                                components: [],
                                behaviours: ya([
                                    Xy.config({}),
                                    bg.config({}),
                                    sT.config({
                                        dimension: { property: 'width' },
                                        closedClass:
                                            'tox-sidebar--sliding-closed',
                                        openClass: 'tox-sidebar--sliding-open',
                                        shrinkingClass:
                                            'tox-sidebar--sliding-shrinking',
                                        growingClass:
                                            'tox-sidebar--sliding-growing',
                                        onShrunk: function(n) {
                                            nd
                                                .getCurrent(n)
                                                .each(CA.hideAllSlots),
                                                ro(n, EA);
                                        },
                                        onGrown: function(n) {
                                            ro(n, EA);
                                        },
                                        onStartGrow: function(n) {
                                            io(n, OA, {
                                                width: Cr(
                                                    n.element(),
                                                    'width',
                                                ).getOr(''),
                                            });
                                        },
                                        onStartShrink: function(n) {
                                            io(n, OA, {
                                                width: gu(n.element()) + 'px',
                                            });
                                        },
                                    }),
                                    gg.config({}),
                                    nd.config({
                                        find: function(n) {
                                            var t = gg.contents(n);
                                            return yn(t);
                                        },
                                    }),
                                ]),
                            },
                        ],
                        behaviours: ya([
                            CS(0),
                            Jd('sidebar-sliding-events', [
                                mo(OA, function(n, t) {
                                    xr(n.element(), 'width', t.event().width());
                                }),
                                mo(EA, function(n, t) {
                                    Or(n.element(), 'width');
                                }),
                            ]),
                        ]),
                    };
                },
        },
        name: 'sidebar',
        schema: [ct('dom')],
    });
    let FA = KD.optional({
        factory: {
            sketch(n) {
                    return {
                        uid: n.uid,
                        dom: {
                            tag: 'div',
                            attributes: { 'aria-hidden': 'true' },
                            classes: ['tox-throbber'],
                            styles: { display: 'none' },
                        },
                        behaviours: ya([gg.config({})]),
                        components: [],
                    };
                },
        },
        name: 'throbber',
        schema: [ct('dom')],
    });
    var IA = _l({
        name: 'OuterContainer',
        factory(e, n, t) {
                var o = {
                    getSocket: function(n) {
                        return qD.getPart(n, e, 'socket');
                    },
                    setSidebar: function(n, t) {
                        qD.getPart(n, e, 'sidebar').each(function(n) {
                            return UB(n, t);
                        });
                    },
                    toggleSidebar: function(n, t) {
                        qD.getPart(n, e, 'sidebar').each(function(n) {
                            return (function(n, e) {
                                nd.getCurrent(n).each(function(t) {
                                    nd.getCurrent(t).each(function(n) {
                                        sT.hasGrown(t)
                                            ? CA.isShowing(n, e)
                                                ? sT.shrink(t)
                                                : (CA.hideAllSlots(n),
                                                  CA.showSlot(n, e))
                                            : (CA.hideAllSlots(n),
                                              CA.showSlot(n, e),
                                              sT.grow(t));
                                    });
                                });
                            })(n, t);
                        });
                    },
                    whichSidebar: function(n) {
                        return qD
                            .getPart(n, e, 'sidebar')
                            .bind(WB)
                            .getOrNull();
                    },
                    getHeader: function(n) {
                        return qD.getPart(n, e, 'header');
                    },
                    getToolbar: function(n) {
                        return qD.getPart(n, e, 'toolbar');
                    },
                    setToolbar: function(n, t) {
                        qD.getPart(n, e, 'toolbar').each(function(n) {
                            n.getApis().setGroups(n, t);
                        });
                    },
                    setToolbars: function(n, t) {
                        qD.getPart(n, e, 'multiple-toolbar').each(function(n) {
                            ZD.setItems(n, t);
                        });
                    },
                    refreshToolbar: function(n) {
                        qD.getPart(n, e, 'toolbar').each(function(n) {
                            return n.getApis().refresh(n);
                        });
                    },
                    getMoreButton: function(n) {
                        return qD.getPart(n, e, 'toolbar').bind(function(n) {
                            return n.getApis().getMoreButton(n);
                        });
                    },
                    getThrobber: function(n) {
                        return qD.getPart(n, e, 'throbber');
                    },
                    focusToolbar: function(n) {
                        qD.getPart(n, e, 'toolbar')
                            .orThunk(function() {
                                return qD.getPart(n, e, 'multiple-toolbar');
                            })
                            .each(function(n) {
                                dg.focusIn(n);
                            });
                    },
                    setMenubar: function(n, t) {
                        qD.getPart(n, e, 'menubar').each(function(n) {
                            bA.setMenus(n, t);
                        });
                    },
                    focusMenubar: function(n) {
                        qD.getPart(n, e, 'menubar').each(function(n) {
                            bA.focus(n);
                        });
                    },
                };
                return {
                    uid: e.uid,
                    dom: e.dom,
                    components: n,
                    apis: o,
                    behaviours: e.behaviours,
                };
            },
        configFields: [ct('dom'), ct('behaviours')],
        partFields: [AA, TA, DA, BA, _A, MA, FA],
        apis: {
            getSocket(n, t) {
                    return n.getSocket(t);
                },
            setSidebar(n, t, e) {
                    n.setSidebar(t, e);
                },
            toggleSidebar(n, t, e) {
                    n.toggleSidebar(t, e);
                },
            whichSidebar: function(n, t) {
                return n.whichSidebar(t);
            },
            getHeader: function(n, t) {
                return n.getHeader(t);
            },
            getToolbar: function(n, t) {
                return n.getToolbar(t);
            },
            setToolbar: function(n, t, e) {
                var o = S(e, function(n) {
                    return GO(n);
                });
                n.setToolbar(t, o);
            },
            setToolbars(n, t, e) {
                    var o = S(e, function(n) {
                        return S(n, GO);
                    });
                    n.setToolbars(t, o);
                },
            getMoreButton: function(n, t) {
                return n.getMoreButton(t);
            },
            refreshToolbar: function(n, t) {
                return n.refreshToolbar(t);
            },
            getThrobber: function(n, t) {
                return n.getThrobber(t);
            },
            setMenubar: function(n, t, e) {
                n.setMenubar(t, e);
            },
            focusMenubar: function(n, t) {
                n.focusMenubar(t);
            },
            focusToolbar: function(n, t) {
                n.focusToolbar(t);
            },
        },
    });
    var RA = {
        file: {
            title: 'File',
            items:
                'newdocument restoredraft | preview | print | deleteallconversations',
        },
        edit: {
            title: 'Edit',
            items:
                'undo redo | cut copy paste pastetext | selectall | searchreplace',
        },
        view: {
            title: 'View',
            items:
                'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments',
        },
        insert: {
            title: 'Insert',
            items:
                'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime',
        },
        format: {
            title: 'Format',
            items:
                'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat',
        },
        tools: {
            title: 'Tools',
            items:
                'spellchecker spellcheckerlanguage | a11ycheck code wordcount',
        },
        table: {
            title: 'Table',
            items:
                'inserttable | cell row column | advtablesort | tableprops deletetable',
        },
        help: { title: 'Help', items: 'help' },
    };
    var VA = function(n) {
        function t() {
            (n._skinLoaded = !0), Hv(n);
        }
        return function() {
            n.initialized ? t() : n.on('init', t);
        };
    };
    let NA = d(qB, !1);
    var HA = d(qB, !0);
    var PA = Vh.DOM;
    let zA = Ht();
    var LA = zA.os.isiOS() && zA.os.version.major <= 12;
    var jA = {
        render(e, o, n, t, r) {
                var i = ye(0);
                NA(e),
                    (function(n, t) {
                        Rf(n, t, Mo);
                    })(we.fromDom(r.targetNode), o.mothership),
                    ws(Lr(), o.uiMothership),
                    e.on('PostRender', function() {
                        KB(e, o, n, t),
                            i.set(e.getWin().innerWidth),
                            IA.setMenubar(o.outerContainer, YB(e, n)),
                            IA.setSidebar(o.outerContainer, n.sidebar),
                            (function(r) {
                                function n(n) {
                                    var t = r.getDoc().documentElement,
                                        e = u.get(),
                                        o = a.get();
                                    e.left() !== i.innerWidth ||
                                    e.top() !== i.innerHeight
                                        ? (u.set(
                                              Ru(i.innerWidth, i.innerHeight),
                                          ),
                                          Lv(r, n))
                                        : (o.left() === t.offsetWidth &&
                                              o.top() === t.offsetHeight) ||
                                          (a.set(
                                              Ru(t.offsetWidth, t.offsetHeight),
                                          ),
                                          Lv(r, n));
                                }
                                function t(n) {
                                    return zv(r, n);
                                }
                                var i = r.getWin(),
                                    e = r.getDoc().documentElement,
                                    u = ye(Ru(i.innerWidth, i.innerHeight)),
                                    a = ye(Ru(e.offsetWidth, e.offsetHeight));
                                PA.bind(i, 'resize', n),
                                    PA.bind(i, 'scroll', t);
                                var o = lb(we.fromDom(r.getBody()), 'load', n);
                                r.on('remove', function() {
                                    o.unbind(),
                                        PA.unbind(i, 'resize', n),
                                        PA.unbind(i, 'scroll', t);
                                });
                            })(e);
                    });
                var u = IA.getSocket(o.outerContainer).getOrDie(
                    'Could not find expected socket element',
                );
                if (!0 === LA) {
                    wr(u.element(), {
                        overflow: 'scroll',
                        '-webkit-overflow-scrolling': 'touch',
                    });
                    var a = (function(e, o) {
                        var r = null;
                        return {
                            cancel: function() {
                                null !== r && (v.clearTimeout(r), (r = null));
                            },
                            throttle: function() {
                                for (
                                    var n = [], t = 0;
                                    t < arguments.length;
                                    t++
                                )
                                    n[t] = arguments[t];
                                null === r &&
                                    (r = v.setTimeout(function() {
                                        e.apply(null, n), (r = null);
                                    }, o));
                            },
                        };
                    })(function() {
                        e.fire('ScrollContent');
                    }, 20);
                    fb(u.element(), 'scroll', a.throttle);
                }
                jO(e, o),
                    e.addCommand('ToggleSidebar', function(n, t) {
                        IA.toggleSidebar(o.outerContainer, t),
                            e.fire('ToggleSidebar');
                    }),
                    e.addQueryValueHandler('ToggleSidebar', function() {
                        return IA.whichSidebar(o.outerContainer);
                    });
                var c = qb(e);
                return (
                    (c !== Ub.sliding && c !== Ub.floating) ||
                        e.on(
                            'ResizeWindow ResizeEditor ResizeContent',
                            function() {
                                var n = e.getWin().innerWidth;
                                n !== i.get() &&
                                    (IA.refreshToolbar(o.outerContainer),
                                    i.set(n));
                            },
                        ),
                    {
                        iframeContainer: u.element().dom(),
                        editorContainer: o.outerContainer.element().dom(),
                    }
                );
            },
    };
    var UA = function(t, n, e) {
        var o = n.filter(function(n) {
                return t < n;
            });
                var r = e.filter(function(n) {
                return n < t;
            });
        return o.or(r).getOr(t);
    };
    var WA = function(n) {
        return /^[0-9\.]+(|px)$/i.test(`${  n}`)
            ? on.some(parseInt(`${  n}`, 10))
            : on.none();
    };
    var GA = function(n) {
        return mn(n) ? `${n  }px` : n;
    };
    var XA = {
        render(t, i, e, o, n) {
                var u,
                    r = Vh.DOM,
                    a = Jb(t),
                    c = Qb(t),
                    s = we.fromDom(n.targetNode),
                    f = Hb(t).or($B(t)),
                    l = qb(t),
                    d = l === Ub.sliding || l === Ub.floating;
                HA(t);
                function m(n) {
                    void 0 === n && (n = !1),
                        d && IA.refreshToolbar(i.outerContainer),
                        a ||
                            (function(n) {
                                var t = d
                                        ? n.fold(
                                              function() {
                                                  return 0;
                                              },
                                              function(n) {
                                                  return 1 <
                                                      n.components().length
                                                      ? fu(
                                                            n
                                                                .components()[1]
                                                                .element(),
                                                        )
                                                      : 0;
                                              },
                                          )
                                        : 0,
                                    e = mu(s),
                                    o = e.top() - fu(u.element()) + t;
                                wr(i.outerContainer.element(), {
                                    position: 'absolute',
                                    top: Math.round(o) + 'px',
                                    left: Math.round(e.left()) + 'px',
                                });
                                var r = f.getOrThunk(function() {
                                    var n = WA(Sr(Lr(), 'margin-left')).getOr(
                                        0,
                                    );
                                    return gu(Lr()) - e.left() + n;
                                });
                                xr(u.element(), 'max-width', r + 'px');
                            })(IA.getToolbar(i.outerContainer)),
                        c && (n ? sA.reset(u) : sA.refresh(u));
                }
                function g() {
                    xr(i.outerContainer.element(), 'display', 'flex'),
                        r.addClass(t.getBody(), 'mce-edit-focus'),
                        Or(i.uiMothership.element(), 'display'),
                        m();
                }
                function p() {
                    i.outerContainer &&
                        (xr(i.outerContainer.element(), 'display', 'none'),
                        r.removeClass(t.getBody(), 'mce-edit-focus')),
                        xr(i.uiMothership.element(), 'display', 'none');
                }
                function h() {
                    if (u) g();
                    else {
                        u = IA.getHeader(i.outerContainer).getOrDie();
                        var n = (function(n) {
                            return Kb(n).getOr(Lr());
                        })(t);
                        ws(n, i.mothership),
                            ws(n, i.uiMothership),
                            KB(t, i, e, o),
                            IA.setMenubar(i.outerContainer, YB(t, e)),
                            g(),
                            t.on('activate', g),
                            t.on('deactivate', p),
                            t.on(
                                'NodeChange SkinLoaded ResizeWindow',
                                function() {
                                    t.hidden || m(!0);
                                },
                            ),
                            t.nodeChanged();
                    }
                }
                return (
                    t.on('focus', h),
                    t.on('blur hide', p),
                    t.on('init', function() {
                        t.hasFocus() && h();
                    }),
                    jO(t, i),
                    { editorContainer: i.outerContainer.element().dom() }
                );
            },
    };
    let YA = function(t) {
        xk.each(
            [
                {
                    name: 'alignleft',
                    text: 'Align left',
                    cmd: 'JustifyLeft',
                    icon: 'align-left',
                },
                {
                    name: 'aligncenter',
                    text: 'Align center',
                    cmd: 'JustifyCenter',
                    icon: 'align-center',
                },
                {
                    name: 'alignright',
                    text: 'Align right',
                    cmd: 'JustifyRight',
                    icon: 'align-right',
                },
                {
                    name: 'alignjustify',
                    text: 'Justify',
                    cmd: 'JustifyFull',
                    icon: 'align-justify',
                },
            ],
            function(n) {
                t.ui.registry.addToggleButton(n.name, {
                    tooltip: n.text,
                    onAction() {
                            return t.execCommand(n.cmd);
                        },
                    icon: n.icon,
                    onSetup: lE(t, n.name),
                });
            },
        );
        var n = 'alignnone';
                var e = 'No alignment';
                var o = 'JustifyNone';
                var r = 'align-none';
        t.ui.registry.addButton(n, {
            tooltip: e,
            onAction() {
                    return t.execCommand(o);
                },
            icon: r,
        });
    };
    let qA = function(n) {
        ZB(n),
            (function(t) {
                xk.each(
                    [
                        {
                            name: 'bold',
                            text: 'Bold',
                            action: 'Bold',
                            icon: 'bold',
                            shortcut: 'Meta+B',
                        },
                        {
                            name: 'italic',
                            text: 'Italic',
                            action: 'Italic',
                            icon: 'italic',
                            shortcut: 'Meta+I',
                        },
                        {
                            name: 'underline',
                            text: 'Underline',
                            action: 'Underline',
                            icon: 'underline',
                            shortcut: 'Meta+U',
                        },
                        {
                            name: 'strikethrough',
                            text: 'Strikethrough',
                            action: 'Strikethrough',
                            icon: 'strike-through',
                            shortcut: '',
                        },
                        {
                            name: 'subscript',
                            text: 'Subscript',
                            action: 'Subscript',
                            icon: 'subscript',
                            shortcut: '',
                        },
                        {
                            name: 'superscript',
                            text: 'Superscript',
                            action: 'Superscript',
                            icon: 'superscript',
                            shortcut: '',
                        },
                        {
                            name: 'removeformat',
                            text: 'Clear formatting',
                            action: 'RemoveFormat',
                            icon: 'remove-formatting',
                            shortcut: '',
                        },
                        {
                            name: 'newdocument',
                            text: 'New document',
                            action: 'mceNewDocument',
                            icon: 'new-document',
                            shortcut: '',
                        },
                        {
                            name: 'cut',
                            text: 'Cut',
                            action: 'Cut',
                            icon: 'cut',
                            shortcut: 'Meta+X',
                        },
                        {
                            name: 'copy',
                            text: 'Copy',
                            action: 'Copy',
                            icon: 'copy',
                            shortcut: 'Meta+C',
                        },
                        {
                            name: 'paste',
                            text: 'Paste',
                            action: 'Paste',
                            icon: 'paste',
                            shortcut: 'Meta+V',
                        },
                        {
                            name: 'selectall',
                            text: 'Select all',
                            action: 'SelectAll',
                            icon: 'select-all',
                            shortcut: 'Meta+A',
                        },
                    ],
                    function(n) {
                        t.ui.registry.addMenuItem(n.name, {
                            text: n.text,
                            icon: n.icon,
                            shortcut: n.shortcut,
                            onAction() {
                                    return t.execCommand(n.action);
                                },
                        });
                    },
                ),
                    t.ui.registry.addMenuItem('codeformat', {
                        text: 'Code',
                        icon: 'sourcecode',
                        onAction: QB(t, 'code'),
                    });
            })(n);
    };
    var KA = function(n) {
        !(function(t) {
            t.ui.registry.addMenuItem('undo', {
                text: 'Undo',
                icon: 'undo',
                shortcut: 'Meta+Z',
                onSetup: function(n) {
                    return nD(n, t, 'hasUndo');
                },
                onAction: function() {
                    return t.execCommand('undo');
                },
            }),
                t.ui.registry.addMenuItem('redo', {
                    text: 'Redo',
                    icon: 'redo',
                    shortcut: 'Meta+Y',
                    onSetup(n) {
                            return nD(n, t, 'hasRedo');
                        },
                    onAction: function() {
                        return t.execCommand('redo');
                    },
                });
        })(n),
            (function(t) {
                t.ui.registry.addButton('undo', {
                    tooltip: 'Undo',
                    icon: 'undo',
                    onSetup: function(n) {
                        return nD(n, t, 'hasUndo');
                    },
                    onAction: function() {
                        return t.execCommand('undo');
                    },
                }),
                    t.ui.registry.addButton('redo', {
                        tooltip: 'Redo',
                        icon: 'redo',
                        onSetup(n) {
                                return nD(n, t, 'hasRedo');
                            },
                        onAction() {
                                return t.execCommand('redo');
                            },
                    });
            })(n);
    };
    let JA = function(n) {
        !(function(n) {
            n.ui.registry.addButton('visualaid', {
                tooltip: 'Visual aids',
                text: 'Visual aids',
                onAction() {
                        return n.execCommand('mceToggleVisualAid');
                    },
            });
        })(n),
            (function(t) {
                t.ui.registry.addToggleMenuItem('visualaid', {
                    text: 'Visual aids',
                    onSetup: function(n) {
                        return (function(t, n) {
                            t.setActive(n.hasVisual);
                            function e(n) {
                                t.setActive(n.hasVisual);
                            }
                            return (
                                n.on('VisualAid', e),
                                function() {
                                    return n.off('VisualAid', e);
                                }
                            );
                        })(n, t);
                    },
                    onAction: function() {
                        t.execCommand('mceToggleVisualAid');
                    },
                });
            })(n);
    };
    var $A = function(n) {
        !(function(t) {
            t.ui.registry.addButton('outdent', {
                tooltip: 'Decrease indent',
                icon: 'outdent',
                onSetup(n) {
                        return (function(n, t) {
                            n.setDisabled(!t.queryCommandState('outdent'));
                            function e() {
                                n.setDisabled(!t.queryCommandState('outdent'));
                            }
                            return (
                                t.on('NodeChange', e),
                                function() {
                                    return t.off('NodeChange', e);
                                }
                            );
                        })(n, t);
                    },
                onAction: function() {
                    return t.execCommand('outdent');
                },
            }),
                t.ui.registry.addButton('indent', {
                    tooltip: 'Increase indent',
                    icon: 'indent',
                    onAction: function() {
                        return t.execCommand('indent');
                    },
                });
        })(n);
    };
    var QA = function(n, t) {
        !(function(n, t) {
            let e = mE(0, t, tB(n));
            n.ui.registry.addNestedMenuItem('align', {
                text: t.shared.providers.translate('Align'),
                getSubmenuItems: function() {
                    return e.items.validateItems(e.getStyleItems());
                },
            });
        })(n, t),
            (function(n, t) {
                var e = mE(0, t, oB(n));
                n.ui.registry.addNestedMenuItem('fontformats', {
                    text: t.shared.providers.translate('Fonts'),
                    getSubmenuItems: function() {
                        return e.items.validateItems(e.getStyleItems());
                    },
                });
            })(n, t),
            (function(n, t) {
                var e = {type: 'advanced', ...t.styleselect},
                    o = mE(0, t, sB(n, e));
                n.ui.registry.addNestedMenuItem('formats', {
                    text: 'Formats',
                    getSubmenuItems() {
                            return o.items.validateItems(o.getStyleItems());
                        },
                });
            })(n, t),
            (function(n, t) {
                var e = mE(0, t, cB(n));
                n.ui.registry.addNestedMenuItem('blockformats', {
                    text: 'Blocks',
                    getSubmenuItems: function() {
                        return e.items.validateItems(e.getStyleItems());
                    },
                });
            })(n, t),
            (function(n, t) {
                var e = mE(0, t, iB(n));
                n.ui.registry.addNestedMenuItem('fontsizes', {
                    text: 'Font sizes',
                    getSubmenuItems: function() {
                        return e.items.validateItems(e.getStyleItems());
                    },
                });
            })(n, t);
    };
    var ZA = function(n, t) {
        YA(n), qA(n), QA(n, t), KA(n), Wv.register(n), JA(n), $A(n);
    };
    var n_ = function(n) {
        return {
            anchor: 'selection',
            root: we.fromDom(n.selection.getNode()),
        };
    };
    var t_ = {
        onLtr() {
                return [ic, aa, ca, sa, fa, rc, Wg, Gg, hm, gm, vm, pm];
            },
        onRtl() {
                return [ic, ca, aa, fa, sa, rc, Wg, Gg, vm, pm, hm, gm];
            },
    };
    var e_ = {
        valignCentre: [],
        alignCentre: [],
        alignLeft: ['tox-pop--align-left'],
        alignRight: ['tox-pop--align-right'],
        right: ['tox-pop--right'],
        left: ['tox-pop--left'],
        bottom: ['tox-pop--bottom'],
        top: ['tox-pop--top'],
    };
    var o_ = function(n) {
        return n.settings.contextmenu_never_use_native || !1;
    };
    var r_ = function(n) {
        return (function(n, t, e) {
            var o = n.ui.registry.getAll().contextMenus;
            return V(n.settings, t)
                .map(sD)
                .getOrThunk(function() {
                    return C(sD(e), function(n) {
                        return En(o, n);
                    });
                });
        })(
            n,
            'contextmenu',
            'link linkchecker image imagetools table spellchecker configurepermanentpen',
        );
    };
    var i_ = function(n) {
        return !1 === n.getParam('contextmenu');
    };
    var u_ = { type: 'separator' };
    var a_ = function(t) {
        if (cn(t)) return t;
        switch (t.type) {
            case 'separator':
                return u_;
            case 'submenu':
                return {
                    type: 'nestedmenuitem',
                    text: t.text,
                    icon: t.icon,
                    getSubmenuItems: function() {
                        var n = t.getSubmenuItems();
                        return cn(n) ? n : S(n, a_);
                    },
                };
            default:
                return {
                    type: 'menuitem',
                    text: t.text,
                    icon: t.icon,
                    onAction: (function(n) {
                        return function() {
                            return n();
                        };
                    })(t.onAction),
                };
        }
    };
    var c_ = 'data-initial-z-index';
    var s_ = wt('snaps', [
        ct('getSnapPoints'),
        Ku('onSensor'),
        ct('leftAttr'),
        ct('topAttr'),
        St('lazyViewport', Cu),
        St('mustSnap', !1),
    ]);
    var f_ = [
        St('useFixed', u),
        ct('blockerClass'),
        St('getTarget', l),
        St('onDrag', Z),
        St('repositionTarget', !0),
        St('onDrop', Z),
        Bt('getBounds', Cu),
        s_,
    ];
    var l_ = function(n, t, r, i, u) {
        var e = t.getSnapPoints(n);
        return yD(e, r, i, u).orThunk(function() {
            return O(
                e,
                function(t, e) {
                    let n = e.sensor();
                            var o = (function(n, t, e, o, r, i) {
                            var u = yB(n, r, i);
                                    var a = yB(t, r, i);
                                    var c = Math.abs(u.left() - a.left());
                                    var s = Math.abs(u.top() - a.top());
                            return Ru(c, s);
                        })(r, n, e.range().left(), e.range().top(), i, u);
                    return t.deltas.fold(
                        function() {
                            return { deltas: on.some(o), snap: on.some(e) };
                        },
                        function(n) {
                            return (o.left() + o.top()) / 2 <=
                                (n.left() + n.top()) / 2
                                ? { deltas: on.some(o), snap: on.some(e) }
                                : t;
                        },
                    );
                },
                { deltas: on.none(), snap: on.none() },
            ).snap.map(function(n) {
                return {
                    output: nn(SB(n.output(), r, i, u)),
                    extra: n.extra,
                };
            });
        });
    };
    var d_ = function(n, t, e, o, r) {
        var i = t.getSnapPoints(n);
        return yD(i, e, o, r);
    };
    var m_ = /* */ Object.freeze({
        getData(n) {
                return on.from(Ru(n.x(), n.y()));
            },
        getDelta(n, t) {
                return Ru(t.left() - n.left(), t.top() - n.top());
            },
    });
    let g_ = g(f_, [Zu('dragger', { handlers: OD(ED) })]);
    var p_ = /* */ Object.freeze({
        getData: function(n) {
            let t = n.raw().touches;
            return t.length === 1
                ? (function(n) {
                      let t = n[0];
                      return on.some(Ru(t.clientX, t.clientY));
                  })(t)
                : on.none();
        },
        getDelta: function(n, t) {
            return Ru(t.left() - n.left(), t.top() - n.top());
        },
    });
    var h_ = g_;
    let v_ = g(f_, [Zu('dragger', { handlers: OD(TD) })]);
    var b_ = g(f_, [
        Zu('dragger', {
            handlers: OD(function(n, t, e) {
                return g(ED(n, t, e), TD(n, t, e));
            }),
        }),
    ]);
    let y_ = /* */ Object.freeze({ mouse: h_, touch: v_, mouseOrTouch: b_ });
    var x_ = /* */ Object.freeze({
        init() {
                var o = on.none(),
                    t = on.none(),
                    n = nn({});
                return tu({
                    readState: n,
                    reset: function() {
                        (o = on.none()), (t = on.none());
                    },
                    update: function(t, n) {
                        return t.getData(n).bind(function(n) {
                            return (function(t, e) {
                                var n = o.map(function(n) {
                                    return t.getDelta(n, e);
                                });
                                return (o = on.some(e)), n;
                            })(t, n);
                        });
                    },
                    getStartData: function() {
                        return t;
                    },
                    setStartData: function(n) {
                        t = on.some(n);
                    },
                });
            },
    });
    let w_ = /* */ Object.freeze({
        snapTo: function(n, t, e, o) {
            let r = t.getTarget(n.element());
            if (t.repositionTarget) {
                var i = ko(n.element());
                        var u = hu(i);
                        var a = gB(r);
                        var c = (function(n, t, e) {
                            return {
                                coord: SB(n.output(), n.output(), t, e),
                                extra: n.extra(),
                            };
                        })(o, u, a);
                        var s = wB(c.coord, 0, a);
                wr(r, s);
            }
        },
    });
    var S_ = wa({
        branchKey: 'mode',
        branches: y_,
        name: 'dragging',
        active: {
            events(n, t) {
                    return n.dragger.handlers(n, t);
                },
        },
        extra: { snap: Co(['sensor', 'range', 'output'], ['extra']) },
        state: x_,
        apis: w_,
    });
    let C_ = Ht();
    var k_ = function(c, e) {
        function t(n) {
            let t = Su(n);
            return BD(g.getOpt(e), n, t.x(), t.y(), t.width(), t.height());
        }
        function o(n) {
            let t = Su(n);
            return BD(
                p.getOpt(e),
                n,
                t.right(),
                t.bottom(),
                t.width(),
                t.height(),
            );
        }
        function r(n, t, e, o) {
            let r = e(t);
            S_.snapTo(n, r),
                (function(n, t, e, o) {
                    let r = t.dom().getBoundingClientRect();
                    Or(n.element(), 'display');
                    const i = Eo(we.fromDom(c.getBody())).dom().innerHeight;
                    var u = e(r);
                    let a = o(r, i);
                    (u || a) && xr(n.element(), 'display', 'none');
                })(
                    n,
                    t,
                    function(n) {
                        return n[o] < 0;
                    },
                    function(n, t) {
                        return n[o] > t;
                    },
                );
        }
        function i(n) {
            return r(h, n, t, 'top');
        }
        function u(n) {
            return r(v, n, o, 'bottom');
        }
        let a = ye([]);
        var s = ye([]);
        var n = ye(!1);
        var f = ye(on.none());
        var l = ye(on.none());
        var d = DD(
            function() {
                return S(a.get(), function(n) {
                    return t(n);
                });
            },
            f,
            function(t) {
                l.get().each(function(n) {
                    c.fire('TableSelectorChange', {
                        start: t,
                        finish: n,
                    });
                });
            },
        );
        let m = DD(
            function() {
                return S(s.get(), function(n) {
                    return o(n);
                });
            },
            l,
            function(t) {
                f.get().each(function(n) {
                    c.fire('TableSelectorChange', {
                        start: n,
                        finish: t,
                    });
                });
            },
        );
        var g = AD(d);
        var p = AD(m);
        var h = au(g.asSpec());
        var v = au(p.asSpec());
        C_.deviceType.isTouch() &&
            (c.on('TableSelectionChange', function(t) {
                n.get() || (vs(e, h), vs(e, v), n.set(!0)),
                    f.set(on.some(t.start)),
                    l.set(on.some(t.finish)),
                    t.otherCells.each(function(n) {
                        a.set(n.upOrLeftCells),
                            s.set(n.downOrRightCells),
                            i(t.start),
                            u(t.finish);
                    });
            }),
            c.on('ResizeEditor ResizeWindow ScrollContent', function() {
                f.get().each(i), l.get().each(u);
            }),
            c.on('TableSelectionClear', function() {
                n.get() && (ys(h), ys(v), n.set(!1)),
                    f.set(on.none()),
                    l.set(on.none());
            }));
    };
    ((RD = ID = ID || {})[(RD.None = 0)] = 'None'),
        (RD[(RD.Both = 1)] = 'Both'),
        (RD[(RD.Vertical = 2)] = 'Vertical');
    function O_(n, t, e) {
        const o = we.fromDom(n.getContainer());
        var r = (function(n, t, e, o, r) {
            let i = {};
            return (
                (i.height = UA(o + t.top(), Nb(n), Pb(n))),
                e === ID.Both && (i.width = UA(r + t.left(), Vb(n), Hb(n))),
                i
            );
        })(n, t, e, fu(o), gu(o));
        Cn(r, function(n, t) {
            return xr(o, t, GA(n));
        }),
            Pv(n);
    }
    function E_(n) {
        if (n.nodeType === 1) {
            if (n.nodeName === 'BR' || n.getAttribute('data-mce-bogus'))
                return !0;
            if (n.getAttribute('data-mce-type') === 'bookmark') return !0;
        }
        return !1;
    }
    function T_(o, t) {
        let r;
        var n;
        let e;
        return {
            dom: { tag: 'div', classes: ['tox-statusbar'] },
            components:
                ((n = (function() {
                    const n = [];
                    return (
                        o.getParam('elementpath', !0, 'boolean') &&
                            n.push(hM(o, {})),
                        Vt(o.settings.plugins, 'wordcount') &&
                            n.push(
                                (function(n, o) {
                                    function r(n, t, e) {
                                        return gg.set(n, [
                                            Rr(o.translate([`{0} ${e}`, t[e]])),
                                        ]);
                                    }
                                    return Xg.sketch({
                                        dom: {
                                            tag: 'button',
                                            classes: [
                                                'tox-statusbar__wordcount',
                                            ],
                                        },
                                        components: [],
                                        buttonBehaviours: ya([
                                            Xy.config({}),
                                            gg.config({}),
                                            nl.config({
                                                store: {
                                                    mode: 'memory',
                                                    initialValue: {
                                                        mode: 'words',
                                                        count: {
                                                            words: 0,
                                                            characters: 0,
                                                        },
                                                    },
                                                },
                                            }),
                                            Jd('wordcount-events', [
                                                Hi(function(n) {
                                                    const t = nl.getValue(n);
                                                    var e =
                                                        t.mode === 'words'
                                                            ? 'characters'
                                                            : 'words';
                                                    nl.setValue(n, {
                                                        mode: e,
                                                        count: t.count,
                                                    }),
                                                        r(n, t.count, e);
                                                }),
                                                Ri(function(e) {
                                                    n.on(
                                                        'wordCountUpdate',
                                                        function(n) {
                                                            const t = nl.getValue(
                                                                e,
                                                            ).mode;
                                                            nl.setValue(e, {
                                                                mode: t,
                                                                count:
                                                                    n.wordCount,
                                                            }),
                                                                r(
                                                                    e,
                                                                    n.wordCount,
                                                                    t,
                                                                );
                                                        },
                                                    );
                                                }),
                                            ]),
                                        ]),
                                    });
                                })(o, t),
                            ),
                        o.getParam('branding', !0, 'boolean') &&
                            n.push(
                                (function() {
                                    const n = ih.translate([
                                        'Powered by {0}',
                                        'Tiny',
                                    ]);
                                    return {
                                        dom: {
                                            tag: 'span',
                                            classes: [
                                                'tox-statusbar__branding',
                                            ],
                                            innerHtml: `<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="${n}">${n}</a>`,
                                        },
                                    };
                                })(),
                            ),
                        n.length > 0
                            ? [
                                  {
                                      dom: {
                                          tag: 'div',
                                          classes: [
                                              'tox-statusbar__text-container',
                                          ],
                                      },
                                      components: n,
                                  },
                              ]
                            : []
                    );
                })()),
                (e = (function(n) {
                    const t = !Vt(n.settings.plugins, 'autoresize');
                    let e = n.getParam('resize', t);
                    return !1 === e
                        ? ID.None
                        : e === 'both'
                        ? ID.Both
                        : ID.Vertical;
                })(o)),
                e !== ID.None &&
                    n.push(
                        ((r = e),
                        {
                            dom: {
                                tag: 'div',
                                classes: ['tox-statusbar__resize-handle'],
                                attributes: { title: t.translate('Resize') },
                                innerHtml: xm('resize-handle', t.icons),
                            },
                            behaviours: ya([
                                S_.config({
                                    mode: 'mouse',
                                    repositionTarget: !1,
                                    onDrag(n, t, e) {
                                        O_(o, e, r);
                                    },
                                    blockerClass: 'tox-blocker',
                                }),
                            ]),
                        }),
                    ),
                n),
        };
    }
    function B_(n) {
        return [
            ft('type'),
            (function(n) {
                return st(n, me);
            })('columns'),
            n,
        ];
    }
    function D_(t) {
        return ce(
            'items',
            'items',
            Mn(),
            Kn(
                Zn(function(n) {
                    return tt(`Checking item of ${t}`, pF, n).fold(
                        function(n) {
                            return an.error(le(n));
                        },
                        function(n) {
                            return an.value(n);
                        },
                    );
                }),
            ),
        );
    }
    function A_(n) {
        return cn(n.type) && cn(n.name);
    }
    function __(n) {
        const t = (function(n) {
            return C(AF(n), A_);
        })(n);
        var e = B(t, function(t) {
            return (function(n) {
                return on.from(_F[n.type]);
            })(t).fold(
                function() {
                    return [];
                },
                function(n) {
                    return [st(t.name, n)];
                },
            );
        });
        return re(e);
    }
    function M_(n) {
        return {
            internalDialog: et(
                (function(n) {
                    return tt('dialog', DF, n);
                })(n),
            ),
            dataValidator: __(n),
            initialData: n.initialData,
        };
    }
    function F_(n) {
        const e = [];
        let o = {};
        return (
            Cn(n, function(n, t) {
                n.fold(
                    function() {
                        e.push(t);
                    },
                    function(n) {
                        o[t] = n;
                    },
                );
            }),
            e.length > 0 ? an.error(e) : an.value(o)
        );
    }
    function I_(n) {
        return yn(
            (function(n, t) {
                const e = gn.call(n, 0);
                return e.sort(t), e;
            })(n, function(n, t) {
                return t < n ? -1 : n < t ? 1 : 0;
            }),
        );
    }
    function R_(n, t) {
        xr(n, 'height', `${t}px`),
            Ht().browser.isIE()
                ? Or(n, 'flex-basis')
                : xr(n, 'flex-basis', `${t}px`);
    }
    function V_(n, o, r) {
        ku(n, '[role="dialog"]').each(function(e) {
            Ou(e, '[role="tablist"]').each(function(t) {
                r.get()
                    .map(function(n) {
                        return (
                            xr(o, 'height', '0'),
                            xr(o, 'flex-basis', '0'),
                            Math.min(
                                n,
                                (function(n, t, e) {
                                    let o;
                                    var r = Oo(n).dom();
                                    let i = ku(n, '.tox-dialog-wrap').getOr(n);
                                    o =
                                        Sr(i, 'position') === 'fixed'
                                            ? Math.max(
                                                  r.clientHeight,
                                                  v.window.innerHeight,
                                              )
                                            : Math.max(
                                                  r.offsetHeight,
                                                  r.scrollHeight,
                                              );
                                    const u = fu(t);
                                    var a =
                                        t.dom().offsetLeft >=
                                        e.dom().offsetLeft + gu(e)
                                            ? Math.max(fu(e), u)
                                            : u;
                                    let c =
                                        parseInt(Sr(n, 'margin-top'), 10) || 0;
                                    var s =
                                        parseInt(Sr(n, 'margin-bottom'), 10) ||
                                        0;
                                    return o - (fu(n) + c + s - a);
                                })(e, o, t),
                            )
                        );
                    })
                    .each(function(n) {
                        R_(o, n);
                    });
            });
        });
    }
    function N_(n) {
        return Ou(n, '[role="tabpanel"]');
    }
    function H_(r) {
        let i;
        return {
            smartTabHeight:
                ((i = ye(on.none())),
                {
                    extraEvents: [
                        Ri(function(n) {
                            const t = n.element();
                            N_(t).each(function(o) {
                                xr(o, 'visibility', 'hidden'),
                                    n
                                        .getSystem()
                                        .getByDom(o)
                                        .toOption()
                                        .each(function(n) {
                                            const t = (function(o, r, i) {
                                                return S(o, function(n, t) {
                                                    gg.set(i, o[t].view());
                                                    let e = r
                                                        .dom()
                                                        .getBoundingClientRect();
                                                    return (
                                                        gg.set(i, []), e.height
                                                    );
                                                });
                                            })(r, o, n);
                                            let e = I_(t);
                                            i.set(e);
                                        }),
                                    V_(t, o, i),
                                    Or(o, 'visibility'),
                                    (function(n, t) {
                                        yn(n).each(function(n) {
                                            return GF.showTab(t, n.value);
                                        });
                                    })(r, n),
                                    Kg.requestAnimationFrame(function() {
                                        V_(t, o, i);
                                    });
                            });
                        }),
                        mo(Ci(), function(n) {
                            const t = n.element();
                            N_(t).each(function(n) {
                                V_(t, n, i);
                            });
                        }),
                        mo(py, function(n, t) {
                            const r = n.element();
                            N_(r).each(function(t) {
                                const n = Ca();
                                xr(t, 'visibility', 'hidden');
                                const e = Cr(t, 'height').map(function(n) {
                                    return parseInt(n, 10);
                                });
                                Or(t, 'height'), Or(t, 'flex-basis');
                                const o = t.dom().getBoundingClientRect().height;
                                e.forall(function(n) {
                                    return n < o;
                                })
                                    ? (i.set(on.from(o)), V_(r, t, i))
                                    : e.each(function(n) {
                                          R_(t, n);
                                      }),
                                    Or(t, 'visibility'),
                                    n.each(Sa);
                            });
                        }),
                    ],
                    selectFirst: !1,
                }),
            naiveTabHeight: { extraEvents: [], selectFirst: !0 },
        };
    }
    function P_(n, t, e, o) {
        return {
            dom: {
                tag: 'div',
                classes: ['tox-dialog__content-js'],
                attributes: {
                    ...t
                            .map(function(n) {
                                return { id: n };
                            })
                            .getOr({}),
                    ...(o ? { 'aria-live': 'polite' } : {}),
                },
            },
            components: [],
            behaviours: ya([
                CS(0),
                VT.config({
                    channel: JF,
                    updateState(n, t) {
                        return on.some({
                            isTabPanel() {
                                return 'tabpanel' === t.body.type;
                            },
                        });
                    },
                    renderComponents(n) {
                        switch (n.body.type) {
                            case 'tabpanel':
                                return [
                                    (function(n, e) {
                                        function o(n) {
                                            let t = nl.getValue(n);
                                                var e = F_(t).getOr({});
                                                var o = i.get();
                                                var r = Dn(o, e);
                                            i.set(r);
                                        }
                                        function r(n) {
                                            let t = i.get();
                                            nl.setValue(n, t);
                                        }
                                        var i = ye({});
                                            var u = ye(null);
                                            var t = S(n.tabs, function(n) {
                                                return {
                                                    value: n.name,
                                                    dom: {
                                                        tag: 'div',
                                                        classes: [
                                                            'tox-dialog__body-nav-item',
                                                        ],
                                                        innerHtml: e.shared.providers.translate(
                                                            n.title,
                                                        ),
                                                    },
                                                    view: function() {
                                                        return [
                                                            mS.sketch(function(
                                                                t,
                                                            ) {
                                                                return {
                                                                    dom: {
                                                                        tag:
                                                                            'div',
                                                                        classes: [
                                                                            'tox-form',
                                                                        ],
                                                                    },
                                                                    components: S(
                                                                        n.items,
                                                                        function(
                                                                            n,
                                                                        ) {
                                                                            return Gk(
                                                                                t,
                                                                                n,
                                                                                e,
                                                                            );
                                                                        },
                                                                    ),
                                                                    formBehaviours: ya(
                                                                        [
                                                                            dg.config(
                                                                                {
                                                                                    mode:
                                                                                        'acyclic',
                                                                                    useTabstopAt: b(
                                                                                        FS,
                                                                                    ),
                                                                                },
                                                                            ),
                                                                            Jd(
                                                                                'TabView.form.events',
                                                                                [
                                                                                    Ri(
                                                                                        r,
                                                                                    ),
                                                                                    Vi(
                                                                                        o,
                                                                                    ),
                                                                                ],
                                                                            ),
                                                                            dc.config(
                                                                                {
                                                                                    channels: K(
                                                                                        [
                                                                                            {
                                                                                                key: XF,
                                                                                                value: {
                                                                                                    onReceive: o,
                                                                                                },
                                                                                            },
                                                                                            {
                                                                                                key: YF,
                                                                                                value: {
                                                                                                    onReceive: r,
                                                                                                },
                                                                                            },
                                                                                        ],
                                                                                    ),
                                                                                },
                                                                            ),
                                                                        ],
                                                                    ),
                                                                };
                                                            }),
                                                        ];
                                                    },
                                                };
                                            });
                                            var a = H_(t).smartTabHeight;
                                        return GF.sketch({
                                            dom: {
                                                tag: 'div',
                                                classes: ['tox-dialog__body'],
                                            },
                                            onChangeTab(n, t, e) {
                                                var o = nl.getValue(t);
                                                io(n, gy, {
                                                    name: o,
                                                    oldName: u.get(),
                                                }),
                                                    u.set(o);
                                            },
                                            tabs: t,
                                            components: [
                                                GF.parts().tabbar({
                                                    dom: {
                                                        tag: 'div',
                                                        classes: [
                                                            'tox-dialog__body-nav',
                                                        ],
                                                    },
                                                    components: [
                                                        PF.parts().tabs({}),
                                                    ],
                                                    markers: {
                                                        tabClass: 'tox-tab',
                                                        selectedClass:
                                                            'tox-dialog__body-nav-item--active',
                                                    },
                                                    tabbarBehaviours: ya([
                                                        Xy.config({}),
                                                    ]),
                                                }),
                                                GF.parts().tabview({
                                                    dom: {
                                                        tag: 'div',
                                                        classes: [
                                                            'tox-dialog__body-content',
                                                        ],
                                                    },
                                                }),
                                            ],
                                            selectFirst: a.selectFirst,
                                            tabSectionBehaviours: ya([
                                                Jd('tabpanel', a.extraEvents),
                                                dg.config({ mode: 'acyclic' }),
                                                nd.config({
                                                    find(n) {
                                                        return yn(
                                                            GF.getViewItems(n),
                                                        );
                                                    },
                                                }),
                                                nl.config({
                                                    store: {
                                                        mode: 'manual',
                                                        getValue(n) {
                                                            return (
                                                                n
                                                                    .getSystem()
                                                                    .broadcastOn(
                                                                        [XF],
                                                                        {},
                                                                    ),
                                                                i.get()
                                                            );
                                                        },
                                                        setValue(
                                                            n,
                                                            t,
                                                        ) {
                                                            i.set(t),
                                                                n
                                                                    .getSystem()
                                                                    .broadcastOn(
                                                                        [YF],
                                                                        {},
                                                                    );
                                                        },
                                                    },
                                                }),
                                            ]),
                                        });
                                    })(n.body, e),
                                ];
                            default:
                                return [
                                    (function(n, e) {
                                        let t = bm(
                                            mS.sketch(function(t) {
                                                return {
                                                    dom: {
                                                        tag: 'div',
                                                        classes: [
                                                            'tox-form',
                                                        ].concat(n.classes),
                                                    },
                                                    components: S(
                                                        n.items,
                                                        function(n) {
                                                            return Gk(t, n, e);
                                                        },
                                                    ),
                                                };
                                            }),
                                        );
                                        return {
                                            dom: {
                                                tag: 'div',
                                                classes: ['tox-dialog__body'],
                                            },
                                            components: [
                                                {
                                                    dom: {
                                                        tag: 'div',
                                                        classes: [
                                                            'tox-dialog__body-content',
                                                        ],
                                                    },
                                                    components: [t.asSpec()],
                                                },
                                            ],
                                            behaviours: ya([
                                                dg.config({
                                                    mode: 'acyclic',
                                                    useTabstopAt: b(FS),
                                                }),
                                                SS(t),
                                                TS(t, {
                                                    postprocess(n) {
                                                        return F_(n).fold(
                                                            function(n) {
                                                                return (
                                                                    v.console.error(
                                                                        n,
                                                                    ),
                                                                    {}
                                                                );
                                                            },
                                                            function(n) {
                                                                return n;
                                                            },
                                                        );
                                                    },
                                                }),
                                            ]),
                                        };
                                    })(n.body, e),
                                ];
                        }
                    },
                    initialData: n,
                }),
            ]),
        };
    }
    function z_(n, e) {
        return [
            vo(Zr(), IS),
            n(cy, function(n, t) {
                e.onClose(), t.onClose();
            }),
            n(sy, function(n, t, e, o) {
                t.onCancel(n), ro(o, cy);
            }),
            mo(my, function(n, t) {
                return e.onUnblock();
            }),
            mo(dy, function(n, t) {
                return e.onBlock(t.event());
            }),
        ];
    }
    function L_(n, t) {
        function e(n, t) {
            return Gb.sketch({
                dom: { tag: 'div', classes: [`tox-dialog__footer-${n}`] },
                components: S(t, function(n) {
                    return n.memento.asSpec();
                }),
            });
        }
        const o = (function(n, t) {
            for (var e = [], o = [], r = 0, i = n.length; r < i; r++) {
                const u = n[r];
                (t(u, r) ? e : o).push(u);
            }
            return { pass: e, fail: o };
        })(
            t
                .map(function(n) {
                    return n.footerButtons;
                })
                .getOr([]),
            function(n) {
                return n.align === 'start';
            },
        );
        return [e('start', o.pass), e('end', o.fail)];
    }
    function j_(n, o) {
        return {
            dom: sp('<div class="tox-dialog__footer"></div>'),
            components: [],
            behaviours: ya([
                VT.config({
                    channel: $F,
                    initialData: n,
                    updateState(n, t) {
                        let e = S(t.buttons, function(n) {
                            let t = bm(
                                (function(n, t) {
                                    return qC(n, n.type, t);
                                })(n, o),
                            );
                            return { name: n.name, align: n.align, memento: t };
                        });
                        return on.some({
                            lookupByName(n, t) {
                                return (function(t, n, e) {
                                    return E(n, function(n) {
                                        return n.name === e;
                                    }).bind(function(n) {
                                        return n.memento.getOpt(t);
                                    });
                                })(n, e, t);
                            },
                            footerButtons: e,
                        });
                    },
                    renderComponents: L_,
                }),
            ]),
        };
    }
    function U_(n, t) {
        return SM.parts().footer(j_(n, t));
    }
    function W_(t, e) {
        if (
            t
                .getRoot()
                .getSystem()
                .isConnected()
        ) {
            const o = nd.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());
            return mS.getField(o, e).fold(
                function() {
                    const n = t.getFooter();
                    return VT.getState(n)
                        .get()
                        .bind(function(n) {
                            return n.lookupByName(o, e);
                        });
                },
                function(n) {
                    return on.some(n);
                },
            );
        }
        return on.none();
    }
    function G_(u, o, a) {
        function n(n) {
            const t = u.getRoot();
            t.getSystem().isConnected() && n(t);
        }
        var c = {
            getData() {
                let n = u.getRoot();
                    var t = n.getSystem().isConnected() ? u.getFormWrapper() : n;
                    var e = nl.getValue(t);
                    var o = P(a, function(n) {
                        return n.get();
                    });
                return N({ ...e}, o);
            },
            setData(i) {
                n(function(n) {
                    let t = c.getData();
                        var e = An(t, i);
                        var o = (function(n, t) {
                            var e = n.getRoot();
                            return VT.getState(e)
                                .get()
                                .map(function(n) {
                                    return et(tt('data', n.dataValidator, t));
                                })
                                .getOr(t);
                        })(u, e);
                        var r = u.getFormWrapper();
                    nl.setValue(r, o),
                        Cn(a, function(n, t) {
                            En(e, t) && n.set(e[t]);
                        });
                });
            },
            disable(n) {
                W_(u, n).each(kh.disable);
            },
            enable(n) {
                W_(u, n).each(kh.enable);
            },
            focus(n) {
                W_(u, n).each(bg.focus);
            },
            block(t) {
                if (!cn(t))
                    throw new Error(
                        'The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument',
                    );
                n(function(n) {
                    io(n, dy, { message: t });
                });
            },
            unblock() {
                n(function(n) {
                    ro(n, my);
                });
            },
            showTab(e) {
                n(function(n) {
                    let t = u.getBody();
                    VT.getState(t)
                        .get()
                        .exists(function(n) {
                            return n.isTabPanel();
                        }) &&
                        nd.getCurrent(t).each(function(n) {
                            GF.showTab(n, e);
                        });
                });
            },
            redial(e) {
                n(function(n) {
                    let t = o(e);
                    n.getSystem().broadcastOn([qF], t),
                        n.getSystem().broadcastOn([KF], t.internalDialog),
                        n.getSystem().broadcastOn([JF], t.internalDialog),
                        n.getSystem().broadcastOn([$F], t.internalDialog),
                        c.setData(t.initialData);
                });
            },
            close() {
                n(function(n) {
                    ro(n, cy);
                });
            },
        };
        return c;
    }
    function X_(n, t) {
        return {
            dom: {
                tag: 'div',
                styles: { display: 'none' },
                classes: ['tox-dialog__header'],
            },
            components: [n, t],
        };
    }
    function Y_(n, t) {
        return SM.parts().close(
            Xg.sketch({
                dom: {
                    tag: 'button',
                    classes: [
                        'tox-button',
                        'tox-button--icon',
                        'tox-button--naked',
                    ],
                    attributes: {
                        type: 'button',
                        'aria-label': t.translate('Close'),
                    },
                },
                action: n,
                buttonBehaviours: ya([Xy.config({})]),
            }),
        );
    }
    function q_() {
        return SM.parts().title({
            dom: {
                tag: 'div',
                classes: ['tox-dialog__title'],
                innerHtml: '',
                styles: { display: 'none' },
            },
        });
    }
    function K_(n, t) {
        return SM.parts().body({
            dom: { tag: 'div', classes: ['tox-dialog__body'] },
            components: [
                {
                    dom: { tag: 'div', classes: ['tox-dialog__body-content'] },
                    components: [{ dom: sp(`<p>${t.translate(n)}</p>`) }],
                },
            ],
        });
    }
    function J_(n) {
        return SM.parts().footer({
            dom: { tag: 'div', classes: ['tox-dialog__footer'] },
            components: n,
        });
    }
    function $_(n, t) {
        return [
            Gb.sketch({
                dom: { tag: 'div', classes: ['tox-dialog__footer-start'] },
                components: n,
            }),
            Gb.sketch({
                dom: { tag: 'div', classes: ['tox-dialog__footer-end'] },
                components: t,
            }),
        ];
    }
    function Q_(t) {
        let n;
        var e = 'tox-dialog';
        var o = `${e  }-wrap`;
        var r = `${o  }__backdrop`;
        var i = `${e}__disable-scroll`;
        return SM.sketch({
            lazySink: t.lazySink,
            onEscape(n) {
                return t.onEscape(n), on.some(!0);
            },
            useTabstopAt(n) {
                return !FS(n);
            },
            dom: {
                tag: 'div',
                classes: [e].concat(t.extraClasses),
                styles: { position: 'relative', ...t.extraStyles },
            },
            components: g([t.header, t.body], t.footer.toArray()),
            parts: {
                blocker: {
                    dom: sp(`<div class="${o}"></div>`),
                    components: [
                        {
                            dom: {
                                tag: 'div',
                                classes: tI ? [r, `${r}--opaque`] : [r],
                            },
                        },
                    ],
                },
            },
            dragBlockClass: o,
            modalBehaviours: ya(
                g(
                    [
                        bg.config({}),
                        Jd(
                            'dialog-events',
                            t.dialogEvents.concat([
                                yo(Zr(), function(n, t) {
                                    dg.focusIn(n);
                                }),
                            ]),
                        ),
                        Jd('scroll-lock', [
                            Ri(function() {
                                lr(Lr(), i);
                            }),
                            Vi(function() {
                                mr(Lr(), i);
                            }),
                        ]),
                    ],
                    t.extraBehaviours,
                ),
            ),
            eventOrder: N(
                ((n = {}),
                (n[mi()] = ['dialog-events']),
                (n[ki()] = [
                    'scroll-lock',
                    'dialog-events',
                    'alloy.base.behaviour',
                ]),
                (n[Oi()] = [
                    'alloy.base.behaviour',
                    'dialog-events',
                    'scroll-lock',
                ]),
                n),
                t.eventOrder,
            ),
        });
    }
    function Z_(n) {
        return Xg.sketch({
            dom: {
                tag: 'button',
                classes: [
                    'tox-button',
                    'tox-button--icon',
                    'tox-button--naked',
                ],
                attributes: {
                    type: 'button',
                    'aria-label': n.translate('Close'),
                    title: n.translate('Close'),
                },
            },
            components: [
                {
                    dom: {
                        tag: 'div',
                        classes: ['tox-icon'],
                        innerHtml:
                            '<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>',
                    },
                },
            ],
            action(n) {
                ro(n, sy);
            },
        });
    }
    function nM(n, t, e) {
        function o(n) {
            return [Rr(e.translate(n.title))];
        }
        return {
            dom: {
                tag: 'div',
                classes: ['tox-dialog__title'],
                attributes: {
                    ...t
                        .map(function(n) {
                            return { id: n };
                        })
                        .getOr({}),
                },
            },
            components: o(n),
            behaviours: ya([VT.config({ channel: KF, renderComponents: o })]),
        };
    }
    function tM() {
        return { dom: sp('<div class="tox-dialog__draghandle"></div>') };
    }
    function eM(n, t) {
        return (function(n, t) {
            const e = SM.parts().title(nM(n, on.none(), t));
            var o = SM.parts().draghandle(tM());
            var r = SM.parts().close(Z_(t));
            var i = [e].concat(n.draggable ? [o] : []).concat([r]);
            return Gb.sketch({
                dom: sp('<div class="tox-dialog__header"></div>'),
                components: i,
            });
        })(
            {
                title: t.shared.providers.translate(n),
                draggable: t.dialog.isDraggableModal(),
            },
            t.shared.providers,
        );
    }
    function oM(n, t) {
        return {
            onClose() {
                return t.closeWindow();
            },
            onBlock(e) {
                SM.setBusy(n(), function(n, t) {
                    return {
                        dom: {
                            tag: 'div',
                            classes: ['tox-dialog__busy-spinner'],
                            attributes: { 'aria-label': e.message() },
                            styles: {
                                left: '0px',
                                right: '0px',
                                bottom: '0px',
                                top: '0px',
                                position: 'absolute',
                            },
                        },
                        behaviours: t,
                        components: [
                            {
                                dom: sp(
                                    '<div class="tox-spinner"><div></div><div></div><div></div></div>',
                                ),
                            },
                        ],
                    };
                });
            },
            onUnblock() {
                SM.setIdle(n());
            },
        };
    }
    function rM(n, t, e, o) {
        let r;
        return au(
            Q_(
                {...n, lazySink: o.shared.getSink,
                    extraBehaviours: g(
                        [
                            VT.config({
                                channel: qF,
                                updateState(n, t) {
                                    return on.some(t);
                                },
                                initialData: t,
                            }),
                            AS({}),
                        ],
                        n.extraBehaviours,
                    ),
                    onEscape(n) {
                        ro(n, sy);
                    },
                    dialogEvents: e,
                    eventOrder:
                        ((r = {}),
                        (r[di()] = ['reflecting', 'receiving']),
                        (r[ki()] = [
                            'scroll-lock',
                            'reflecting',
                            'messages',
                            'dialog-events',
                            'alloy.base.behaviour',
                        ]),
                        (r[Oi()] = [
                            'alloy.base.behaviour',
                            'dialog-events',
                            'messages',
                            'reflecting',
                            'scroll-lock',
                        ]),
                        r),},
            ),
        );
    }
    function iM(n) {
        return S(n, function(n) {
            return n.type === 'menu'
                ? (function(n) {
                      const t = S(n.items, function(n) {
                          const t = ye(!1);
                          return {...n, storage: t};
                      });
                      return {...n, items: t};
                  })(n)
                : n;
        });
    }
    function uM(n) {
        return O(
            n,
            function(n, t) {
                return t.type !== 'menu'
                    ? n
                    : O(
                          t.items,
                          function(n, t) {
                              return (n[t.name] = t.storage), n;
                          },
                          n,
                      );
            },
            {},
        );
    }
    function aM(n, t, e) {
        let o = eM(n.internalDialog.title, e);
        var r = (function(n, t) {
            let e = P_(n, on.none(), t, !1);
            return SM.parts().body(e);
        })({ body: n.internalDialog.body }, e);
        let i = iM(n.internalDialog.buttons);
        var u = uM(i);
        let a = U_({ buttons: i }, e);
        var c = nI(
            function() {
                return d;
            },
            oM(function() {
                return l;
            }, t),
        );
        var s =
            'normal' !== n.internalDialog.size
                ? n.internalDialog.size === 'large'
                    ? ['tox-dialog--width-lg']
                    : ['tox-dialog--width-md']
                : [];
        let f = {
            header: o,
            body: r,
            footer: on.some(a),
            extraClasses: s,
            extraBehaviours: [],
            extraStyles: {},
        };
        var l = rM(f, n, c, e);
        var d = G_(
            {
                getRoot() {
                    return l;
                },
                getBody() {
                    return SM.getBody(l);
                },
                getFooter() {
                    return SM.getFooter(l);
                },
                getFormWrapper() {
                    var n = SM.getBody(l);
                    return nd.getCurrent(n).getOr(n);
                },
            },
            t.redial,
            u,
        );
        return { dialog: l, instanceApi: d };
    }
    function cM(n, t, e, o) {
        let r;
        var i;
        let u = Yo('dialog-label');
        var a = Yo('dialog-content');
        var c = bm(
            (function(n, t, e) {
                return Gb.sketch({
                    dom: sp('<div class="tox-dialog__header"></div>'),
                    components: [nM(n, on.some(t), e), tM(), Z_(e)],
                    containerBehaviours: ya([
                        S_.config({
                            mode: 'mouse',
                            blockerClass: 'blocker',
                            getTarget: function(n) {
                                return Eu(n, '[role="dialog"]').getOrDie();
                            },
                            snaps: {
                                getSnapPoints: function() {
                                    return [];
                                },
                                leftAttr: 'data-drag-left',
                                topAttr: 'data-drag-top',
                            },
                        }),
                    ]),
                });
            })(
                { title: n.internalDialog.title, draggable: !0 },
                u,
                e.shared.providers,
            ),
        );
        var s = bm(
            (function(n, t, e, o) {
                return P_(n, on.some(t), e, o);
            })({ body: n.internalDialog.body }, a, e, o),
        );
        var f = iM(n.internalDialog.buttons);
        var l = uM(f);
        var d = bm(
            (function(n, t) {
                return j_(n, t);
            })({ buttons: f }, e),
        );
        let m = nI(
            function() {
                return p;
            },
            {
                onBlock: function() {},
                onUnblock() {},
                onClose() {
                        return t.closeWindow();
                    },
            },
        );
        let g = au({
            dom: {
                tag: 'div',
                classes: ['tox-dialog', 'tox-dialog-inline'],
                attributes:
                    ((r = { role: 'dialog' }),
                    (r['aria-labelledby'] = u),
                    (r['aria-describedby'] = `${  a}`),
                    r),
            },
            eventOrder:
                ((i = {}),
                (i[di()] = [VT.name(), dc.name()]),
                (i[mi()] = ['execute-on-form']),
                (i[ki()] = ['reflecting', 'execute-on-form']),
                i),
            behaviours: ya([
                dg.config({
                    mode: 'cyclic',
                    onEscape: function(n) {
                        return ro(n, cy), on.some(!0);
                    },
                    useTabstopAt: function(n) {
                        return (
                            !FS(n) &&
                            (Je(n) !== 'button' ||
                                Lo(n, 'disabled') !== 'disabled')
                        );
                    },
                }),
                VT.config({
                    channel: qF,
                    updateState: function(n, t) {
                        return on.some(t);
                    },
                    initialData: n,
                }),
                bg.config({}),
                Jd(
                    'execute-on-form',
                    m.concat([
                        yo(Zr(), function(n, t) {
                            dg.focusIn(n);
                        }),
                    ]),
                ),
                AS({}),
            ]),
            components: [c.asSpec(), s.asSpec(), d.asSpec()],
        });
        var p = G_(
            {
                getRoot() {
                    return g;
                },
                getFooter() {
                    return d.get(g);
                },
                getBody() {
                    return s.get(g);
                },
                getFormWrapper() {
                    var n = s.get(g);
                    return nd.getCurrent(n).getOr(n);
                },
            },
            t.redial,
            l,
        );
        return { dialog: g, instanceApi: p };
    }
    function sM(n) {
        return sn(n) && oI.indexOf(n.mceAction) !== -1;
    }
    function fM(e, n, o, t) {
        let r;
        var i = eM(e.title, t);
        let u = (function(n) {
            var t = {
                dom: { tag: 'div', classes: ['tox-dialog__content-js'] },
                components: [
                    {
                        dom: {
                            tag: 'div',
                            classes: ['tox-dialog__body-iframe'],
                        },
                        components: [
                            RS({
                                dom: {
                                    tag: 'iframe',
                                    attributes: { src: n.url },
                                },
                                behaviours: ya([Xy.config({}), bg.config({})]),
                            }),
                        ],
                    },
                ],
                behaviours: ya([
                    dg.config({ mode: 'acyclic', useTabstopAt: b(FS) }),
                ]),
            };
            return SM.parts().body(t);
        })(e);
        var a = e.buttons.bind(function(n) {
            return 0 === n.length ? on.none() : on.some(U_({ buttons: n }, t));
        });
        let c = ZF(
            function() {
                return h;
            },
            oM(function() {
                return p;
            }, n),
        );
        let s = N(
            N(
                {},
                e.height.fold(
                    function() {
                        return {};
                    },
                    function(n) {
                        return { height: `${n  }px`, 'max-height': `${n  }px` };
                    },
                ),
            ),
            e.width.fold(
                function() {
                    return {};
                },
                function(n) {
                    return { width: `${n  }px`, 'max-width': `${n  }px` };
                },
            ),
        );
        let f =
            e.width.isNone() && e.height.isNone()
                ? ['tox-dialog--width-lg']
                : [];
        var l = new eI(e.url, { base_uri: new eI(v.window.location.href) });
        var d = `${l.protocol  }://${  l.host  }${l.port ? ':' + l.port : ''}`;
        let m = ye(on.none());
        var g = [
            Jd('messages', [
                Ri(function() {
                    var n = fb(we.fromDom(v.window), 'message', function(n) {
                        if (l.isSameOrigin(new eI(n.raw().origin))) {
                            var t = n.raw().data;
                            sM(t)
                                ? (function(n, t, e) {
                                      switch (e.mceAction) {
                                          case 'insertContent':
                                              n.insertContent(e.content);
                                              break;
                                          case 'setContent':
                                              n.setContent(e.content);
                                              break;
                                          case 'execCommand':
                                              var o = !!ln(e.ui) && e.ui;
                                              n.execCommand(e.cmd, o, e.value);
                                              break;
                                          case 'close':
                                              t.close();
                                              break;
                                          case 'block':
                                              t.block(e.message);
                                              break;
                                          case 'unblock':
                                              t.unblock();
                                      }
                                  })(o, h, t)
                                : (function(n) {
                                      return (
                                          !sM(n) && sn(n) && En(n, 'mceAction')
                                      );
                                  })(t) && e.onMessage(h, t);
                        }
                    });
                    m.set(on.some(n));
                }),
                Vi(function() {
                    m.get().each(function(n) {
                        return n.unbind();
                    });
                }),
            ]),
            dc.config({
                channels:
                    ((r = {}),
                    (r[QF] = {
                        onReceive(n, t) {
                                Ou(n.element(), 'iframe').each(function(n) {
                                    n.dom().contentWindow.postMessage(t, d);
                                });
                            },
                    }),
                    r),
            }),
        ];
        var p = rM(
            {
                header: i,
                body: u,
                footer: a,
                extraClasses: f,
                extraBehaviours: g,
                extraStyles: s,
            },
            e,
            c,
            t,
        );
        var h = (function(t) {
            function n(n) {
                t.getSystem().isConnected() && n(t);
            }
            return {
                block(t) {
                    if (!cn(t))
                        throw new Error(
                            'The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument',
                        );
                    n(function(n) {
                        io(n, dy, { message: t });
                    });
                },
                unblock() {
                    n(function(n) {
                        ro(n, my);
                    });
                },
                close() {
                    n(function(n) {
                        ro(n, cy);
                    });
                },
                sendMessage(t) {
                    n(function(n) {
                        n.getSystem().broadcastOn([QF], t);
                    });
                },
            };
        })(p);
        return { dialog: p, instanceApi: h };
    }
    let lM;
    var dM;
    var mM;
    var gM;
    var pM;
    var hM = function(i, r) {
        r.delimiter || (r.delimiter = '\xbb');
        return {
            dom: {
                tag: 'div',
                classes: ['tox-statusbar__path'],
                attributes: { role: 'navigation' },
            },
            behaviours: ya([
                dg.config({ mode: 'flow', selector: 'div[role=button]' }),
                Xy.config({}),
                gg.config({}),
                Jd('elementPathEvents', [
                    Ri(function(e, n) {
                        i.shortcuts.add(
                            'alt+F11',
                            'focus statusbar elementpath',
                            function() {
                                return dg.focusIn(e);
                            },
                        ),
                            i.on('NodeChange', function(n) {
                                var t = (function(n) {
                                    for (var t = [], e = n.length; 0 < e--; ) {
                                        let o = n[e];
                                        if (o.nodeType === 1 && !E_(o)) {
                                            let r = i.fire('ResolveName', {
                                                name: o.nodeName.toLowerCase(),
                                                target: o,
                                            });
                                            if (
                                                (r.isDefaultPrevented() ||
                                                    t.push({
                                                        name: r.name,
                                                        element: o,
                                                    }),
                                                r.isPropagationStopped())
                                            )
                                                break;
                                        }
                                    }
                                    return t;
                                })(n.parents);
                                t.length > 0 &&
                                    gg.set(
                                        e,
                                        (function(n) {
                                            var t = S(n || [], function(t, n) {
                                                    return Xg.sketch({
                                                        dom: {
                                                            tag: 'div',
                                                            classes: [
                                                                'tox-statusbar__path-item',
                                                            ],
                                                            attributes: {
                                                                role: 'button',
                                                                'data-index': n,
                                                                'tab-index': -1,
                                                                'aria-level':
                                                                    n + 1,
                                                            },
                                                            innerHtml: t.name,
                                                        },
                                                        action: function(n) {
                                                            i.focus(),
                                                                i.selection.select(
                                                                    t.element,
                                                                ),
                                                                i.nodeChanged();
                                                        },
                                                    });
                                                });
                                                    var o = {
                                                    dom: {
                                                        tag: 'div',
                                                        classes: [
                                                            'tox-statusbar__path-divider',
                                                        ],
                                                        attributes: {
                                                            'aria-hidden': !0,
                                                        },
                                                        innerHtml:
                                                            ' ' +
                                                            r.delimiter +
                                                            ' ',
                                                    },
                                                };
                                            return O(
                                                t.slice(1),
                                                function(n, t) {
                                                    var e = n;
                                                    return (
                                                        e.push(o), e.push(t), e
                                                    );
                                                },
                                                [t[0]],
                                            );
                                        })(t),
                                    );
                            });
                    }),
                ]),
            ]),
            components: [],
        };
    };
    var vM = function(l) {
        function d() {
            return e.bind(IA.getHeader);
        }
        function m() {
            return an.value(v);
        }
        function n() {
            return e
                .bind(function(n) {
                    return IA.getMoreButton(n);
                })
                .getOrDie('Could not find more button element');
        }
        function g() {
            return e
                .bind(function(n) {
                    return IA.getThrobber(n);
                })
                .getOrDie('Could not find throbber element');
        }
        var t = l.inline;
                var p = t ? XA : jA;
                var h = Qb(l) ? mA : vA;
                var e = on.none();
                var o = Ht();
                var r = o.browser.isIE() ? ['tox-platform-ie'] : [];
                var i = o.deviceType.isTouch() ? ['tox-platform-touch'] : [];
                var u = ih.isRtl() ? { attributes: { dir: 'rtl' } } : {};
                var v = au({
                    dom: N(
                        {
                            tag: 'div',
                            classes: [
                                'tox',
                                'tox-silver-sink',
                                'tox-tinymce-aux',
                            ]
                                .concat(r)
                                .concat(i),
                        },
                        u,
                    ),
                    behaviours: ya([
                        _f.config({
                            useFixed: function() {
                                return h.isDocked(d);
                            },
                        }),
                    ]),
                });
                var a = bm({ dom: { tag: 'div', classes: ['tox-anchorbar'] } });
                var b = vO(
                    v,
                    l,
                    function() {
                        return e
                            .bind(function(n) {
                                return a.getOpt(n);
                            })
                            .getOrDie('Could not find a anchor bar element');
                    },
                    n,
                );
                var c = IA.parts().menubar({
                    dom: { tag: 'div', classes: ['tox-menubar'] },
                    backstage: b,
                    onEscape: function() {
                        l.focus();
                    },
                });
                var s = qb(l);
                var f = IA.parts().toolbar({
                    dom: { tag: 'div', classes: ['tox-toolbar'] },
                    getSink: m,
                    backstage: b,
                    onEscape: function() {
                        l.focus();
                    },
                    split: s,
                    lazyToolbar: function() {
                        return e
                            .bind(function(n) {
                                return IA.getToolbar(n);
                            })
                            .getOrDie('Could not find more toolbar element');
                    },
                    lazyMoreButton: n,
                    lazyHeader: function() {
                        return d().getOrDie('Could not find header element');
                    },
                });
                var y = IA.parts()['multiple-toolbar']({
                    dom: { tag: 'div', classes: ['tox-toolbar-overlord'] },
                    onEscape: function() {},
                    split: s,
                });
                var x = IA.parts().socket({
                    dom: { tag: 'div', classes: ['tox-edit-area'] },
                });
                var w = IA.parts().sidebar({
                    dom: { tag: 'div', classes: ['tox-sidebar'] },
                });
                var S = IA.parts().throbber({
                    dom: { tag: 'div', classes: ['tox-throbber'] },
                    backstage: b,
                });
                var C =
                    l.getParam('statusbar', !0, 'boolean') && !t
                        ? on.some(T_(l, b.shared.providers))
                        : on.none();
                var k = {
                    dom: { tag: 'div', classes: ['tox-sidebar-wrap'] },
                    components: [x, w],
                };
                var O = Yb(l);
                var E = Lb(l);
                var T = zb(l);
                var B = IA.parts().header({
                    dom: { tag: 'div', classes: ['tox-editor-header'] },
                    components: H([
                        T ? [c] : [],
                        O ? [y] : E ? [f] : [],
                        Jb(l) ? [] : [a.asSpec()],
                    ]),
                    sticky: Qb(l),
                    editor: l,
                    getSink: m,
                });
                var D = H([[B], t ? [] : [k]]);
                var A = H([
                    [
                        {
                            dom: {
                                tag: 'div',
                                classes: ['tox-editor-container'],
                            },
                            components: D,
                        },
                    ],
                    t ? [] : C.toArray(),
                    [S],
                ]);
                var _ = $b(l);
                var M = N(
                    N(
                        { role: 'application' },
                        ih.isRtl() ? { dir: 'rtl' } : {},
                    ),
                    _ ? { 'aria-hidden': 'true' } : {},
                );
                var F = au(
                IA.sketch({
                    dom: {
                        tag: 'div',
                        classes: ['tox', 'tox-tinymce']
                            .concat(t ? ['tox-tinymce-inline'] : [])
                            .concat(i)
                            .concat(r),
                        styles: {
                                visibility: 'hidden',
                                ...(_ ? { opacity: '0', border: '0' } : {}),
                            },
                        attributes: M,
                    },
                    components: A,
                    behaviours: ya([
                        dg.config({
                            mode: 'cyclic',
                            selector:
                                '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a',
                        }),
                    ]),
                }),
            );
        (e = on.some(F)),
            l.shortcuts.add('alt+F9', 'focus menubar', function() {
                IA.focusMenubar(F);
            }),
            l.shortcuts.add('alt+F10', 'focus toolbar', function() {
                IA.focusToolbar(F);
            });
        var I = Fb(F);
                var R = Fb(v);
        YD(l, I, R), uy(l);
        function V() {
            let n = GA(JB(l));
                    var t = GA(
                    (function(n) {
                        return $B(n).getOr(Rb(n));
                    })(l),
                );
            return (
                l.inline ||
                    (kr('div', 'width', t) && xr(F.element(), 'width', t),
                    kr('div', 'height', n)
                        ? xr(F.element(), 'height', n)
                        : xr(F.element(), 'height', '200px')),
                n
            );
        }
        return {
            mothership: I,
            uiMothership: R,
            backstage: b,
            renderUI: function() {
                h.setup(l, d),
                    ZA(l, b),
                    dD(l, m, b),
                    (function(o) {
                        let r = o.ui.registry.getAll().sidebars;
                        bn(wn(r), function(t) {
                            function e() {
                                return on
                                    .from(o.queryCommandValue('ToggleSidebar'))
                                    .is(t);
                            }
                            var n = r[t];
                            o.ui.registry.addToggleButton(t, {
                                icon: n.icon,
                                tooltip: n.tooltip,
                                onAction(n) {
                                        o.execCommand('ToggleSidebar', !1, t),
                                            n.setActive(e());
                                    },
                                onSetup(n) {
                                        function t() {
                                            return n.setActive(e());
                                        }
                                        return (
                                            o.on('ToggleSidebar', t),
                                            function() {
                                                o.off('ToggleSidebar', t);
                                            }
                                        );
                                    },
                            });
                        });
                    })(l),
                    (function(e, t, o) {
                        function r(n) {
                            n !== i.get() &&
                                (GB(t(), n, o.providers), i.set(n));
                        }
                        var i = ye(!1);
                                var u = ye(on.none());
                        e.on('ProgressState', function(n) {
                            if ((u.get().each(Kg.clearTimeout), mn(n.time))) {
                                let t = Kg.setEditorTimeout(
                                    e,
                                    function() {
                                        return r(n.state);
                                    },
                                    n.time,
                                );
                                u.set(on.some(t));
                            } else r(n.state), u.set(on.none());
                        });
                    })(l, g, b.shared);
                var n = l.ui.registry.getAll();
                        var t = n.buttons;
                        var e = n.menuItems;
                        var o = n.contextToolbars;
                        var r = n.sidebars;
                        var i = jb(l);
                        var u = {
                        menuItems: e,
                        menus: l.settings.menu
                            ? P(l.settings.menu, function(n) {
                                  return An(n, { items: n.items });
                              })
                            : {},
                        menubar: l.settings.menubar,
                        toolbar: i.getOrThunk(function() {
                            return l.getParam('toolbar', !0);
                        }),
                        buttons: t,
                        sidebar: r,
                    };
                XD(l, o, v, { backstage: b }), k_(l, v);
                var a = l.getElement();
                        var c = V();
                        var s = {
                            mothership: I,
                            uiMothership: R,
                            outerContainer: F,
                        };
                        var f = { targetNode: a, height: c };
                return p.render(l, s, u, b, f);
            },
            getUi() {
                    return {
                        channels: {
                            broadcastAll: R.broadcast,
                            broadcastOn: R.broadcastOn,
                            register: function() {},
                        },
                    };
                },
        };
    };
    let bM = function(n, t) {
        let e = on.from(Lo(n, 'id')).fold(function() {
            var n = Yo('dialog-label');
            return zo(t, 'id', n), n;
        }, l);
        zo(n, 'aria-labelledby', e);
    };
    let yM = nn([
        ct('lazySink'),
        ht('dragBlockClass'),
        Bt('getBounds', Cu),
        St('useTabstopAt', nn(!0)),
        St('eventOrder', {}),
        Is('modalBehaviours', [dg]),
        Ju('onExecute'),
        Qu('onEscape'),
    ]);
    var xM = { sketch: l };
    var wM = nn([
        Cl({
            name: 'draghandle',
            overrides: function(n, t) {
                return {
                    behaviours: ya([
                        S_.config({
                            mode: 'mouse',
                            getTarget(n) {
                                    return ku(n, '[role="dialog"]').getOr(n);
                                },
                            blockerClass: n.dragBlockClass.getOrDie(
                                new Error(
                                    'The drag blocker class was not specified for a dialog with a drag handle: \n' +
                                        JSON.stringify(t, null, 2),
                                ).message,
                            ),
                            getBounds: n.getDragBounds,
                        }),
                    ]),
                };
            },
        }),
        wl({ schema: [ct('dom')], name: 'title' }),
        wl({ factory: xM, schema: [ct('dom')], name: 'close' }),
        wl({ factory: xM, schema: [ct('dom')], name: 'body' }),
        Cl({ factory: xM, schema: [ct('dom')], name: 'footer' }),
        Sl({
            factory: {
                sketch(n, t) {
                        return N(N({}, n), {
                            dom: t.dom,
                            components: t.components,
                        });
                    },
            },
            schema: [
                St('dom', {
                    tag: 'div',
                    styles: {
                        position: 'fixed',
                        left: '0px',
                        top: '0px',
                        right: '0px',
                        bottom: '0px',
                    },
                }),
                St('components', []),
            ],
            name: 'blocker',
        }),
    ]);
    var SM = _l({
        name: 'ModalDialog',
        configFields: yM(),
        partFields: wM(),
        factory: function(o, n, t, r) {
            let a = Yo('alloy.dialog.busy');
                    var c = Yo('alloy.dialog.idle');
                    var s = ya([
                        dg.config({
                            mode: 'special',
                            onTab: function() {
                                return on.some(!0);
                            },
                            onShiftTab: function() {
                                return on.some(!0);
                            },
                        }),
                        bg.config({}),
                    ]);
                    var e = Yo('modal-events');
                    var i = N({ ...o.eventOrder}, {
                    'alloy.system.attached': [e].concat(
                        o.eventOrder['alloy.system.attached'] || [],
                    ),
                });
            return {
                uid: o.uid,
                dom: o.dom,
                components: n,
                apis: {
                    show: function(i) {
                        let n = o.lazySink(i).getOrDie();
                                var u = ye(on.none());
                                var t = r.blocker();
                                var e = n.getSystem().build(
                                N({ ...t}, {
                                    components: t.components.concat([cu(i)]),
                                    behaviours: ya([
                                        bg.config({}),
                                        Jd('dialog-blocker-events', [
                                            yo(Zr(), function() {
                                                dg.focusIn(i);
                                            }),
                                            mo(c, function(n, t) {
                                                jo(i.element(), 'aria-busy') &&
                                                    (Uo(
                                                        i.element(),
                                                        'aria-busy',
                                                    ),
                                                    u.get().each(function(n) {
                                                        return gg.remove(i, n);
                                                    }));
                                            }),
                                            mo(a, function(n, t) {
                                                zo(
                                                    i.element(),
                                                    'aria-busy',
                                                    'true',
                                                );
                                                var e = t.event().getBusySpec();
                                                u.get().each(function(n) {
                                                    gg.remove(i, n);
                                                });
                                                let o = e(i, s);
                                                        var r = n
                                                            .getSystem()
                                                            .build(o);
                                                u.set(on.some(r)),
                                                    gg.append(i, cu(r)),
                                                    r.hasConfigured(dg) &&
                                                        dg.focusIn(r);
                                            }),
                                        ]),
                                    ]),
                                }),
                            );
                        vs(n, e), dg.focusIn(i);
                    },
                    hide(t) {
                            To(t.element()).each(function(n) {
                                t.getSystem()
                                    .getByDom(n)
                                    .each(function(n) {
                                        ys(n);
                                    });
                            });
                        },
                    getBody(n) {
                            return Js(n, o, 'body');
                        },
                    getFooter: function(n) {
                        return Js(n, o, 'footer');
                    },
                    setIdle: function(n) {
                        ro(n, c);
                    },
                    setBusy(n, t) {
                            io(n, a, { getBusySpec: t });
                        },
                },
                eventOrder: i,
                domModification: {
                    attributes: { role: 'dialog', 'aria-modal': 'true' },
                },
                behaviours: Vs(o.modalBehaviours, [
                    gg.config({}),
                    dg.config({
                        mode: 'cyclic',
                        onEnter: o.onExecute,
                        onEscape: o.onEscape,
                        useTabstopAt: o.useTabstopAt,
                    }),
                    Jd(e, [
                        Ri(function(n) {
                            bM(n.element(), Js(n, o, 'title').element()),
                                (function(n, t) {
                                    var e = on
                                        .from(Lo(n, 'id'))
                                        .fold(function() {
                                            var n = Yo('dialog-describe');
                                            return zo(t, 'id', n), n;
                                        }, l);
                                    zo(n, 'aria-describedby', e);
                                })(n.element(), Js(n, o, 'body').element());
                        }),
                    ]),
                ]),
            };
        },
        apis: {
            show(n, t) {
                    n.show(t);
                },
            hide: function(n, t) {
                n.hide(t);
            },
            getBody(n, t) {
                    return n.getBody(t);
                },
            getFooter: function(n, t) {
                return n.getFooter(t);
            },
            setBusy: function(n, t, e) {
                n.setBusy(t, e);
            },
            setIdle(n, t) {
                    n.setIdle(t);
                },
        },
    });
    var CM = [
        ft('type'),
        ft('text'),
        lt('level', ['info', 'warn', 'error', 'success']),
        ft('icon'),
        St('url', ''),
    ];
    let kM = re(CM);
    var OM = [
        ft('type'),
        ft('text'),
        Tt('disabled', !1),
        Tt('primary', !1),
        ce(
            'name',
            'name',
            In(function() {
                return Yo('button-name');
            }),
            ge,
        ),
        yt('icon'),
        Tt('borderless', !1),
    ];
    let EM = re(OM);
    var TM = [ft('type'), ft('name'), ft('label'), Tt('disabled', !1)];
    var BM = re(TM);
    let DM = pe;
    var AM = [ft('type'), ft('name')];
    var _M = AM.concat([yt('label')]);
    let MM = re(_M);
    var FM = ge;
    var IM = re(_M);
    var RM = ge;
    let VM = re(_M);
    var NM = Kn(se);
    var HM = _M.concat([Tt('sandboxed', !0)]);
    var PM = re(HM);
    var zM = ge;
    var LM = _M.concat([
        yt('inputMode'),
        yt('placeholder'),
        Tt('maximized', !1),
        Tt('disabled', !1),
    ]);
    var jM = re(LM);
    var UM = ge;
    let WM = _M.concat([
        gt('items', [ft('text'), ft('value')]),
        kt('size', 1),
        Tt('disabled', !1),
    ]);
    let GM = re(WM);
    let XM = ge;
    var YM = _M.concat([Tt('constrain', !0), Tt('disabled', !1)]);
    var qM = re(YM);
    var KM = re([ft('width'), ft('height')]);
    var JM = _M.concat([
        yt('placeholder'),
        Tt('maximized', !1),
        Tt('disabled', !1),
    ]);
    var $M = re(JM);
    let QM = ge;
    var ZM = _M.concat([
        Et('filetype', 'file', ['image', 'media', 'file']),
        St('disabled', !1),
    ]);
    var nF = re(ZM);
    let tF = re([ft('value'), St('meta', {})]);
    var eF = AM.concat([
        Ot('tag', 'textarea'),
        ft('scriptId'),
        ft('scriptUrl'),
        ((lM = 'settings'), (dM = undefined), Ct(lM, dM, be)),
    ]);
    let oF = AM.concat([Ot('tag', 'textarea'), dt('init')]);
    var rF = Zn(function(n) {
        return tt('customeditor.old', qn(oF), n).orThunk(function() {
            return tt('customeditor.new', qn(eF), n);
        });
    });
    var iF = ge;
    var uF = [
        ft('type'),
        ft('html'),
        Et('presets', 'presentation', ['presentation', 'document']),
    ];
    var aF = re(uF);
    let cF = _M.concat([st('currentState', re([ct('blob'), ft('url')]))]);
    var sF = re(cF);
    var fF = _M.concat([St('columns', 'auto')]);
    let lF = re(fF);
    var dF = ((mM = [ft('value'), ft('text'), ft('icon')]), ue(mM));
    var mF = [ft('type'), pt('header', ge), pt('cells', Kn(ge))];
    var gF = re(mF);
    var pF = fe(function() {
        return rt('type', {
            alertbanner: kM,
            bar: re(
                (function(n) {
                    return [ft('type'), n];
                })(D_('bar')),
            ),
            button: EM,
            checkbox: BM,
            colorinput: MM,
            colorpicker: IM,
            dropzone: VM,
            grid: re(B_(D_('grid'))),
            iframe: PM,
            input: jM,
            selectbox: GM,
            sizeinput: qM,
            textarea: $M,
            urlinput: nF,
            customeditor: rF,
            htmlpanel: aF,
            imagetools: sF,
            collection: lF,
            label: re(
                (function(n) {
                    return [ft('type'), ft('label'), n];
                })(D_('label')),
            ),
            table: gF,
            panel: vF,
        });
    });
    var hF = [ft('type'), St('classes', []), pt('items', pF)];
    var vF = re(hF);
    var bF = [
        ce(
            'name',
            'name',
            In(function() {
                return Yo('tab-name');
            }),
            ge,
        ),
        ft('title'),
        pt('items', pF),
    ];
    var yF = [ft('type'), gt('tabs', bF)];
    var xF = re(yF);
    let wF = re([ft('type'), ft('name'), Tt('active', !1)].concat(Gp));
    var SF = pe;
    var CF = [
        ce(
            'name',
            'name',
            In(function() {
                return Yo('button-name');
            }),
            ge,
        ),
        yt('icon'),
        Et('align', 'end', ['start', 'end']),
        Tt('primary', !1),
        Tt('disabled', !1),
    ];
    let kF = g(CF, [ft('text')]);
    let OF = g([lt('type', ['submit', 'cancel', 'custom'])], kF);
    var EF = g(
        [
            lt('type', ['menu']),
            yt('text'),
            yt('tooltip'),
            yt('icon'),
            pt('items', wF),
            Bt('onSetup', function() {
                return Z;
            }),
        ],
        CF,
    );
    let TF = kF;
    var BF = it('type', { submit: OF, cancel: OF, custom: OF, menu: EF });
    var DF = re([
        ft('title'),
        st('body', rt('type', { panel: vF, tabpanel: xF })),
        Ot('size', 'normal'),
        pt('buttons', BF),
        St('initialData', {}),
        Bt('onAction', Z),
        Bt('onChange', Z),
        Bt('onSubmit', Z),
        Bt('onClose', Z),
        Bt('onCancel', Z),
        St('onTabChange', Z),
    ]);
    var AF = function(n) {
        return sn(n) ? [n].concat(B(R(n), AF)) : fn(n) ? B(n, AF) : [];
    };
    var _F = {
        checkbox: DM,
        colorinput: FM,
        colorpicker: RM,
        dropzone: NM,
        input: UM,
        iframe: zM,
        sizeinput: KM,
        selectbox: XM,
        size: KM,
        textarea: QM,
        urlinput: tF,
        customeditor: iF,
        collection: dF,
        togglemenuitem: SF,
    };
    let MF = re(g([lt('type', ['cancel', 'custom'])], TF));
    var FF = re([
        ft('title'),
        ft('url'),
        bt('height'),
        bt('width'),
        ((gM = 'buttons'), (pM = MF), vt(gM, Kn(pM))),
        Bt('onAction', Z),
        Bt('onCancel', Z),
        Bt('onClose', Z),
        Bt('onMessage', Z),
    ]);
    let IF = {
        open: function(n, t) {
            var e = M_(t);
            return n(e.internalDialog, e.initialData, e.dataValidator);
        },
        openUrl(n, t) {
                return n(
                    et(
                        (function(n) {
                            return tt('dialog', FF, n);
                        })(t),
                    ),
                );
            },
        redial(n) {
                return M_(n);
            },
    };
    let RF = Al({
        name: 'TabButton',
        configFields: [
            St('uid', undefined),
            ct('value'),
            ce(
                'dom',
                'dom',
                Rn(function(n) {
                    return {
                        attributes: {
                            role: 'tab',
                            id: Yo('aria'),
                            'aria-selected': 'false',
                        },
                    };
                }),
                de(),
            ),
            ht('action'),
            St('domModification', {}),
            Is('tabButtonBehaviours', [bg, dg, nl]),
            ct('view'),
        ],
        factory: function(n, t) {
            return {
                uid: n.uid,
                dom: n.dom,
                components: n.components,
                events: im(n.action),
                behaviours: Vs(n.tabButtonBehaviours, [
                    bg.config({}),
                    dg.config({
                        mode: 'execution',
                        useSpace: !0,
                        useEnter: !0,
                    }),
                    nl.config({
                        store: { mode: 'memory', initialValue: n.value },
                    }),
                ]),
                domModification: n.domModification,
            };
        },
    });
    let VF = nn([
        ct('tabs'),
        ct('dom'),
        St('clickToDismiss', !1),
        Is('tabbarBehaviours', [cd, dg]),
        Yu(['tabClass', 'selectedClass']),
    ]);
    let NF = kl({
        factory: RF,
        name: 'tabs',
        unit: 'tab',
        overrides: function(o, n) {
            function r(n, t) {
                cd.dehighlight(n, t), io(n, _i(), { tabbar: n, button: t });
            }
            function i(n, t) {
                cd.highlight(n, t), io(n, Ai(), { tabbar: n, button: t });
            }
            return {
                action: function(n) {
                    let t = n
                            .getSystem()
                            .getByUid(o.uid)
                            .getOrDie();
                            var e = cd.isHighlighted(t, n);
                    (e && o.clickToDismiss ? r : e ? Z : i)(t, n);
                },
                domModification: { classes: [o.markers.tabClass] },
            };
        },
    });
    var HF = nn([NF]);
    var PF = _l({
        name: 'Tabbar',
        configFields: VF(),
        partFields: HF(),
        factory: function(n, t, e, o) {
            return {
                uid: n.uid,
                dom: n.dom,
                components: t,
                'debug.sketcher': 'Tabbar',
                domModification: { attributes: { role: 'tablist' } },
                behaviours: Vs(n.tabbarBehaviours, [
                    cd.config({
                        highlightClass: n.markers.selectedClass,
                        itemClass: n.markers.tabClass,
                        onHighlight: function(n, t) {
                            zo(t.element(), 'aria-selected', 'true');
                        },
                        onDehighlight(n, t) {
                                zo(t.element(), 'aria-selected', 'false');
                            },
                    }),
                    dg.config({
                        mode: 'flow',
                        getInitial(n) {
                                return cd.getHighlighted(n).map(function(n) {
                                    return n.element();
                                });
                            },
                        selector: `.${  n.markers.tabClass}`,
                        executeOnMove: !0,
                    }),
                ]),
            };
        },
    });
    var zF = Al({
        name: 'Tabview',
        configFields: [Is('tabviewBehaviours', [gg])],
        factory: function(n, t) {
            return {
                uid: n.uid,
                dom: n.dom,
                behaviours: Vs(n.tabviewBehaviours, [gg.config({})]),
                domModification: { attributes: { role: 'tabpanel' } },
            };
        },
    });
    var LF = nn([
        St('selectFirst', !0),
        Ku('onChangeTab'),
        Ku('onDismissTab'),
        St('tabs', []),
        Is('tabSectionBehaviours', []),
    ]);
    let jF = wl({
        factory: PF,
        schema: [
            ct('dom'),
            mt('markers', [ct('tabClass'), ct('selectedClass')]),
        ],
        name: 'tabbar',
        defaults: function(n) {
            return { tabs: n.tabs };
        },
    });
    let UF = wl({ factory: zF, name: 'tabview' });
    let WF = nn([jF, UF]);
    var GF = _l({
        name: 'TabSection',
        configFields: LF(),
        partFields: WF(),
        factory(r, n, t, e) {
                function o(n, t) {
                    Ks(n, r, 'tabbar').each(function(n) {
                        t(n).each(uo);
                    });
                }
                return {
                    uid: r.uid,
                    dom: r.dom,
                    components: n,
                    behaviours: Rs(r.tabSectionBehaviours),
                    events: so(
                        H([
                            r.selectFirst
                                ? [
                                      Ri(function(n, t) {
                                          o(n, cd.getFirst);
                                      }),
                                  ]
                                : [],
                            [
                                mo(Ai(), function(n, t) {
                                    !(function(o) {
                                        var t = nl.getValue(o);
                                        Ks(o, r, 'tabview').each(function(e) {
                                            E(r.tabs, function(n) {
                                                return n.value === t;
                                            }).each(function(n) {
                                                var t = n.view();
                                                zo(
                                                    e.element(),
                                                    'aria-labelledby',
                                                    Lo(o.element(), 'id'),
                                                ),
                                                    gg.set(e, t),
                                                    r.onChangeTab(e, o, t);
                                            });
                                        });
                                    })(t.event().button());
                                }),
                                mo(_i(), function(n, t) {
                                    var e = t.event().button();
                                    r.onDismissTab(n, e);
                                }),
                            ],
                        ]),
                    ),
                    apis: {
                        getViewItems: function(n) {
                            return Ks(n, r, 'tabview')
                                .map(function(n) {
                                    return gg.contents(n);
                                })
                                .getOr([]);
                        },
                        showTab: function(n, e) {
                            o(n, function(t) {
                                var n = cd.getCandidates(t);
                                return E(n, function(n) {
                                    return nl.getValue(n) === e;
                                }).filter(function(n) {
                                    return !cd.isHighlighted(t, n);
                                });
                            });
                        },
                    },
                };
            },
        apis: {
            getViewItems(n, t) {
                    return n.getViewItems(t);
                },
            showTab(n, t, e) {
                    n.showTab(t, e);
                },
        },
    });
    var XF = 'send-data-to-section';
    var YF = 'send-data-to-view';
    var qF = Yo('update-dialog');
    var KF = Yo('update-title');
    var JF = Yo('update-body');
    var $F = Yo('update-footer');
    var QF = Yo('body-send-message');
    var ZF = function(i, n) {
        function t(n, r) {
            return mo(n, function(e, o) {
                u(e, function(n, t) {
                    r(i(), n, o.event(), e);
                });
            });
        }
        var u = function(t, e) {
            VT.getState(t)
                .get()
                .each(function(n) {
                    e(n, t);
                });
        };
        return g(z_(t, n), [
            t(fy, function(n, t, e) {
                t.onAction(n, { name: e.name() });
            }),
        ]);
    };
    var nI = function(i, n) {
        function t(n, r) {
            return mo(n, function(e, o) {
                u(e, function(n, t) {
                    r(i(), n, o.event(), e);
                });
            });
        }
        var u = function(t, e) {
            VT.getState(t)
                .get()
                .each(function(n) {
                    e(n.internalDialog, t);
                });
        };
        return g(z_(t, n), [
            t(ly, function(n, t) {
                return t.onSubmit(n);
            }),
            t(ay, function(n, t, e) {
                t.onChange(n, { name: e.name() });
            }),
            t(fy, function(n, t, e, o) {
                function r() {
                    return dg.focusIn(o);
                }
                var i = Ca();
                t.onAction(n, { name: e.name(), value: e.value() }),
                    Ca().fold(
                        function() {
                            r();
                        },
                        function(n) {
                            !qe(o.element(), n) || jo(n, 'disabled')
                                ? r()
                                : qe(n, i.getOrNull()) &&
                                  jo(i.getOrDie(), 'disabled') &&
                                  r();
                        },
                    );
            }),
            t(gy, function(n, t, e) {
                t.onTabChange(n, {
                    newTabName: e.name(),
                    oldTabName: e.oldName(),
                });
            }),
            Vi(function(n) {
                var t = i();
                nl.setValue(n, t.getData());
            }),
        ]);
    };
    var tI = ph.deviceType.isTouch();
    var eI = tinymce.util.Tools.resolve('tinymce.util.URI');
    var oI = [
        'insertContent',
        'setContent',
        'execCommand',
        'close',
        'block',
        'unblock',
    ];
    var rI = function(n) {
        let l = n.backstage;
        var d = n.editor;
        var m = Qb(d);
        var e = (function(c) {
            var s = c.backstage.shared;
            return {
                open: function(n, t) {
                    function e() {
                        SM.hide(u), t();
                    }
                    var o = bm(
                            qC(
                                {
                                    name: 'close-alert',
                                    text: 'OK',
                                    primary: !0,
                                    align: 'end',
                                    disabled: !1,
                                    icon: on.none(),
                                },
                                'cancel',
                                c.backstage,
                            ),
                        );
                                var r = q_();
                                var i = Y_(e, s.providers);
                                var u = au(
                            Q_({
                                lazySink: function() {
                                    return s.getSink();
                                },
                                header: X_(r, i),
                                body: K_(n, s.providers),
                                footer: on.some(J_($_([], [o.asSpec()]))),
                                onEscape: e,
                                extraClasses: ['tox-alert-dialog'],
                                extraBehaviours: [],
                                extraStyles: {},
                                dialogEvents: [mo(sy, e)],
                                eventOrder: {},
                            }),
                        );
                    SM.show(u);
                    var a = o.get(u);
                    bg.focus(a);
                },
            };
        })(n);
        let o = (function(s) {
            let f = s.backstage.shared;
            return {
                open(n, t) {
                            function e(n) {
                                SM.hide(a), t(n);
                            }
                            var o = bm(
                                    qC(
                                        {
                                            name: 'yes',
                                            text: 'Yes',
                                            primary: !0,
                                            align: 'end',
                                            disabled: !1,
                                            icon: on.none(),
                                        },
                                        'submit',
                                        s.backstage,
                                    ),
                                ),
                                r = qC(
                                    {
                                        name: 'no',
                                        text: 'No',
                                        primary: !0,
                                        align: 'end',
                                        disabled: !1,
                                        icon: on.none(),
                                    },
                                    'cancel',
                                    s.backstage,
                                ),
                                i = q_(),
                                u = Y_(function() {
                                    return e(!1);
                                }, f.providers),
                                a = au(
                                    Q_({
                                        lazySink: function() {
                                            return f.getSink();
                                        },
                                        header: X_(i, u),
                                        body: K_(n, f.providers),
                                        footer: on.some(
                                            J_($_([], [r, o.asSpec()])),
                                        ),
                                        onEscape: function() {
                                            return e(!1);
                                        },
                                        extraClasses: ['tox-confirm-dialog'],
                                        extraBehaviours: [],
                                        extraStyles: {},
                                        dialogEvents: [
                                            mo(sy, function() {
                                                return e(!1);
                                            }),
                                            mo(ly, function() {
                                                return e(!0);
                                            }),
                                        ],
                                        eventOrder: {},
                                    }),
                                );
                            SM.show(a);
                            var c = o.get(a);
                            bg.focus(c);
                        },
            };
        })(n);
        let r = function(n, e) {
            return IF.openUrl(function(n) {
                var t = fM(
                    n,
                    {
                        closeWindow() {
                                    SM.hide(t.dialog), e(t.instanceApi);
                                },
                    },
                    d,
                    l,
                );
                return SM.show(t.dialog), t.instanceApi;
            }, n);
        };
        var i = function(n, i) {
            return IF.open(function(n, t, e) {
                var o = t;
                            var r = aM(
                        {
                            dataValidator: e,
                            initialData: o,
                            internalDialog: n,
                        },
                        {
                            redial: IF.redial,
                            closeWindow: function() {
                                SM.hide(r.dialog), i(r.instanceApi);
                            },
                        },
                        l,
                    );
                return (
                    SM.show(r.dialog), r.instanceApi.setData(o), r.instanceApi
                );
            }, n);
        };
        var u = function(n, c, s, f) {
            return IF.open(function(n, t, e) {
                function o() {
                    return i.on(function(n) {
                        sA.refresh(n);
                    });
                }
                var r = (function(n, t) {
                    return et(tt('data', t, n));
                })(t, e);
                var i = (function() {
                    var t = ye(on.none());
                    return {
                        clear() {
                                        t.set(on.none());
                                    },
                        set: function(n) {
                            t.set(on.some(n));
                        },
                        isSet() {
                                        return t.get().isSome();
                                    },
                        on(n) {
                                        t.get().each(n);
                                    },
                    };
                })();
                var u = cM(
                    {
                        dataValidator: e,
                        initialData: r,
                        internalDialog: n,
                    },
                    {
                        redial: IF.redial,
                        closeWindow: function() {
                            i.on(Ug.hide),
                                d.off('ResizeEditor', o),
                                i.clear(),
                                s(u.instanceApi);
                        },
                    },
                    l,
                    f,
                );
                var a = au(
                    Ug.sketch({
                        lazySink: l.shared.getSink,
                        dom: { tag: 'div', classes: [] },
                        fireDismissalEventInstead: {},
                        inlineBehaviours: ya(
                            g(
                                [
                                    Jd('window-manager-inline-events', [
                                        mo(Ei(), function(n, t) {
                                            ro(u.dialog, sy);
                                        }),
                                    ]),
                                ],
                                (function(n, t) {
                                    return t
                                        ? []
                                        : [
                                              sA.config({
                                                  contextual: {
                                                      lazyContext() {
                                                          return on.some(
                                                              wu(
                                                                  we.fromDom(
                                                                      n.getContentAreaContainer(),
                                                                  ),
                                                              ),
                                                          );
                                                      },
                                                      fadeInClass:
                                                          'tox-dialog-dock-fadein',
                                                      fadeOutClass:
                                                          'tox-dialog-dock-fadeout',
                                                      transitionClass:
                                                          'tox-dialog-dock-transition',
                                                  },
                                                  leftAttr: 'data-dock-left',
                                                  topAttr: 'data-dock-top',
                                                  positionAttr: 'data-dock-pos',
                                                  modes: ['top'],
                                              }),
                                          ];
                                })(d, m),
                            ),
                        ),
                    }),
                );
                return (
                    i.set(a),
                    Ug.showWithin(a, c, cu(u.dialog), on.some(Lr())),
                    m || (sA.refresh(a), d.on('ResizeEditor', o)),
                    u.instanceApi.setData(r),
                    dg.focusIn(u.dialog),
                    u.instanceApi
                );
            }, n);
        };
        return {
            open(n, t, e) {
                return t !== undefined && t.inline === 'toolbar'
                    ? u(n, l.shared.anchors.toolbar(), e, t.ariaAttrs)
                    : t !== undefined && t.inline === 'cursor'
                    ? u(n, l.shared.anchors.cursor(), e, t.ariaAttrs)
                    : i(n, e);
            },
            openUrl(n, t) {
                return r(n, t);
            },
            alert(n, t) {
                e.open(n, function() {
                    t();
                });
            },
            close(n) {
                n.close();
            },
            confirm(n, t) {
                o.open(n, function(n) {
                    t(n);
                });
            },
        };
    };
    !(function gI() {
        n.add('silver', function(n) {
            const t = vM(n);
            var e = t.uiMothership;
            var o = t.backstage;
            var r = t.renderUI;
            let i = t.getUi;
            mb(n, o.shared);
            const u = rI({ editor: n, backstage: o });
            return {
                renderUI: r,
                getWindowManagerImpl: nn(u),
                getNotificationManagerImpl() {
                    return Jg(0, { backstage: o }, e);
                },
                ui: i(),
            };
        });
    })();
})(window);
